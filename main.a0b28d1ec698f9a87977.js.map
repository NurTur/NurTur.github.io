{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/img/logo.svg","webpack:///./src/scripts/modules/dynamic-element/DynamicInsertionElements.ts","webpack:///./src/scripts/helpers/index.ts","webpack:///./src/scripts/modules/carousel/configs.ts","webpack:///./src/scripts/modules/carousel/Carousel.ts","webpack:///./src/scripts/decorators/method/debounce.ts","webpack:///./src/scripts/modules/visibility/Visibility.ts","webpack:///./src/scripts/modules/animation/model.ts","webpack:///./src/scripts/modules/dialog/model.ts","webpack:///./src/scripts/modules/filter-list/FilterList.ts","webpack:///./src/scripts/modules/animation/Animation.ts","webpack:///./src/scripts/modules/dialog/DialogOpening.ts","webpack:///./src/scripts/modules/event/Event.ts","webpack:///./src/scripts/modules/scroll/Scrollable.ts","webpack:///./src/scripts/modules/dialog/Dialog.ts","webpack:///./src/scripts/modules/modal/Modal.ts","webpack:///./src/scripts/modules/city/CitySelection.ts","webpack:///./src/scripts/modules/env/model.ts","webpack:///./src/scripts/modules/collapse/model.ts","webpack:///./src/scripts/modules/dropdown/model.ts","webpack:///./src/scripts/modules/cookie/Cookie.ts","webpack:///./src/scripts/modules/env/Environment.ts","webpack:///./src/scripts/modules/city/ConfirmCity.ts","webpack:///./src/scripts/modules/collapse/Collapse.ts","webpack:///./src/scripts/modules/collapse/CollapseAnimated.ts","webpack:///./src/scripts/modules/collapse/CollapseFactory.ts","webpack:///./src/scripts/modules/collapse/CollapseAutoActivation.ts","webpack:///./src/scripts/modules/collapse/CollapseGroup.ts","webpack:///./src/scripts/modules/collapse/CollapseGroupActivation.ts","webpack:///./src/scripts/modules/global-click/GlobalClick.ts","webpack:///./src/scripts/modules/dropdown/Dropdown.ts","webpack:///./src/scripts/modules/handle-empty-content/HandleEmptyContent.ts","webpack:///./src/scripts/modules/handle-empty-content/HandleEmptyContentRefresh.ts","webpack:///./src/scripts/modules/handle-empty-content/HandleEmptyContentVisibility.ts","webpack:///./src/scripts/modules/mask/Mask.ts","webpack:///./src/scripts/modules/scroll/SmoothScroll.ts","webpack:///./src/scripts/modules/platform/Platform.ts","webpack:///./src/components/checklist/Checklist.ts","webpack:///./src/scripts/modules/modal/model.ts","webpack:///./src/scripts/modules/select/SelectViewModalAdapter.ts","webpack:///./src/scripts/modules/select/Select.ts","webpack:///./src/scripts/modules/tab/Tab.ts","webpack:///./src/scripts/modules/textarea/TextareaAutoHeight.ts","webpack:///./src/scripts/modules/toast/model.ts","webpack:///./src/scripts/modules/toggle/ToggleGridView.ts","webpack:///./src/scripts/modules/cookie/model.ts","webpack:///./src/scripts/modules/csrf-token/model.ts","webpack:///./src/components/circle-timer/CircleTimer.ts","webpack:///./src/scripts/modules/toast/Toast.ts","webpack:///./src/scripts/modules/toggle/ToggleChange.ts","webpack:///./src/scripts/modules/toggle/ToggleConnectedArea.ts","webpack:///./src/scripts/modules/auto-activation/AutoActivation.ts","webpack:///./src/scripts/modules/backend-data/BackendData.ts","webpack:///./src/scripts/modules/csrf-token/CSRFToken.ts","webpack:///./src/scripts/modules/http-request/HttpRequest.ts","webpack:///./src/scripts/modules/visibility/model.ts","webpack:///./src/scripts/modules/http-request/model.ts","webpack:///./src/scripts/modules/request-replacement/model.ts","webpack:///./src/components/btn/model.ts","webpack:///./src/scripts/modules/request-replacement/RequestReplacementDataAttr.ts","webpack:///./src/scripts/modules/request-replacement/RequestReplacement.ts","webpack:///./src/scripts/modules/analytics/AnalyticsClickOnProductCard.ts","webpack:///./src/scripts/modules/analytics/AnalyticsAddToCartInProductCostLine.ts","webpack:///./src/scripts/modules/analytics/AnalyticsAddToCartOnProductCard.ts","webpack:///./src/scripts/modules/index.ts","webpack:///./src/scripts/modules/element-media-queries/ElementMediaQueries.ts","webpack:///./src/scripts/modules/toggle/ToggleVisibility.ts","webpack:///./src/scripts/modules/toggle/ToggleOnceActive.ts","webpack:///./src/scripts/modules/toggle/ToggleAnyKind.ts","webpack:///./src/scripts/modules/toggle/ToggleSetClass.ts","webpack:///./src/scripts/modules/toggle/ToggleVisibilityReverse.ts","webpack:///./src/scripts/modules/carousel/CarouselAutoActivation.ts","webpack:///./src/scripts/modules/modal/ModalAutoActivation.ts","webpack:///./src/scripts/modules/toast/ToastCallingStatic.ts","webpack:///./src/scripts/modules/dropdown/DropdownAutoActivation.ts","webpack:///./src/scripts/modules/select/SelectAutoActivation.ts","webpack:///./src/scripts/modules/filter-list/FilterListAutoActivation.ts","webpack:///./src/scripts/modules/handle-empty-content/HandleEmptyContentRefreshAutoActivation.ts","webpack:///./src/scripts/modules/handle-empty-content/HandleEmptyContentVisibilityAutoActivation.ts","webpack:///./src/scripts/modules/lazy-load-image/LazyLoadImage.ts","webpack:///./src/scripts/modules/scroll/SmoothScrollAutoActivation.ts","webpack:///./src/scripts/modules/toggle/ToggleConnectedAreaAutoActivated.ts","webpack:///./src/scripts/modules/textarea/TextareaAutoHeightAutoActivation.ts","webpack:///./src/scripts/modules/tab/TabAutoActivation.ts","webpack:///./src/scripts/modules/request-replacement/RequestReplacementDataAttrAutoActivation.ts","webpack:///./src/scripts/modules/analytics/AnalyticsClickOnProductCardAutoActivation.ts","webpack:///./src/scripts/modules/analytics/AnalyticsAddToCartInProductCostLineAutoActivation.ts","webpack:///./src/scripts/modules/analytics/AnalyticsAddToCartOnProductCardAutoActivation.ts","webpack:///./src/scripts/modules/web-component/WebComponentLite.ts","webpack:///./src/components/example/ExampleComponent.ts","webpack:///./src/components/steps/StepsComponent.ts","webpack:///./src/components/steps/StepComponent.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-option-controls/model.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-option-states/model.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-store/model.ts","webpack:///./src/components/product-basket-bundler/model.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-option-controls/ProductBasketBundlerOptionControls.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-option-states/ProductBasketBundlerOptionStates.ts","webpack:///./src/scripts/decorators/property/metadata.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-payment-method/model.ts","webpack:///./src/components/product-basket-bundler/product-basket-bundler-store/ProductBasketBundlerStore.ts","webpack:///./src/components/loader/model.ts","webpack:///./src/components/product-basket-bundler/ProductBasketBundlerComponent.ts","webpack:///./src/scripts/modules/formatter/model.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent.ts","webpack:///./src/scripts/modules/formatter/MoneyFormatter.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-payment-method/ProductBundlerOptionPaymentMethodComponent.ts","webpack:///./src/components/phone-validation-for-contract-tariff/model.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-contract-tariff/model.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-contract-tariff/ProductBundlerOptionContractTariffComponent.ts","webpack:///./src/components/tariff-card/model.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-insurance/ProductBundlerOptionInsuranceComponent.ts","webpack:///./src/components/product-basket-bundler/product-bundler-option-accessory/ProductBundlerOptionAccessoryComponent.ts","webpack:///./src/components/product-basket-bundler/tariff-model.ts","webpack:///./src/scripts/modules/formatter/TariffFormatter.ts","webpack:///./src/components/product-basket-bundler/ProductOptionTariffComponent.ts","webpack:///./src/components/btn/BtnComponent.ts","webpack:///./src/components/toggle-card/model.ts","webpack:///./src/components/toggle-card/ToggleCardComponent.ts","webpack:///./src/components/loader/LoaderComponent.ts","webpack:///./src/components/tariff-card/TariffCardComponent.ts","webpack:///./src/components/operator-card/model.ts","webpack:///./src/components/operator-card/OperatorCardComponent.ts","webpack:///./src/components/term-card/model.ts","webpack:///./src/components/term-card/TermCardComponent.ts","webpack:///./src/components/accessory-card/AccessoryCardComponent.ts","webpack:///./src/scripts/modules/resize/Resize.ts","webpack:///./src/scripts/scenario/StickyCostLine.ts","webpack:///./src/components/product-cost-line/ProductCostLineComponent.ts","webpack:///./src/components/modal/ModalComponent.ts","webpack:///./src/components/slide-menu/model.ts","webpack:///./src/components/slide-menu/SlideMenu.ts","webpack:///./src/components/slide-menu/index.ts","webpack:///./src/components/slide-menu/SlideMenuAutoActivation.ts","webpack:///./src/components/form-item/FormItemComponent.ts","webpack:///./src/components/input/InputComponent.ts","webpack:///./src/components/code-input/CodeInputComponent.ts","webpack:///./src/scripts/modules/timer/Timer.ts","webpack:///./src/components/timer/TimerTextComponent.ts","webpack:///./src/components/validate-sms-code/model.ts","webpack:///./src/components/validate-sms-code/ValidateSMSCodeComponent.ts","webpack:///./src/scripts/models/Tariff.ts","webpack:///./src/components/phone-validation-for-contract-tariff/PhoneValidationForContractTariffComponent.ts","webpack:///./src/components/network-error/NetworkErrorComponent.ts","webpack:///./src/components/alert/model.ts","webpack:///./src/scripts/models/Status.ts","webpack:///./src/components/select-tariff/SelectTariffComponent.ts","webpack:///./src/components/checkbox/CheckboxComponent.ts","webpack:///./src/components/alert/AlertComponent.ts","webpack:///./src/scripts/modules/image-viewer/ImageViewer.ts","webpack:///./src/components/image-viewer/index.ts","webpack:///./src/components/validate-phone-number-and-sms/model.ts","webpack:///./src/components/validate-phone-number-and-sms/ValidatePhoneNumberAndSmsComponent.ts","webpack:///./src/components/validate-phone-number-and-sms/ValidatePhoneNumberWithConfirmationAndSmsComponent.ts","webpack:///./src/components/enter-phone-number/EnterPhoneNumberComponent.ts","webpack:///./src/components/enter-phone-number/model.ts","webpack:///./src/components/enter-phone-number/EnterPhoneNumberWithConfirmationComponent.ts","webpack:///./src/components/enter-phone-number/EnterPhoneNumberWithoutButton.ts","webpack:///./src/components/enter-sms-code/EnterSMSCodeComponent.ts","webpack:///./src/components/contract-tariffs/contract-tariffs-validate-phone-to-connect-tariff/model.ts","webpack:///./src/components/contract-tariffs/contract-tariffs-validate-phone-to-connect-tariff/ContractTariffsValidatePhoneToConnectTariffComponent.ts","webpack:///./src/components/contract-tariffs/contract-tariffs-basket-bundler/model.ts","webpack:///./src/components/contract-tariffs/contract-tariffs-basket-bundler/ContractTariffsBasketBundlerComponent.ts","webpack:///./src/components/up-button/UpButtonComponent.ts","webpack:///./src/components/schedule/model.ts","webpack:///./src/components/schedule/ScheduleComponent.ts","webpack:///./src/scripts/modules/cart/ProductCartHandler.ts","webpack:///./src/components/badge/Badge.ts","webpack:///./src/scripts/modules/cart/CartQuantity.ts","webpack:///./src/scripts/modules/btn/Btn.ts","webpack:///./src/components/cart-preview/CartPreviewComponent.ts","webpack:///./src/components/range-count/RangeCountComponent.ts","webpack:///./src/scripts/models/Cart.ts","webpack:///./src/scripts/modules/cart/model.ts","webpack:///./src/scripts/modules/cart/CartCostLine.ts","webpack:///./src/components/edit-products-cart/EditProductsCartComponent.ts","webpack:///./src/components/edit-products-cart/item/EditProductsCartItemComponent.ts","webpack:///./src/components/edit-products-cart/carousel-accessories/EditProductsCartCarouselAccessoriesComponent.ts","webpack:///./src/components/edit-products-cart/accessory-card/EditProductsCartAccessoryCardComponent.ts","webpack:///./src/scripts/models/Loan.ts","webpack:///./src/components/payment-method/PaymentMethodComponent.ts","webpack:///./src/components/payment-method/loan/PaymentMethodLoanComponent.ts","webpack:///./src/scripts/models/PaymentMethod.ts","webpack:///./src/components/payment-method/select/PaymentMethodSelectComponent.ts","webpack:///./src/scripts/models/Insurance.ts","webpack:///./src/components/select-insurance/SelectInsuranceComponent.ts","webpack:///./src/components/select-insurance/device/InsuranceDeviceTypeComponent.ts","webpack:///./src/components/select-insurance/product-card/InsuranceDeviceProductCardComponent.ts","webpack:///./src/components/select-insurance/product-carousel/InsuranceDeviceProductCarouselComponent.ts","webpack:///./src/components/dialog/DialogComponent.ts","webpack:///./src/components/confirm-dialog/model.ts","webpack:///./src/components/confirm-dialog/ConfirmDialogComponent.ts","webpack:///./src/scripts/modules/btn/model.ts","webpack:///./src/scripts/modules/keyboard/model.ts","webpack:///./src/scripts/modules/screen/model.ts","webpack:///./src/scripts/variables.ts","webpack:///./src/scripts/modules/dynamic-element/DynamicActivation.ts","webpack:///./src/scripts/modules/btn/BtnSwitch.ts","webpack:///./src/scripts/scenario/AccentCollapseRemoteWithBtnSwitch.ts","webpack:///./src/scripts/modules/screen/ScreenOrientationService.ts","webpack:///./src/scripts/modules/keyboard/KeyboardState.ts","webpack:///./src/scripts/modules/form/model.ts","webpack:///./src/scripts/scenario/PostMessageHandling.ts","webpack:///./src/scripts/models/Wishlist.ts","webpack:///./src/scripts/scenario/CollapseRemoteWithBtnSwitch.ts","webpack:///./src/scripts/modules/form/Validator.ts","webpack:///./src/components/menu-btn/MenuBtn.ts","webpack:///./src/scripts/scenario/StickyFilters.ts","webpack:///./src/scripts/scenario/StickyProductPicture.ts","webpack:///./src/components/loader/Loader.ts","webpack:///./src/scripts/modules/loader/GlobalLoader.ts","webpack:///./src/scripts/modules/form/FormControlsChange.ts","webpack:///./src/scripts/scenario/LoanCalculator.ts","webpack:///./src/scripts/scenario/index.ts","webpack:///./src/scripts/scenario/AndroidActiveKeyboardHandler.ts","webpack:///./src/scripts/scenario/Wishlist.ts","webpack:///./src/scripts/scenario/FormSubmit.ts","webpack:///./src/scripts/scenario/AccentCollapseRemoteWithBtnSwitchFactory.ts","webpack:///./src/scripts/scenario/CollapseRemoteWithBtnSwitchFactory.ts","webpack:///./src/scripts/scenario/ClearInput.ts","webpack:///./src/scripts/scenario/SideNav.ts","webpack:///./src/scripts/scenario/ApplyFilters.ts","webpack:///./src/scripts/scenario/FullHeightIframe.ts","webpack:///./src/scripts/scenario/IntervalReloadPage.ts","webpack:///./src/scripts/scenario/EmitPostMessageFromIframe.ts","webpack:///./src/scripts/scenario/OpenSelectCity.ts","webpack:///./src/scripts/scenario/UpdateScheduleFromSelect.ts","webpack:///./src/scripts/scenario/ModalFilters.ts","webpack:///./src/scripts/scenario/AddToCart.ts","webpack:///./src/scripts/scenario/CartPreviewDisplay.ts","webpack:///./src/scripts/scenario/ApplyFiltersRequestReplacement.ts","webpack:///./src/scripts/scenario/UpdateCartPaymentMethodOnItemChange.ts","webpack:///./src/scripts/scenario/UpdateBtnCartOnDeviceStep.ts","webpack:///./src/scripts/scenario/UpdateBtnCartOnTariffStep.ts","webpack:///./src/scripts/scenario/UpdateCartCostOnTariffStep.ts","webpack:///./src/scripts/scenario/UpdateBtnCartOnInsuranceStep.ts","webpack:///./src/scripts/scenario/UpdateCartCostOnInsuranceStep.ts","webpack:///./src/scripts/scenario/CheckoutAvailableBtnNextWhenSelectTariff.ts","webpack:///./src/scripts/scenario/CartValidateForUnavailableProducts.ts","webpack:///./src/scripts/scenario/HiddenLinks.ts","webpack:///./src/scripts/modules/base64/Base64.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","DynamicInsertionElements","mutationObserverListener","events","forEach","event","addedNodes","nodeModules","this","dynamicInsertHandler","mutationObserver","MutationObserver","observe","document","body","childList","characterData","subtree","getIndexElement","container","element","children","indexOf","isDefinitionElementEvent","selector","Boolean","getDefinitionElement","target","closest","strToBoolean","val","JSON","parse","String","toLowerCase","isHTMLElement","HTMLElement","e","nodeType","style","ownerDocument","stringToHTML","template","wrapper","createElement","innerHTML","objectToFormData","FormData","entries","finalValue","Array","isArray","v","append","stringify","isNotNullOrUndefined","isFunction","fn","pluralize","count","words","Math","min","carouselConfigs","defaultMobile","spaceBetween","noIndent","productCarousel","resizeObserver","zoom","imageViewer","grabCursor","banner","autoplay","delay","loop","cartAccessories","slidesPerView","freeMode","breakpoints","768","400","insuranceProduct","use","carouselEl","options","DATA_ATTR_CONFIG_NAME","classes","handler","viewport","item","item3D","controls","btnPrev","btnNext","dots","dot","lazyLoadItem","lazyLoadPlaceholder","thumb","thumbViewport","thumbContainer","thumbItem","zoomIn","zoomOut","stateClasses","is3DView","configName","init","carousel","slideNext","slidePrev","index","slideTo","findElements","thumbEl","carouselThumb","thumbViewportEl","getSwiperThumbOptions","swiperOptions","getSwiperOptions","viewportEl","initCSSMode","attachEvent","querySelector","containerEl","from","classList","add","controlsEl","prevBtnEl","nextBtnEl","dotsEl","dotPattern","firstElementChild","outerHTML","thumbContainerEl","zoomInEl","zoomOutEl","observer","observeParents","containerModifierClass","slideActiveClass","slideDuplicateActiveClass","slideNextClass","slidePrevClass","preloadImages","lazy","loadPrevNext","elementClass","preloaderClass","loadedClass","loadingClass","getBaseSwiperOptions","wrapperClass","slideClass","maxRatio","minRatio","navigation","getNavigationOption","pagination","getDotsOption","thumbs","swiper","slideThumbActiveClass","getSwiperConfig","baseOptions","320","992","loadPrevNextAmount","prevEl","nextEl","disabledClass","el","clickable","bulletClass","modifierClass","bulletActiveClass","renderBullet","className","dataAttrValue","getAttribute","on","handlePosition3DViewer","updateStateBtnZoom","fromEvent","subscribe","in","out","scale","remove","slide","slides","realIndex","contains","params","allowTouchMove","detachEvents","update3DViewer","attachEvents","width","innerWidth","items","filter","parseFloat","cssMode","viewer3D","viewer3DClone","cloneNode","parent","parentElement","appendChild","propertyKey","descriptor","timeout","original","args","clearTimeout","setTimeout","Debounce","Visibility","CLASS_HIDE","EAnimationType","EDialogState","visibility","defaultOptions","getDefaultOptions","show","itemEls","initElements","listEl","list","Error","inputEl","input","querySelectorAll","dataAttributes","merge","pipe","pluck","debounceTime","distinctUntilChanged","searchValue","toString","toUpperCase","trim","showAllItems","coinciding","mismatched","hide","raf","requestAnimationFrame","divTest","canAnimate","undefined","transition","frames","framesRun","option","calcOptions","showVisuality","isHidden","setFinishHandler","removeClasses","enterClassNames","enterActive","enterTo","afterEnter","addClasses","enter","beforeEnter","addFrame","hideVisuality","leaveClassNames","leaveActive","leaveTo","afterLeave","leave","beforeLeave","before","insertBefore","systemDoneCallback","parentNode","removeChild","eventName","isCssTrack","type","removeEventListener","addEventListener","duration","getDefaultOption","enterName","leaveName","TRANSITION","getClassNames","displayProperty","nextFrame","frame","str","split","display","removeProperty","getStyle","prop","getComputedStyle","DialogOpening","numberOpenWindows","instance","CreateEvent","config","cancelable","bubbles","Event","createEvent","initEvent","CustomEvent","initCustomEvent","detail","Scrollable","CLASS_UTIL_SCROLL_OVERFLOW","handlerEl","saveScrollIndent","removeScrollIndent","addScrollIndent","indents","getIndents","paddingRight","scroll","containerIndent","handlerStyle","clientWidth","onClickStream","BehaviorSubject","dialogOpening","getInstance","scrollable","animation","disable","insert","animationView","closable","hasOpen","enable","dialogEl","_options","open","OPEN","CLOSED","viewEl","asObservable","initState","attachEventOnClick","initAnimation","dialogOption","hooks","beforeOpen","clearClassState","dispatchEvent","setClassState","afterOpen","beforeClose","parentEl","afterClose","viewOption","maskClosable","hasBackdrop","dialog","view","closed","actionClasses","close","ANIMATION","templateEl","getTemplate","preventDefault","getState","next","state","createCustom","super","modifications","content","header","extraTop","footer","title","closeIcon","findModalElements","setBackdrop","contentEl","headerEl","extraTopEl","bodyEl","footerEl","titleEl","join","getViewEl","getDialogEl","CLASS_SEARCH_FIELD","CLASS_LIST","CLASS_ITEM","CLASS_FORM","CLASS_INPUT","ID_MODAL","DATA_ATTR_VALUE","modal","modalEL","getElementById","filterList","searchInputEl","selectorHandler","map","history","pushState","getNewURL","formEl","submit","url","URL","location","href","searchParams","delete","getContentEl","EEnvironmentType","ECollapseState","ECollapseType","EDropdownState","set","PRODUCTION","CLASS_BTN_OK","CLASS_BTN_NO","COOKIE_NAME_CITY","cookie","modalEl","findElement","btnOk","btnNo","isProdMode","getEnv","hasCityCookie","has","blockEl","hooksBeforeOpen","openWithoutHooks","hooksAfterOpen","hooksBeforeClose","closeWithoutHooks","hooksAfterClose","setClassOpen","setClassClose","block","toggle","getAnimation","height","getContainerHeight","maxHeight","offsetHeight","DEFAULT","collapseFactory","activate","attachEventDynamicInsertion","scope","getElementsByClassName","getDataActivatedName","setAttribute","createCollapse","ANIMATED","createCollapseAnimated","groupEl","itemCollection","accordionMode","getAccordionMode","group","accordion","getCollapse","handleAccordion","hasAttribute","activeCollapse","streamOnClick","closeAnyClick","opens","closes","onItemClick","getStreamOnClick","clearClassEntering","setClassEntering","HandleEmptyContent","_handlerEl","update","removedNodes","reload","DATA_ATTR_CLASS_VISIBLE_EMPTY","DATA_ATTR_CLASS_VISIBLE_NOT_EMPTY","getClasses","classVisibleEmpty","classVisibleNotEmpty","getVisibleEmptyItems","getVisibleNotEmptyItems","EMaskTypes","MASK_FORMATS","PHONE","placeholder","class","mask","placeholderChar","DATE","Date","overwrite","autofix","max","IIN","VISA_CARD","PASSPORT","ID_CARD","NUMBER","SMS_CODE","NUMBER_LATIN_UPPER","prepare","LATIN_UPPER","MONEY","Number","thousandsSeparator","DATA_ACTIVATED","formats","maskType","maskFormat","createMask","resolve","isComplete","unmaskedValue","field","SmoothScroll","scrollIntoView","behavior","scrollTo","top","offsetTop","Platform","navigator","userAgent","fromUserAgent","test","fromCSSPointer","matchMedia","matches","Checklist","CLASS_CHECKED","EModalModification","selectionProperties","CLASS_BTN","CLASS_FILTER_INPUT","DATA_ATTR_ITEM_VALUE","checklist","itemsState","streamOnSelect","Subject","streamOnClose","isMultiple","modalInstance","FIXED_HEIGHT_MD","label","filterInputEl","getExtraTopEl","getSearchBarTemplate","getBodyEl","getContentTemplate","getFooterEl","getFooterTemplate","filterListEl","updateFilterListState","select","multiple","itemEl","getItemValue","isChecked","selected","unchecked","uncheckedAllIsNotMultiple","checked","acceptBtnEl","getItemsTemplate","getItemTemplate","accept","getFilterListItems","checklistItem","find","selectEl","eventChange","getSelectionProperties","syncOriginal","outputValue","disabled","focused","native","isDisabled","removeClassOpen","isOpen","originalEl","syncClassDisabled","setSelectedLabels","syncClassSelected","selectByIndex","selectedOptions","outputValueEl","isShowNative","code","setClassFocus","removeClassFocus","blur","updateSelected","getStreamOnSelect","updateOriginalSelect","getStreamOnClose","isMobile","syncClassNative","setClassSelected","removeClassSelected","setClassDisabled","removeClassDisabled","setClassNative","removeClassNative","selectedLabels","innerText","getSelectItems","selectionItems","tabEl","CLASS_TAB","CLASS_HEADER","CLASS_HEADER_ITEM","CLASS_HEADER_ITEM_ACTIVE","CLASS_CONTENT","CLASS_CONTENT_ITEM","CLASS_CONTENT_ITEM_ACTIVE","initFirstActive","setActiveHeaderItem","setActiveContentItem","activeIndex","getCurrentActiveIndex","goTo","currentActiveItem","getActiveHeaderItem","nextItem","getActiveContentItem","onHeaderItemClick","getIndexOnHeaderItem","scrollToHeaderItem","scrollWidth","itemLeft","offsetLeft","itemWidth","offsetWidth","scrollLeft","textareaEl","overflow","resize","scrollHeight","EToastType","EToggleGridViewStyle","ECookie","ECSRFTokenKeys","circleTimerEl","CLASS_BLOCK","CLASS_CIRCLE","CLASS_LABEL","CLASS_INFINITY","seconds","circumference","svgCircleEl","baseVal","PI","Infinity","infinityVal","strokeDasharray","strokeDashoffset","setProgress","interval","takeWhile","second","done","percent","labelEl","textContent","circle","offset","CLASS_TIMER","toastifyoptions","node","gravity","position","stopOnFocus","toastify","showToast","hasOnClickSubscribers","onBtnClick","btn","closeOnClick","removeElement","toastElement","timeOutValue","onClick","circleTimer","run","getTypeClass","getIconTemplate","text","hasBtn","getButtonTemplate","hasIcon","getTemplateTimer","iconClass","INFO","SUCCESS","ERROR","DATA_ATTR_ACTIVATED","DATA_ATTR_ACTIVATED_HANDLERS","classHandler","hasDynamicActivated","elements","getToggleElementByClassName","attachEventOnChange","initFirstChange","stream","isActivated","addActivatedHandlers","attachEventOnUnconnectedToggles","radioHandler","unconnectedToggles","sort","a","b","radio","getToggleElementsByName","dataAttrActive","activatedHandlers","getActivatedHandlers","includes","currentValue","DATA_ATTR_INPUT_CLASS","handlerEL","activateToggle","handlerClass","handleDynamicInsertionElements","getHandlers","initInstance","BackendData","CLASS_CONTAINER","backendData","getTokenFromDOM","getTokenFromCookie","getContainer","CSRF_TOKEN","defaultHeaders","env","setInterceptors","request","getURL","headers","reject","status","interceptors","response","toastInterceptor","redirectURLInterceptor","error","networkErrorInterceptor","Promise","convertDataToQuery","addCSRFToken","hostName","hostname","devURL","protocol","DEVELOPMENT","finalUrl","objectURL","pathname","search","metadata","toasts","toast","toastOption","redirectURL","isNetworkError","newConfig","method","csrfToken","csrfTokenBodyKey","REQUEST_BODY","csrfTokenHeaderKey","REQUEST_HEADERS","csrfTokenValue","getToken","console","formData","obj","formDataToObject","paramsSerializer","urlParams","URLSearchParams","arrValue","EVisibility","ERequestResponseStatus","ERequestReplacementDataType","EBtnSize","EBtnMods","EBtnType","EBtnState","rootEl","CLASS_BLOCK_REPLACEMENT","CLASS_LOADER","CLASS_HIDDEN_ELEMENT_IS_LOADING","DATA_ATTR_REQUEST_ON_START","DATA_ATTR_DATA_TYPE","isLoading","httpRequest","isRequestOnStart","loaderEl","active","updateVisibilityElementsOnLoading","HIDDEN","requestHTML","getUrl","getMethod","getData","then","replaceContent","catch","finally","VISIBLE","replacementEl","getBlockReplacementEl","replaceWith","getVisibilityElements","DATA_ATTR_URL","DATA_ATTR_METHOD","DATA_ATTR_DATA","getDataType","FORM_DATA","productCardEl","DATA_ATTR_ANALYTICS_DATA","analyticsData","getAnalyticsData","dataLayer","id","price","brand","category","productCostLineEl","onCLick","states","ACTIVE","quantity","ElementQueries","DATA_ATTR_CONNECTED_CLASS","subscribeChanges","getStreamOnChange","streamOnChange","onChange","connectedClass","connectedElement","activeToggles","CLASS_GRID","CLASS_STYLE_TILE","CLASS_STYLE_LIST","grid","switchStyle","cleatStyles","getClassStyle","LIST","TILE","inputToggle","emptyToggle","DATA_ATTR_ACTIVE_CLASS","DATA_ATTR_UNACTIVE_CLASS","activeClass","unactiveClass","CLASS_HANDLER","carousels","DATA_ATTR_MODAL_ID","modalId","ID_CONTAINER","DATA_DURATION","DATA_CLOSE_ON_CLICK","toastEl","dataDuration","showExisting","CLASS_LOADED","CLASS_LOADING","CLASS_PRELOAD","CLASS_ERROR","cfg","lazyClass","preloadClass","errorClass","DATA_ATTR_ELEMENT_ID","scrollBy","mover","itemId","anchor","textarea","CLASS_SELECTOR","tab","getDataAttrActivated","elementChildren","isFirstRendered","connectedCallback","getElementChildren","slotMap","getSlotMap","slotListMap","getSlotListMap","beforeFirstRendered","reduce","listMap","childNodes","Element","slotName","getSlot","getChildren","selectedIndex","_changedProperties","firstUpdated","setDefaultActiveStep","steps","findIndex","step","nextStep","prevStep","prevBtnHandler","isDisabledPrevBtn","nextBtnHandler","isDisabledNextBtn","attribute","reflect","EProductBasketBundlerOptionControlSignals","EProductBasketBundlerOptionStates","EProductBasketBundlerStoreTypes","EProductBasketBundlerOptions","signal","onChangeState","getValue","Metadata","Reflect","defineMetadata","propertyKeys","getOwnMetadata","getMetadata","EProductBundlerOptionPaymentMethodTypes","phoneInfo","selectedPaymentMethod","selectedContractTariff","selectedInsurance","selectedAccessory","getProperties","getPropertyKeyByTypeAndOption","SELECTED_OPTION","PAYMENT_METHOD","CONTRACT_TARIFF","INSURANCE","ACCESSORY","ELoaderModification","ELoaderSize","ELoaderType","ELoaderMods","confirmedLink","currentStepIndex","optionTypes","isAddToCartRequesting","prevControl","loading","visible","nextControl","optionIsReady","httpService","smoothScroll","smoothScrollController","store","optionStates","productCostLine","getOptions","updateBtnAvailableInProductCostLine","skuId","getCurrentOptionType","updateControlsState","isFirstOption","scrollToTopContainer","getStreamChangeByType","updateCostInProductCostLine","handleClickBtnAddToCart","NEXT","handleNextSignal","PREV","handlePrevSignal","addToCart","DISABLED","notifyAboutInactiveBtnAddToCart","scrollToNextBtn","switchMap","component","updateComplete","of","isFirst","isLast","isLastOption","LOADING","WAITING","READY","isLoadingBtn","isDisableBtn","paymentMethod","period","tariff","phoneNumber","number","operatorName","operator","insurance","accessory","currentStep","requestData","isActive","resetData","getLoaderTemplate","getErrorTemplate","getHeaderTemplate","getOptionTemplates","getPrevBtnTemplate","getNextBtnTemplate","PRIMARY","MD","LINK","LG","WITHOUT_P","ADAPTIVE_TO_MD","types","getOptionByTypeTemplate","pricePerMonth","tariffPrice","getContractTariffPrice","optionsPrice","getPaymentMethodPrice","getInsurancePrice","getAccessoryPrice","FULL_PRICE","contractTariff","paymentType","prev","current","getSelectedValueByType","required","selectedIsRequired","EMoneyFormatterTypes","updateState","log","getNetworkErrorTemplate","btnReloadHandler","reloadData","SYMBOL_SUPERSCRIPT","toSymbolSup","THOUSAND_SUPERSCRIPT","toThousandSup","THOUSAND_MONTH_SUPERSCRIPT","toThousandMonthSup","toDefault","getMaskedValue","symbol","first","getFormattedValue","message","getToggleCardTemplate","getNotDataTemplate","getToggleCardContractTemplate","getToggleCardFullPriceTemplate","tariffCard","format","subTitle","costs","overpayment","handleChange","currentTarget","EPhoneValidationForContractTariffStages","EPhoneValidationForContractTariffStatuses","EPhoneValidationForContractTariffSlots","EProductBundlerOptionContractTariffStages","sectionTitle","stage","changeStage","phoneValidationForContractTariff","resetStage","getValidatePhoneTemplate","getResultByStageTemplate","handleBtnClickSkipTariff","handlePhoneValidationForContractTariffStatusChange","getOperator","getPhoneNumber","APPROVED_ABILITY_TO_CONNECT_TARIFF","SELECT_TARIFF","getSelectTariffTemplate","WITHOUT_TARIFF","hasTariffs","paymentMethodId","handleChangeTariff","getAddTariffTemplate","SECONDARY","handleBtnAddTariff","isSkip","emitSignal","updateTitle","ETariffCardCostItemSize","formattedData","isSelected","getSkipTemplate","handleClickSkip","toggleSkipEl","paymentTypeId","accessories","sku","formatData","payoutPrice","shortDescription","prepend","getPrependTemplate","infoTitle","size","SM","description","handleBtnOpenDetail","setBody","img","EProductOptionTariffStages","getOperatorName","unlimitedDesc","megabyte","megabyteDesc","minutes","minutesDesc","toFixed","priceDesc","getAdvantageousContract","advantageousContractTariff","advantageousContractCard","advantageousContractToTariffCard","updatePricePerMonthInProductCostLine","getAdvantageousContractTemplate","getAdvantageousContractDetailTemplate","handleBtnClickReload","toTariffCard","getWithoutTariffTemplate","selectedTariff","updateLoanInfo","prependIconClass","appendIconClass","mods","mod","link","getMods","getPrepend","getLoader","getAppend","EToggleType","CHECKBOX","marker","dark","detailValue","RADIO","getMarker","getDetailValue","insuranceType","handleClick","disableActiveRelatedElements","getRelatedElements","localName","old","attributeChangedCallback","Function","getCostTemplate","cost","EOperatorCardDirection","direction","VERTICAL","altText","ETermCardSizes","$stream","ResizeObserver","entry","gsap","registerPlugin","ScrollTrigger","CLASS_FIXED_DUPLICATE","fixedDuplicateEl","handlerHeight","initTrigger","trigger","start","endTrigger","end","markers","onUpdate","self","updateFixedDuplicate","progress","getStream","refresh","btnText","getFixedWrapper","getContent","getStaticWrapper","handleBtnClick","customEvent","backdrop","opened","getHeader","getExtraTop","getBody","getFooter","ESlideMenuDirection","slideMenu","CLASS_MAIN","CLASS_BODY","DATA_ATTR_DIRECTION","immersionLevel","isAnimating","itemShiftStream","slideMenuEl","getDirection","BACK","slideBack","combineLatest","timeStamp","transitionEndEvent","itemShift","getItem","minHeight","shiftContainer","prevBody","getPrevBody","level","transform","child","fieldClass","focus","dispatchInputChange","initMask","disconnectedCallback","destroy","getField","updateValue","updateControl","emitEventOnChange","streamTimer","isStopped","ms","intervalStream","stop","tap","sec","lastSec","fillTime","secondToFullTime","unsubscribe","floor","time","output","timer","EValidateSMSCodeStatuses","EValidateSMSCodeSlots","confirmed","formCodeName","formPhoneNumberName","requestOnCreation","attemptsCountSend","attemptsCountValidate","timerOutput","isValidationRequesting","isSMSRequesting","isTimerActive","timerEnded","initSlots","initBootstrapData","getSMSCode","focusInputField","formValidateEl","FORM_VALIDATE","formGetEl","FORM_GET","handleFieldChange","getFormattedPhoneNumber","getCountMessage","isVisibleBtnRetry","isLoadingBtnRetry","isDisableBtnRetry","handleClickBtnRetry","reverse","codeInput","action","updateAttemptsCountSend","updateAttemptsCountValidate","startTimer","emitEvent","VALIDATION_SUCCESSFUL","tariffConnection","VALIDATION_ERROR","validateSMSCode","OUT_SMS_REQUESTS","OUT_VALIDATION_REQUESTS","bootstrapData","ETariffConnectionStatuses","EPriceRequestTypes","ENTER_PHONE_NUMBER","isCompletePhoneNumber","validateSMSCodeDetail","fieldPhoneNumberAsync","getTemplateByStage","updated","updateAsyncEls","formValidateSMSEl","FORM_VALIDATE_SMS","formGetSMSEl","FORM_GET_SMS","handleFormSubmit","handleInputPhoneNumberChange","handleChangeConfirmed","isLoadingBtnGetSMS","isDisabledBtnGetSMS","handleClickBtnGetSMSCode","getSMSResponse","handleValidateSMSCodeStatusChange","handleBtnClickChangePhone","handleBtnClickContinueWithoutTariff","logo","getEnterPhoneNumberTemplate","VALIDATE_SMS_CODE","getValidateSMSCodeTemplate","DENIED_ABILITY_TO_CONNECT_TARIFF","getDeniedAbilityToConnectTariffTemplate","PHONE_INFORMATION","getPhoneInformation","EMPTY","getUnmaskedValue","fieldPhoneNumber","checkPhoneNumberFiled","isCompleteValue","stageEnterPhoneNumber","stageApprovedAbilityToConnectTariff","stageDeniedAbilityToConnectTariff","emitEventStatusChange","fieldConfirmedAsync","APPROVED","EAlertTypes","EAlertMods","EComponentStatuses","addDataGet","getRequestConfig","calculatePricesRequestConfig","periodTitle","periods","getConnectionResultMessageTemplate","getFormattedData","updatePeriodTitle","isFirstLoaded","selectFirst","setInitSelected","getFormattedPeriods","tariffs","getFormattedTariffs","initSelected","getPeriodTemplate","getTariffTemplate","handleClickPeriod","selectedPeriod","reasonAbsenceTariffs","getTariffByPeriodAndId","handleClickTariff","getSkipTariffTemplate","reasonAbsenceTariffsTemplate","tariffId","per","WARNING","periodValue","firstTariff","attachEventOnStatusChange","emitEventOnStatusChange","getIconClass","viewerEl","CLASS_OPEN","classBlock","classClose","closeBtnEl","to","productImageViewer","EValidatePhoneNumberAndSMSStages","EValidatePhoneNumberWithConfirmationAndSmsSlots","addDataValidateSMS","addDataGetSMS","getSMSRequestConfig","validateSMSRequestConfig","isSMSValidation","enterPhoneNumberComponentAsync","handleClickBtnGetSMS","enterSMSData","isLoadingBtnGetNewSMS","isDisabledBtnGetNewSMS","handleClickBtnGetNewSMSCode","handleFullFilledCode","getEnterSMSCodeTemplate","stageValidateSMSCode","smsCode","enterSMSCodeComponentAsync","estimate","toPromise","getDataForGetSMSCode","onResponseGetSMSCode","onRejectGetSMSCode","emitEventOnResponseGetSMSCode","emitEventOnRejectGetSMSCode","getDataForValidateSMSCode","onResponseValidateSMSCode","onRejectValidateSMSCode","emitEventOnResponseValidateSMSCode","emitEventOnRejectValidateSMSCode","confirmationChecked","confirmContent","CONFIRMATION_CONTENT","concatFormData","phoneNumberValue","phoneNumberName","phoneNumberLabel","actionBtnText","loadingBtn","disableBtn","getPhoneNumberFieldTemplate","getActionBtn","handleInputFiledChange","isDisabledActionBtn","isLoadingActionBtn","handleClickActionBtn","getMask","masked","emitEventActionBtnClick","maskedPhoneNumber","EEnterPhoneNumberWithConfirmationSlots","confirmationCheckboxName","confirmationCheckboxValue","getConfirmationCheckboxTemplate","handleChangeConfirmationCheckbox","confirmationCheckboxField","btnRetry","loadingBtnRetry","disableBtnRetry","handleTimerStream","handleInputFieldChange","emitEventFullyFilledCode","emitEventClickBtnRetry","emitEventTimerEnded","EContractTariffsValidatePhoneToConnectTariffSlots","getTariffConnectionTemplate","handleResponseGetSMSCode","handleRejectGetSMSCode","handleResponseValidateSMSCode","handleRejectValidateSMSCode","DENIED","getDeniedConnectTariffTemplate","validatorAsync","focusInputEnterPhoneNumber","EContractTariffsBasketBundlerPaymentMethods","addRequestData","onOptionChangeStream","getLoadingTemplate","getNoDataTemplate","getPhoneNumberTemplate","getPaymentTypesTemplate","formattedTariffTree","getTariffsTemplate","getTariffConnectionResultMessageTemplate","linkToChangePhoneNumber","tariffTree","operatorCard","HORIZONTAL","paymentMethods","handleClickPaymentMethod","selectedPeriodValue","GHOST","linkToBundlerItems","getFormattedTariffTree","setFirstSelected","addToCartLink","INSTALLMENT","getTariffPrice","isAllSelected","isVisible","updateVisibility","scrollToTop","scrollY","innerHeight","EScheduleDaysOfWeek","EScheduleStatus","scheduleDaysOfWeekShotTranslationRu","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY","_data","startTrackingWithMinute","timerBefore","isTimerActivated","reset","values","dayWeek","translate","itemData","isCurrentDayWeek","updateStatus","initTimer","getStatusClass","getStatusText","currentDate","getDay","startBeforeTime","getBeforeTime","endBeforeTime","isStarted","milliseconds","endTime","parseTime","hoursDiff","hours","getHours","minutesDiff","getMinutes","diffInMinutes","CLOSE","EProductCartHandlerStatus","Badge","badgeEl","CLASS_BADGE","badges","badgeEls","badgeValue","badge","setValue","Btn","btnEl","textEl","createPrepend","createAppend","insertAdjacentHTML","getAppendTemplate","CLASS_ACTIVE","CLASS_HANDLER_ON_PRODUCT_PAGE","DATA_ADDED_TEXT","DATA_ADDED_ICON","DATA_REMOVED_TEXT","DATA_REMOVED_ICON","updateStatusesBySky","ADD","updateStatusOnProductPage","REMOVE","isProductPageHandler","HTMLButtonElement","getIdenticalProductCardHandlers","updateStatusByHandler","getProductPageHandlerBySku","updateBtnText","addedText","addedIcon","removedText","removedIcon","setText","setPrependIcon","removePrependIcon","skuInput","cartUrl","catalogUrl","removeRequestConfig","isGlobalLoading","cartQuantity","productCartHandler","getEmptyTemplate","getSummaryTemplate","availability","product","formatterPrice","handleClickRemoveItem","removeItem","totalPrice","prevValue","currValue","formatterTotalPrice","handleClickBtnReload","stopPropagation","stopImmediatePropagation","cartItemCount","setUnactive","isLoadingDecrement","isLoadingIncrement","getBtnDecrementTemplate","getBtnIncrementTemplate","isDisableDecrement","handleClickDecrement","isDisableIncrement","handleClickIncrement","onDecrement","decrement","onIncrement","increment","ECartEditTypes","ECartCostLineNames","CLASS_ITEM_TITLE","CLASS_ITEM_VALUE","DATA_ATTR_ITEM_NAME","DATA_ATTR_ITEM_EL_INITIAL_VALUE","getItemByName","valueEl","PRICE_PER_MONTH","editRequestConfig","addRequestConfig","CartCostLineEl","cartCostLine","withGlobalLoading","getAccessoriesTemplate","accessoriesSkus","filteredItems","editItem","DECREMENT","INCREMENT","selectedSkus","handleChangeAccessories","isAdd","addItem","reloadOnEmpty","updatePriceInCostLine","getTotalPrice","updateItemValue","previousValue","emitEventChange","isRemoving","isChanging","getBtnRemoveTemplate","getRangeOrNotAvailableTemplate","handleClickRemove","onRemove","getRangeTemplate","formattedPrice","ELoanTypes","initStatus","setFirstSelectedPeriod","firstPeriod","updatedCurrentSelectedPeriod","initSelectedPeriod","CREDIT","MEDIUM","EPaymentMethodTypes","ATTR_ITEM_DATA","updateData","getSlotList","changedProperties","updateStatusOnPaymentMethod","getItemContent","getItemData","INSTALLMENT_PLAN","checkedItem","strData","EInsuranceTypes","_selected","initSelect","isInitSelectedDevice","products","productSkus","DEVICE","fullPrice","originalInsurance","getDeviceTypeTemplate","syncSelectedData","hasSuchType","selectedProducts","getProductsSectionTemplate","getPeriodSectionTemplate","selectedProductSkus","handleChangeSelectedProduct","existIndex","dispatchEmitEventChange","_selectedSkus","isFirstSetedSelectedSku","checkedIndexes","setFirstSelectedIndexes","skus","itemSkus","checkedSku","baseClassName","getAnimationOption","getHooksOption","cn","getMainClasses","EConfirmDialogActions","btnCancelText","btnConfirmText","streamResult","btnCancel","btnCancelEl","btnConfirm","btnConfirmEl","sub","_result","getBtnCancel","getBtnConfirm","tagName","handleBtnAction","CANCEL","onCancel","CONFIRM","onConfirm","isActionLoadingType","res","addLoader","setDisableBtnActionByType","removeLoader","handleClickBtnCancel","handleClickBtnConfirm","EBtnSwitchElements","EKeyboardState","EScreenOrientation","EWindowBreakpoints","EIdsLayout","subjectFactory","dataAttrActivated","TEXT","true","false","PREPEND_ICON","APPEND_ICON","setAppendIcon","change","attr","getElement","getBtn","collapseEl","DATA_ATTR_BTN_HANDLER_CLASS","btnHandlerEls","collapse","classBtnHandler","btnSwitchs","btnSwitch","switch","lastViewWidth","documentElement","lastOrientation","getOrientation","PORTRAIT","LANDSCAPE","currentOrientation","currentWidth","screenOrientationService","initialFullViewHeight","getFullHeight","checkChange","getActiveInputElement","isLessMainViewHeight","INACTIVE","clientHeight","activeElTagName","activeElement","EFormValidatorType","EPostMessageEvents","EWishlistStatus","btnHandlerEl","form","CLASS_MESSAGE","CLASS_INVALID","CLASS_VALID","errors","getFormItem","fieldNames","showMessage","messages","INVALID","getAllItems","clearClasses","setMessage","getElementsByTagName","inputs","formItem","getClassNameType","names","VALID","messageEl","acc","MenuBtn","menu","CLASS_MOD_ACTIVE","mainEl","checkDisableState","pin","pinSpacing","isDisabledWidth","md","loader","fixed","loaderPlacementEl","getHTMLElement","FormControlsChange","dirty","formSchema","createSchema","schema","isToggle","currentSchema","keys","filed","createInstance","fields","attachChange","checkDirty","CLASS_COST_LINE","CLASS_LOAN_TOTAL","DATA_ATTR_REQUEST_CONFIG","costLineEl","loanTotalCalculatorEl","requestConfigAttribute","requestConfig","calculatePrices","handleLoader","postData","emitEventOnResponseCalculatePrices","updatePrice","CLASS_ACTIVE_KEYBOARD","platform","isAndroid","keyboardState","changeClassByState","CLASS_WISHLIST","DATA_ATTR_REMOVE_UNACTIVE","updateBadges","updateIdenticalHandlerStatus","handleRemoveUnactive","ADDED","updateContent","REMOVED","getIdenticalHandlers","identityHandler","skuIdInput","childElementCount","DATA_ATTR_AJAX","getSubmitter","isAjax","formValidator","clearMessages","showErrors","errorFields","formID","submitter","eventSubmitter","CLASS_FIELD","sideNavEl","sideNav","menuBtn","setHeight","cssText","clearTogglesWithAppointmentForAll","CLASS_MOD_PARENT_CONTENT_HEIGHT","iframesOnLoad","getIframes","iframe","updateHeight","getIframeDocument","head","styleEl","contentDocument","contentWindow","info","getIframeWindow","setOverflowHidden","DATA_INTERVAL","attachInterval","dataVal","DATA_ATTR_EVENT_NAME","emit","postMessage","handle","RELOAD_PAGE","DATA_ATTR_ID_SCHEDULE","DATA_ATTR_OPTION_SCHEDULE","scheduleEl","setSchedule","selectedOption","schedule","modalFilters","DATA_ATTR_FILTER_ID","CLASS_FILTERS_IN_MODAL","filterContentEl","parentFiltersEl","afterModalClose","setModalContent","handlerOnProductPage","setLoader","setDisabled","setActive","getSkuByHandler","removeDisabled","ID_CART_PREVIEW","cartPreviewEl","cartPreviewAnimation","updateCartPreviewPosition","handleHandlerClick","throttleTime","animationFrame","canShowPreview","right","handlerWidth","handlerLeft","distanceRightOfHandler","cartPreviewWidth","lg","isRequesting","modalFilter","blockReplacementEl","globalLoader","attachEventOnFormChange","formControlsChange","handleResponse","initNewReplacementEl","updateFilterContent","clickedToggle","allToggles","CLASS_ITEM_CONTROLLER","CLASS_PAYMENT_METHOD_SELECT","editProductsEl","paymentMethodSelectEl","CLASS_EDIT_PRODUCTS","updateBtnAvailable","editProductsStatus","paymentMethodStatus","CLASS_SELECT_TARIFF","selectTariffEl","loanCalculator","updatePricePerMonth","TARIFF","updateCostLine","updateFullPrice","initValueStr","getItemInitialValue","initValue","CLASS_SELECT_INSURANCE","selectInsuranceEl","isFakeDisabled","isSelectedProductInDeviceInsurance","fakeEnable","fakeDisable","deviceInsurance","CLASS_CART_FORM","DATA_ATTR_URL_GET_PRICE","DATA_ATTR_METHOD_GET_PRICE","DATA_ATTR_SELECT_TARIFF_ID","selectTariff","CLASS_CONFIRM_DIALOG_SOME_PRODUCT_NOT_AVAILABLE","DATA_ATTR_URL_VALIDATE","DATA_ATTR_METHOD_VALIDATE","isValidating","confirmDialogSomeProductNotAvailableEl","requestValidate","handleCancelConfirm","hasUnavailableProducts","editProductEl","DATA_ATTR_HREF","DATA_ATTR_TARGET","handleLinks","hiddenLinks","hl","transformToLink","span","parseHiddenLink","replace","replacement","createLink","btoa","encodeURIComponent","match","p1","fromCharCode","decodeURIComponent","atob","charCodeAt","decodeUnicode"],"mappings":"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","file":"main.a0b28d1ec698f9a87977.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([268,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"/static/images\\\\logo.svg\";","import {IDynamicInsertionElements} from \"@modules/dynamic-element/model\";\r\n\r\nexport abstract class DynamicInsertionElements implements IDynamicInsertionElements {\r\n\tprivate mutationObserver: MutationObserver;\r\n\r\n\tpublic attachEventDynamicInsertion() {\r\n\t\tif (!this.mutationObserver) {\r\n\t\t\tthis.mutationObserver = new MutationObserver(this.mutationObserverListener);\r\n\t\t\tthis.mutationObserver.observe(document.body, {\r\n\t\t\t\tchildList: true,\r\n\t\t\t\tcharacterData: false,\r\n\t\t\t\tsubtree: true,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node): void {\r\n\r\n\t}\r\n\r\n\tprivate mutationObserverListener: MutationCallback = (events: MutationRecord[]) => {\r\n\t\tevents.forEach(event => {\r\n\t\t\tevent.addedNodes.forEach(nodeModules => {\r\n\t\t\t\tthis.dynamicInsertHandler(nodeModules)\r\n\t\t\t});\r\n\t\t})\r\n\t};\r\n}\r\n","export interface LooseObject {\r\n\t[key: string]: any;\r\n}\r\n\r\nexport function getIndexElement(\r\n\tcontainer: HTMLElement,\r\n\telement: HTMLElement,\r\n): number {\r\n\tconst containerArray: Array<HTMLElement> = [].slice.call(\r\n\t\tcontainer.children,\r\n\t);\r\n\treturn containerArray.indexOf(element, 0);\r\n}\r\n\r\nexport function definitionElementOnClick(\r\n\tevent: Event,\r\n\tselector: string,\r\n): Element {\r\n\treturn (event.target as Element).closest(`${selector}`);\r\n}\r\n\r\nexport const isDefinitionElementEvent = (event: MouseEvent | Event, selector: string): boolean => {\r\n\treturn Boolean(getDefinitionElement(event.target as HTMLElement, selector))\r\n}\r\n\r\nexport const getDefinitionElement = <T extends HTMLElement>(element: HTMLElement | Element, selector: string): T => {\r\n\treturn element.closest(selector)\r\n}\r\n\r\nexport function globalEventDelegate<E extends Event>(\r\n\tevent: string,\r\n\tselector: string,\r\n\tcallbackSuccess: (element: HTMLElement, event: E) => void,\r\n\tcallbackFailed?: (element: HTMLElement, event: E) => void,\r\n): void {\r\n\tconst listener: EventListener = (ev: E) => {\r\n\t\tconst element: Element = definitionElementOnClick(ev, selector);\r\n\r\n\t\tif (element) {\r\n\t\t\tcallbackSuccess(element as HTMLElement, ev);\r\n\t\t\treturn;\r\n\t\t} else if (callbackFailed) {\r\n\t\t\tcallbackFailed(ev.target as HTMLElement, ev);\r\n\t\t}\r\n\t};\r\n\r\n\tif (event === 'click' && 'ontouchstart' in document.documentElement) {\r\n\t\tlet moveCount: number = 0;\r\n\t\tlet move: boolean = false;\r\n\t\tlet click: boolean = false;\r\n\r\n\t\tconst touchStartListener: EventListener = () => {\r\n\t\t\tclick = true;\r\n\t\t};\r\n\t\tconst touchMoveListener: EventListener = () => {\r\n\t\t\tmoveCount++;\r\n\t\t\tmove = true;\r\n\t\t};\r\n\t\tconst touchEndListener: EventListener = (ev: E) => {\r\n\t\t\tif (!move && click) {\r\n\t\t\t\tlistener(ev);\r\n\t\t\t}\r\n\t\t\tmove = false;\r\n\t\t\tmoveCount = 0;\r\n\t\t\tclick = false;\r\n\t\t};\r\n\t\taddEventListener('touchstart', touchStartListener, false);\r\n\t\taddEventListener('touchmove', touchMoveListener, false);\r\n\t\taddEventListener('touchend', touchEndListener, false);\r\n\t} else {\r\n\t\taddEventListener(event, listener);\r\n\t}\r\n}\r\n\r\nexport function getAttributesElement(\r\n\telement: HTMLElement | Element,\r\n): LooseObject {\r\n\tconst obj: LooseObject = {};\r\n\r\n\tif (element.hasAttributes()) {\r\n\t\tconst attr = element.attributes;\r\n\r\n\t\tfor (let i = 0, len = attr.length; i < len; i++) {\r\n\t\t\tobj[attr[i].nodeName] = attr[i].nodeValue;\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nexport function debounce<F extends (...params: Array<any>) => void>(\r\n\tcontext: any,\r\n\tfunc: F,\r\n\tdelay: number,\r\n) {\r\n\tlet timeoutID: number = null;\r\n\treturn (...args: Array<any>) => {\r\n\t\tclearTimeout(timeoutID);\r\n\t\ttimeoutID = window.setTimeout(() => func.apply(context, args), delay);\r\n\t};\r\n}\r\n\r\nexport function freezeScroll(state: boolean, classFreeze: string): void {\r\n\tconst widthScroll: number =\r\n\t\twindow.innerWidth - document.documentElement.clientWidth;\r\n\tif (state) {\r\n\t\t// document.body.classList.add(classFreeze);\r\n\t\t// document.body.style.paddingRight = `${widthScroll}px`;\r\n\t} else {\r\n\t\t// document.body.classList.remove(classFreeze);\r\n\t\t// document.body.style.paddingRight = '';\r\n\t}\r\n}\r\n\r\nexport function getExtensionFiles(str: string): string {\r\n\treturn str.match(/\\.([^.]*?)(?=\\?|#|$)/)[1];\r\n}\r\n\r\nexport function getSpecificFirstLevelChildren(parent: HTMLElement, className: string): Array<Element> {\r\n\tconst children: Array<Element> = Array.from(parent.children);\r\n\treturn children.filter((element: Element) => {\r\n\t\treturn element.classList.contains(className);\r\n\t});\r\n}\r\n\r\nexport function isSupportTouch() {\r\n\ttry {\r\n\t\tdocument.createEvent('TouchEvent');\r\n\t\treturn true;\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport function secondsToFullTime(sec: number) {\r\n\tconst hours = Math.floor(sec / 3600);\r\n\tconst minutes = Math.floor(sec / 60) % 60;\r\n\tconst seconds = sec % 60;\r\n\r\n\treturn [hours, minutes, seconds]\r\n\t\t.map((v) => v < 10 ? '0' + v : v)\r\n\t\t.filter((v, i) => v !== '00' || i > 0)\r\n\t\t.join(':');\r\n}\r\n\r\nexport function strToBoolean(val: string | boolean) {\r\n\treturn !!JSON.parse(String(val).toLowerCase());\r\n}\r\n\r\nexport const isVisibleElement = (element: HTMLElement): boolean => {\r\n\tconst display: string = getComputedStyle(element).display;\r\n\treturn element.style.display !== 'none' && display !== 'none';\r\n}\r\n\r\nexport function isHTMLElement(element: any) {\r\n\ttry {\r\n\t\t//Using W3 DOM2 (works for FF, Opera and Chrome)\r\n\t\treturn element instanceof HTMLElement;\r\n\t} catch (e) {\r\n\t\t//Browsers not supporting W3 DOM2 don't have HTMLElement and\r\n\t\t//an exception is thrown and we end up here. Testing some\r\n\t\t//properties that all elements have (works on IE7)\r\n\t\treturn (typeof element === \"object\") &&\r\n\t\t\t(element.nodeType === 1) && (typeof element.style === \"object\") &&\r\n\t\t\t(typeof element.ownerDocument === \"object\");\r\n\t}\r\n}\r\n\r\nexport function getPercentage(value: number, from: number): number {\r\n\treturn (value / from) * 100;\r\n}\r\n\r\nexport function stringToHTML(template: string): HTMLElement {\r\n\tconst wrapper: HTMLElement = document.createElement(\"div\");\r\n\twrapper.innerHTML = template;\r\n\treturn wrapper.children[0] as HTMLElement;\r\n}\r\n\r\nexport function openFullscreen(el: HTMLElement) {\r\n\tif (el.requestFullscreen) {\r\n\t\tel.requestFullscreen();\r\n\t} else if ((el as any).mozRequestFullScreen) { /* Firefox */\r\n\t\t(el as any).mozRequestFullScreen();\r\n\t} else if ((el as any).webkitRequestFullscreen) { /* Chrome, Safari and Opera */\r\n\t\t(el as any).webkitRequestFullscreen();\r\n\t} else if ((el as any).msRequestFullscreen) { /* IE/Edge */\r\n\t\t(el as any).msRequestFullscreen();\r\n\t}\r\n}\r\n\r\nexport function closeFullscreen() {\r\n\tif (document.exitFullscreen) {\r\n\t\tdocument.exitFullscreen();\r\n\t} else if ((document as any).mozCancelFullScreen) { /* Firefox */\r\n\t\t(document as any).mozCancelFullScreen();\r\n\t} else if ((document as any).webkitExitFullscreen) { /* Chrome, Safari and Opera */\r\n\t\t(document as any).webkitExitFullscreen();\r\n\t} else if ((document as any).msExitFullscreen) { /* IE/Edge */\r\n\t\t(document as any).msExitFullscreen();\r\n\t}\r\n}\r\n\r\nexport function formDataToObject(formData: FormData): Object {\r\n\tlet obj: any = {};\r\n\tformData.forEach((value, key) => {\r\n\t\tif (obj[key]) {\r\n\t\t\tif (Array.isArray(obj[key])) {\r\n\t\t\t\tobj[key].push(value);\r\n\t\t\t} else {\r\n\t\t\t\tobj[key] = [obj[key], value]\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tobj[key] = value;\r\n\t\t}\r\n\t});\r\n\treturn obj;\r\n}\r\n\r\nexport function objectToFormData(object: Object): FormData {\r\n\tconst data: FormData = new FormData();\r\n\tObject\r\n\t\t.entries(object)\r\n\t\t.forEach(([key, value]) => {\r\n\t\t\tlet finalValue: string = value;\r\n\t\t\tif (typeof value === 'object') {\r\n\t\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\t\tvalue.forEach(v => {\r\n\t\t\t\t\t\tdata.append(key, v);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfinalValue = JSON.stringify(value);\r\n\t\t\t\t\tdata.append(key, finalValue);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tdata.append(key, finalValue);\r\n\t\t\t}\r\n\t\t});\r\n\treturn data;\r\n}\r\n\r\nexport function concatFormData(...formData: Array<FormData>): FormData {\r\n\tconst data: FormData = new FormData();\r\n\tformData.forEach(item => {\r\n\t\titem.forEach((value, key) => {\r\n\t\t\tdata.append(key, value);\r\n\t\t});\r\n\t});\r\n\treturn data;\r\n}\r\n\r\nexport function isNotNullOrUndefined(value: unknown): boolean {\r\n\treturn value !== null && value !== undefined;\r\n}\r\n\r\nexport function isFunction(fn: unknown): fn is Function {\r\n\treturn typeof fn === 'function';\r\n}\r\n\r\nexport function isAsyncFunction<T = unknown>(fn: unknown): fn is Promise<T> {\r\n\tconst isAsync = fn.constructor.name === \"AsyncFunction\";\r\n\treturn isFunction(fn) && isAsync;\r\n}\r\n\r\nexport async function asyncDelay(ms) {\r\n\treturn await new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function asyncRequestAnimationFrame() {\r\n\treturn await  new Promise(resolve => requestAnimationFrame(resolve));\r\n}\r\n\r\nexport function pluralize(count: number, ...words: Array<string>) {\r\n\tconst cases = [2, 0, 1, 1, 1, 2];\r\n\treturn count + ' ' + words[(count % 100 > 4 && count % 100 < 20) ? 2 : cases[Math.min(count % 10, 5)]];\r\n}\r\n","import {SwiperOptions} from \"swiper/types/swiper-options\";\r\n\r\nexport type TCarouselConfig = {\r\n\t[key: string]: TCarouselItemOptions\r\n}\r\n\r\nexport type TCarouselItemOptions = SwiperOptions & {}\r\n\r\nexport const carouselConfigs: TCarouselConfig = {\r\n\tdefaultMobile: {\r\n\t\tspaceBetween: 8,\r\n\t},\r\n\tnoIndent: {\r\n\t\tspaceBetween: 0,\r\n\t},\r\n\tproductCarousel: {\r\n\t\tresizeObserver: true,\r\n\t\tzoom: false,\r\n\t\tspaceBetween: 0,\r\n\t},\r\n\timageViewer: {\r\n\t\tgrabCursor: true,\r\n\t},\r\n\tbanner: {\r\n\t\tautoplay: {\r\n\t\t\tdelay: 3000,\r\n\t\t},\r\n\t\tloop: true,\r\n\t\tzoom: false,\r\n\t\tspaceBetween: 0,\r\n\t\tresizeObserver: true,\r\n\t},\r\n\tcartAccessories: {\r\n\t\tspaceBetween: 10,\r\n\t\tslidesPerView: \"auto\",\r\n\t\tfreeMode: true,\r\n\t\tgrabCursor: true,\r\n\t\tbreakpoints: {\r\n\t\t\t768: {\r\n\t\t\t\tspaceBetween: 20,\r\n\t\t\t\tslidesPerView: 3,\r\n\t\t\t},\r\n\t\t\t400: {\r\n\t\t\t\tslidesPerView: 2,\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinsuranceProduct: {\r\n\t\tspaceBetween: 10,\r\n\t\tslidesPerView: \"auto\",\r\n\t\tfreeMode: true,\r\n\t\tgrabCursor: true,\r\n\t\tbreakpoints: {\r\n\t\t\t768: {\r\n\t\t\t\tspaceBetween: 20,\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import {Debounce} from \"@decorators/method/debounce\";\r\nimport {carouselConfigs, TCarouselItemOptions} from \"@modules/carousel/configs\";\r\nimport {ICarousel, TCarouselOption} from \"@modules/carousel/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport Swiper, {Autoplay, Lazy, Navigation, Pagination, SwiperOptions, Thumbs, Zoom} from \"swiper\";\r\nimport {LazyOptions} from \"swiper/types/components/lazy\";\r\nimport {NavigationOptions} from \"swiper/types/components/navigation\";\r\nimport {PaginationOptions} from \"swiper/types/components/pagination\";\r\n\r\nSwiper.use([Navigation, Pagination, Thumbs, Lazy, Zoom, Autoplay]);\r\n\r\nexport default class Carousel implements ICarousel {\r\n\tprivate DATA_ATTR_CONFIG_NAME: string = 'data-carousel-config-name';\r\n\r\n\tprivate carouselEl: HTMLElement;\r\n\tprivate viewportEl: HTMLElement;\r\n\tprivate containerEl: HTMLElement;\r\n\tprivate controlsEl: HTMLElement;\r\n\tprivate prevBtnEl: HTMLButtonElement;\r\n\tprivate nextBtnEl: HTMLButtonElement;\r\n\tprivate dotsEl: HTMLElement;\r\n\tprivate thumbEl: HTMLElement;\r\n\tprivate thumbViewportEl: HTMLElement;\r\n\tprivate thumbContainerEl: HTMLElement;\r\n\tprivate zoomInEl: HTMLElement;\r\n\tprivate zoomOutEl: HTMLElement;\r\n\r\n\tprivate dotPattern: string;\r\n\r\n\tprivate carousel: Swiper;\r\n\tprivate carouselThumb: Swiper;\r\n\r\n\tprivate swiperOptions: TCarouselItemOptions;\r\n\r\n\tconstructor(carouselEl: HTMLElement, private options?: TCarouselOption) {\r\n\t\tthis.carouselEl = carouselEl;\r\n\t\tconst defaultOptions: TCarouselOption = {\r\n\t\t\tclasses: {\r\n\t\t\t\thandler: 'js-carousel',\r\n\t\t\t\tviewport: 'js-carouselViewport',\r\n\t\t\t\tcontainer: 'js-carouselContainer',\r\n\t\t\t\titem: 'js-carouselItem',\r\n\t\t\t\titem3D: 'js-carouselItem3D',\r\n\t\t\t\tcontrols: 'js-carouselControls',\r\n\t\t\t\tbtnPrev: 'js-carouselBtnPrev',\r\n\t\t\t\tbtnNext: 'js-carouselBtnNext',\r\n\t\t\t\tdots: 'js-carouselDots',\r\n\t\t\t\tdot: 'js-carouselDot',\r\n\t\t\t\tlazyLoadItem: 'js-carouselLazyLoadItem',\r\n\t\t\t\tlazyLoadPlaceholder: 'js-carouselLazyLoadPlaceholder',\r\n\t\t\t\tthumb: 'js-carouselThumb',\r\n\t\t\t\tthumbViewport: 'js-carouselThumbViewport',\r\n\t\t\t\tthumbContainer: 'js-carouselThumbContainer',\r\n\t\t\t\tthumbItem: 'js-carouselThumbItem',\r\n\t\t\t\tzoomIn: 'js-carouselZoomIn',\r\n\t\t\t\tzoomOut: 'js-carouselZoomOut'\r\n\t\t\t},\r\n\t\t\tstateClasses: {\r\n\t\t\t\tis3DView: 'is-3dView'\r\n\t\t\t},\r\n\t\t\tconfigName: 'default',\r\n\t\t};\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic next(): void {\r\n\t\tthis.carousel.slideNext();\r\n\t}\r\n\r\n\tpublic prev(): void {\r\n\t\tthis.carousel.slidePrev();\r\n\t}\r\n\r\n\tpublic to(index: number): void {\r\n\t\tthis.carousel.slideTo(index, 0);\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.findElements();\r\n\t\tif (this.thumbEl) {\r\n\t\t\tthis.carouselThumb = new Swiper(\r\n\t\t\t\tthis.thumbViewportEl,\r\n\t\t\t\tthis.getSwiperThumbOptions(),\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.swiperOptions = this.getSwiperOptions();\r\n\t\tthis.carousel = new Swiper(\r\n\t\t\tthis.viewportEl,\r\n\t\t\tthis.swiperOptions,\r\n\t\t);\r\n\t\tthis.initCSSMode();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.viewportEl = this.carouselEl.querySelector(`.${this.options.classes.viewport}`);\r\n\t\tthis.containerEl = this.carouselEl.querySelector(`.${this.options.classes.container}`);\r\n\t\tArray.from(this.containerEl.children).forEach(item => {\r\n\t\t\titem.classList.add(this.options.classes.item);\r\n\t\t});\r\n\r\n\t\t//Controls\r\n\t\tthis.controlsEl = this.carouselEl.querySelector(`.${this.options.classes.controls}`);\r\n\t\tif (this.controlsEl) {\r\n\t\t\tthis.prevBtnEl = this.controlsEl.querySelector(`.${this.options.classes.btnPrev}`);\r\n\t\t\tthis.nextBtnEl = this.controlsEl.querySelector(`.${this.options.classes.btnNext}`);\r\n\t\t}\r\n\r\n\t\t//Dots\r\n\t\tthis.dotsEl = this.carouselEl.querySelector(`.${this.options.classes.dots}`);\r\n\t\tif (this.dotsEl) {\r\n\t\t\tthis.dotPattern = this.dotsEl.firstElementChild.outerHTML;\r\n\t\t}\r\n\r\n\t\t//Thumb\r\n\t\tthis.thumbEl = this.carouselEl.querySelector(`.${this.options.classes.thumb}`);\r\n\t\tif (this.thumbEl) {\r\n\t\t\tthis.thumbViewportEl = this.thumbEl.querySelector(`.${this.options.classes.thumbViewport}`);\r\n\t\t\tthis.thumbContainerEl = this.thumbEl.querySelector(`.${this.options.classes.thumbContainer}`);\r\n\t\t\tArray.from(this.thumbContainerEl.children).forEach(item => {\r\n\t\t\t\titem.classList.add(this.options.classes.thumbItem);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//Zoom\r\n\t\tthis.zoomInEl = this.carouselEl.querySelector(`.${this.options.classes.zoomIn}`);\r\n\t\tthis.zoomOutEl = this.carouselEl.querySelector(`.${this.options.classes.zoomOut}`);\r\n\t}\r\n\r\n\tprivate getBaseSwiperOptions(): TCarouselItemOptions {\r\n\t\treturn {\r\n\t\t\tobserver: true,\r\n\t\t\tobserveParents: true,\r\n\t\t\tslidesPerView: 'auto',\r\n\t\t\tcontainerModifierClass: 'is-',\r\n\t\t\tslideActiveClass: 'is-active',\r\n\t\t\tslideDuplicateActiveClass: 'is-active',\r\n\t\t\tslideNextClass: 'is-next',\r\n\t\t\tslidePrevClass: 'is-prev',\r\n\t\t\tpreloadImages: true,\r\n\t\t\tlazy: {\r\n\t\t\t\tloadPrevNext: true,\r\n\t\t\t\telementClass: this.options.classes.lazyLoadItem,\r\n\t\t\t\tpreloaderClass: this.options.classes.lazyLoadPlaceholder,\r\n\t\t\t\tloadedClass: 'is-loaded',\r\n\t\t\t\tloadingClass: 'is-loading',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getSwiperOptions(): TCarouselItemOptions {\r\n\t\tlet options: TCarouselItemOptions = {\r\n\t\t\t...this.getBaseSwiperOptions(),\r\n\t\t\twrapperClass: this.options.classes.container,\r\n\t\t\tslideClass: this.options.classes.item,\r\n\t\t\tzoom: {\r\n\t\t\t\tmaxRatio: 3,\r\n\t\t\t\tminRatio: 1,\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (this.prevBtnEl && this.nextBtnEl) {\r\n\t\t\toptions.navigation = this.getNavigationOption();\r\n\t\t}\r\n\r\n\t\tif (this.dotsEl) {\r\n\t\t\toptions.pagination = this.getDotsOption();\r\n\t\t}\r\n\r\n\t\tif (this.thumbEl) {\r\n\t\t\toptions.thumbs = {\r\n\t\t\t\tswiper: this.carouselThumb,\r\n\t\t\t\tslideThumbActiveClass: 'is-active',\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t...options,\r\n\t\t\t...this.getSwiperConfig(),\r\n\t\t};\r\n\t}\r\n\r\n\tprivate getSwiperThumbOptions(): TCarouselItemOptions {\r\n\t\tconst baseOptions: TCarouselItemOptions = this.getBaseSwiperOptions();\r\n\t\tlet options: TCarouselItemOptions = {\r\n\t\t\t...baseOptions,\r\n\t\t\twrapperClass: this.options.classes.thumbContainer,\r\n\t\t\tslideClass: this.options.classes.thumbItem,\r\n\t\t\tspaceBetween: 8,\r\n\t\t\tbreakpoints: {\r\n\t\t\t\t320: {\r\n\t\t\t\t\tspaceBetween: 4,\r\n\t\t\t\t},\r\n\t\t\t\t992: {\r\n\t\t\t\t\tspaceBetween: 8,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tlazy: {\r\n\t\t\t\t...baseOptions.lazy as LazyOptions || {} as LazyOptions,\r\n\t\t\t\tloadPrevNextAmount: this.thumbContainerEl.children.length,\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn options;\r\n\t}\r\n\r\n\tprivate getNavigationOption(): NavigationOptions {\r\n\t\treturn {\r\n\t\t\tprevEl: this.prevBtnEl,\r\n\t\t\tnextEl: this.nextBtnEl,\r\n\t\t\tdisabledClass: 'is-disabled',\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDotsOption(): PaginationOptions {\r\n\t\treturn {\r\n\t\t\tel: this.dotsEl,\r\n\t\t\tclickable: true,\r\n\t\t\tbulletClass: this.options.classes.dot,\r\n\t\t\tmodifierClass: 'is-',\r\n\t\t\tbulletActiveClass: 'is-active',\r\n\t\t\trenderBullet: (index, className) => {\r\n\t\t\t\treturn this.dotPattern;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getSwiperConfig(): TCarouselItemOptions {\r\n\t\tconst dataAttrValue: string = this.carouselEl.getAttribute(this.DATA_ATTR_CONFIG_NAME);\r\n\t\tconst configName: string = dataAttrValue ? dataAttrValue : this.options.configName;\r\n\t\treturn carouselConfigs[configName];\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.carousel.on('slideChange', () => {\r\n\t\t\tthis.handlePosition3DViewer();\r\n\t\t})\r\n\r\n\t\tif (this.zoomInEl && this.zoomOutEl) {\r\n\t\t\tthis.updateStateBtnZoom();\r\n\r\n\t\t\tfromEvent(this.zoomInEl, 'click')\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tthis.carousel.zoom.in();\r\n\t\t\t\t\tthis.updateStateBtnZoom();\r\n\t\t\t\t})\r\n\t\t\tfromEvent(this.zoomOutEl, 'click')\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tthis.carousel.zoom.out();\r\n\t\t\t\t\tthis.updateStateBtnZoom();\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateStateBtnZoom(): void {\r\n\t\tif (this.carousel.zoom.scale === 1) {\r\n\t\t\tthis.zoomInEl.classList.remove('is-disabled');\r\n\t\t\tthis.zoomOutEl.classList.add('is-disabled');\r\n\t\t} else {\r\n\t\t\tthis.zoomInEl.classList.add('is-disabled');\r\n\t\t\tthis.zoomOutEl.classList.remove('is-disabled');\r\n\t\t}\r\n\t}\r\n\r\n\t@Debounce(100)\r\n\tprivate handlePosition3DViewer(): void {\r\n\t\tconst slide = this.carousel.slides[this.carousel.realIndex];\r\n\t\tif (slide && slide.classList.contains(this.options.classes.item3D)) {\r\n\t\t\tthis.carousel.params.allowTouchMove = false;\r\n\t\t\tthis.carousel.detachEvents();\r\n\t\t\tthis.carouselEl.classList.add(this.options.stateClasses.is3DView);\r\n\t\t\tthis.update3DViewer(slide);\r\n\t\t} else {\r\n\t\t\tif (this.carousel.params.allowTouchMove) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.carouselEl.classList.remove(this.options.stateClasses.is3DView);\r\n\t\t\tthis.carousel.params.allowTouchMove = true;\r\n\t\t\tthis.carousel.attachEvents();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initCSSMode(): void {\r\n\t\tconst width: number = window.innerWidth;\r\n\t\tconst items: [string, SwiperOptions][] = Object\r\n\t\t\t.entries(this.swiperOptions?.breakpoints || {})\r\n\t\t\t.filter(([, value]) => value.hasOwnProperty('cssMode'))\r\n\t\t\t.filter(([key]) => parseFloat(key) <= width)\r\n\t\tif (items.length) {\r\n\t\t\tif (items[items.length - 1][1].cssMode) {\r\n\t\t\t\tthis.carousel.detachEvents();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this.swiperOptions.cssMode) {\r\n\t\t\t\tthis.carousel.detachEvents();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate update3DViewer(item: HTMLElement | Element): void {\r\n\t\tconst viewer3D: HTMLElement = item.querySelector('model-viewer');\r\n\t\tconst viewer3DClone: Node = viewer3D.cloneNode(true);\r\n\t\tconst parent: HTMLElement = viewer3D.parentElement;\r\n\t\tviewer3D.remove();\r\n\t\tparent.appendChild(viewer3DClone);\r\n\t}\r\n}\r\n","export function Debounce(delay: number = 300): MethodDecorator {\r\n\treturn function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n\t\tlet timeout = null;\r\n\r\n\t\tconst original = descriptor.value;\r\n\r\n\t\tdescriptor.value = function (...args) {\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\ttimeout = setTimeout(() => original.apply(this, args), delay);\r\n\t\t};\r\n\r\n\t\treturn descriptor;\r\n\t};\r\n}\r\n","import {IVisibility} from \"@modules/visibility/model\";\r\n\r\nexport default class Visibility implements IVisibility {\r\n\tprivate CLASS_HIDE: string = 'u-d-none';\r\n\r\n\tpublic show(el: HTMLElement | Array<HTMLElement>) {\r\n\t\tif (Array.isArray(el)) {\r\n\t\t\tel.forEach(item => item.classList.remove(this.CLASS_HIDE))\r\n\t\t} else {\r\n\t\t\tel.classList.remove(this.CLASS_HIDE);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic hide(el: HTMLElement | Array<HTMLElement>) {\r\n\t\tif (Array.isArray(el)) {\r\n\t\t\tel.forEach(item => item.classList.add(this.CLASS_HIDE))\r\n\t\t} else {\r\n\t\t\tel.classList.add(this.CLASS_HIDE);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","export interface IAnimation {\r\n\tshow(): void\r\n\r\n\thide(): void\r\n\r\n\tinsert(target: HTMLElement, before?: Node): void\r\n\r\n\tremove(): void\r\n}\r\n\r\nexport type TAnimationOption = {\r\n\tname?: string\r\n\tenterName?: string\r\n\tleaveName?: string\r\n\ttype?: EAnimationType\r\n\tduration?: number\r\n\tenterClassNames?: TAnimationClasses\r\n\tleaveClassNames?: TAnimationClasses\r\n\tbeforeEnter?: (el: HTMLElement) => void\r\n\tafterEnter?: (el: HTMLElement) => void\r\n\tbeforeLeave?: (el: HTMLElement) => void\r\n\tafterLeave?: (el: HTMLElement) => void\r\n\tsystemDoneCallback?: (el: HTMLElement) => void\r\n\tdisplayProperty?: string\r\n}\r\n\r\nexport type TAnimationClasses = {\r\n\tenter: string\r\n\tenterActive: string\r\n\tenterTo: string\r\n\tleave: string\r\n\tleaveActive: string\r\n\tleaveTo: string\r\n}\r\n\r\nexport enum EAnimationType {\r\n\tTRANSITION = 'transition',\r\n\tANIMATION = 'animation',\r\n\tNONE = 'none'\r\n}\r\n","import {TAnimationOption} from \"@modules/animation/model\";\r\nimport {Observable} from \"rxjs\";\r\n\r\nexport interface IDialog {\r\n\toptions: TDialogOptions\r\n\r\n\topen(): void\r\n\r\n\tclose(): void\r\n\r\n\tgetState(): EDialogState\r\n\r\n\tdestroy(): void\r\n\r\n\tgetDialogEl(): HTMLElement\r\n\r\n\tgetViewEl(): HTMLElement\r\n\r\n\tgetOnClickStream(): Observable<Event>\r\n\r\n\tmaskClosable: boolean\r\n\r\n\tclosable: boolean\r\n}\r\n\r\nexport type TDialogOptions = {\r\n\telement?: HTMLElement | 'create'\r\n\tclasses?: TDialogClasses\r\n\tstateClasses?: TDialogStateClasses\r\n\tactionClasses?: TDialogActionClasses\r\n\tanimation?: TDialogAnimation\r\n\thooks?: TDialogHooks\r\n\tmaskClosable?: boolean\r\n\tclosable?: boolean\r\n\thasBackdrop?: boolean\r\n}\r\n\r\nexport type TDialogAnimation = {\r\n\tdialogOption?: TAnimationOption\r\n\tviewOption?: TAnimationOption\r\n}\r\n\r\nexport type TDialogHooks = {\r\n\tbeforeOpen?: () => void\r\n\tbeforeClose?: () => void\r\n\tafterOpen?: () => void\r\n\tafterClose?: () => void\r\n}\r\n\r\nexport type TDialogClasses = {\r\n\tdialog?: string\r\n\tview?: string\r\n}\r\n\r\nexport type TDialogStateClasses = {\r\n\topen?: string\r\n\tclosed?: string\r\n}\r\n\r\nexport type TDialogActionClasses = {\r\n\tclose?: string\r\n}\r\n\r\nexport enum EDialogState {\r\n\tOPEN = 'OPEN',\r\n\tCLOSED = 'CLOSED',\r\n}\r\n\r\n","import {IFilterList, TFilterListOptions} from \"@modules/filter-list/model\";\r\nimport {IVisibility} from \"@modules/visibility/model\";\r\nimport Visibility from \"@modules/visibility/Visibility\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport {debounceTime, distinctUntilChanged, pluck} from \"rxjs/operators\";\r\n\r\nexport default class FilterList implements IFilterList {\r\n\tprivate visibility: IVisibility = new Visibility();\r\n\r\n\tprivate listEl: HTMLElement;\r\n\tprivate inputEl: HTMLInputElement;\r\n\tprivate itemEls: Array<HTMLElement>;\r\n\r\n\tconstructor(private options: TFilterListOptions) {\r\n\t\tconst defaultOptions: Partial<TFilterListOptions> = this.getDefaultOptions();\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic showAllItems(): void {\r\n\t\tthis.visibility.show(this.itemEls);\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.initElements();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tthis.listEl = this.options.list;\r\n\t\tif (!this.listEl) {\r\n\t\t\tthrow new Error('FilterList: list is not defined !');\r\n\t\t}\r\n\t\tthis.inputEl = this.options.input;\r\n\t\tif (!this.inputEl) {\r\n\t\t\tthrow new Error('FilterList: input is not defined !');\r\n\t\t}\r\n\t\tthis.itemEls = Array.from(\r\n\t\t\tthis.listEl.querySelectorAll(`[${this.options.dataAttributes.key}].${this.options.classes.item}`)\r\n\t\t)\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.inputEl, 'input'),\r\n\t\t\tfromEvent(this.inputEl, 'keyup'),\r\n\t\t)\r\n\t\t\t.pipe(\r\n\t\t\t\tpluck('target', 'value'),\r\n\t\t\t\tdebounceTime(250),\r\n\t\t\t\tdistinctUntilChanged()\r\n\t\t\t)\r\n\t\t\t.subscribe(value => {\r\n\t\t\t\tconst searchValue: string = value.toString().toUpperCase().trim();\r\n\t\t\t\tif (!searchValue.trim()) {\r\n\t\t\t\t\treturn this.showAllItems();\r\n\t\t\t\t}\r\n\t\t\t\tconst items = {\r\n\t\t\t\t\tcoinciding: [],\r\n\t\t\t\t\tmismatched: [],\r\n\t\t\t\t};\r\n\t\t\t\tthis.itemEls\r\n\t\t\t\t\t.forEach(item => {\r\n\t\t\t\t\t\tconst key: string = item.getAttribute(this.options.dataAttributes.key);\r\n\t\t\t\t\t\tif (key.trim().toUpperCase().indexOf(searchValue) === -1) {\r\n\t\t\t\t\t\t\titems.mismatched.push(item);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titems.coinciding.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tthis.visibility.hide(items.mismatched);\r\n\t\t\t\tthis.visibility.show(items.coinciding);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getDefaultOptions(): Partial<TFilterListOptions> {\r\n\t\treturn {\r\n\t\t\tclasses: {\r\n\t\t\t\tlist: 'js-filterList',\r\n\t\t\t\titem: 'js-filterListItem',\r\n\t\t\t},\r\n\t\t\tdataAttributes: {\r\n\t\t\t\tkey: 'data-filter-list-key',\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import {EAnimationType, IAnimation, TAnimationClasses, TAnimationOption} from \"@modules/animation/model\";\r\n\r\nexport default class Animation implements IAnimation {\r\n\tprivate frames: Array<any>\r\n\tprivate framesRun: boolean\r\n\tprivate canAnimate: boolean\r\n\tprivate raf: (callback: FrameRequestCallback) => number;\r\n\tprivate element: HTMLElement;\r\n\r\n\tprivate option: TAnimationOption;\r\n\r\n\tconstructor(element: HTMLElement, options?: TAnimationOption) {\r\n\t\tthis.element = element;\r\n\t\tthis.raf = window.requestAnimationFrame;\r\n\r\n\t\tlet divTest = document.createElement(\"div\");\r\n\r\n\t\t/* checking browser for necessary opportunities */\r\n\t\tthis.canAnimate = (typeof this.raf === \"function\") &&\r\n\t\t\t(\"classList\" in divTest) &&\r\n\t\t\ttypeof divTest.style.transition !== undefined;\r\n\r\n\t\tif (this.canAnimate) {\r\n\t\t\tthis.raf = this.raf.bind(window);\r\n\t\t}\r\n\r\n\t\t/* requestAnimationFrame queue */\r\n\t\tthis.frames = [];\r\n\t\tthis.framesRun = false;\r\n\r\n\t\tthis.option = this.calcOptions(options);\r\n\t}\r\n\r\n\tpublic show(): void {\r\n\t\tif (!this.canAnimate) {\r\n\t\t\tthis.showVisuality(this.element);\r\n\t\t}\r\n\r\n\t\tif (!this.isHidden(this.element)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t/* set handler on animation finish */\r\n\t\tthis.setFinishHandler(() => {\r\n\t\t\tthis.removeClasses(this.element, this.option.enterClassNames.enterActive);\r\n\t\t\tthis.removeClasses(this.element, this.option.enterClassNames.enterTo);\r\n\t\t\tthis.option.afterEnter(this.element);\r\n\t\t});\r\n\r\n\t\tthis.showVisuality(this.element);\r\n\t\tthis.addClasses(this.element, this.option.enterClassNames.enter);\r\n\t\tthis.option.beforeEnter(this.element);\r\n\r\n\t\tthis.addFrame(() => {\r\n\t\t\tthis.addClasses(this.element, this.option.enterClassNames.enterActive);\r\n\t\t});\r\n\r\n\t\tthis.addFrame(() => {\r\n\t\t\tthis.removeClasses(this.element, this.option.enterClassNames.enter);\r\n\t\t\tthis.addClasses(this.element, this.option.enterClassNames.enterTo);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic hide(): void {\r\n\t\tif (!this.canAnimate) {\r\n\t\t\tthis.hideVisuality(this.element);\r\n\t\t}\r\n\r\n\t\tif (this.isHidden(this.element)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setFinishHandler(() => {\r\n\t\t\tthis.hideVisuality(this.element);\r\n\t\t\tthis.removeClasses(this.element, this.option.leaveClassNames.leaveActive);\r\n\t\t\tthis.removeClasses(this.element, this.option.leaveClassNames.leaveTo);\r\n\t\t\t// this.option.systemOnEnd && this.option.systemOnEnd();\r\n\t\t\tthis.option.afterLeave(this.element);\r\n\t\t});\r\n\r\n\t\tthis.addClasses(this.element, this.option.leaveClassNames.leave);\r\n\r\n\t\tthis.option.beforeLeave(this.element);\r\n\r\n\t\tthis.addFrame(() => {\r\n\t\t\tthis.addClasses(this.element, this.option.leaveClassNames.leaveActive);\r\n\t\t});\r\n\r\n\t\tthis.addFrame(() => {\r\n\t\t\tthis.addClasses(this.element, this.option.leaveClassNames.leaveTo);\r\n\t\t\tthis.removeClasses(this.element, this.option.leaveClassNames.leave);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic insert(target: HTMLElement | Document, before: Node = null): void {\r\n\t\tthis.hideVisuality(this.element);\r\n\t\ttarget.insertBefore(this.element, before);\r\n\t\tthis.show();\r\n\t}\r\n\r\n\tpublic remove(): void {\r\n\t\tthis.option.systemDoneCallback = function () {\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\r\n\t\tthis.hide();\r\n\t}\r\n\r\n\tprivate setFinishHandler(fn: () => void): void {\r\n\t\tlet eventName: string;\r\n\t\tlet isCssTrack: boolean = true;\r\n\r\n\t\tif (this.option.type === 'transition') {\r\n\t\t\teventName = 'transitionend';\r\n\t\t} else if (this.option.type === 'animation') {\r\n\t\t\teventName = 'animationend';\r\n\t\t} else {\r\n\t\t\tisCssTrack = false;\r\n\t\t}\r\n\r\n\t\tif (isCssTrack) {\r\n\t\t\tlet handler = () => {\r\n\t\t\t\tthis.element.removeEventListener(eventName, handler);\r\n\t\t\t\tfn();\r\n\t\t\t};\r\n\r\n\t\t\tthis.element.addEventListener(eventName, handler);\r\n\t\t} else {\r\n\t\t\tsetTimeout(fn, this.option.duration);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate calcOptions(options?: TAnimationOption): TAnimationOption {\r\n\t\treturn {\r\n\t\t\t...this.getDefaultOption(options),\r\n\t\t\t...options\r\n\t\t};\r\n\t}\r\n\r\n\tprivate getDefaultOption(options?: TAnimationOption): Partial<TAnimationOption> {\r\n\t\tconst name: string = 'animation-class';\r\n\t\treturn {\r\n\t\t\tname: name,\r\n\t\t\tenterName: options.enterName || options.name || name,\r\n\t\t\tleaveName: options.leaveName || options.name || name,\r\n\t\t\ttype: EAnimationType.TRANSITION,\r\n\t\t\tduration: null,\r\n\t\t\tenterClassNames: this.getClassNames(options.enterName || options.name || name),\r\n\t\t\tleaveClassNames: this.getClassNames(options.leaveName || options.name || name),\r\n\t\t\tdisplayProperty: 'block',\r\n\t\t\tbeforeEnter: (el) => {\r\n\t\t\t},\r\n\t\t\tafterEnter: (el) => {\r\n\t\t\t},\r\n\t\t\tbeforeLeave: (el) => {\r\n\t\t\t},\r\n\t\t\tafterLeave: (el) => {\r\n\t\t\t},\r\n\t\t\tsystemDoneCallback: (el) => {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getClassNames(name: string): TAnimationClasses {\r\n\t\treturn {\r\n\t\t\tenter: name + '-enter',\r\n\t\t\tenterActive: name + '-enter-active',\r\n\t\t\tenterTo: name + '-enter-to',\r\n\t\t\tleave: name + '-leave',\r\n\t\t\tleaveActive: name + '-leave-active',\r\n\t\t\tleaveTo: name + '-leave-to'\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addFrame(fn: () => void): void {\r\n\t\tthis.frames.push(fn);\r\n\r\n\t\tif (!this.framesRun) {\r\n\t\t\tthis.nextFrame();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate nextFrame(): void {\r\n\t\tif (this.frames.length === 0) {\r\n\t\t\tthis.framesRun = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst frame: () => void = this.frames.shift();\r\n\r\n\t\tthis.raf(() => {\r\n\t\t\tthis.raf(() => {\r\n\t\t\t\tframe();\r\n\t\t\t\tthis.nextFrame();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate addClasses(el: HTMLElement, str: string): void {\r\n\t\tstr\r\n\t\t\t.split(' ')\r\n\t\t\t.forEach(value => {\r\n\t\t\t\tel.classList.add(value);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate removeClasses(el: HTMLElement, str: string): void {\r\n\t\tstr\r\n\t\t\t.split(' ')\r\n\t\t\t.forEach(value => {\r\n\t\t\t\tel.classList.remove(value);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate hideVisuality(el: HTMLElement): void {\r\n\t\tel.style.display = 'none';\r\n\t}\r\n\r\n\tprivate showVisuality(el: HTMLElement): void {\r\n\t\tel.style.removeProperty('display');\r\n\r\n\t\tif (this.isHidden(el)) {\r\n\t\t\tel.style.display = this.option.displayProperty;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isHidden(el): boolean {\r\n\t\treturn this.getStyle(el, 'display') === 'none';\r\n\t}\r\n\r\n\tprivate getStyle(el, prop): string {\r\n\t\treturn getComputedStyle(el)[prop];\r\n\t}\r\n}\r\n","export default class DialogOpening {\r\n\tprivate static instance: DialogOpening;\r\n\r\n\tprivate numberOpenWindows: number = 0;\r\n\r\n\tconstructor() {\r\n\t\tif (DialogOpening.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use DialogOpening.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tDialogOpening.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance(): DialogOpening {\r\n\t\tif (!DialogOpening.instance) {\r\n\t\t\tDialogOpening.instance = new DialogOpening();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic show(): void {\r\n\t\tthis.numberOpenWindows += 1;\r\n\t}\r\n\r\n\tpublic hide(): void {\r\n\t\tthis.numberOpenWindows -= 1;\r\n\t\tif (this.numberOpenWindows < 0) {\r\n\t\t\tthis.numberOpenWindows = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic hasOpen(): boolean {\r\n\t\treturn this.numberOpenWindows > 0;\r\n\t}\r\n}\r\n","export default class CreateEvent {\r\n\tconstructor(private eventName: string) {\r\n\t}\r\n\r\n\tpublic createDefault(\r\n\t\tconfig: EventInit = {cancelable: true, bubbles: true}\r\n\t): Event {\r\n\t\tlet event: Event;\r\n\t\tif (typeof Event === 'function') {\r\n\t\t\tevent = new Event(this.eventName);\r\n\t\t} else {\r\n\t\t\tevent = document.createEvent('Event');\r\n\t\t\tevent.initEvent(this.eventName, config.bubbles, config.cancelable);\r\n\t\t}\r\n\t\treturn event;\r\n\t}\r\n\r\n\tpublic createCustom(\r\n\t\tconfig: CustomEventInit = {cancelable: true, bubbles: true}\r\n\t): CustomEvent {\r\n\t\tlet event: CustomEvent;\r\n\r\n\t\tif (typeof window.CustomEvent === 'function') {\r\n\t\t\tevent = new CustomEvent(this.eventName);\r\n\t\t} else {\r\n\t\t\tevent = document.createEvent('CustomEvent');\r\n\t\t}\r\n\t\tevent.initCustomEvent(\r\n\t\t\tthis.eventName,\r\n\t\t\tconfig.bubbles,\r\n\t\t\tconfig.cancelable,\r\n\t\t\tconfig.detail || ''\r\n\t\t);\r\n\t\treturn event;\r\n\t}\r\n}\r\n","import {IScrollable, TScrollableIndents, TScrollableOptions} from \"@modules/scroll/model\";\r\n\r\nexport default class Scrollable implements IScrollable {\r\n\tprivate CLASS_UTIL_SCROLL_OVERFLOW: string = 'u-overflow-hidden';\r\n\r\n\tprivate handlerEl: HTMLElement;\r\n\r\n\tprivate options: TScrollableOptions;\r\n\r\n\tconstructor(handler?: HTMLElement, options?: TScrollableOptions) {\r\n\t\tthis.handlerEl = handler || document.body;\r\n\t\tthis.options = {\r\n\t\t\t...this.getDefaultOptions(),\r\n\t\t\t...options,\r\n\t\t}\r\n\t}\r\n\r\n\tpublic enable(): void {\r\n\t\tif (this.options.saveScrollIndent) {\r\n\t\t\tthis.removeScrollIndent();\r\n\t\t}\r\n\t\tthis.handlerEl.classList.remove(this.CLASS_UTIL_SCROLL_OVERFLOW);\r\n\t}\r\n\r\n\tpublic disable(): void {\r\n\t\tif (this.options.saveScrollIndent) {\r\n\t\t\tthis.addScrollIndent();\r\n\t\t}\r\n\t\tthis.handlerEl.classList.add(this.CLASS_UTIL_SCROLL_OVERFLOW);\r\n\t}\r\n\r\n\tprivate addScrollIndent(): void {\r\n\t\tconst indents: TScrollableIndents = this.getIndents();\r\n\t\tthis.handlerEl.style.paddingRight = `${indents.container + indents.scroll}px`;\r\n\t}\r\n\r\n\tprivate removeScrollIndent(): void {\r\n\t\tthis.handlerEl.style.paddingRight = '';\r\n\t}\r\n\r\n\tprivate getIndents(): TScrollableIndents {\r\n\t\tlet containerIndent: number = 0;\r\n\t\tlet handlerStyle = window.getComputedStyle(this.handlerEl);\r\n\t\tif (handlerStyle) {\r\n\t\t\tcontainerIndent = parseFloat(handlerStyle.paddingRight);\r\n\t\t}\r\n\t\tlet scrollIndent = window.innerWidth - document.body.clientWidth;\r\n\r\n\t\treturn {\r\n\t\t\tscroll: scrollIndent,\r\n\t\t\tcontainer: containerIndent,\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDefaultOptions(): TScrollableOptions {\r\n\t\treturn {\r\n\t\t\tsaveScrollIndent: false,\r\n\t\t}\r\n\t}\r\n}\r\n","import {isHTMLElement, stringToHTML} from \"@helpers/index\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport {EAnimationType} from \"@modules/animation/model\";\r\nimport DialogOpening from \"@modules/dialog/DialogOpening\";\r\nimport {EDialogState, IDialog, TDialogOptions} from \"@modules/dialog/model\";\r\nimport CreateEvent from \"@modules/event/Event\";\r\nimport {IScrollable} from \"@modules/scroll/model\";\r\nimport Scrollable from \"@modules/scroll/Scrollable\";\r\nimport {BehaviorSubject, fromEvent, Observable} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class Dialog<TOptions extends TDialogOptions> implements IDialog {\r\n\tprivate dialogEl: HTMLElement;\r\n\tprivate viewEl: HTMLElement;\r\n\r\n\tprivate parentEl: HTMLElement;\r\n\r\n\tprivate animation: Animation;\r\n\tprivate animationView: Animation;\r\n\r\n\tprivate onClickStream: BehaviorSubject<Event> = new BehaviorSubject<Event>(null);\r\n\r\n\tprivate _options: TOptions;\r\n\r\n\tprivate dialogOpening: DialogOpening = DialogOpening.getInstance();\r\n\r\n\tprivate scrollable: IScrollable = new Scrollable(document.body, {\r\n\t\tsaveScrollIndent: true,\r\n\t});\r\n\r\n\tconstructor(options?: TOptions) {\r\n\t\tconst defaultOptions: TDialogOptions = this.getDefaultOptions();\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...options,\r\n\t\t\tanimation: {\r\n\t\t\t\t...defaultOptions.animation,\r\n\t\t\t\t...options.animation,\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.scrollable.disable();\r\n\t\tthis.dialogOpening.show();\r\n\t\tthis.animation.insert(document.body);\r\n\r\n\t\tif (this.animationView) {\r\n\t\t\tthis.animationView.show();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tif (!this.options.closable) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.animation.hide();\r\n\r\n\t\tif (this.animationView) {\r\n\t\t\tthis.animationView.hide();\r\n\t\t}\r\n\t\tthis.dialogOpening.hide();\r\n\t\tif (!this.dialogOpening.hasOpen()) {\r\n\t\t\tthis.scrollable.enable();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getState(): EDialogState {\r\n\t\treturn this.dialogEl.classList.contains(this._options.stateClasses.open) ? EDialogState.OPEN : EDialogState.CLOSED;\r\n\t}\r\n\r\n\tpublic destroy(): void {\r\n\t\tthis.dialogEl.remove();\r\n\t}\r\n\r\n\tpublic getViewEl(): HTMLElement {\r\n\t\treturn this.viewEl;\r\n\t}\r\n\r\n\tpublic getDialogEl(): HTMLElement {\r\n\t\treturn this.dialogEl;\r\n\t}\r\n\r\n\tpublic getOnClickStream(): Observable<Event> {\r\n\t\treturn this.onClickStream\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => Boolean(event))\r\n\t\t\t)\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.initElements();\r\n\t\tthis.initState();\r\n\t\tthis.attachEventOnClick();\r\n\t\tthis.initAnimation();\r\n\t}\r\n\r\n\tprivate initAnimation(): void {\r\n\t\tthis.animation = new Animation(this.dialogEl, {\r\n\t\t\t...this._options.animation.dialogOption,\r\n\t\t\tbeforeEnter: () => {\r\n\t\t\t\tif (this._options.hooks?.beforeOpen) {\r\n\t\t\t\t\tthis._options.hooks.beforeOpen();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterEnter: (el) => {\r\n\t\t\t\tthis.clearClassState();\r\n\t\t\t\tthis.dispatchEvent(EDialogState.OPEN);\r\n\t\t\t\tthis.setClassState(EDialogState.OPEN);\r\n\r\n\t\t\t\tif (this._options.hooks?.afterOpen) {\r\n\t\t\t\t\tthis._options.hooks.afterOpen();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._options.animation.dialogOption?.afterEnter) {\r\n\t\t\t\t\tthis._options.animation.dialogOption.afterEnter(el);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeLeave: () => {\r\n\t\t\t\tif (this._options.hooks?.beforeClose) {\r\n\t\t\t\t\tthis._options.hooks.beforeClose();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterLeave: (el) => {\r\n\t\t\t\tif (this.parentEl) {\r\n\t\t\t\t\tthis.parentEl.appendChild(this.dialogEl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.clearClassState();\r\n\t\t\t\tthis.dispatchEvent(EDialogState.CLOSED);\r\n\t\t\t\tthis.setClassState(EDialogState.CLOSED);\r\n\r\n\t\t\t\tif (this._options.hooks?.afterClose) {\r\n\t\t\t\t\tthis._options.hooks.afterClose();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this._options.animation.dialogOption?.afterLeave) {\r\n\t\t\t\t\tthis._options.animation.dialogOption.afterLeave(el);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (this._options.animation.viewOption) {\r\n\t\t\tthis.animationView = new Animation(\r\n\t\t\t\tthis.viewEl,\r\n\t\t\t\tthis._options.animation.viewOption\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDefaultOptions(): Partial<TDialogOptions> {\r\n\t\treturn {\r\n\t\t\telement: \"create\",\r\n\t\t\tclosable: true,\r\n\t\t\tmaskClosable: true,\r\n\t\t\thasBackdrop: true,\r\n\t\t\tclasses: {\r\n\t\t\t\tdialog: 'js-dialog',\r\n\t\t\t\tview: 'js-dialogView',\r\n\t\t\t},\r\n\t\t\tstateClasses: {\r\n\t\t\t\topen: 'is-open',\r\n\t\t\t\tclosed: 'is-closed',\r\n\t\t\t},\r\n\t\t\tactionClasses: {\r\n\t\t\t\tclose: 'js-dialogCloseHandler',\r\n\t\t\t},\r\n\t\t\tanimation: {\r\n\t\t\t\tdialogOption: {\r\n\t\t\t\t\tname: 'o-animation-fade-in',\r\n\t\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t\t},\r\n\t\t\t\tviewOption: {\r\n\t\t\t\t\tname: 'o-animation-zoom-in',\r\n\t\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tif (this._options.element === \"create\") {\r\n\t\t\tthis.dialogEl = this.create();\r\n\t\t} else {\r\n\t\t\tif (!isHTMLElement(this._options.element)) {\r\n\t\t\t\tthrow new Error('Dialog: Element is for HTMLElement !');\r\n\t\t\t}\r\n\t\t\tthis.dialogEl = this._options.element;\r\n\t\t}\r\n\t\tthis.findElements();\r\n\t\tthis.parentEl = this.dialogEl.parentElement;\r\n\t}\r\n\r\n\tprivate create(): HTMLDialogElement {\r\n\t\tconst template: string = this.getTemplate();\r\n\t\tconst templateEl: HTMLElement = stringToHTML(template);\r\n\t\treturn document.body.appendChild(templateEl) as HTMLDialogElement;\r\n\t}\r\n\r\n\tprotected getTemplate(): string {\r\n\t\treturn `\r\n\t\t\t  <dialod class=\"c-dialog ${this._options.classes.dialog} ${this._options.hasBackdrop ? 'c-dialog_backdrop' : ''}\" role=\"dialog\">\r\n\t\t\t\t<div class=\"c-dialog__view ${this._options.classes.view}\"></div>\r\n\t\t\t  </dialod>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.viewEl = this.dialogEl.querySelector(`.${this._options.classes.view}`);\r\n\t}\r\n\r\n\tprivate initState(): void {\r\n\t\tthis.dialogEl.classList.add(this._options.stateClasses.closed);\r\n\t}\r\n\r\n\tprivate attachEventOnClick(): void {\r\n\t\tfromEvent(this.dialogEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tconst target: HTMLElement = event.target as HTMLElement;\r\n\t\t\t\tconst view: HTMLElement = target.closest(`.${this._options.classes.view}`);\r\n\t\t\t\tconst close: HTMLElement = target.closest(`.${this._options.actionClasses.close}`);\r\n\r\n\t\t\t\t//handler click close btn\r\n\t\t\t\tif (close) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//handler click mask\r\n\t\t\t\tif (!view) {\r\n\t\t\t\t\tif (this._options.maskClosable && this.getState() === EDialogState.OPEN) {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.onClickStream.next(event);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate setClassState(state: EDialogState): void {\r\n\t\tswitch (state) {\r\n\t\t\tcase EDialogState.OPEN:\r\n\t\t\t\tthis.dialogEl.classList.add(this._options.stateClasses.open);\r\n\t\t\t\treturn;\r\n\t\t\tcase EDialogState.CLOSED:\r\n\t\t\t\tthis.dialogEl.classList.add(this._options.stateClasses.closed);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate clearClassState(): void {\r\n\t\tthis.dialogEl.classList.remove(this._options.stateClasses.open);\r\n\t\tthis.dialogEl.classList.remove(this._options.stateClasses.closed);\r\n\t}\r\n\r\n\tprivate dispatchEvent(state: EDialogState): boolean {\r\n\t\tlet event: Event;\r\n\r\n\t\tif (state == EDialogState.OPEN) {\r\n\t\t\tevent = new CreateEvent('open').createCustom();\r\n\t\t} else {\r\n\t\t\tevent = new CreateEvent('closed').createCustom();\r\n\t\t}\r\n\r\n\t\tconst canceled: boolean = !this.dialogEl.dispatchEvent(event);\r\n\t\treturn !canceled;\r\n\t}\r\n\r\n\tget options(): TOptions {\r\n\t\treturn this._options;\r\n\t}\r\n\r\n\tset options(options: TOptions) {\r\n\t\tthis._options = {\r\n\t\t\t...this.options,\r\n\t\t\t...options,\r\n\t\t};\r\n\t}\r\n\r\n\tset closable(state: boolean) {\r\n\t\tthis.options.closable = state;\r\n\t}\r\n\r\n\tset maskClosable(state: boolean) {\r\n\t\tthis.options.maskClosable = state;\r\n\t}\r\n}\r\n","import {IModal, TModalOptions} from \"@modules/modal/model\";\r\nimport Dialog from \"@modules/dialog/Dialog\";\r\n\r\nexport default class Modal extends Dialog<TModalOptions> implements IModal {\r\n\tprivate contentEl: HTMLElement;\r\n\tprivate headerEl: HTMLElement;\r\n\tprivate extraTopEl: HTMLElement;\r\n\tprivate bodyEl: HTMLElement;\r\n\tprivate footerEl: HTMLElement;\r\n\tprivate titleEl: HTMLElement;\r\n\r\n\tconstructor(options?: TModalOptions) {\r\n\t\tsuper({\r\n\t\t\telement: \"create\",\r\n\t\t\tmodifications: [],\r\n\t\t\tmaskClosable: true,\r\n\t\t\tclosable: true,\r\n\t\t\tclasses: {\r\n\t\t\t\tdialog: 'js-modal',\r\n\t\t\t\tview: 'js-modalView',\r\n\t\t\t\tcontent: 'js-modalContent',\r\n\t\t\t\theader: 'js-modalHeader',\r\n\t\t\t\textraTop: 'js-modalExtraTop',\r\n\t\t\t\tbody: 'js-modalBody',\r\n\t\t\t\tfooter: 'js-modalFooter',\r\n\t\t\t\ttitle: 'js-modalTitle',\r\n\t\t\t},\r\n\t\t\tactionClasses: {\r\n\t\t\t\tclose: 'js-modalClose',\r\n\t\t\t\tcloseIcon: 'js-modalCloseIcon',\r\n\t\t\t},\r\n\t\t\t...options,\r\n\t\t});\r\n\t\tthis.findModalElements();\r\n\t\tthis.setBackdrop();\r\n\t}\r\n\r\n\tpublic getContentEl(): HTMLElement {\r\n\t\treturn this.contentEl;\r\n\t}\r\n\r\n\tpublic getHeaderEl(): HTMLElement {\r\n\t\treturn this.headerEl;\r\n\t}\r\n\r\n\tpublic getExtraTopEl(): HTMLElement {\r\n\t\treturn this.extraTopEl;\r\n\t}\r\n\r\n\tpublic getBodyEl(): HTMLElement {\r\n\t\treturn this.bodyEl;\r\n\t}\r\n\r\n\tpublic getFooterEl(): HTMLElement {\r\n\t\treturn this.footerEl;\r\n\t}\r\n\r\n\tpublic getTitleEl(): HTMLElement {\r\n\t\treturn this.titleEl;\r\n\t}\r\n\r\n\tpublic updateContent(): void {\r\n\t\tthis.findModalElements();\r\n\t}\r\n\r\n\tprotected getTemplate(): string {\r\n\t\tconst modifications: string = this.options.modifications.join(' ');\r\n\t\treturn `\r\n      <dialog class=\"c-modal ${modifications} ${this.options.classes.dialog} ${this.options.hasBackdrop ? 'c-modal_backdrop' : ''}\">\r\n        <div class=\"c-modal__view ${this.options.classes.view}\">\r\n          <div class=\"c-modal__content ${this.options.classes.content}\">\r\n            <header class=\"c-modal__header ${this.options.classes.header}\">\r\n              <h5 class=\"c-modal__title ${this.options.classes.title}\">${this.options.title}</h5>\r\n              <button class=\"c-modal__close ${this.options.actionClasses.close} ${this.options.actionClasses.closeIcon}\">\r\n                <i class=\"o-icon o-icon_close-filled\"></i>\r\n              </button>\r\n            </header>\r\n            <div class=\"c-modal__extra-top ${this.options.classes.extraTop}\"></div>\r\n            <div class=\"c-modal__body ${this.options.classes.body} js-customScroll\"></div>\r\n            <footer class=\"c-modal__footer ${this.options.classes.footer}\"></footer>\r\n          </div>\r\n        </div>\r\n      </dialog>\r\n    `;\r\n\t}\r\n\r\n\tprivate findModalElements(): void {\r\n\t\tthis.contentEl = this.getViewEl().querySelector(`.${this.options.classes.content}`);\r\n\t\tthis.headerEl = this.getViewEl().querySelector(`.${this.options.classes.header}`);\r\n\t\tthis.extraTopEl = this.getViewEl().querySelector(`.${this.options.classes.extraTop}`);\r\n\t\tthis.bodyEl = this.getViewEl().querySelector(`.${this.options.classes.body}`);\r\n\t\tthis.footerEl = this.getViewEl().querySelector(`.${this.options.classes.footer}`);\r\n\t\tthis.titleEl = this.getViewEl().querySelector(`.${this.options.classes.title}`);\r\n\t}\r\n\r\n\tprivate setBackdrop(): void {\r\n\t\tif (this.options.hasBackdrop) {\r\n\t\t\tthis.getDialogEl().classList.add('c-modal_backdrop');\r\n\t\t}\r\n\t}\r\n\r\n\tset closable(state: boolean) {\r\n\t\tthis.options.closable = state;\r\n\t}\r\n\r\n\tset maskClosable(state: boolean) {\r\n\t\tthis.options.maskClosable = state;\r\n\t}\r\n}\r\n","import {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {ICitySelection} from \"@modules/city/model\";\r\nimport FilterList from \"@modules/filter-list/FilterList\";\r\nimport {IFilterList} from \"@modules/filter-list/model\";\r\nimport Modal from \"@modules/modal/Modal\";\r\nimport {IModal} from \"@modules/modal/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter, map} from \"rxjs/operators\";\r\n\r\nexport default class CitySelection implements ICitySelection {\r\n\tprivate CLASS_SEARCH_FIELD: string = 'js-citySelectionSearchField';\r\n\tprivate CLASS_LIST: string = 'js-citySelectionList';\r\n\tprivate CLASS_ITEM: string = 'js-citySelectionItem';\r\n\tprivate CLASS_FORM: string = 'js-citySelectionForm';\r\n\tprivate CLASS_INPUT: string = 'js-citySelectionInput';\r\n\r\n\tprivate ID_MODAL: string = 'js-citySelectionModal';\r\n\r\n\tprivate DATA_ATTR_VALUE: string = 'data-selection-city-value';\r\n\r\n\tprivate static instance: ICitySelection;\r\n\r\n\tprivate modalEL: HTMLDialogElement;\r\n\tprivate searchInputEl: HTMLInputElement;\r\n\tprivate listEl: HTMLElement;\r\n\tprivate formEl: HTMLFormElement;\r\n\tprivate inputEl: HTMLInputElement;\r\n\r\n\tprivate modal: IModal;\r\n\tprivate filterList: IFilterList;\r\n\r\n\tconstructor() {\r\n\t\tif (CitySelection.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use CitySelection.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tCitySelection.instance = this;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic static getInstance(): ICitySelection {\r\n\t\tif (!CitySelection.instance) {\r\n\t\t\tCitySelection.instance = new CitySelection();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.modal.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.modal.close();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.modalEL = document.getElementById(this.ID_MODAL) as HTMLDialogElement;\r\n\t\tif (!this.modalEL) {\r\n\t\t\t// throw new Error('CitySelection: modal is not defined !');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.modal = new Modal({\r\n\t\t\telement: this.modalEL,\r\n\t\t\tmaskClosable: false,\r\n\t\t});\r\n\t\tthis.findElements();\r\n\t\tthis.filterList = new FilterList({\r\n\t\t\tinput: this.searchInputEl,\r\n\t\t\tlist: this.listEl,\r\n\t\t\tclasses: {\r\n\t\t\t\titem: this.CLASS_ITEM\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_ITEM}`;\r\n\t\tfromEvent(this.listEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t\tmap(event => getDefinitionElement(event.target as HTMLElement, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(item => {\r\n\t\t\t\tthis.inputEl.value = item.getAttribute(this.DATA_ATTR_VALUE);\r\n\t\t\t\twindow.history.pushState({}, document.title, this.getNewURL())\r\n\t\t\t\tthis.formEl.submit();\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getNewURL(): string {\r\n\t\tconst url: URL = new URL(window.location.href);\r\n\t\turl.searchParams.delete('page');\r\n\t\treturn url.href;\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.searchInputEl = this.modal.getContentEl().querySelector(`.${this.CLASS_SEARCH_FIELD}`);\r\n\t\tif (!this.searchInputEl) {\r\n\t\t\tthrow new Error('CitySelection: search input is not defined !');\r\n\t\t}\r\n\t\tthis.listEl = this.modal.getContentEl().querySelector(`.${this.CLASS_LIST}`);\r\n\t\tif (!this.listEl) {\r\n\t\t\tthrow new Error('CitySelection: list is not defined !');\r\n\t\t}\r\n\t\tthis.formEl = this.modal.getContentEl().querySelector(`.${this.CLASS_FORM}`);\r\n\t\tif (!this.listEl) {\r\n\t\t\tthrow new Error('CitySelection: form is not defined !');\r\n\t\t}\r\n\t\tthis.inputEl = this.modal.getContentEl().querySelector(`.${this.CLASS_INPUT}`);\r\n\t\tif (!this.listEl) {\r\n\t\t\tthrow new Error('CitySelection: input city is not defined !');\r\n\t\t}\r\n\t}\r\n}\r\n","export enum EEnvironmentType {\r\n\tDEVELOPMENT = 'DEVELOPMENT',\r\n\tPRODUCTION = 'PRODUCTION',\r\n}\r\n","//Collapse\r\nexport interface ICollapse {\r\n\topen(): void\r\n\r\n\tclose(): void\r\n\r\n\ttoggle(): void\r\n\r\n\tgetState(): ECollapseState\r\n\r\n\tgetHTMLElement(): HTMLElement\r\n}\r\n\r\nexport type TCollapseOption = {\r\n\tclasses?: TCollapseClasses\r\n\tstateClasses?: TCollapseStateClasses\r\n\thooks?: TCollapseHooks\r\n}\r\n\r\nexport type TCollapseClasses = {\r\n\tblock?: string\r\n\thandler?: string\r\n\tcontainer?: string\r\n}\r\n\r\nexport type TCollapseStateClasses = {\r\n\topen?: string\r\n\tclose?: string\r\n}\r\n\r\nexport type TCollapseHooks = {\r\n\tbeforeClose?: (instance: ICollapse) => void\r\n\tbeforeOpen?: (instance: ICollapse) => void\r\n\tafterClose?: (instance: ICollapse) => void\r\n\tafterOpen?: (instance: ICollapse) => void\r\n}\r\n\r\nexport enum ECollapseState {\r\n\tOPEN = 'OPEN',\r\n\tCLOSED = 'CLOSED',\r\n}\r\n\r\nexport enum ECollapseType {\r\n\tDEFAULT,\r\n\tANIMATED,\r\n}\r\n\r\n//Collapse end\r\n\r\n\r\n//CollapseGroup\r\nexport type TCollapseGroupOption = {\r\n\tclasses?: TCollapseGroupClasses\r\n\tdataAttributes?: TCollapseGroupDataAttributes\r\n}\r\n\r\nexport type TCollapseGroupDataAttributes = {\r\n\taccordion?: string\r\n}\r\n\r\nexport type TCollapseGroupClasses = {\r\n\tgroup?: string\r\n\titem?: string\r\n}\r\n\r\nexport type TCollapseGroupItem = {\r\n\telement: HTMLElement,\r\n\tinstance: ICollapse\r\n}\r\n//CollapseGroup end\r\n\r\n\r\n//Factory\r\nexport interface ICollapseFactory {\r\n\tcreateCollapse(blockEl: HTMLElement, option?: TCollapseOption): ICollapse\r\n\r\n\tcreateCollapseAnimated(blockEl: HTMLElement, option?: TCollapseOption): ICollapse\r\n}\r\n","import {TAnimationOption} from \"@modules/animation/model\";\r\n\r\nexport interface IDropdown {\r\n\topen(): void\r\n\r\n\tclose(): void\r\n\r\n\ttoggle(): void\r\n\r\n\tgetState(): EDropdownState\r\n}\r\n\r\nexport type TDropdownOption = {\r\n\tclasses?: TDropdownClasses\r\n\tstateClasses?: TDropdownStateClasses\r\n\tanimation?: TAnimationOption\r\n\thooks?: TDropdownHooks\r\n\tcloseAnyClick?: boolean\r\n}\r\n\r\nexport type TDropdownClasses = {\r\n\tblock?: string\r\n\thandler?: string\r\n\tcontainer?: string\r\n\titem?: string\r\n}\r\n\r\nexport type TDropdownStateClasses = {\r\n\topen?: string\r\n\topens?: string\r\n\tclose?: string\r\n\tcloses?: string\r\n}\r\n\r\nexport type TDropdownHooks = {\r\n\tonItemClick?: (item: HTMLElement) => void\r\n\tafterClose?: () => void\r\n\tafterOpen?: () => void\r\n}\r\n\r\nexport enum EDropdownState {\r\n\tOPEN = 'OPEN',\r\n\tCLOSED = 'CLOSED',\r\n}\r\n","import {ICookie} from \"@modules/cookie/model\";\r\nimport Cookies, {CookieAttributes} from \"js-cookie\";\r\n\r\nexport default class Cookie implements ICookie {\r\n\tprivate static instance: ICookie;\r\n\r\n\tconstructor() {\r\n\t\tif (Cookie.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use Cookie.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tCookie.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance(): ICookie {\r\n\t\tif (!Cookie.instance) {\r\n\t\t\tCookie.instance = new Cookie();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic has(name: string): boolean {\r\n\t\treturn Boolean(this.get(name));\r\n\t}\r\n\r\n\tpublic get(name: string): string {\r\n\t\treturn Cookies.get(name)\r\n\t}\r\n\r\n\tpublic set(name: string, value: string, options?: CookieAttributes): void {\r\n\t\tCookies.set(name, value, options)\r\n\t}\r\n\r\n\tpublic delete(name: string): void {\r\n\t\tCookies.remove(name);\r\n\t}\r\n}\r\n\r\n","import {EEnvironmentType} from \"@modules/env/model\";\r\n\r\ndeclare var process;\r\n\r\nexport default class Environment {\r\n\tstatic getEnv(): EEnvironmentType {\r\n\t\treturn process.env.NODE_ENV === 'development' ? EEnvironmentType.DEVELOPMENT : EEnvironmentType.PRODUCTION;\r\n\t}\r\n}\r\n","import CitySelection from \"@modules/city/CitySelection\";\r\nimport {IConfirmCity} from \"@modules/city/model\";\r\nimport Cookie from \"@modules/cookie/Cookie\";\r\nimport {ICookie} from \"@modules/cookie/model\";\r\nimport Modal from \"@modules/modal/Modal\";\r\nimport {IModal} from \"@modules/modal/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport Environment from \"@modules/env/Environment\";\r\nimport {EEnvironmentType} from \"@modules/env/model\";\r\n\r\nexport default class ConfirmCity implements IConfirmCity {\r\n\tprivate CLASS_FORM: string = 'js-confirmCityForm';\r\n\tprivate CLASS_BTN_OK: string = 'js-confirmCityBtnOk';\r\n\tprivate CLASS_BTN_NO: string = 'js-confirmCityBtnNo';\r\n\r\n\tprivate ID_MODAL: string = 'js-confirmCityModal';\r\n\tprivate COOKIE_NAME_CITY: string = 'market_city';\r\n\r\n\tprivate static instance: IConfirmCity;\r\n\r\n\tprivate modalEl: HTMLDialogElement;\r\n\tprivate formEl: HTMLFormElement;\r\n\tprivate btnOk: HTMLButtonElement;\r\n\tprivate btnNo: HTMLButtonElement;\r\n\r\n\tprivate modal: IModal;\r\n\tprivate cookie: ICookie = Cookie.getInstance();\r\n\r\n\tconstructor() {\r\n\t\tif (ConfirmCity.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use ConfirmCity.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tConfirmCity.instance = this;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic static getInstance(): IConfirmCity {\r\n\t\tif (!ConfirmCity.instance) {\r\n\t\t\tConfirmCity.instance = new ConfirmCity();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.modal.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.modal.close();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.modalEl = document.getElementById(this.ID_MODAL) as HTMLDialogElement;\r\n\t\tif (!this.modalEl) {\r\n\t\t\t// throw new Error('ConfirmCity: modal is not defined !');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.findElement();\r\n\t\tthis.modal = new Modal({\r\n\t\t\tmaskClosable: false,\r\n\t\t\tclosable: false,\r\n\t\t\telement: this.modalEl,\r\n\t\t});\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate findElement(): void {\r\n\t\tthis.formEl = this.modalEl.querySelector(`.${this.CLASS_FORM}`);\r\n\t\tif (!this.formEl) {\r\n\t\t\tthrow new Error('ConfirmCity: form is not defined !');\r\n\t\t}\r\n\t\tthis.btnOk = this.modalEl.querySelector(`.${this.CLASS_BTN_OK}`);\r\n\t\tif (!this.btnOk) {\r\n\t\t\tthrow new Error('ConfirmCity: btn ok is not defined !');\r\n\t\t}\r\n\t\tthis.btnNo = this.modalEl.querySelector(`.${this.CLASS_BTN_NO}`);\r\n\t\tif (!this.btnNo) {\r\n\t\t\tthrow new Error('ConfirmCity: btn no is not defined !');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\taddEventListener(\"load\", () => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst isProdMode = Environment.getEnv() === EEnvironmentType.PRODUCTION;\r\n\t\t\t\tconst hasCityCookie = this.cookie.has(this.COOKIE_NAME_CITY);\r\n\t\t\t\tif (isProdMode && !hasCityCookie) {\r\n\t\t\t\t\tthis.open();\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t});\r\n\r\n\t\tfromEvent(this.btnOk, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.formEl.submit();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.btnNo, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tCitySelection.getInstance().open();\r\n\t\t\t\tthis.close();\r\n\t\t\t});\r\n\t}\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\nimport CreateEvent from \"@modules/event/Event\";\r\nimport {ECollapseState, ICollapse, TCollapseOption} from \"@modules/collapse/model\";\r\n\r\nexport default class Collapse implements ICollapse {\r\n\tprotected blockEl: HTMLElement;\r\n\tprotected handlerEl: HTMLElement;\r\n\tprotected containerEl: HTMLElement;\r\n\r\n\tprivate option: TCollapseOption;\r\n\r\n\tconstructor(\r\n\t\tblockEl: HTMLElement,\r\n\t\toptions?: TCollapseOption\r\n\t) {\r\n\t\tthis.blockEl = blockEl;\r\n\t\tthis.option = {\r\n\t\t\t...this.getDefaultOption(),\r\n\t\t\t...options,\r\n\t\t};\r\n\t\tthis.initElements();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.hooksBeforeOpen();\r\n\t\tthis.openWithoutHooks();\r\n\t\tthis.hooksAfterOpen();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.hooksBeforeClose();\r\n\t\tthis.closeWithoutHooks();\r\n\t\tthis.hooksAfterClose();\r\n\t}\r\n\r\n\tpublic toggle(): void {\r\n\t\tif (this.getState() == ECollapseState.OPEN) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getState(): ECollapseState {\r\n\t\tconst hasOpenClass: boolean = this.blockEl.classList.contains(this.option.stateClasses.open);\r\n\t\treturn hasOpenClass ? ECollapseState.OPEN : ECollapseState.CLOSED;\r\n\t}\r\n\r\n\tpublic getHTMLElement(): HTMLElement {\r\n\t\treturn this.blockEl;\r\n\t}\r\n\r\n\tprotected hooksBeforeOpen(): void {\r\n\t\tif (this.option?.hooks?.beforeOpen) {\r\n\t\t\tthis.option.hooks.beforeOpen(this);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected hooksAfterOpen(): void {\r\n\t\tif (this.option?.hooks?.afterOpen) {\r\n\t\t\tthis.option.hooks.afterOpen(this);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected openWithoutHooks(): void {\r\n\t\tthis.clearClassState();\r\n\t\tthis.setClassOpen();\r\n\t\tthis.dispatchEvent(ECollapseState.OPEN);\r\n\t}\r\n\r\n\tprotected hooksBeforeClose(): void {\r\n\t\tif (this.option?.hooks?.beforeClose) {\r\n\t\t\tthis.option.hooks.beforeClose(this);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected hooksAfterClose(): void {\r\n\t\tif (this.option?.hooks?.afterClose) {\r\n\t\t\tthis.option.hooks.afterClose(this);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected closeWithoutHooks(): void {\r\n\t\tthis.clearClassState();\r\n\t\tthis.setClassClose();\r\n\t\tthis.dispatchEvent(ECollapseState.CLOSED);\r\n\t}\r\n\r\n\tprivate getDefaultOption(): TCollapseOption {\r\n\t\treturn {\r\n\t\t\tclasses: {\r\n\t\t\t\tblock: 'js-collapse',\r\n\t\t\t\thandler: 'js-collapseHandler',\r\n\t\t\t\tcontainer: 'js-collapseContainer',\r\n\t\t\t},\r\n\t\t\tstateClasses: {\r\n\t\t\t\topen: 'is-open',\r\n\t\t\t\tclose: 'is-close',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tif (this.handlerEl) {\r\n\t\t\tfromEvent(this.handlerEl, 'click')\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tthis.toggle();\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tthis.findElements();\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.containerEl = this.blockEl.querySelector(`.${this.option.classes.container}`);\r\n\t\tif (!this.containerEl) {\r\n\t\t\tthrow new Error('Collapse: container is not defined !');\r\n\t\t}\r\n\r\n\t\tthis.handlerEl = this.blockEl.querySelector(`.${this.option.classes.handler}`);\r\n\t}\r\n\r\n\tprivate clearClassState(): void {\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.open);\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.close);\r\n\t}\r\n\r\n\tprivate setClassOpen(): void {\r\n\t\tthis.blockEl.classList.add(this.option.stateClasses.open);\r\n\t}\r\n\r\n\tprivate setClassClose(): void {\r\n\t\tthis.blockEl.classList.add(this.option.stateClasses.close);\r\n\t}\r\n\r\n\tprivate dispatchEvent(state: ECollapseState): boolean {\r\n\t\tlet event: Event;\r\n\r\n\t\tif (state == ECollapseState.OPEN) {\r\n\t\t\tevent = new CreateEvent('open').createCustom();\r\n\t\t} else {\r\n\t\t\tevent = new CreateEvent('closed').createCustom();\r\n\t\t}\r\n\r\n\t\tconst canceled: boolean = !this.blockEl.dispatchEvent(event);\r\n\t\treturn !canceled;\r\n\t}\r\n}\r\n","import {EAnimationType, IAnimation} from \"@modules/animation/model\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport {ICollapse, TCollapseOption} from \"@modules/collapse/model\";\r\nimport Collapse from \"@modules/collapse/Collapse\";\r\n\r\nexport default class CollapseAnimated extends Collapse implements ICollapse {\r\n\tprivate animation: IAnimation;\r\n\r\n\tconstructor(blockEl: HTMLElement, options?: TCollapseOption) {\r\n\t\tsuper(blockEl, options);\r\n\r\n\t\tthis.animation = this.getAnimation();\r\n\t}\r\n\r\n\tpublic open() {\r\n\t\tthis.hooksBeforeOpen();\r\n\t\tthis.animation.show();\r\n\t}\r\n\r\n\tpublic close() {\r\n\t\tthis.hooksBeforeClose();\r\n\t\tthis.animation.hide();\r\n\t}\r\n\r\n\tprivate getAnimation(): IAnimation {\r\n\t\treturn new Animation(\r\n\t\t\tthis.containerEl,\r\n\t\t\t{\r\n\t\t\t\tname: 'o-animation-height',\r\n\t\t\t\ttype: EAnimationType.TRANSITION,\r\n\t\t\t\tbeforeEnter: () => {\r\n\t\t\t\t\tconst height = this.getContainerHeight();\r\n\t\t\t\t\tthis.containerEl.style.maxHeight = '0px';\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.containerEl.style.maxHeight = height + 'px';\r\n\t\t\t\t\t}, 60);\r\n\t\t\t\t},\r\n\t\t\t\tafterEnter: () => {\r\n\t\t\t\t\tsuper.openWithoutHooks();\r\n\t\t\t\t\tthis.hooksAfterOpen();\r\n\t\t\t\t\tthis.containerEl.style.maxHeight = '';\r\n\t\t\t\t},\r\n\t\t\t\tbeforeLeave: () => {\r\n\t\t\t\t\tconst height = this.getContainerHeight();\r\n\t\t\t\t\tthis.containerEl.style.maxHeight = height + 'px';\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.containerEl.style.maxHeight = '0px';\r\n\t\t\t\t\t}, 60);\r\n\t\t\t\t},\r\n\t\t\t\tafterLeave: () => {\r\n\t\t\t\t\tsuper.closeWithoutHooks();\r\n\t\t\t\t\tthis.hooksAfterClose();\r\n\t\t\t\t\tthis.containerEl.style.maxHeight = '';\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\r\n\tprivate getContainerHeight(): number {\r\n\t\t// this.containerEl.style.display = 'block';\r\n\t\treturn this.containerEl.offsetHeight;\r\n\t}\r\n}\r\n","import {ICollapse, ICollapseFactory, TCollapseOption} from \"@modules/collapse/model\";\r\nimport Collapse from \"@modules/collapse/Collapse\";\r\nimport CollapseAnimated from \"@modules/collapse/CollapseAnimated\";\r\n\r\nexport default class CollapseFactory implements ICollapseFactory {\r\n\tpublic createCollapse(blockEl: HTMLElement, option: TCollapseOption): ICollapse {\r\n\t\treturn new Collapse(blockEl, option)\r\n\t}\r\n\r\n\tpublic createCollapseAnimated(blockEl: HTMLElement, option: TCollapseOption): ICollapse {\r\n\t\treturn new CollapseAnimated(blockEl, option);\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {ECollapseType, ICollapseFactory} from \"@modules/collapse/model\";\r\nimport CollapseFactory from \"@modules/collapse/CollapseFactory\";\r\n\r\nexport default class CollapseAutoActivation extends DynamicInsertionElements {\r\n\tprivate collapseFactory: ICollapseFactory = new CollapseFactory();\r\n\r\n\tconstructor(\r\n\t\tprivate handler: string,\r\n\t\tprivate name: string,\r\n\t\tprivate type: ECollapseType = ECollapseType.DEFAULT,\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.handler)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.getDataActivatedName()))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.getDataActivatedName(), 'true');\r\n\r\n\t\t\tif (this.type === ECollapseType.DEFAULT) {\r\n\t\t\t\tthis.collapseFactory.createCollapse(handler);\r\n\t\t\t} else if (this.type === ECollapseType.ANIMATED) {\r\n\t\t\t\tthis.collapseFactory.createCollapseAnimated(handler);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getDataActivatedName(): string {\r\n\t\treturn `data-${this.name}-activated`\r\n\t}\r\n}\r\n","import {\r\n\tECollapseState,\r\n\tECollapseType,\r\n\tICollapse,\r\n\tICollapseFactory,\r\n\tTCollapseGroupItem,\r\n\tTCollapseGroupOption,\r\n\tTCollapseOption\r\n} from \"@modules/collapse/model\";\r\nimport CollapseFactory from \"@modules/collapse/CollapseFactory\";\r\n\r\nexport default class CollapseGroup {\r\n\tprotected groupEl: HTMLElement;\r\n\r\n\tprivate option: TCollapseGroupOption;\r\n\tprivate type: ECollapseType;\r\n\r\n\tprivate itemCollection: Array<TCollapseGroupItem> = [];\r\n\r\n\tprivate collapseFactory: ICollapseFactory = new CollapseFactory();\r\n\r\n\tprivate accordionMode: boolean;\r\n\r\n\tconstructor(\r\n\t\tgroupEl: HTMLElement,\r\n\t\ttype: ECollapseType = ECollapseType.DEFAULT,\r\n\t\toption?: TCollapseGroupOption,\r\n\t) {\r\n\t\tthis.type = type;\r\n\t\tthis.groupEl = groupEl;\r\n\t\tthis.option = {\r\n\t\t\t...this.getDefaultOption(),\r\n\t\t\t...option,\r\n\t\t};\r\n\t\tthis.accordionMode = this.getAccordionMode();\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tprivate getDefaultOption(): TCollapseGroupOption {\r\n\t\treturn {\r\n\t\t\tclasses: {\r\n\t\t\t\tgroup: 'js-accordionGroup',\r\n\t\t\t\titem: 'js-accordionGroupItem',\r\n\t\t\t},\r\n\t\t\tdataAttributes: {\r\n\t\t\t\taccordion: 'data-accordion',\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tconst els: Array<HTMLElement> = Array.from(\r\n\t\t\tthis.groupEl.querySelectorAll(`.${this.option.classes.item}`)\r\n\t\t);\r\n\t\tels.forEach(el => {\r\n\t\t\tthis.itemCollection.push({\r\n\t\t\t\telement: el,\r\n\t\t\t\tinstance: this.getCollapse(el),\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getCollapse(el: HTMLElement): ICollapse {\r\n\t\tconst option: TCollapseOption = {\r\n\t\t\thooks: {\r\n\t\t\t\tbeforeOpen: (instance) => {\r\n\t\t\t\t\tif (this.accordionMode) {\r\n\t\t\t\t\t\tthis.handleAccordion(instance);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.type === ECollapseType.ANIMATED) {\r\n\t\t\treturn this.collapseFactory.createCollapseAnimated(el, option);\r\n\t\t} else {\r\n\t\t\treturn this.collapseFactory.createCollapse(el, option);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getAccordionMode(): boolean {\r\n\t\treturn this.groupEl.hasAttribute(this.option.dataAttributes.accordion);\r\n\t}\r\n\r\n\tprivate handleAccordion(activeCollapse: ICollapse): void {\r\n\t\tthis.itemCollection\r\n\t\t\t.filter(item => item.instance.getState() === ECollapseState.OPEN)\r\n\t\t\t.filter(item => item.instance !== activeCollapse)\r\n\t\t\t.forEach(item => {\r\n\t\t\t\titem.instance.close();\r\n\t\t\t});\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {ECollapseType} from \"@modules/collapse/model\";\r\nimport CollapseGroup from \"@modules/collapse/CollapseGroup\";\r\n\r\nexport default class CollapseGroupActivation extends DynamicInsertionElements {\r\n\tconstructor(\r\n\t\tprivate handler: string,\r\n\t\tprivate name: string,\r\n\t\tprivate type: ECollapseType = ECollapseType.DEFAULT,\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.handler)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.getDataActivatedName()))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.getDataActivatedName(), 'true');\r\n\r\n\t\t\tnew CollapseGroup(handler, this.type);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getDataActivatedName(): string {\r\n\t\treturn `data-${this.name}-activated`\r\n\t}\r\n}\r\n","import {fromEvent, Observable} from \"rxjs\";\r\nimport {IGlobalClick} from \"@modules/global-click/model\";\r\n\r\nexport default class GlobalClick implements IGlobalClick {\r\n\tprivate static instance: GlobalClick;\r\n\r\n\tprivate streamOnClick: Observable<Event>;\r\n\r\n\tconstructor() {\r\n\t\tif (GlobalClick.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use GlobalClick.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tGlobalClick.instance = this;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic static getInstance() {\r\n\t\tif (!GlobalClick.instance) {\r\n\t\t\tGlobalClick.instance = new GlobalClick();\r\n\t\t}\r\n\t\treturn GlobalClick.instance;\r\n\t}\r\n\r\n\tpublic getStreamOnClick(): Observable<Event> {\r\n\t\treturn this.streamOnClick;\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.streamOnClick = fromEvent(document, 'click');\r\n\t}\r\n}\r\n","import {EDropdownState, IDropdown, TDropdownOption} from \"@modules/dropdown/model\";\r\nimport {EAnimationType, IAnimation} from \"@modules/animation/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport {getDefinitionElement} from \"@helpers/index\";\r\nimport CreateEvent from \"@modules/event/Event\";\r\nimport GlobalClick from \"@modules/global-click/GlobalClick\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class Dropdown implements IDropdown {\r\n\tprivate blockEl: HTMLElement;\r\n\tprivate containerEl: HTMLElement;\r\n\r\n\tprivate option: TDropdownOption;\r\n\r\n\tprivate animation: IAnimation;\r\n\r\n\tconstructor(handlerEl: HTMLElement, options?: TDropdownOption) {\r\n\t\tthis.blockEl = handlerEl;\r\n\t\tthis.option = {\r\n\t\t\t...this.getDefaultOption(),\r\n\t\t\t...options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.initElements();\r\n\t\tthis.initAnimation();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.animation.show();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.animation.hide();\r\n\t}\r\n\r\n\tpublic getState(): EDropdownState {\r\n\t\tconst hasOpenClass: boolean = this.blockEl.classList.contains(this.option.stateClasses.open);\r\n\t\treturn hasOpenClass ? EDropdownState.OPEN : EDropdownState.CLOSED;\r\n\t}\r\n\r\n\tpublic toggle(): void {\r\n\t\tif (this.getState() == EDropdownState.OPEN) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDefaultOption(): TDropdownOption {\r\n\t\treturn {\r\n\t\t\tcloseAnyClick: true,\r\n\t\t\tanimation: {\r\n\t\t\t\tname: 'o-animation-fade-down',\r\n\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t},\r\n\t\t\tclasses: {\r\n\t\t\t\tblock: 'js-dropdown',\r\n\t\t\t\thandler: 'js-dropdownHandler',\r\n\t\t\t\tcontainer: 'js-dropdownContainer',\r\n\t\t\t\titem: 'js-dropdownItem',\r\n\t\t\t},\r\n\t\t\tstateClasses: {\r\n\t\t\t\topen: 'is-open',\r\n\t\t\t\topens: 'is-opens',\r\n\t\t\t\tclose: 'is-close',\r\n\t\t\t\tcloses: 'is-closes',\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.blockEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tconst handler: HTMLElement = getDefinitionElement(event.target as HTMLElement, `.${this.option.classes.handler}`);\r\n\t\t\t\tconst item: HTMLElement = getDefinitionElement(event.target as HTMLElement, `.${this.option.classes.item}`);\r\n\t\t\t\tif (handler) {\r\n\t\t\t\t\tthis.toggle();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tif (this.option?.hooks?.onItemClick) {\r\n\t\t\t\t\t\tthis.option?.hooks?.onItemClick(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\tGlobalClick\r\n\t\t\t.getInstance()\r\n\t\t\t.getStreamOnClick()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => getDefinitionElement(event.target as HTMLElement, `.${this.option.classes.block}`) !== this.blockEl),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tif (!this.option.closeAnyClick) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.getState() === EDropdownState.OPEN) {\r\n\t\t\t\t\tthis.toggle();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate initAnimation(): void {\r\n\t\tthis.animation = new Animation(this.containerEl, {\r\n\t\t\t...this.option.animation,\r\n\t\t\tbeforeEnter: () => {\r\n\t\t\t\tthis.clearClassEntering();\r\n\t\t\t\tthis.setClassEntering(EDropdownState.OPEN);\r\n\t\t\t},\r\n\t\t\tbeforeLeave: () => {\r\n\t\t\t\tthis.clearClassEntering();\r\n\t\t\t},\r\n\t\t\tafterEnter: () => {\r\n\t\t\t\tthis.clearClassEntering();\r\n\t\t\t\tthis.clearClassState();\r\n\t\t\t\tthis.dispatchEvent(EDropdownState.OPEN);\r\n\t\t\t\tthis.setClassState(EDropdownState.OPEN);\r\n\t\t\t\tthis.setClassEntering(EDropdownState.OPEN);\r\n\r\n\t\t\t\tif (this.option?.hooks?.afterOpen) {\r\n\t\t\t\t\tthis.option.hooks.afterOpen();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tafterLeave: () => {\r\n\t\t\t\tthis.clearClassEntering();\r\n\t\t\t\tthis.clearClassState();\r\n\t\t\t\tthis.dispatchEvent(EDropdownState.CLOSED);\r\n\t\t\t\tthis.setClassState(EDropdownState.CLOSED);\r\n\r\n\t\t\t\tif (this.option?.hooks?.afterClose) {\r\n\t\t\t\t\tthis.option.hooks.afterClose();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tthis.findElements();\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.containerEl = this.blockEl.querySelector(`.${this.option.classes.container}`);\r\n\t}\r\n\r\n\tprivate clearClassState(): void {\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.open);\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.close);\r\n\t}\r\n\r\n\tprivate clearClassEntering(): void {\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.opens);\r\n\t\tthis.blockEl.classList.remove(this.option.stateClasses.closes);\r\n\t}\r\n\r\n\tprivate setClassState(state: EDropdownState): void {\r\n\t\tswitch (state) {\r\n\t\t\tcase EDropdownState.OPEN:\r\n\t\t\t\tthis.blockEl.classList.add(this.option.stateClasses.open);\r\n\t\t\t\treturn;\r\n\t\t\tcase EDropdownState.CLOSED:\r\n\t\t\t\tthis.blockEl.classList.add(this.option.stateClasses.close);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setClassEntering(state: EDropdownState): void {\r\n\t\tswitch (state) {\r\n\t\t\tcase EDropdownState.OPEN:\r\n\t\t\t\tthis.blockEl.classList.add(this.option.stateClasses.opens);\r\n\t\t\t\treturn;\r\n\t\t\tcase EDropdownState.CLOSED:\r\n\t\t\t\tthis.blockEl.classList.add(this.option.stateClasses.closes);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate dispatchEvent(state: EDropdownState): boolean {\r\n\t\tlet event: Event;\r\n\r\n\t\tif (state == EDropdownState.OPEN) {\r\n\t\t\tevent = new CreateEvent('open').createCustom();\r\n\t\t} else {\r\n\t\t\tevent = new CreateEvent('closed').createCustom();\r\n\t\t}\r\n\r\n\t\tconst canceled: boolean = !this.blockEl.dispatchEvent(event);\r\n\t\treturn !canceled;\r\n\t}\r\n}\r\n","export default class HandleEmptyContent {\r\n\tprivate _handlerEl: HTMLElement;\r\n\r\n\tprivate mutationObserver: MutationObserver;\r\n\r\n\tconstructor(handlerEl: HTMLElement) {\r\n\t\tthis._handlerEl = handlerEl;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tget handlerEl(): HTMLElement {\r\n\t\treturn this._handlerEl;\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.attachEvent();\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.mutationObserver = new MutationObserver((events: MutationRecord[]) => {\r\n\t\t\tevents.forEach(event => {\r\n\t\t\t\tif (event.addedNodes.length || event.removedNodes.length) {\r\n\t\t\t\t\tthis.update();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.mutationObserver.observe(this._handlerEl, {\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected update(): void {\r\n\r\n\t}\r\n\r\n}\r\n","import HandleEmptyContent from \"@modules/handle-empty-content/HandleEmptyContent\";\r\n\r\nexport default class HandleEmptyContentRefresh extends HandleEmptyContent {\r\n\tconstructor(handlerEl: HTMLElement) {\r\n\t\tsuper(handlerEl);\r\n\t}\r\n\r\n\tprotected update(): void {\r\n\t\tconst length: number = this.handlerEl.children.length;\r\n\r\n\t\tif (length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\twindow.location.reload();\r\n\t}\r\n}\r\n","import HandleEmptyContent from \"@modules/handle-empty-content/HandleEmptyContent\";\r\nimport {IVisibility} from \"@modules/visibility/model\";\r\nimport Visibility from \"@modules/visibility/Visibility\";\r\n\r\nexport default class HandleEmptyContentVisibility extends HandleEmptyContent {\r\n\tprivate DATA_ATTR_CLASS_VISIBLE_EMPTY: string = 'data-class-visible-empty';\r\n\tprivate DATA_ATTR_CLASS_VISIBLE_NOT_EMPTY: string = 'data-class-visible-not-empty';\r\n\r\n\tprivate classVisibleEmpty: string;\r\n\tprivate classVisibleNotEmpty: string;\r\n\r\n\tprivate visibility: IVisibility = new Visibility();\r\n\r\n\tconstructor(handlerEl: HTMLElement) {\r\n\t\tsuper(handlerEl);\r\n\t\tthis.getClasses();\r\n\t}\r\n\r\n\tprivate getClasses(): void {\r\n\t\tthis.classVisibleEmpty = this.handlerEl.getAttribute(this.DATA_ATTR_CLASS_VISIBLE_EMPTY);\r\n\t\tthis.classVisibleNotEmpty = this.handlerEl.getAttribute(this.DATA_ATTR_CLASS_VISIBLE_NOT_EMPTY);\r\n\t}\r\n\r\n\tprivate getVisibleEmptyItems(): Array<HTMLElement> {\r\n\t\treturn Array.from(\r\n\t\t\tdocument.getElementsByClassName(this.classVisibleEmpty)\r\n\t\t) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprivate getVisibleNotEmptyItems(): Array<HTMLElement> {\r\n\t\treturn Array.from(\r\n\t\t\tdocument.getElementsByClassName(this.classVisibleNotEmpty)\r\n\t\t) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprotected update(): void {\r\n\t\tconst length: number = this.handlerEl.children.length;\r\n\r\n\t\tthis.getVisibleEmptyItems().forEach(item => {\r\n\t\t\tlength ? this.visibility.hide(item) : this.visibility.show(item);\r\n\t\t});\r\n\t\tthis.getVisibleNotEmptyItems().forEach(item => {\r\n\t\t\tlength ? this.visibility.show(item) : this.visibility.hide(item);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n","//from - https://unmanner.github.io/imaskjs/guide.html#support-older\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport IMask from 'imask';\r\n\r\nexport type TMaskFormats = {\r\n\t[key in EMaskTypes]: TMaskFormat;\r\n}\r\n\r\nexport type TMaskFormat = {\r\n\tplaceholder: string;\r\n\tclass: string;\r\n\toption: IMask.AnyMaskedOptions;\r\n}\r\n\r\nexport enum EMaskTypes {\r\n\tPHONE = 'PHONE',\r\n\tDATE = 'DATE',\r\n\tIIN = 'IIN',\r\n\tVISA_CARD = 'VISA_CARD',\r\n\tPASSPORT = 'PASSPORT',\r\n\tID_CARD = 'ID_CARD',\r\n\tNUMBER = 'NUMBER',\r\n\tSMS_CODE = 'SMS_CODE',\r\n\tNUMBER_LATIN_UPPER = 'NUMBER_LATIN_UPPER',\r\n\tLATIN_UPPER = 'LATIN_UPPER',\r\n\tMONEY = 'MONEY',\r\n}\r\n\r\nexport const MASK_FORMATS: TMaskFormats = {\r\n\t[EMaskTypes.PHONE]: {\r\n\t\tplaceholder: '+7 (xxx) xxx-xx-xx',\r\n\t\tclass: 'js-maskPhone',\r\n\t\toption: {\r\n\t\t\tmask: '{+7} (000) 000-00-00',\r\n\t\t\tlazy: true,\r\n\t\t\tplaceholderChar: 'x',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.DATE]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskDate',\r\n\t\toption: {\r\n\t\t\tmask: Date,\r\n\t\t\toverwrite: true,\r\n\t\t\tautofix: true,\r\n\t\t\tmin: new Date(1500, 0, 1),\r\n\t\t\tmax: new Date(9999, 0, 1),\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.IIN]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskIIN',\r\n\t\toption: {\r\n\t\t\tmask: '00000000000000',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.VISA_CARD]: {\r\n\t\tplaceholder: '0000 0000 0000 0000',\r\n\t\tclass: 'js-maskVisaCard',\r\n\t\toption: {\r\n\t\t\tmask: '0000 0000 0000 0000',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.PASSPORT]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskPassport',\r\n\t\toption: {\r\n\t\t\tmask: '000000000000',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.ID_CARD]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskIdCard',\r\n\t\toption: {\r\n\t\t\tmask: '0000000',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.NUMBER]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskNumber',\r\n\t\toption: {\r\n\t\t\tmask: /^\\d+$/,\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.SMS_CODE]: {\r\n\t\tplaceholder: '0000',\r\n\t\tclass: 'js-maskSMSCode',\r\n\t\toption: {\r\n\t\t\tmask: '0000',\r\n\t\t\tlazy: false,\r\n\t\t\tplaceholderChar: '-',\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.NUMBER_LATIN_UPPER]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskNumberLatinUpper',\r\n\t\toption: {\r\n\t\t\tmask: /^[A-z0-9]+$/,\r\n\t\t\tprepare: function (value: string) {\r\n\t\t\t\treturn value.toUpperCase();\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.LATIN_UPPER]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskLatinUpper',\r\n\t\toption: {\r\n\t\t\tmask: /^[A-z]+$/,\r\n\t\t\tprepare: function (value: string) {\r\n\t\t\t\treturn value.toUpperCase();\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\t[EMaskTypes.MONEY]: {\r\n\t\tplaceholder: '',\r\n\t\tclass: 'js-maskMoney',\r\n\t\toption: {\r\n\t\t\tmask: Number,\r\n\t\t\tthousandsSeparator: ' ',\r\n\t\t\tmin: 0,\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default class Mask extends DynamicInsertionElements {\r\n\tprivate DATA_ACTIVATED: string = 'data-mask-activated';\r\n\r\n\tprivate formats: TMaskFormats = MASK_FORMATS;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tstatic getFormattedValue(value: string, maskType: EMaskTypes): string {\r\n\t\tconst maskFormat: TMaskFormat = MASK_FORMATS[maskType];\r\n\t\tif (!maskFormat) {\r\n\t\t\tthrow new Error(`mask with key ${maskType} not found`)\r\n\t\t}\r\n\t\tconst mask = IMask.createMask(maskFormat.option);\r\n\t\tmask.resolve(value);\r\n\r\n\t\treturn mask.value;\r\n\t}\r\n\r\n\tstatic isCompleteValue(value: string, maskType: EMaskTypes): boolean {\r\n\t\tconst maskFormat: TMaskFormat = MASK_FORMATS[maskType];\r\n\t\tif (!maskFormat) {\r\n\t\t\tthrow new Error(`mask with key ${maskType} not found`)\r\n\t\t}\r\n\t\tconst mask = IMask.createMask(maskFormat.option);\r\n\t\tmask.resolve(value);\r\n\t\treturn mask.isComplete;\r\n\t}\r\n\r\n\tstatic getUnmaskedValue(value: string, maskType: EMaskTypes): string {\r\n\t\tconst maskFormat: TMaskFormat = MASK_FORMATS[maskType];\r\n\t\tif (!maskFormat) {\r\n\t\t\tthrow new Error(`mask with key ${maskType} not found`)\r\n\t\t}\r\n\t\tconst mask = IMask.createMask(maskFormat.option);\r\n\t\tmask.resolve(value);\r\n\r\n\t\treturn mask.unmaskedValue;\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tfor (let key in this.formats) {\r\n\t\t\tconst fields: Array<HTMLInputElement> = Array.from(\r\n\t\t\t\tdocument.getElementsByClassName(this.formats[key].class)\r\n\t\t\t) as Array<HTMLInputElement>;\r\n\t\t\tfields.forEach(field => {\r\n\t\t\t\tif (strToBoolean(field.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tfield.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\t\tIMask(\r\n\t\t\t\t\tfield,\r\n\t\t\t\t\tthis.formats[key].option,\r\n\t\t\t\t);\r\n\t\t\t\t// (fields.item(i) as HTMLInputElement).placeholder = this.formats[\r\n\t\t\t\t//     key\r\n\t\t\t\t// ].placeholder;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n","export default class SmoothScroll {\r\n\r\n\tconstructor(private options?: ScrollIntoViewOptions) {\r\n\t}\r\n\r\n\tpublic scrollTo(element: HTMLElement): void {\r\n\t\t// window.scrollTo({\r\n\t\t// \ttop: this.getTopPosition(element),\r\n\t\t// \tbehavior: this.options?.behavior || \"smooth\"\r\n\t\t// });\r\n\r\n\t\telement.scrollIntoView({\r\n\t\t\t...{\r\n\t\t\t\tbehavior: 'smooth',\r\n\t\t\t}, ...this.options\r\n\t\t});\r\n\t}\r\n\r\n\tpublic scrollToTop(): void {\r\n\t\twindow.scrollTo({\r\n\t\t\ttop: 0,\r\n\t\t\tbehavior: this.options?.behavior || \"smooth\"\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getTopPosition(element: HTMLElement): number {\r\n\t\tlet top: number = 0;\r\n\t\t// const fixedHeader: HTMLElement = document.getElementById(EIdsLayout.header);\r\n\t\t// if (fixedHeader) {\r\n\t\t// \ttop -= fixedHeader.offsetHeight;\r\n\t\t// }\r\n\t\ttop += element.offsetTop;\r\n\t\treturn top;\r\n\t}\r\n}\r\n","import {IPlatform} from \"@modules/platform/model\";\r\n\r\nexport default class Platform implements IPlatform {\r\n\tprivate static instance: IPlatform;\r\n\r\n\tconstructor() {\r\n\t\tif (Platform.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use Platform.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tPlatform.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance(): IPlatform {\r\n\t\tif (!Platform.instance) {\r\n\t\t\tPlatform.instance = new Platform();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic isAndroid(): boolean {\r\n\t\treturn navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1\r\n\t}\r\n\r\n\tpublic isMobile(): boolean {\r\n\t\tconst fromUserAgent: boolean = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n\t\tconst fromCSSPointer: boolean = window.matchMedia(\"(pointer:coarse)\").matches;\r\n\t\treturn fromUserAgent || fromCSSPointer;\r\n\t}\r\n}\r\n","import {IChecklist} from \"@components/checklist/model\";\r\n\r\nexport default class Checklist implements IChecklist {\r\n\tprivate CLASS_CHECKED: string = 'c-checklist__item_checked';\r\n\r\n\tpublic checked(...items): void {\r\n\t\titems.filter(item => {\r\n\t\t\titem.classList.add(this.CLASS_CHECKED);\r\n\t\t})\r\n\t}\r\n\r\n\tpublic unchecked(...items): void {\r\n\t\titems.filter(item => {\r\n\t\t\titem.classList.remove(this.CLASS_CHECKED);\r\n\t\t})\r\n\t}\r\n\r\n\tpublic isChecked(item: HTMLElement): boolean {\r\n\t\treturn item.classList.contains(this.CLASS_CHECKED);\r\n\t}\r\n}\r\n","import {IDialog, TDialogActionClasses, TDialogClasses, TDialogOptions} from \"@modules/dialog/model\";\r\n\r\nexport interface IModal extends IDialog {\r\n\tupdateContent(): void\r\n\r\n\tgetViewEl(): HTMLElement\r\n\r\n\tgetContentEl(): HTMLElement\r\n\r\n\tgetHeaderEl(): HTMLElement\r\n\r\n\tgetExtraTopEl(): HTMLElement\r\n\r\n\tgetBodyEl(): HTMLElement\r\n\r\n\tgetFooterEl(): HTMLElement\r\n\r\n\tgetTitleEl(): HTMLElement\r\n\r\n\tmaskClosable: boolean\r\n\r\n\tclosable: boolean\r\n}\r\n\r\nexport type TModalOptions = TDialogOptions & {\r\n\telement?: HTMLDialogElement | 'create'\r\n\tmodifications?: Array<EModalModification>\r\n\ttitle?: string\r\n\tclasses?: TModalClasses\r\n\tactionClasses?: TModalActionClasses\r\n}\r\n\r\nexport type TModalClasses = TDialogClasses & {\r\n\tcontent?: string\r\n\theader?: string\r\n\textraTop?: string\r\n\tbody?: string\r\n\tfooter?: string\r\n\ttitle?: string\r\n}\r\n\r\nexport type TModalActionClasses = TDialogActionClasses & {\r\n\tcloseIcon?: string\r\n}\r\n\r\nexport enum EModalModification {\r\n\tFIXED_HEIGHT_MD = 'c-modal_fixed-height-md'\r\n}\r\n","import Checklist from \"@components/checklist/Checklist\";\r\nimport {IChecklist} from \"@components/checklist/model\";\r\nimport {getDefinitionElement, isDefinitionElementEvent, stringToHTML} from \"@helpers/index\";\r\nimport FilterList from \"@modules/filter-list/FilterList\";\r\nimport {IFilterList} from \"@modules/filter-list/model\";\r\nimport Modal from \"@modules/modal/Modal\";\r\nimport {EModalModification, IModal} from \"@modules/modal/model\";\r\nimport {ISelectView, TSelectItem, TSelectSelectionProperties} from \"@modules/select/model\";\r\nimport {fromEvent, Observable, Subject} from \"rxjs\";\r\nimport {filter, map} from \"rxjs/operators\";\r\n\r\nexport default class SelectViewModalAdapter implements ISelectView {\r\n\tprotected CLASS_LIST: string = 'js-selectModalList';\r\n\tprotected CLASS_ITEM: string = 'js-selectModalItem';\r\n\tprotected CLASS_BTN: string = 'js-selectModalBtn';\r\n\tprotected CLASS_FILTER_INPUT: string = 'js-selectModalFilterInput';\r\n\r\n\tprotected DATA_ATTR_ITEM_VALUE: string = 'data-select-modal-item-value';\r\n\r\n\tprotected filterInputEl: HTMLInputElement;\r\n\tprotected filterListEl: HTMLElement;\r\n\tprotected acceptBtnEl: HTMLElement;\r\n\r\n\tprotected modalInstance: IModal;\r\n\tprotected filterList: IFilterList;\r\n\tprotected checklist: IChecklist = new Checklist();\r\n\tprotected itemsState: Array<TSelectItem> = [];\r\n\r\n\tprivate streamOnSelect: Subject<Array<TSelectItem>> = new Subject<Array<TSelectItem>>();\r\n\tprivate streamOnClose: Subject<void> = new Subject<void>();\r\n\r\n\tprivate isMultiple: boolean = false;\r\n\r\n\tconstructor(protected selectionProperties: TSelectSelectionProperties) {\r\n\t\tthis.itemsState = selectionProperties.items;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tset items(items: Array<TSelectItem>) {\r\n\t\tthis.selectionProperties.items = items;\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.modalInstance.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.modalInstance.close();\r\n\t}\r\n\r\n\tpublic getStreamOnSelect(): Observable<Array<TSelectItem>> {\r\n\t\treturn this.streamOnSelect.asObservable();\r\n\t}\r\n\r\n\tpublic getStreamOnClose(): Observable<void> {\r\n\t\treturn this.streamOnClose.asObservable();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.modalInstance = new Modal({\r\n\t\t\telement: \"create\",\r\n\t\t\tmodifications: [\r\n\t\t\t\tEModalModification.FIXED_HEIGHT_MD\r\n\t\t\t],\r\n\t\t\tmaskClosable: false,\r\n\t\t\ttitle: this.selectionProperties.label,\r\n\t\t\thooks: {\r\n\t\t\t\tafterClose: () => {\r\n\t\t\t\t\tthis.filterInputEl.value = '';\r\n\t\t\t\t\tthis.filterList.showAllItems();\r\n\t\t\t\t\tthis.streamOnClose.next();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.modalInstance.getExtraTopEl().appendChild(\r\n\t\t\tstringToHTML(this.getSearchBarTemplate())\r\n\t\t);\r\n\t\tthis.modalInstance.getBodyEl().appendChild(\r\n\t\t\tstringToHTML(this.getContentTemplate())\r\n\t\t);\r\n\t\tthis.modalInstance.getFooterEl().appendChild(\r\n\t\t\tstringToHTML(this.getFooterTemplate())\r\n\t\t);\r\n\t\tthis.findElements();\r\n\t\tthis.filterList = new FilterList({\r\n\t\t\tinput: this.filterInputEl,\r\n\t\t\tlist: this.filterListEl,\r\n\t\t});\r\n\t\tthis.updateFilterListState(this.itemsState);\r\n\t\tthis.isMultiple = this.selectionProperties.select.multiple;\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.filterListEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, `.${this.CLASS_ITEM}`)),\r\n\t\t\t\tmap(event => getDefinitionElement(event.target as HTMLElement, `.${this.CLASS_ITEM}`)),\r\n\t\t\t)\r\n\t\t\t.subscribe(itemEl => {\r\n\t\t\t\tconst value: string = this.getItemValue(itemEl);\r\n\t\t\t\tconst isChecked: boolean = this.checklist.isChecked(itemEl);\r\n\t\t\t\tif (!this.isMultiple && isChecked) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.itemsState = this.itemsState.map(item => {\r\n\t\t\t\t\tif (item.value === value) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\tselected: this.isMultiple ? !item.selected : true,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\tselected: this.isMultiple ? item.selected : false,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (isChecked) {\r\n\t\t\t\t\tif (this.isMultiple) {\r\n\t\t\t\t\t\tthis.checklist.unchecked(itemEl);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.uncheckedAllIsNotMultiple();\r\n\t\t\t\t\tthis.checklist.checked(itemEl);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.acceptBtnEl, 'click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.streamOnSelect.next(this.itemsState);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate uncheckedAllIsNotMultiple(): void {\r\n\t\tif (this.isMultiple) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst items: Array<HTMLElement> = Array.from(\r\n\t\t\tthis.filterListEl.getElementsByClassName(this.CLASS_ITEM)\r\n\t\t) as Array<HTMLElement>;\r\n\t\tthis.checklist.unchecked(...items);\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.filterInputEl = this.modalInstance.getExtraTopEl().querySelector(`.${this.CLASS_FILTER_INPUT}`);\r\n\t\tthis.filterListEl = this.modalInstance.getBodyEl().querySelector(`.${this.CLASS_LIST}`);\r\n\t\tthis.acceptBtnEl = this.modalInstance.getFooterEl().querySelector(`.${this.CLASS_BTN}`);\r\n\t}\r\n\r\n\tprotected getContentTemplate(): string {\r\n\t\treturn `\r\n      <div class=\"c-checklist c-checklist_pointer c-checklist_without-separators c-checklist_sm\">\r\n        <ul class=\"c-checklist__list js-filterList ${this.CLASS_LIST}\">\r\n          ${this.getItemsTemplate()}\r\n        </ul>\r\n      </div>\r\n    `;\r\n\t}\r\n\r\n\tprotected getItemsTemplate(): string {\r\n\t\treturn this.itemsState\r\n\t\t\t.map(item => {\r\n\t\t\t\treturn this.getItemTemplate(item)\r\n\t\t\t})\r\n\t\t\t.join(' ')\r\n\t}\r\n\r\n\tprotected getItemTemplate(item: TSelectItem): string {\r\n\t\treturn `\r\n\t\t  <li class=\"c-checklist__item js-filterListItem ${this.CLASS_ITEM}\"\r\n\t\t\t  data-filter-list-key=\"${item.title}\"\r\n\t\t\t  ${this.DATA_ATTR_ITEM_VALUE}=\"${item.value}\">\r\n\t\t\t<div class=\"c-checklist__icon\">\r\n\t\t\t  <i class=\"o-icon o-icon_checkmark-filled\"></i>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"c-checklist__value\">${item.title}</span>\r\n\t\t  </li>\r\n    \t`;\r\n\t}\r\n\r\n\tprotected getSearchBarTemplate(): string {\r\n\t\treturn `\r\n\t\t  <label class=\"c-search-field js-field c-search-field_gray u-mb-12 u-min-w-100\">\r\n\t\t\t<input class=\"c-search-field__input js-filterListInput ${this.CLASS_FILTER_INPUT}\"\r\n\t\t\t\t   type=\"search\" name=\"search\" placeholder=\"\">\r\n\t\t\t  <button class=\"c-search-field__btn-clear js-clearInput\" type=\"button\">\r\n\t\t\t\t<i class=\"o-icon o-icon_close-filled\"></i>\r\n\t\t\t  </button>\r\n\t\t\t<div class=\"c-search-field__append\">\r\n\t\t\t  <button class=\"c-search-field__btn-magnifier\" type=\"submit\">\r\n\t\t\t\t<i class=\"o-icon o-icon_magnifier\"></i>\r\n\t\t\t  </button>\r\n\t\t\t</div>\r\n\t\t  </label>\r\n    \t`;\r\n\t}\r\n\r\n\tprotected getFooterTemplate(): string {\r\n\t\treturn `\r\n\t\t<button class=\"c-btn c-btn_primary c-btn_md c-btn_block ${this.CLASS_BTN}\">\r\n\t\t\t<div class=\"c-btn__loader\">\r\n\t\t\t\t<i class=\"o-icon o-icon_loader-line-filled\"></i>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"c-btn__text\">${this.selectionProperties.accept}</span>\r\n\t\t</button>\r\n    `;\r\n\t}\r\n\r\n\tprivate updateFilterListState(items: Array<TSelectItem>): void {\r\n\t\tthis.getFilterListItems()\r\n\t\t\t.forEach(checklistItem => {\r\n\t\t\t\tif (items.find(option => option.value === this.getItemValue(checklistItem)).selected) {\r\n\t\t\t\t\tthis.checklist.checked(checklistItem);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.checklist.unchecked(checklistItem);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getItemValue(item: HTMLElement): string {\r\n\t\treturn item.getAttribute(this.DATA_ATTR_ITEM_VALUE);\r\n\t}\r\n\r\n\tprivate getFilterListItems(): Array<HTMLElement> {\r\n\t\treturn Array.from(this.filterListEl.getElementsByClassName(this.CLASS_ITEM)) as Array<HTMLElement>;\r\n\t}\r\n}\r\n","import Platform from \"@modules/platform/Platform\";\r\nimport {\r\n\tISelect,\r\n\tISelectView,\r\n\tTSelectChange,\r\n\tTSelectItem,\r\n\tTSelectOptions,\r\n\tTSelectSelectionProperties\r\n} from \"@modules/select/model\";\r\nimport SelectViewModalAdapter from \"@modules/select/SelectViewModalAdapter\";\r\nimport {fromEvent, Observable, Subject} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class Select implements ISelect {\r\n\tprotected selectEl: HTMLElement;\r\n\tprotected handlerEl: HTMLElement;\r\n\tprotected originalEl: HTMLSelectElement;\r\n\tprotected outputValueEl: HTMLElement;\r\n\tprotected optionsEl: HTMLElement;\r\n\tprotected view: ISelectView;\r\n\r\n\tprivate options: TSelectOptions;\r\n\r\n\tprivate eventChange: Subject<Array<TSelectChange>> = new Subject<Array<TSelectChange>>();\r\n\r\n\tconstructor(selectEl: HTMLElement, options?: TSelectOptions) {\r\n\t\tthis.selectEl = selectEl;\r\n\t\tthis.options = {\r\n\t\t\t...this.getDefaultOption(),\r\n\t\t\t...options,\r\n\t\t};\r\n\t\tthis.initElements();\r\n\t\tconst selectionProperties: TSelectSelectionProperties = this.getSelectionProperties();\r\n\t\tthis.view = new SelectViewModalAdapter(selectionProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.syncOriginal();\r\n\t}\r\n\r\n\tprivate getDefaultOption(): TSelectOptions {\r\n\t\treturn {\r\n\t\t\tclasses: {\r\n\t\t\t\tselect: 'js-select',\r\n\t\t\t\thandler: 'js-selectHandler',\r\n\t\t\t\toriginal: 'js-selectOriginal',\r\n\t\t\t\toutputValue: 'js-selectOutputValue',\r\n\t\t\t},\r\n\t\t\tstateClasses: {\r\n\t\t\t\tdisabled: 'is-disabled',\r\n\t\t\t\tfocused: 'is-focused',\r\n\t\t\t\tmultiple: 'is-multiple',\r\n\t\t\t\topen: 'is-open',\r\n\t\t\t\tselected: 'is-selected',\r\n\t\t\t\tnative: 'is-native',\r\n\t\t\t},\r\n\t\t\tdataAttributes: {\r\n\t\t\t\tlabel: 'data-select-label',\r\n\t\t\t\tclose: 'data-select-close',\r\n\t\t\t\taccept: 'data-select-accept',\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tif (this.isDisabled()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setClassOpen();\r\n\t\tthis.view.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.removeClassOpen();\r\n\t\tthis.view.close();\r\n\t}\r\n\r\n\tpublic disabled(): void {\r\n\t\tif (this.isOpen()) {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t\tthis.originalEl.disabled = true;\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.disabled);\r\n\t\tthis.syncClassDisabled();\r\n\t}\r\n\r\n\tpublic enabled(): void {\r\n\t\tthis.originalEl.disabled = false;\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.disabled);\r\n\t\tthis.syncClassDisabled();\r\n\t}\r\n\r\n\tpublic selectByIndex(index: number): void {\r\n\t\tconst option: HTMLOptionElement = this.originalEl.options.item(index);\r\n\t\tif (!option) {\r\n\t\t\tthrow new Error(`Select: option with index ${index} not found !`);\r\n\t\t}\r\n\t\tif (option.selected) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\toption.selected = true;\r\n\t\tthis.setSelectedLabels();\r\n\t\tthis.syncClassSelected();\r\n\t\tthis.eventChange.next([\r\n\t\t\t{\r\n\t\t\t\tvalue: option.value,\r\n\t\t\t\tindex,\r\n\t\t\t}\r\n\t\t]);\r\n\t\tthis.originalEl.dispatchEvent(new Event('change'));\r\n\t}\r\n\r\n\tpublic selectByValue(value: string): void {\r\n\t\tconst option: HTMLOptionElement = Array.from(this.originalEl.options).find(option => option.value == value);\r\n\t\tif (!option) {\r\n\t\t\tthrow new Error(`Select: option with value ${value} not found !`);\r\n\t\t}\r\n\t\tthis.selectByIndex(option.index);\r\n\t}\r\n\r\n\tpublic isOpen(): boolean {\r\n\t\treturn this.selectEl.classList.contains(this.options.stateClasses.open);\r\n\t}\r\n\r\n\tpublic isMultiple(): boolean {\r\n\t\treturn this.originalEl.hasAttribute('multiple');\r\n\t}\r\n\r\n\tpublic getStreamOnChange(): Observable<Array<TSelectChange>> {\r\n\t\treturn this.eventChange.asObservable();\r\n\t}\r\n\r\n\tpublic getValue(): Array<string> {\r\n\t\treturn Array.from(this.originalEl.selectedOptions).map(option => option.value);\r\n\t}\r\n\r\n\tpublic getOriginalSelect(): HTMLSelectElement {\r\n\t\treturn this.originalEl;\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tif (this.selectEl.classList.contains(this.options.classes.handler)) {\r\n\t\t\tthis.handlerEl = this.selectEl;\r\n\t\t} else {\r\n\t\t\tthis.handlerEl = this.selectEl.querySelector(`.${this.options.classes.handler}`);\r\n\t\t\tif (!this.handlerEl) {\r\n\t\t\t\tthrow new Error('Select: header is not defined !');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.originalEl = this.selectEl.querySelector(`.${this.options.classes.original}`);\r\n\t\tif (!this.originalEl) {\r\n\t\t\tthrow new Error('Select: select is not defined !');\r\n\t\t}\r\n\r\n\t\tthis.outputValueEl = this.selectEl.querySelector(`.${this.options.classes.outputValue}`);\r\n\t\tif (!this.outputValueEl) {\r\n\t\t\tthrow new Error('Select: output value is not defined !');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.handlerEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(() => !this.isShowNative()),\r\n\t\t\t)\r\n\t\t\t.subscribe((event) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.toggle();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.originalEl, 'keydown')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(() => !this.isShowNative()),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tif ((event as any).key === \"Enter\" || (event as any).code === 'Space') {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tthis.toggle();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.originalEl, 'focus')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.setClassFocus();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.originalEl, 'blur')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.removeClassFocus();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.originalEl, 'change')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.originalEl.blur();\r\n\t\t\t\tthis.updateSelected();\r\n\t\t\t});\r\n\r\n\t\tthis.view\r\n\t\t\t.getStreamOnSelect()\r\n\t\t\t.subscribe(streamOnSelect => {\r\n\t\t\t\tthis.view.close();\r\n\t\t\t\tthis.updateOriginalSelect(streamOnSelect);\r\n\t\t\t});\r\n\r\n\t\tthis.view\r\n\t\t\t.getStreamOnClose()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.close();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate isShowNative(): boolean {\r\n\t\treturn Platform.getInstance().isMobile();\r\n\t}\r\n\r\n\tprivate isDisabled(): boolean {\r\n\t\treturn this.originalEl.disabled;\r\n\t}\r\n\r\n\tprivate syncOriginal(): void {\r\n\t\tthis.setSelectedLabels();\r\n\t\tthis.syncClassSelected();\r\n\t\tthis.syncClassDisabled();\r\n\t\tthis.syncClassNative();\r\n\t}\r\n\r\n\tprivate syncClassSelected(): void {\r\n\t\tconst selectedOptions: Array<HTMLOptionElement> = Array.from(this.originalEl.selectedOptions);\r\n\t\tif (selectedOptions.length) {\r\n\t\t\tthis.setClassSelected();\r\n\t\t} else {\r\n\t\t\tthis.removeClassSelected();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate syncClassDisabled(): void {\r\n\t\tif (this.originalEl.disabled) {\r\n\t\t\tthis.setClassDisabled();\r\n\t\t} else {\r\n\t\t\tthis.removeClassDisabled();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate syncClassNative(): void {\r\n\t\tif (this.isShowNative()) {\r\n\t\t\tthis.setClassNative();\r\n\t\t} else {\r\n\t\t\tthis.removeClassNative();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setSelectedLabels(): void {\r\n\t\tconst selectedLabels: Array<string> = Array.from(this.originalEl.selectedOptions).map(option => option.innerText);\r\n\t\tthis.outputValueEl.innerText = selectedLabels.join(', ');\r\n\t}\r\n\r\n\tprivate updateSelected(): void {\r\n\t\tconst selectedOptions: Array<HTMLOptionElement> = Array.from(this.originalEl.selectedOptions);\r\n\t\tconst items: Array<TSelectChange> = selectedOptions.map(option => {\r\n\t\t\treturn {\r\n\t\t\t\tindex: option.index,\r\n\t\t\t\tvalue: option.value,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.syncOriginal();\r\n\t\tthis.eventChange.next(items);\r\n\t}\r\n\r\n\tprotected getSelectionProperties(): TSelectSelectionProperties {\r\n\t\treturn {\r\n\t\t\tlabel: this.selectEl.getAttribute(this.options.dataAttributes.label),\r\n\t\t\tclose: this.selectEl.getAttribute(this.options.dataAttributes.close),\r\n\t\t\taccept: this.selectEl.getAttribute(this.options.dataAttributes.accept),\r\n\t\t\titems: this.getSelectItems(),\r\n\t\t\tselect: this.originalEl,\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getSelectItems(): Array<TSelectItem> {\r\n\t\treturn Array\r\n\t\t\t.from(this.originalEl.options)\r\n\t\t\t.map(option => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: option.innerText,\r\n\t\t\t\t\tvalue: option.value,\r\n\t\t\t\t\tdisabled: option.disabled,\r\n\t\t\t\t\tselected: option.selected,\r\n\t\t\t\t\toption: option,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateOriginalSelect(selectionItems: Array<TSelectItem>): void {\r\n\t\tArray\r\n\t\t\t.from(this.originalEl.options)\r\n\t\t\t.forEach(option => {\r\n\t\t\t\toption.selected = selectionItems.find(item => option.value === item.value).selected;\r\n\t\t\t});\r\n\t\tthis.originalEl.dispatchEvent(new Event('change'));\r\n\t}\r\n\r\n\tprivate setClassOpen(): void {\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.open);\r\n\t}\r\n\r\n\tprivate removeClassOpen(): void {\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.open);\r\n\t}\r\n\r\n\tprivate setClassFocus(): void {\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.focused);\r\n\t}\r\n\r\n\tprivate removeClassFocus(): void {\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.focused);\r\n\t}\r\n\r\n\tprivate setClassSelected(): void {\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.selected);\r\n\t}\r\n\r\n\tprivate removeClassSelected(): void {\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.selected);\r\n\t}\r\n\r\n\tprivate setClassDisabled(): void {\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.disabled);\r\n\t}\r\n\r\n\tprivate removeClassDisabled(): void {\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.disabled);\r\n\t}\r\n\r\n\tprivate setClassNative(): void {\r\n\t\tthis.selectEl.classList.add(this.options.stateClasses.native);\r\n\t}\r\n\r\n\tprivate removeClassNative(): void {\r\n\t\tthis.selectEl.classList.remove(this.options.stateClasses.native);\r\n\t}\r\n\r\n\tprivate toggle(): void {\r\n\t\tif (this.isOpen()) {\r\n\t\t\tthis.close()\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n}\r\n","import {getDefinitionElement, getIndexElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {ITab} from \"@modules/tab/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class Tab implements ITab {\r\n\tprivate CLASS_TAB: string = 'js-tab';\r\n\tprivate CLASS_HEADER: string = 'js-tabHeader';\r\n\tprivate CLASS_HEADER_ITEM: string = 'js-tabHeaderItem';\r\n\tprivate CLASS_HEADER_ITEM_ACTIVE: string = 'is-active';\r\n\tprivate CLASS_CONTENT: string = 'js-tabContent';\r\n\tprivate CLASS_CONTENT_ITEM: string = 'js-tabContentItem';\r\n\tprivate CLASS_CONTENT_ITEM_ACTIVE: string = 'is-active';\r\n\r\n\tprotected tabEl: HTMLElement;\r\n\tprotected headerEl: HTMLElement;\r\n\tprotected contentEl: HTMLElement;\r\n\r\n\tconstructor(tabEl: HTMLElement) {\r\n\t\tthis.tabEl = tabEl;\r\n\t\tthis.findElements();\r\n\t\tthis.attachEvent();\r\n\t\tthis.initFirstActive();\r\n\t}\r\n\r\n\tpublic goTo(index: number): void {\r\n\t\tthis.setActiveHeaderItem(index);\r\n\t\tthis.setActiveContentItem(index);\r\n\t}\r\n\r\n\tprotected findElements(): void {\r\n\t\tthis.headerEl = this.tabEl.querySelector(`.${this.CLASS_HEADER}`);\r\n\t\tif (!this.headerEl) {\r\n\t\t\tthrow new Error(`Tab: header is not defined !`);\r\n\t\t}\r\n\t\tthis.contentEl = this.tabEl.querySelector(`.${this.CLASS_CONTENT}`);\r\n\t\tif (!this.contentEl) {\r\n\t\t\tthrow new Error(`Tab: content is not defined !`);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initFirstActive(): void {\r\n\t\tconst activeIndex = this.getCurrentActiveIndex();\r\n\t\tthis.goTo(activeIndex >= 0 ? activeIndex : 0);\r\n\t}\r\n\r\n\tprivate setActiveHeaderItem(index: number): void {\r\n\t\tconst currentActiveItem: HTMLElement = this.getActiveHeaderItem();\r\n\t\tconst nextItem: HTMLElement = this.headerEl.children.item(index) as HTMLElement;\r\n\t\tif (currentActiveItem) {\r\n\t\t\tcurrentActiveItem.classList.remove(this.CLASS_HEADER_ITEM_ACTIVE);\r\n\t\t}\r\n\t\tnextItem.classList.add(this.CLASS_HEADER_ITEM_ACTIVE);\r\n\t}\r\n\r\n\tprivate setActiveContentItem(index: number): void {\r\n\t\tconst currentActiveItem: HTMLElement = this.getActiveContentItem();\r\n\t\tconst nextItem: HTMLElement = this.contentEl.children.item(index) as HTMLElement;\r\n\t\tif (currentActiveItem) {\r\n\t\t\tcurrentActiveItem.classList.remove(this.CLASS_CONTENT_ITEM_ACTIVE);\r\n\t\t}\r\n\t\tnextItem.classList.add(this.CLASS_CONTENT_ITEM_ACTIVE);\r\n\t}\r\n\r\n\tpublic getCurrentActiveIndex(): number {\r\n\t\tconst currentActiveItem: HTMLElement = this.getActiveHeaderItem();\r\n\t\treturn getIndexElement(this.headerEl, currentActiveItem);\r\n\t}\r\n\r\n\tprotected getActiveHeaderItem(): HTMLElement {\r\n\t\treturn this.headerEl.querySelector(`.${this.CLASS_HEADER_ITEM}.${this.CLASS_HEADER_ITEM_ACTIVE}`);\r\n\t}\r\n\r\n\tprotected getActiveContentItem(): HTMLElement {\r\n\t\treturn this.contentEl.querySelector(`.${this.CLASS_CONTENT_ITEM}.${this.CLASS_CONTENT_ITEM_ACTIVE}`);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.headerEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, `.${this.CLASS_HEADER_ITEM}`)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tconst item = getDefinitionElement(event.target as HTMLElement, `.${this.CLASS_HEADER_ITEM}`);\r\n\t\t\t\tthis.onHeaderItemClick(event, item);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected onHeaderItemClick(event: Event, item: HTMLElement): void {\r\n\t\tevent.preventDefault();\r\n\t\tif (item.classList.contains(this.CLASS_HEADER_ITEM_ACTIVE)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst index = this.getIndexOnHeaderItem(item);\r\n\t\tthis.scrollToHeaderItem(item);\r\n\t\tthis.goTo(index);\r\n\t}\r\n\r\n\tprotected getIndexOnHeaderItem(item: HTMLElement): number {\r\n\t\treturn getIndexElement(this.headerEl, item);\r\n\t}\r\n\r\n\tprivate scrollToHeaderItem(item: HTMLElement): void {\r\n\t\tconst scrollWidth: number = this.headerEl.scrollWidth;\r\n\t\tconst itemLeft: number = item.offsetLeft;\r\n\t\tconst itemWidth: number = item.offsetWidth;\r\n\t\tthis.headerEl.scrollLeft = (itemLeft + itemWidth) - (scrollWidth / 2);\r\n\t}\r\n}\r\n\r\n","import {fromEvent, merge} from \"rxjs\";\r\n\r\nexport default class TextareaAutoHeight {\r\n\tprivate textareaEl: HTMLTextAreaElement;\r\n\r\n\tconstructor(textareaEl: HTMLTextAreaElement) {\r\n\t\tthis.textareaEl = textareaEl;\r\n\t\tthis.attachEvent();\r\n\t\tthis.textareaEl.style.overflow = 'hidden';\r\n\t\tthis.resize();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.textareaEl, 'change'),\r\n\t\t\tfromEvent(this.textareaEl, 'cut'),\r\n\t\t\tfromEvent(this.textareaEl, 'paste'),\r\n\t\t\tfromEvent(this.textareaEl, 'drop'),\r\n\t\t\tfromEvent(this.textareaEl, 'keydown'),\r\n\t\t\tfromEvent(this.textareaEl, 'keyup'),\r\n\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.resize();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate resize(): void {\r\n\t\tthis.textareaEl.style.height = 'auto';\r\n\t\tthis.textareaEl.style.height = this.textareaEl.scrollHeight + 'px';\r\n\t}\r\n}\r\n","export interface IToast {\r\n\tadd(toast: TToast): void\r\n}\r\n\r\nexport type TToast = {\r\n\telement?: HTMLElement | 'create',\r\n\ttext: string\r\n\ttype?: EToastType\r\n\tduration?: number\r\n\tstopOnFocus?: boolean\r\n\tcircleTimer?: boolean\r\n\ticonClass?: string\r\n\tbtn?: {\r\n\t\ttext: string\r\n\t\tcloseOnClick?: boolean\r\n\t},\r\n\tonClick?: (event: Event, toast: HTMLElement) => void\r\n\tonBtnClick?: (event: Event, toast: HTMLElement) => void\r\n}\r\n\r\nexport enum EToastType {\r\n\tSUCCESS = 'SUCCESS',\r\n\tINFO = 'INFO',\r\n\tERROR = 'ERROR',\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\n\r\nexport enum EToggleGridViewStyle {\r\n\tLIST = 'LIST',\r\n\tTILE = 'TILE',\r\n}\r\n\r\nexport default class ToggleGridView extends ToggleChange {\r\n\tprivate CLASS_GRID: string = 'js-gridViewSwitch';\r\n\r\n\tprivate CLASS_STYLE_TILE: string = 'c-product-card-grid_tile';\r\n\tprivate CLASS_STYLE_LIST: string = 'c-product-card-grid_list';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-gridViewSwitchHandler',\r\n\t\t\thasDynamicActivated: true\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst grid: HTMLElement = document.querySelector(`.${this.CLASS_GRID}`);\r\n\t\tconst value: string = streamOnChange.input.value || '';\r\n\t\tconst style: EToggleGridViewStyle = this.getStyle(value);\r\n\t\tif (streamOnChange.state) {\r\n\t\t\tthis.switchStyle(grid, style);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate switchStyle(grid: HTMLElement, style: EToggleGridViewStyle): void {\r\n\t\tthis.cleatStyles(grid);\r\n\t\tgrid?.classList.add(this.getClassStyle(style));\r\n\t}\r\n\r\n\tprivate cleatStyles(grid: HTMLElement): void {\r\n\t\tgrid?.classList.remove(this.CLASS_STYLE_TILE);\r\n\t\tgrid?.classList.remove(this.CLASS_STYLE_LIST);\r\n\t}\r\n\r\n\tprivate getClassStyle(style: EToggleGridViewStyle): string {\r\n\t\tswitch (style) {\r\n\t\t\tcase EToggleGridViewStyle.LIST:\r\n\t\t\t\treturn this.CLASS_STYLE_LIST;\r\n\t\t\tcase EToggleGridViewStyle.TILE:\r\n\t\t\t\treturn this.CLASS_STYLE_TILE;\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.CLASS_STYLE_TILE;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getStyle(value: string): EToggleGridViewStyle {\r\n\t\tvalue = value.toUpperCase();\r\n\t\tif (value in EToggleGridViewStyle) {\r\n\t\t\treturn value as EToggleGridViewStyle;\r\n\t\t}\r\n\t\treturn EToggleGridViewStyle.TILE;\r\n\t}\r\n}\r\n","import {CookieAttributes} from \"js-cookie\";\r\n\r\nexport interface ICookie {\r\n\thas(name: string): boolean\r\n\r\n\tget(name: string): string\r\n\r\n\tset(name: string, value: string, options?: CookieAttributes): void\r\n\r\n\tdelete(name: string): void\r\n}\r\n\r\nexport type TCookie = {\r\n\tname: string\r\n\tvalue: string\r\n\tprevValue?: string\r\n}\r\n\r\nexport enum ECookie {\r\n\tCSRF_TOKEN = 'csrftoken',\r\n}\r\n","export interface ICSRFToken {\r\n\tgetToken(): string\r\n}\r\n\r\nexport enum ECSRFTokenKeys {\r\n\tREQUEST_BODY = 'csrfmiddlewaretoken',\r\n\tREQUEST_HEADERS = 'X-CSRFToken',\r\n}\r\n","import {interval} from \"rxjs\";\r\nimport {takeWhile} from \"rxjs/operators\";\r\n\r\nexport default class CircleTimer {\r\n\tprivate CLASS_BLOCK: string = 'js-circleTimer';\r\n\tprivate CLASS_CIRCLE: string = 'js-circleTimerSvgCircle';\r\n\tprivate CLASS_LABEL: string = 'js-circleTimerLabel';\r\n\r\n\tprivate CLASS_INFINITY: string = 'is-infinity';\r\n\r\n\tprivate circleTimerEl: HTMLElement;\r\n\tprivate svgCircleEl: SVGCircleElement;\r\n\tprivate labelEl: HTMLElement;\r\n\r\n\tconstructor(circleTimerEl: HTMLElement) {\r\n\t\tthis.circleTimerEl = circleTimerEl;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic run(seconds: number): void {\r\n\t\tconst radius = this.svgCircleEl.r.baseVal.value;\r\n\t\tconst circumference = radius * 2 * Math.PI;\r\n\r\n\t\tif (seconds === Infinity) {\r\n\t\t\tconst infinityVal: number = (circumference * 40) / 100;\r\n\t\t\tthis.svgCircleEl.style.strokeDasharray = circumference.toString();\r\n\t\t\tthis.svgCircleEl.style.strokeDashoffset = circumference.toString();\r\n\t\t\tthis.setProgress(infinityVal, circumference, this.svgCircleEl);\r\n\t\t\tthis.circleTimerEl.classList.add(this.CLASS_INFINITY);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.svgCircleEl.style.strokeDasharray = circumference.toString();\r\n\t\tthis.svgCircleEl.style.strokeDashoffset = circumference.toString();\r\n\r\n\t\tinterval(1000)\r\n\t\t\t.pipe(\r\n\t\t\t\ttakeWhile(value => {\r\n\t\t\t\t\treturn value < seconds + 1\r\n\t\t\t\t}),\r\n\t\t\t)\r\n\t\t\t.subscribe(second => {\r\n\t\t\t\tconst done: number = seconds - second;\r\n\t\t\t\tconst percent: number = (done / seconds) * 100;\r\n\t\t\t\tthis.labelEl.textContent = done.toString();\r\n\t\t\t\tthis.setProgress(percent, circumference, this.svgCircleEl);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.findElements();\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.svgCircleEl = this.circleTimerEl.querySelector(`.${this.CLASS_CIRCLE}`);\r\n\t\tthis.labelEl = this.circleTimerEl.querySelector(`.${this.CLASS_LABEL}`);\r\n\t}\r\n\r\n\tprivate setProgress(value: number, circumference: number, circle: SVGCircleElement): void {\r\n\t\tconst offset = circumference - value / 100 * circumference;\r\n\t\tcircle.style.strokeDashoffset = offset.toString();\r\n\t}\r\n}\r\n","import Toastify from \"toastify-js\";\r\nimport \"toastify-js/src/toastify.css\";\r\nimport {EToastType, IToast, TToast} from \"@modules/toast/model\";\r\nimport {isDefinitionElementEvent, stringToHTML} from \"@helpers/index\";\r\nimport CircleTimer from \"@components/circle-timer/CircleTimer\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class Toast implements IToast {\r\n\tprivate CLASS_TIMER: string = 'js-toastTimer';\r\n\tprivate CLASS_BTN: string = 'js-toastBtn';\r\n\r\n\tprivate static instance: IToast;\r\n\r\n\tconstructor() {\r\n\t\tif (Toast.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use Toast.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tToast.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance(): IToast {\r\n\t\tif (!Toast.instance) {\r\n\t\t\tToast.instance = new Toast();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic add(option?: TToast) {\r\n\t\toption = {\r\n\t\t\t...this.getDefaultOption(),\r\n\t\t\t...option || {},\r\n\t\t};\r\n\r\n\t\tlet template: HTMLElement;\r\n\t\tif (option.element === \"create\") {\r\n\t\t\ttemplate = this.create(option);\r\n\t\t} else {\r\n\t\t\ttemplate = option.element;\r\n\t\t}\r\n\t\tlet toastifyoptions: any = {\r\n\t\t\tnode: template,\r\n\t\t\tduration: option.duration,\r\n\t\t\tgravity: 'bottom',\r\n\t\t\tposition: 'center',\r\n\t\t\tstopOnFocus: option.stopOnFocus,\r\n\t\t}\r\n\t\tconst toastify = Toastify(toastifyoptions)\r\n\t\ttoastify.showToast();\r\n\t\tif (this.hasOnClickSubscribers(option)) {\r\n\t\t\tfromEvent(template, 'click')\r\n\t\t\t\t.subscribe(event => {\r\n\t\t\t\t\tif (isDefinitionElementEvent(event, `.${this.CLASS_BTN}`)) {\r\n\t\t\t\t\t\tif (option.onBtnClick) {\r\n\t\t\t\t\t\t\toption.onBtnClick.call(event, template);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (option.btn?.closeOnClick) {\r\n\t\t\t\t\t\t\tconst block: HTMLElement = (event.target as HTMLElement).closest(`.toastify`);\r\n\t\t\t\t\t\t\ttoastify.removeElement(block);\r\n\t\t\t\t\t\t\twindow.clearTimeout(toastify.toastElement.timeOutValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (option.onClick) {\r\n\t\t\t\t\t\toption.onBtnClick.call(event, template);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprivate hasOnClickSubscribers(option: TToast): boolean {\r\n\t\treturn Boolean(option.onBtnClick) ||\r\n\t\t\tBoolean(option.onBtnClick) ||\r\n\t\t\tBoolean(option.btn?.closeOnClick);\r\n\t}\r\n\r\n\tprivate create(option: TToast): HTMLElement {\r\n\t\tconst template: HTMLElement = stringToHTML(this.getTemplate(option));\r\n\t\tif (option.circleTimer) {\r\n\t\t\tconst circleTimer: HTMLElement = template.querySelector(`.${this.CLASS_TIMER}`);\r\n\t\t\tconst seconds: number = option.duration / 1000;\r\n\t\t\tnew CircleTimer(circleTimer)\r\n\t\t\t\t.run(option.duration === -1 ? Infinity : seconds);\r\n\t\t}\r\n\t\treturn template;\r\n\t}\r\n\r\n\tprivate getTemplate(option: TToast): string {\r\n\t\treturn `\r\n      <div class=\"c-toast ${this.getTypeClass(option.type)}\">\r\n        ${this.getIconTemplate(option)}\r\n        <p class=\"c-toast__title\">${option.text}</p>\r\n        <div class=\"c-toast__extra ${this.hasBtn(option) ? '' : 'u-d-none'}\">\r\n            ${this.hasBtn(option) ? this.getButtonTemplate(option) : ''}\r\n        </div>\r\n      </div>\r\n    `;\r\n\t}\r\n\r\n\tprivate getTemplateTimer(seconds: number): string {\r\n\t\treturn `\r\n      <div class=\"c-circle-timer js-toastTimer\">\r\n        <svg class=\"c-circle-timer__circle\" viewBox=\"0 0 24 24\" width='24' heigth='24'>\r\n          <circle\r\n            class=\"c-circle-timer__arch js-circleTimerSvgCircle\"\r\n            stroke=\"black\"\r\n            stroke-width=\"2\"\r\n            fill=\"transparent\"\r\n            r=\"10\"\r\n            cx=\"12\"\r\n            cy=\"12\"\r\n            stroke-dasharray=\"24\"\r\n            stroke-dashoffset=\"40\">\r\n          </circle>\r\n        </svg>\r\n        <div class=\"c-circle-timer__label js-circleTimerLabel\">${seconds}</div>\r\n      </div>\r\n    `\r\n\t}\r\n\r\n\tprivate getIconTemplate(option: TToast): string {\r\n\t\tif (!this.hasIcon(option)) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tif (option.circleTimer) {\r\n\t\t\treturn `\r\n        <div class=\"c-toast__icon\">\r\n            ${this.getTemplateTimer(option.duration / 1000)}\r\n        </div>\r\n      `\r\n\t\t} else if (option.iconClass) {\r\n\t\t\treturn `\r\n        <div class=\"c-toast__icon\">\r\n            <i class=\"o-icon ${option.iconClass}\"></i>\r\n        </div>\r\n      `\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getButtonTemplate(option: TToast): string {\r\n\t\treturn `\r\n      <button class=\"c-btn c-btn_text ${this.CLASS_BTN}\">\r\n        <span class=\"c-btn__text\">${option.btn.text}</span>\r\n      </button>\r\n    `\r\n\t}\r\n\r\n\tprivate hasBtn(option: TToast): boolean {\r\n\t\treturn Boolean(option.btn);\r\n\t}\r\n\r\n\tprivate hasIcon(option: TToast): boolean {\r\n\t\treturn option.circleTimer || Boolean(option.iconClass);\r\n\t}\r\n\r\n\tprivate getDefaultOption(): TToast {\r\n\t\treturn {\r\n\t\t\telement: \"create\",\r\n\t\t\ttext: 'Message Text',\r\n\t\t\tduration: 3000,\r\n\t\t\tstopOnFocus: true,\r\n\t\t\ttype: EToastType.INFO,\r\n\t\t\tcircleTimer: false\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getTypeClass(type: EToastType): string {\r\n\t\tswitch (type) {\r\n\t\t\tcase EToastType.SUCCESS:\r\n\t\t\t\treturn 'c-toast_success';\r\n\t\t\tcase EToastType.INFO:\r\n\t\t\t\treturn 'c-toast_info';\r\n\t\t\tcase EToastType.ERROR:\r\n\t\t\t\treturn 'c-toast_error';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'c-toast_info'\r\n\t\t}\r\n\t}\r\n}\r\n","import {isHTMLElement} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {IToggleChange, TToggleChangeOptions, TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\nimport {BehaviorSubject, fromEvent, Observable} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class ToggleChange extends DynamicInsertionElements implements IToggleChange {\r\n\tprivate DATA_ATTR_ACTIVATED: string = 'data-toggle-change-activated';\r\n\tprivate DATA_ATTR_ACTIVATED_HANDLERS: string = 'data-toggle-change-activated-handlers';\r\n\r\n\tprivate eventChange: BehaviorSubject<TToggleChangeStreamOnChange> = new BehaviorSubject<TToggleChangeStreamOnChange>(null);\r\n\r\n\tconstructor(protected options?: TToggleChangeOptions) {\r\n\t\tsuper();\r\n\t\tif (!options) {\r\n\t\t\tthis.options = {\r\n\t\t\t\tclassHandler: 'js-toggleChangeHandler',\r\n\t\t\t\thasDynamicActivated: true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tconst elements: Array<HTMLInputElement> = this.getToggleElementByClassName(this.options.classHandler);\r\n\t\tthis.attachEventOnChange(elements);\r\n\t\tthis.initFirstChange(elements);\r\n\t\tif (this.options.hasDynamicActivated) {\r\n\t\t\tthis.attachEventDynamicInsertion();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getToggleElementByClassName(className: string): Array<HTMLInputElement> {\r\n\t\treturn Array.from(document.getElementsByClassName(className)) as Array<HTMLInputElement>;\r\n\t}\r\n\r\n\tpublic getToggleElementsByName(name: string): Array<HTMLInputElement> {\r\n\t\treturn Array.from(document.querySelectorAll(\r\n\t\t\t`input[type='radio'][name='${name}'], input[type='checkbox'][name='${name}']`\r\n\t\t));\r\n\t}\r\n\r\n\tpublic getStreamOnChange(): Observable<TToggleChangeStreamOnChange> {\r\n\t\treturn this.eventChange\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(stream => {\r\n\t\t\t\t\treturn Boolean(stream);\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tconst elements: Array<HTMLInputElement> = this.getToggleElementByClassName(this.options.classHandler);\r\n\t\t\tthis.attachEventOnChange(elements);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEventOnChange(elements: Array<HTMLInputElement>): ToggleChange {\r\n\t\telements\r\n\t\t\t.filter(toggle => {\r\n\t\t\t\treturn !this.isActivated(toggle)\r\n\t\t\t})\r\n\t\t\t.forEach(toggle => {\r\n\t\t\t\tthis.addActivatedHandlers(toggle, this.options.classHandler);\r\n\r\n\t\t\t\tthis.attachEventOnUnconnectedToggles(toggle.name);\r\n\t\t\t\tfromEvent(toggle, 'change')\r\n\t\t\t\t\t.subscribe(event => {\r\n\t\t\t\t\t\tif (toggle.type === 'radio') {\r\n\t\t\t\t\t\t\tthis.radioHandler(toggle);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.eventChange.next({\r\n\t\t\t\t\t\t\tevent: event,\r\n\t\t\t\t\t\t\tinput: event.target as HTMLInputElement,\r\n\t\t\t\t\t\t\tstate: (event.target as HTMLInputElement).checked\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate attachEventOnUnconnectedToggles(name: string): void {\r\n\t\tconst toggle: HTMLInputElement = document.querySelector(`input.${this.options.classHandler}`);\r\n\t\tif (toggle) {\r\n\t\t\tconst unconnectedToggles: Array<HTMLInputElement> = Array.from(document.querySelectorAll(\r\n\t\t\t\t`input[name='${name}']:not(.${this.options.classHandler})`\r\n\t\t\t));\r\n\t\t\tthis.attachEventOnChange(unconnectedToggles);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initFirstChange(elements: Array<HTMLInputElement>): void {\r\n\t\telements\r\n\t\t\t.sort((a, b) => Number(a.checked) - Number(b.checked))\r\n\t\t\t.forEach(toggle => {\r\n\t\t\t\tthis.eventChange.next({\r\n\t\t\t\t\tevent: null,\r\n\t\t\t\t\tinput: toggle,\r\n\t\t\t\t\tstate: toggle.checked\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate radioHandler(radio: HTMLInputElement): void {\r\n\t\tconst name: string = radio.getAttribute('name');\r\n\t\tconst unactiveConnectedElements: Array<HTMLInputElement> = this.getToggleElementsByName(name).filter(toggle => !toggle.checked);\r\n\t\tunactiveConnectedElements.forEach(toggle => {\r\n\t\t\tthis.eventChange.next({\r\n\t\t\t\tevent: null,\r\n\t\t\t\tinput: toggle,\r\n\t\t\t\tstate: toggle.checked\r\n\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tprivate isActivated(handler: HTMLInputElement): boolean {\r\n\t\tconst dataAttrActive: string = handler.getAttribute(this.DATA_ATTR_ACTIVATED);\r\n\t\tconst activatedHandlers: Array<string> = this.getActivatedHandlers(handler);\r\n\t\tif (!dataAttrActive) {\r\n\t\t\thandler.setAttribute(this.DATA_ATTR_ACTIVATED, 'true');\r\n\t\t}\r\n\t\treturn activatedHandlers.includes(this.options.classHandler);\r\n\t}\r\n\r\n\tprivate getActivatedHandlers(handler: HTMLInputElement): Array<string> {\r\n\t\tconst value: string = handler.getAttribute(this.DATA_ATTR_ACTIVATED_HANDLERS);\r\n\t\treturn value?.split(',') || [];\r\n\t}\r\n\r\n\tprivate addActivatedHandlers(handler: HTMLInputElement, value: string): void {\r\n\t\tconst currentValue: Array<string> = this.getActivatedHandlers(handler);\r\n\t\tcurrentValue.push(value);\r\n\t\thandler.setAttribute(this.DATA_ATTR_ACTIVATED_HANDLERS, currentValue.toString());\r\n\t}\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\n\r\nexport default class ToggleConnectedArea {\r\n\tprivate DATA_ATTR_INPUT_CLASS: string = 'data-toggle-connected-area-input-class';\r\n\r\n\tprivate handlerEL: HTMLElement;\r\n\r\n\tconstructor(handler: HTMLElement) {\r\n\t\tthis.handlerEL = handler;\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.handlerEL, 'click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.activateToggle();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate activateToggle(): void {\r\n\t\tconst className: string = this.handlerEL.getAttribute(this.DATA_ATTR_INPUT_CLASS);\r\n\t\tif (!className) {\r\n\t\t\tthrow new Error(`ToggleConnectedArea: an attribute named \"${this.DATA_ATTR_INPUT_CLASS}\" is required`);\r\n\t\t}\r\n\t\tconst toggle: HTMLInputElement = document.querySelector(`.${className}`);\r\n\t\ttoggle.checked = true;\r\n\t\ttoggle.dispatchEvent(new Event('change'));\r\n\t}\r\n}\r\n","import {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\n\r\nexport default class AutoActivation extends DynamicInsertionElements {\r\n\tpublic name: string = '';\r\n\tpublic handlerClass: string = '';\r\n\tpublic handleDynamicInsertionElements: boolean;\r\n\r\n\tconstructor(name: string, handlerClass: string, handleDynamicInsertionElements: boolean) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.handlerClass = handlerClass;\r\n\t\tthis.handleDynamicInsertionElements = handleDynamicInsertionElements;\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tif (this.handleDynamicInsertionElements) {\r\n\t\t\tthis.attachEventDynamicInsertion();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = this.getHandlers(scope);\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.getDataActivatedName()))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.getDataActivatedName(), 'true');\r\n\t\t\tthis.initInstance(handler);\r\n\t\t});\r\n\t}\r\n\r\n\tprotected initInstance(handler: HTMLElement): void {\r\n\r\n\t}\r\n\r\n\tprotected getHandlers(scope: HTMLElement | Document): Array<HTMLElement> {\r\n\t\treturn Array.from(\r\n\t\t\tscope.getElementsByClassName(this.handlerClass)\r\n\t\t) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tpublic getDataActivatedName(): string {\r\n\t\treturn `data-${this.name}-activated`\r\n\t}\r\n}\r\n","import {IBackendData} from \"@modules/backend-data/model\";\r\n\r\nexport default class BackendData implements IBackendData {\r\n\tprivate CLASS_CONTAINER: string = 'js-backendData';\r\n\r\n\tprivate static instance: IBackendData;\r\n\r\n\tprivate container: HTMLElement;\r\n\r\n\tconstructor() {\r\n\t\tif (BackendData.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use BackendData.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tBackendData.instance = this;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic static getInstance(): IBackendData {\r\n\t\tif (!BackendData.instance) {\r\n\t\t\tBackendData.instance = new BackendData();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic getContainer(): HTMLElement {\r\n\t\treturn this.container;\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.container = document.querySelector(`.${this.CLASS_CONTAINER}`);\r\n\t\tif (!this.container) {\r\n\t\t\tthrow new Error(`BackendData: container is not defined !`);\r\n\t\t}\r\n\t}\r\n}\r\n","import BackendData from \"@modules/backend-data/BackendData\";\r\nimport {IBackendData} from \"@modules/backend-data/model\";\r\nimport Cookie from \"@modules/cookie/Cookie\";\r\nimport {ECookie, ICookie} from \"@modules/cookie/model\";\r\nimport {ICSRFToken} from \"@modules/csrf-token/model\";\r\n\r\nexport default class CSRFToken implements ICSRFToken {\r\n\tprivate CLASS_INPUT: string = 'js-CSRFTokenInput';\r\n\r\n\tprivate static instance: ICSRFToken;\r\n\r\n\tprivate backendData: IBackendData = BackendData.getInstance();\r\n\r\n\tconstructor() {\r\n\t\tif (CSRFToken.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use CSRFToken.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tCSRFToken.instance = this;\r\n\t}\r\n\r\n\tpublic static getInstance(): ICSRFToken {\r\n\t\tif (!CSRFToken.instance) {\r\n\t\t\tCSRFToken.instance = new CSRFToken();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic getToken(): string {\r\n\t\treturn this.getTokenFromDOM() || this.getTokenFromCookie();\r\n\t}\r\n\r\n\tprivate getTokenFromDOM(): string {\r\n\t\tconst input: HTMLInputElement = this.backendData\r\n\t\t\t.getContainer()\r\n\t\t\t.querySelector(`.${this.CLASS_INPUT}`);\r\n\t\treturn input?.value;\r\n\t}\r\n\r\n\tprivate getTokenFromCookie(): string {\r\n\t\tconst cookie: ICookie = Cookie.getInstance();\r\n\t\treturn cookie.get(ECookie.CSRF_TOKEN);\r\n\t}\r\n}\r\n","import {formDataToObject} from \"@helpers/index\";\r\nimport CSRFToken from \"@modules/csrf-token/CSRFToken\";\r\nimport {ECSRFTokenKeys, ICSRFToken} from \"@modules/csrf-token/model\";\r\nimport Environment from \"@modules/env/Environment\";\r\nimport {EEnvironmentType} from \"@modules/env/model\";\r\nimport {TRequestResponse, TRequestResponseMetadata} from \"@modules/http-request/model\";\r\nimport {EToastType} from \"@modules/toast/model\";\r\nimport Toast from \"@modules/toast/Toast\";\r\nimport axios, {AxiosError, AxiosInstance, AxiosRequestConfig, AxiosResponse} from 'axios';\r\n\r\nconst defaultHeaders: any = {\r\n\t'X-Requested-With': 'XMLHttpRequest'\r\n}\r\n\r\nexport default class HttpRequest {\r\n\tprivate env: EEnvironmentType = Environment.getEnv();\r\n\r\n\tconstructor() {\r\n\r\n\t}\r\n\r\n\tpublic request<TData, TMeta extends TRequestResponseMetadata = TRequestResponseMetadata>(options: AxiosRequestConfig): Promise<AxiosResponse<TRequestResponse<TData, TMeta>>> {\r\n\t\tconst instance: AxiosInstance = axios.create();\r\n\t\tthis.setInterceptors(instance);\r\n\t\treturn instance.request({\r\n\t\t\t...options,\r\n\t\t\turl: this.getURL(options.url),\r\n\t\t\theaders: {\r\n\t\t\t\t...defaultHeaders\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tpublic requestHTML(options: AxiosRequestConfig): Promise<AxiosResponse<string>> {\r\n\t\tconst instance: AxiosInstance = axios.create();\r\n\t\tthis.setInterceptors(instance);\r\n\t\treturn instance.request({\r\n\t\t\t...options,\r\n\t\t\turl: this.getURL(options.url),\r\n\t\t\theaders: {\r\n\t\t\t\t...defaultHeaders\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tstatic isNetworkError(reject: AxiosError): boolean {\r\n\t\treturn reject.request.status === 0;\r\n\t}\r\n\r\n\tprivate setInterceptors(instance: AxiosInstance): void {\r\n\t\tinstance.interceptors.response.use(\r\n\t\t\t(response) => {\r\n\t\t\t\tthis.toastInterceptor(response?.data);\r\n\t\t\t\tthis.redirectURLInterceptor(response?.data);\r\n\t\t\t\treturn response;\r\n\t\t\t},\r\n\t\t\t(error) => {\r\n\t\t\t\tthis.toastInterceptor(error?.response?.data);\r\n\t\t\t\tthis.redirectURLInterceptor(error?.response?.data);\r\n\t\t\t\tthis.networkErrorInterceptor(error);\r\n\t\t\t\treturn Promise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\t\tinstance.interceptors.request.use(\r\n\t\t\t(config) => {\r\n\t\t\t\tthis.convertDataToQuery(config);\r\n\t\t\t\tthis.addCSRFToken(config);\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n\r\n\tprivate getURL(url: string): string {\r\n\t\tconst hostName: string = window.location.hostname;\r\n\t\tconst devURL: string = `${window.location.protocol}//${hostName}:8181`;\r\n\t\tif (this.env === EEnvironmentType.DEVELOPMENT) {\r\n\t\t\tlet finalUrl: string;\r\n\t\t\ttry {\r\n\t\t\t\tconst objectURL: URL = new URL(url);\r\n\t\t\t\tfinalUrl = devURL + objectURL.pathname + objectURL.search;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tfinalUrl = devURL + url;\r\n\t\t\t}\r\n\t\t\treturn finalUrl\r\n\t\t}\r\n\t\treturn url;\r\n\t}\r\n\r\n\tprivate toastInterceptor(response: TRequestResponse<any, TRequestResponseMetadata>): void {\r\n\t\tif (response?.metadata?.toasts && Array.isArray(response?.metadata?.toasts)) {\r\n\t\t\tconst toast = Toast.getInstance();\r\n\t\t\tresponse?.metadata?.toasts.forEach(toastOption => {\r\n\t\t\t\ttoast.add(toastOption);\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tprivate redirectURLInterceptor(response: TRequestResponse<any, TRequestResponseMetadata>): void {\r\n\t\tconst redirectURL: string = response?.metadata?.redirectURL;\r\n\t\tif (redirectURL) {\r\n\t\t\twindow.location.href = redirectURL;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate networkErrorInterceptor(reject: AxiosError): void {\r\n\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\tToast\r\n\t\t\t\t.getInstance()\r\n\t\t\t\t.add({\r\n\t\t\t\t\ttext: `\r\n\t\t\t\t\t     !<br>\r\n\t\t\t\t\t   \r\n\t\t\t\t\t`,\r\n\t\t\t\t\ttype: EToastType.ERROR,\r\n\t\t\t\t\ticonClass: 'o-icon_close-filled',\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate addCSRFToken(config: AxiosRequestConfig): AxiosRequestConfig {\r\n\t\tlet newConfig: AxiosRequestConfig = config;\r\n\t\tif (config.method.toUpperCase() !== \"GET\") {\r\n\t\t\ttry {\r\n\t\t\t\tconst csrfToken: ICSRFToken = CSRFToken.getInstance();\r\n\t\t\t\tconst csrfTokenBodyKey = ECSRFTokenKeys.REQUEST_BODY;\r\n\t\t\t\tconst csrfTokenHeaderKey = ECSRFTokenKeys.REQUEST_HEADERS;\r\n\t\t\t\tconst csrfTokenValue = csrfToken.getToken();\r\n\t\t\t\tif (config.data instanceof FormData) {\r\n\t\t\t\t\tnewConfig.data.append(csrfTokenBodyKey, csrfTokenValue);\r\n\t\t\t\t} else if (typeof config.data === 'object') {\r\n\t\t\t\t\tnewConfig.data = {\r\n\t\t\t\t\t\t...config.data || {},\r\n\t\t\t\t\t\t[csrfTokenBodyKey]: csrfTokenValue,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnewConfig.headers[csrfTokenHeaderKey] = csrfTokenValue;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newConfig;\r\n\t}\r\n\r\n\tprivate convertDataToQuery(config: AxiosRequestConfig): AxiosRequestConfig {\r\n\t\tlet newConfig: AxiosRequestConfig = config;\r\n\t\tif (config.method.toUpperCase() === \"GET\") {\r\n\t\t\tlet params: any = config.data || {};\r\n\t\t\tif (config.data instanceof FormData) {\r\n\t\t\t\tparams = formDataToObject(config.data);\r\n\t\t\t}\r\n\t\t\tnewConfig.params = {\r\n\t\t\t\t...config.params,\r\n\t\t\t\t...params,\r\n\t\t\t};\r\n\t\t\tnewConfig.paramsSerializer = (params: any) => {\r\n\t\t\t\tconst urlParams: URLSearchParams = new URLSearchParams();\r\n\t\t\t\tif (typeof params !== 'object' || params === null) {\r\n\t\t\t\t\treturn config.paramsSerializer(params);\r\n\t\t\t\t}\r\n\t\t\t\tObject\r\n\t\t\t\t\t.entries(params)\r\n\t\t\t\t\t.forEach(([key, value]) => {\r\n\t\t\t\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\t\t\t\tvalue.forEach(arrValue => {\r\n\t\t\t\t\t\t\t\turlParams.append(key, arrValue)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\turlParams.append(key, String(value))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\treturn urlParams.toString();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newConfig;\r\n\t}\r\n\r\n\tprivate isLocalhost(): boolean {\r\n\t\tconst hostName: string = window.location.hostname;\r\n\t\treturn hostName === '127.0.0.1' || hostName === 'localhost';\r\n\t}\r\n}\r\n","export interface IVisibility {\r\n\tshow(el: HTMLElement | Array<HTMLElement>): void\r\n\r\n\thide(el: HTMLElement | Array<HTMLElement>): void\r\n}\r\n\r\nexport enum EVisibility {\r\n\tVISIBLE = 'VISIBLE',\r\n\tHIDDEN = 'HIDDEN',\r\n}\r\n","import {TToast} from \"@modules/toast/model\";\r\n\r\nexport type TRequestResponse<TData = any, TMeta extends TRequestResponseMetadata = TRequestResponseMetadata> = {\r\n\tdata: TData\r\n\tmetadata: TMeta\r\n}\r\n\r\nexport type TRequestResponseMetadata = {\r\n\ttoasts?: Array<TToast>\r\n\tredirectURL?: string\r\n\terrorFields?: Array<TErrorField>\r\n\tdataType?: 'json' | 'html' | 'string' | 'array';\r\n}\r\n\r\nexport type TErrorField = {\r\n\tfieldNames: Array<string>\r\n\tmessages: Array<string>\r\n\tkey?: string\r\n}\r\n\r\nexport enum ERequestResponseStatus {\r\n\tSUCCESS,\r\n\tERROR,\r\n}\r\n","import {ERequestResponseStatus} from \"@modules/http-request/model\";\r\n\r\nexport interface IRequestReplacement {\r\n\trequest(): void\r\n}\r\n\r\nexport type TRequestReplacementStreamOnResponse = {\r\n\tstatus: ERequestResponseStatus\r\n}\r\n\r\nexport enum ERequestReplacementDataType {\r\n\tJSON = 'json',\r\n\tFORM_DATA = 'form-data',\r\n}\r\n","export enum EBtnSize {\r\n\tLG = 'lg',\r\n\tMD = 'md',\r\n}\r\n\r\nexport enum EBtnMods {\r\n\tWITHOUT_P = 'without-p',\r\n\tADAPTIVE_TO_MD = 'adaptive-to-md',\r\n}\r\n\r\nexport enum EBtnType {\r\n\tPRIMARY = 'primary',\r\n\tSECONDARY = 'secondary',\r\n\tSECONDARY_LIGHT = 'secondary-light',\r\n\tPRIMARY_OUTLINE = 'primary-outline',\r\n\tLINK = 'link',\r\n}\r\n\r\nexport enum EBtnState {\r\n\tACTIVE = 'ACTIVE',\r\n\tDISABLED = 'DISABLED',\r\n\tLOADING = 'LOADING',\r\n}\r\n","import RequestReplacement from \"@modules/request-replacement/RequestReplacement\";\r\nimport {Method} from \"axios\";\r\nimport {ERequestReplacementDataType} from \"@modules/request-replacement/model\";\r\nimport {objectToFormData} from \"@helpers/index\";\r\n\r\nexport default class RequestReplacementDataAttr extends RequestReplacement {\r\n\tprivate DATA_ATTR_URL: string = 'data-request-replacement-data-attr-url';\r\n\tprivate DATA_ATTR_METHOD: string = 'data-request-replacement-data-attr-method';\r\n\tprivate DATA_ATTR_DATA: string = 'data-request-replacement-data-attr-data';\r\n\r\n\tprotected getUrl(): string {\r\n\t\treturn this.rootEl.getAttribute(this.DATA_ATTR_URL);\r\n\t}\r\n\r\n\tprotected getMethod(): Method {\r\n\t\treturn this.rootEl.getAttribute(this.DATA_ATTR_METHOD) as Method;\r\n\t}\r\n\r\n\tprotected getData(): FormData | object | null {\r\n\t\tlet data: object;\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(this.rootEl.getAttribute(this.DATA_ATTR_DATA));\r\n\t\t} catch (e) {\r\n\t\t\tdata = {};\r\n\t\t}\r\n\r\n\t\tif (this.getDataType() === ERequestReplacementDataType.FORM_DATA) {\r\n\t\t\treturn objectToFormData(data);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n","import {stringToHTML, strToBoolean} from \"@helpers/index\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {Method} from \"axios\";\r\nimport {EVisibility, IVisibility} from \"@modules/visibility/model\";\r\nimport Visibility from \"@modules/visibility/Visibility\";\r\nimport {\r\n\tERequestReplacementDataType,\r\n\tIRequestReplacement,\r\n\tTRequestReplacementStreamOnResponse\r\n} from \"@modules/request-replacement/model\";\r\nimport {Observable, Subject} from \"rxjs\";\r\nimport {ERequestResponseStatus} from \"@modules/http-request/model\";\r\nimport LoaderComponent from \"@components/loader/LoaderComponent\";\r\n\r\nexport default class RequestReplacement implements IRequestReplacement {\r\n\tprotected CLASS_BLOCK: string = 'js-requestReplacement';\r\n\tprotected CLASS_BLOCK_REPLACEMENT: string = 'js-requestReplacementBlockReplacement';\r\n\tprotected CLASS_LOADER: string = 'js-requestReplacementLoader';\r\n\tprotected CLASS_HIDDEN_ELEMENT_IS_LOADING: string = 'js-requestReplacementHiddenElementIsLoading';\r\n\r\n\tprotected DATA_ATTR_REQUEST_ON_START: string = 'data-request-replacement-request-on-start';\r\n\tprivate DATA_ATTR_DATA_TYPE: string = 'data-request-replacement-data-type';\r\n\r\n\tprotected rootEl: HTMLElement;\r\n\tprotected replacementEl: HTMLElement;\r\n\tprotected loaderEl: LoaderComponent;\r\n\r\n\tprivate isLoading: boolean = false;\r\n\r\n\tprivate httpRequest: HttpRequest;\r\n\tprivate visibility: IVisibility;\r\n\r\n\tprivate eventChange: Subject<TRequestReplacementStreamOnResponse> = new Subject();\r\n\r\n\tconstructor(rootEl: HTMLElement) {\r\n\t\tthis.rootEl = rootEl;\r\n\t\tthis.findElements();\r\n\t\tthis.httpRequest = new HttpRequest();\r\n\t\tthis.visibility = new Visibility();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tif (this.isRequestOnStart()) {\r\n\t\t\tthis.request();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getStreamOnResponse(): Observable<TRequestReplacementStreamOnResponse> {\r\n\t\treturn this.eventChange.asObservable()\r\n\t}\r\n\r\n\tpublic getDataType(): ERequestReplacementDataType | null {\r\n\t\treturn this.rootEl.getAttribute(this.DATA_ATTR_DATA_TYPE) as ERequestReplacementDataType;\r\n\t}\r\n\r\n\tpublic request(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.loaderEl.active = true;\r\n\t\tthis.updateVisibilityElementsOnLoading(EVisibility.HIDDEN);\r\n\r\n\t\tthis.httpRequest.requestHTML({\r\n\t\t\turl: this.getUrl(),\r\n\t\t\tmethod: this.getMethod(),\r\n\t\t\tdata: this.getData(),\r\n\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.replaceContent(stringToHTML(response.data));\r\n\t\t\t\tthis.findElements();\r\n\t\t\t\tthis.eventChange.next({\r\n\t\t\t\t\tstatus: ERequestResponseStatus.SUCCESS,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.eventChange.next({\r\n\t\t\t\t\tstatus: ERequestResponseStatus.ERROR,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t\tthis.loaderEl.active = false;\r\n\t\t\t\tthis.updateVisibilityElementsOnLoading(EVisibility.VISIBLE);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected getUrl(): string {\r\n\t\treturn '';\r\n\t}\r\n\r\n\tprotected getData(): FormData | object | null {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprotected getMethod(): Method {\r\n\t\treturn 'GET';\r\n\t}\r\n\r\n\tprotected findElements(): void {\r\n\t\tthis.replacementEl = this.getBlockReplacementEl();\r\n\t\tthis.loaderEl = this.rootEl.querySelector(`.${this.CLASS_LOADER}`);\r\n\t}\r\n\r\n\tprivate replaceContent(contentEl: HTMLElement): void {\r\n\t\tconst blockReplacementEl: HTMLElement = this.getBlockReplacementEl();\r\n\t\tblockReplacementEl.replaceWith(contentEl);\r\n\t}\r\n\r\n\tprivate getBlockReplacementEl(): HTMLElement {\r\n\t\tif (this.rootEl.classList.contains(this.CLASS_BLOCK_REPLACEMENT)) {\r\n\t\t\treturn this.rootEl;\r\n\t\t}\r\n\t\treturn this.rootEl.querySelector(`.${this.CLASS_BLOCK_REPLACEMENT}`);\r\n\t}\r\n\r\n\tprivate updateVisibilityElementsOnLoading(visibility: EVisibility): void {\r\n\t\tconst items: Array<HTMLElement> = this.getVisibilityElements();\r\n\t\tif (visibility === EVisibility.VISIBLE) {\r\n\t\t\tthis.visibility.show(items);\r\n\t\t} else {\r\n\t\t\tthis.visibility.hide(items);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getVisibilityElements(): Array<HTMLElement> {\r\n\t\treturn Array.from(\r\n\t\t\tthis.rootEl.getElementsByClassName(this.CLASS_HIDDEN_ELEMENT_IS_LOADING)\r\n\t\t) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprivate isRequestOnStart(): boolean {\r\n\t\treturn strToBoolean(this.rootEl.getAttribute(this.DATA_ATTR_REQUEST_ON_START));\r\n\t}\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\nimport {TProductCartItem} from \"@modules/analytics/model\";\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tdataLayer: any;\r\n\t}\r\n}\r\n\r\nexport default class AnalyticsClickOnProductCard {\r\n\tprivate productCardEl: HTMLElement;\r\n\r\n\tprivate DATA_ATTR_ANALYTICS_DATA: string = 'data-analytics-data';\r\n\r\n\tconstructor(productCardEl: HTMLElement) {\r\n\t\tthis.productCardEl = productCardEl;\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.productCardEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tthis.onClick(event);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate onClick(event: Event): void {\r\n\t\tconst analyticsData: TProductCartItem = this.getAnalyticsData();\r\n\t\twindow.dataLayer = window.dataLayer || [];\r\n\t\twindow.dataLayer.push({\r\n\t\t\t'event': 'productClick', //       GTM\r\n\t\t\t'ecommerce': {\r\n\t\t\t\t'click': {\r\n\t\t\t\t\t'actionField': {'list': `${analyticsData.list}`},\r\n\t\t\t\t\t'products': [{\r\n\t\t\t\t\t\t'name': `${analyticsData.name}`,\r\n\t\t\t\t\t\t'id': `${analyticsData.id}`,\r\n\t\t\t\t\t\t'price': `${analyticsData.price}`,\r\n\t\t\t\t\t\t'brand': `${analyticsData.brand}`,\r\n\t\t\t\t\t\t'category': `${analyticsData.category}`,\r\n\t\t\t\t\t\t'position': `${analyticsData.position}`\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getAnalyticsData(): TProductCartItem {\r\n\t\tlet data;\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(this.productCardEl.getAttribute(this.DATA_ATTR_ANALYTICS_DATA))\r\n\t\t} catch (e) {\r\n\t\t\tdata = {}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n","import ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {TProductCostLineOnBtnClickEventDetail} from \"@components/product-cost-line/model\";\r\nimport {EBtnState} from \"@components/btn/model\";\r\nimport {TProductItem} from \"@modules/analytics/model\";\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tdataLayer: any;\r\n\t}\r\n}\r\n\r\nexport default class AnalyticsAddToCartInProductCostLine {\r\n\tprivate productCostLineEl: ProductCostLineComponent;\r\n\tprivate DATA_ATTR_ANALYTICS_DATA: string = 'data-analytics-data';\r\n\r\n\tconstructor(productCostLineEl: ProductCostLineComponent) {\r\n\t\tthis.productCostLineEl = productCostLineEl;\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.productCostLineEl, 'on-btn-click')\r\n\t\t\t.subscribe((event: CustomEvent<TProductCostLineOnBtnClickEventDetail>) => {\r\n\t\t\t\tthis.onCLick(event);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate onCLick(event: CustomEvent<TProductCostLineOnBtnClickEventDetail>): void {\r\n\t\t//       \r\n\t\tif (!event.detail.states.includes(EBtnState.ACTIVE)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst analyticsData: TProductItem = this.getAnalyticsData();\r\n\t\twindow.dataLayer = window.dataLayer || [];\r\n\t\twindow.dataLayer.push({\r\n\t\t\t'event': 'addToCart', //       GTM\r\n\t\t\t'ecommerce': {\r\n\t\t\t\t'currencyCode': 'KZT',\r\n\t\t\t\t'add': {\r\n\t\t\t\t\t'products': [{\r\n\t\t\t\t\t\t'name': `${analyticsData.name}`,\r\n\t\t\t\t\t\t'id': `${analyticsData.id}`,\r\n\t\t\t\t\t\t'price': `${analyticsData.price}`,\r\n\t\t\t\t\t\t'brand': `${analyticsData.brand}`,\r\n\t\t\t\t\t\t'category': `${analyticsData.category}`,\r\n\t\t\t\t\t\t'quantity': `${analyticsData.quantity}`\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getAnalyticsData(): TProductItem {\r\n\t\tlet data;\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(this.productCostLineEl.getAttribute(this.DATA_ATTR_ANALYTICS_DATA))\r\n\t\t} catch (e) {\r\n\t\t\tdata = {}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n","import {isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {TProductItem} from \"@modules/analytics/model\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\tdataLayer: any;\r\n\t}\r\n}\r\n\r\nexport default class AnalyticsClickOnProductCard {\r\n\tprivate productCardEl: HTMLElement;\r\n\r\n\tprivate DATA_ATTR_ANALYTICS_DATA: string = 'data-analytics-data';\r\n\r\n\tconstructor(productCardEl: HTMLElement) {\r\n\t\tthis.productCardEl = productCardEl;\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.productCardEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, '.js-addToCartHandler')),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tthis.onClick(event);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate onClick(event: Event): void {\r\n\t\tconst analyticsData: TProductItem = this.getAnalyticsData();\r\n\t\twindow.dataLayer = window.dataLayer || [];\r\n\t\twindow.dataLayer.push({\r\n\t\t\t'event': 'addToCart', //       GTM\r\n\t\t\t'ecommerce': {\r\n\t\t\t\t'currencyCode': 'KZT',\r\n\t\t\t\t'add': {\r\n\t\t\t\t\t'products': [{\r\n\t\t\t\t\t\t'name': `${analyticsData.name}`,\r\n\t\t\t\t\t\t'id': `${analyticsData.id}`,\r\n\t\t\t\t\t\t'price': `${analyticsData.price}`,\r\n\t\t\t\t\t\t'brand': `${analyticsData.brand}`,\r\n\t\t\t\t\t\t'category': `${analyticsData.category}`,\r\n\t\t\t\t\t\t'quantity': `${analyticsData.quantity}`\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getAnalyticsData(): TProductItem {\r\n\t\tlet data;\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(this.productCardEl.getAttribute(this.DATA_ATTR_ANALYTICS_DATA))\r\n\t\t} catch (e) {\r\n\t\t\tdata = {}\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n","import CarouselAutoActivation from \"@modules/carousel/CarouselAutoActivation\";\r\nimport CitySelection from \"@modules/city/CitySelection\";\r\nimport ConfirmCity from \"@modules/city/ConfirmCity\";\r\nimport CollapseAutoActivation from \"@modules/collapse/CollapseAutoActivation\";\r\nimport CollapseGroupActivation from \"@modules/collapse/CollapseGroupActivation\";\r\nimport {ECollapseType} from \"@modules/collapse/model\";\r\nimport DropdownAutoActivation from \"@modules/dropdown/DropdownAutoActivation\";\r\nimport ElementMediaQueries from \"@modules/element-media-queries/ElementMediaQueries\";\r\nimport FilterListAutoActivation from \"@modules/filter-list/FilterListAutoActivation\";\r\nimport HandleEmptyContentRefreshAutoActivation\r\n\tfrom \"@modules/handle-empty-content/HandleEmptyContentRefreshAutoActivation\";\r\nimport HandleEmptyContentVisibilityAutoActivation\r\n\tfrom \"@modules/handle-empty-content/HandleEmptyContentVisibilityAutoActivation\";\r\nimport LazyLoadImage from \"@modules/lazy-load-image/LazyLoadImage\";\r\nimport Mask from \"@modules/mask/Mask\";\r\nimport ModalAutoActivation from \"@modules/modal/ModalAutoActivation\";\r\nimport SmoothScrollAutoActivation from \"@modules/scroll/SmoothScrollAutoActivation\";\r\nimport SelectAutoActivation from \"@modules/select/SelectAutoActivation\";\r\nimport TabAutoActivation from \"@modules/tab/TabAutoActivation\";\r\nimport TextareaAutoHeightAutoActivation from \"@modules/textarea/TextareaAutoHeightAutoActivation\";\r\nimport ToastCallingStatic from \"@modules/toast/ToastCallingStatic\";\r\nimport ToggleAnyKind from \"@modules/toggle/ToggleAnyKind\";\r\nimport ToggleConnectedAreaAutoActivated from \"@modules/toggle/ToggleConnectedAreaAutoActivated\";\r\nimport ToggleGridView from \"@modules/toggle/ToggleGridView\";\r\nimport ToggleOnceActive from \"@modules/toggle/ToggleOnceActive\";\r\nimport ToggleSetClass from \"@modules/toggle/ToggleSetClass\";\r\nimport ToggleVisibility from \"@modules/toggle/ToggleVisibility\";\r\nimport ToggleVisibilityReverse from \"@modules/toggle/ToggleVisibilityReverse\";\r\nimport RequestReplacementDataAttrAutoActivation\r\n\tfrom \"@modules/request-replacement/RequestReplacementDataAttrAutoActivation\";\r\nimport AnalyticsClickOnProductCardAutoActivation from \"@modules/analytics/AnalyticsClickOnProductCardAutoActivation\";\r\nimport AnalyticsAddToCartInProductCostLineAutoActivation\r\n\tfrom \"@modules/analytics/AnalyticsAddToCartInProductCostLineAutoActivation\";\r\nimport AnalyticsAddToCartOnProductCardAutoActivation\r\n\tfrom \"@modules/analytics/AnalyticsAddToCartOnProductCardAutoActivation\";\r\n\r\nnew ElementMediaQueries().init();\r\nnew ToggleVisibility().init();\r\nnew ToggleOnceActive().init();\r\nnew ToggleGridView().init();\r\nnew ToggleAnyKind().init();\r\nnew ToggleSetClass().init();\r\nnew ToggleVisibilityReverse().init();\r\nnew CarouselAutoActivation().init();\r\nnew ModalAutoActivation().init();\r\nnew ToastCallingStatic().init();\r\nnew DropdownAutoActivation().init();\r\nnew Mask().init();\r\n\r\nnew CollapseAutoActivation(\r\n\t'js-collapseAuto',\r\n\t'collapse',\r\n\tECollapseType.DEFAULT,\r\n).init();\r\nnew CollapseAutoActivation(\r\n\t'js-collapseAnimatedAuto',\r\n\t'collapse-animated',\r\n\tECollapseType.ANIMATED,\r\n).init();\r\nnew CollapseGroupActivation(\r\n\t'js-collapseGroupAuto',\r\n\t'collapse-group',\r\n\tECollapseType.DEFAULT,\r\n).init();\r\nnew CollapseGroupActivation(\r\n\t'js-collapseGroupAnimatedAuto',\r\n\t'collapse-group-animated',\r\n\tECollapseType.ANIMATED,\r\n).init();\r\n\r\nnew SelectAutoActivation().init();\r\nnew FilterListAutoActivation().init();\r\nnew HandleEmptyContentRefreshAutoActivation().init();\r\nnew HandleEmptyContentVisibilityAutoActivation().init();\r\nnew LazyLoadImage().init();\r\nnew SmoothScrollAutoActivation().init();\r\nnew ToggleConnectedAreaAutoActivated().init();\r\nnew TextareaAutoHeightAutoActivation().init();\r\nnew CitySelection();\r\nnew ConfirmCity();\r\nnew TabAutoActivation().init();\r\nnew RequestReplacementDataAttrAutoActivation().init();\r\nnew AnalyticsClickOnProductCardAutoActivation().init();\r\nnew AnalyticsAddToCartInProductCostLineAutoActivation().init();\r\nnew AnalyticsAddToCartOnProductCardAutoActivation().init()\r\n","import ElementQueries from \"css-element-queries\";\r\n\r\nexport default class ElementMediaQueries {\r\n\r\n\tpublic init(): void {\r\n\t\tElementQueries.ElementQueries.init();\r\n\t}\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\n\r\nexport default class ToggleVisibility extends ToggleChange {\r\n\tprivate CLASS_HIDE: string = 'u-d-none';\r\n\tprivate DATA_ATTR_CONNECTED_CLASS: string = 'data-toggle-visibility-connected-class';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-toggleVisibilityHandler',\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst toggle: HTMLInputElement = streamOnChange.input;\r\n\t\tconst state: boolean = streamOnChange.state;\r\n\t\tconst connectedClass: string = toggle.getAttribute(this.DATA_ATTR_CONNECTED_CLASS);\r\n\t\tif (!connectedClass) return;\r\n\r\n\t\tconst connectedElements: Array<HTMLElement> = Array.from(document.getElementsByClassName(connectedClass)) as Array<HTMLElement>;\r\n\t\tconnectedElements.forEach(connectedElement => {\r\n\t\t\tif (state) {\r\n\t\t\t\tconnectedElement.classList.remove(this.CLASS_HIDE);\r\n\t\t\t} else {\r\n\t\t\t\tconnectedElement.classList.add(this.CLASS_HIDE);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\n\r\nexport default class ToggleOnceActive extends ToggleChange {\r\n\tprivate CLASS_HIDE: string = 'u-d-none';\r\n\tprivate DATA_ATTR_CONNECTED_CLASS: string = 'data-toggle-visibility-connected-class';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-toggleVisibilityHasOnceActiveHandler',\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst toggle = streamOnChange.input;\r\n\t\tconst name: string = toggle.getAttribute('name');\r\n\t\tconst connectedClass: string = toggle.getAttribute(this.DATA_ATTR_CONNECTED_CLASS);\r\n\t\tconst activeToggles: Array<HTMLInputElement> = this.getToggleElementsByName(name).filter(toggle => toggle.checked);\r\n\r\n\t\tif (!connectedClass) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tconst connectedElements: Array<HTMLElement> = Array.from(document.getElementsByClassName(connectedClass)) as Array<HTMLElement>;\r\n\t\tconnectedElements.forEach(connectedElement => {\r\n\t\t\tif (activeToggles.length) {\r\n\t\t\t\tconnectedElement.classList.remove(this.CLASS_HIDE);\r\n\t\t\t} else {\r\n\t\t\t\tconnectedElement.classList.add(this.CLASS_HIDE);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class ToggleAnyKind extends ToggleChange {\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-handleAnyKindToggle',\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(streamOnChange => Boolean(streamOnChange.event))\r\n\t\t\t)\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst toggle = streamOnChange.input;\r\n\t\tconst name: string = toggle.name;\r\n\t\tconst value: string = toggle.value;\r\n\t\tif (value === '') {\r\n\t\t\tconst toggles: Array<HTMLInputElement> = this.getToggleElementsByName(name);\r\n\t\t\ttoggles.forEach(inputToggle => {\r\n\t\t\t\tif (inputToggle.value !== '') {\r\n\t\t\t\t\tinputToggle.checked = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tconst anyKindToggles: Array<HTMLInputElement> = Array.from(\r\n\t\t\t\tdocument.querySelectorAll(`input[type='${toggle.type}'][name='${name}'][value=\"\"]`)\r\n\t\t\t);\r\n\t\t\tanyKindToggles.forEach(emptyToggle => {\r\n\t\t\t\temptyToggle.checked = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\n\r\nexport default class ToggleSetClass extends ToggleChange {\r\n\tprivate DATA_ATTR_CONNECTED_CLASS: string = 'data-toggle-set-class-connected-class';\r\n\tprivate DATA_ATTR_ACTIVE_CLASS: string = 'data-toggle-set-class-active-class';\r\n\tprivate DATA_ATTR_UNACTIVE_CLASS: string = 'data-toggle-set-class-unactive-class';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-toggleSetClassHandler',\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst toggle: HTMLInputElement = streamOnChange.input;\r\n\t\tconst state: boolean = streamOnChange.state;\r\n\t\tconst connectedClass: string = toggle.getAttribute(this.DATA_ATTR_CONNECTED_CLASS);\r\n\t\tconst activeClass: Array<string> = toggle.getAttribute(this.DATA_ATTR_ACTIVE_CLASS).split(' ').filter(Boolean);\r\n\t\tconst unactiveClass: Array<string> = toggle.getAttribute(this.DATA_ATTR_UNACTIVE_CLASS).split(' ').filter(Boolean);\r\n\t\tif (!connectedClass) return;\r\n\r\n\t\tconst connectedElements: Array<HTMLElement> = Array.from(document.getElementsByClassName(connectedClass)) as Array<HTMLElement>;\r\n\t\tconnectedElements.forEach(connectedElement => {\r\n\t\t\tif (state) {\r\n\t\t\t\tif (activeClass.length) {\r\n\t\t\t\t\tconnectedElement.classList.add(...activeClass);\r\n\t\t\t\t}\r\n\t\t\t\tif (unactiveClass.length) {\r\n\t\t\t\t\tconnectedElement.classList.remove(...unactiveClass);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (unactiveClass.length) {\r\n\t\t\t\t\tconnectedElement.classList.add(...unactiveClass);\r\n\t\t\t\t}\r\n\t\t\t\tif (activeClass.length) {\r\n\t\t\t\t\tconnectedElement.classList.remove(...activeClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n","import ToggleChange from \"@modules/toggle/ToggleChange\";\r\nimport {TToggleChangeStreamOnChange} from \"@modules/toggle/model\";\r\n\r\nexport default class ToggleVisibilityReverse extends ToggleChange {\r\n\tprivate CLASS_HIDE: string = 'u-d-none';\r\n\tprivate DATA_ATTR_CONNECTED_CLASS: string = 'data-toggle-visibility-reverse-connected-class';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tclassHandler: 'js-toggleVisibilityReverseHandler',\r\n\t\t});\r\n\t\tthis.subscribeChanges();\r\n\t}\r\n\r\n\tprivate subscribeChanges(): void {\r\n\t\tthis.getStreamOnChange()\r\n\t\t\t.subscribe(streamOnChange => {\r\n\t\t\t\tthis.onChange(streamOnChange);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate onChange(streamOnChange: TToggleChangeStreamOnChange) {\r\n\t\tconst toggle: HTMLInputElement = streamOnChange.input;\r\n\t\tconst state: boolean = streamOnChange.state;\r\n\t\tconst connectedClass: string = toggle.getAttribute(this.DATA_ATTR_CONNECTED_CLASS);\r\n\t\tif (!connectedClass) return;\r\n\r\n\t\tconst connectedElements: Array<HTMLElement> = Array.from(document.getElementsByClassName(connectedClass)) as Array<HTMLElement>;\r\n\t\tconnectedElements.forEach(connectedElement => {\r\n\t\t\tif (state) {\r\n\t\t\t\tconnectedElement.classList.add(this.CLASS_HIDE);\r\n\t\t\t} else {\r\n\t\t\t\tconnectedElement.classList.remove(this.CLASS_HIDE);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport Carousel from \"@modules/carousel/Carousel\";\r\n\r\nexport default class CarouselAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-carousel';\r\n\r\n\tprivate DATA_ATTR_ACTIVATED: string = 'data-carousel-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tlet carousels: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\tcarousels.filter(carousel => {\r\n\t\t\treturn !strToBoolean(carousel.getAttribute(this.DATA_ATTR_ACTIVATED))\r\n\t\t});\r\n\t\tcarousels.filter(carousel => {\r\n\t\t\tcarousel.setAttribute(this.DATA_ATTR_ACTIVATED, 'true');\r\n\t\t\tnew Carousel(carousel);\r\n\t\t});\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n}\r\n","import {IModal} from \"@modules/modal/model\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport Modal from \"@modules/modal/Modal\";\r\n\r\nexport default class ModalAutoActivation {\r\n\tprivate CLASS_HANDLER: string = 'js-modalHandler';\r\n\tprivate DATA_ATTR_MODAL_ID: string = 'data-modal-id';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(\r\n\t\t\tscope.getElementsByClassName(this.CLASS_HANDLER)\r\n\t\t) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tconst modalId: string = handler.getAttribute(this.DATA_ATTR_MODAL_ID);\r\n\t\t\tconst modalEl: HTMLDialogElement = document.getElementById(modalId) as HTMLDialogElement;\r\n\t\t\tif (modalEl) {\r\n\t\t\t\tconst modal: IModal = new Modal({\r\n\t\t\t\t\telement: modalEl\r\n\t\t\t\t});\r\n\t\t\t\tthis.attachEvent(handler, modal);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(handler: HTMLElement, modal: IModal): void {\r\n\t\tfromEvent(handler, 'click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tmodal.open();\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {strToBoolean} from \"@helpers/index\";\r\nimport Toast from \"@modules/toast/Toast\";\r\nimport {TToast} from \"@modules/toast/model\";\r\n\r\nexport default class ToastCallingStatic {\r\n\tprivate ID_CONTAINER: string = 'js-toastContainer';\r\n\tprivate DATA_DURATION: string = 'data-duration';\r\n\tprivate DATA_CLOSE_ON_CLICK: string = 'data-close-on-click';\r\n\r\n\tprivate containerEl: HTMLElement;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate showExisting(): void {\r\n\t\tconst toastEls: Array<HTMLElement> = Array.from(\r\n\t\t\tthis.containerEl.children\r\n\t\t) as Array<HTMLElement>;\r\n\t\ttoastEls.forEach(toastEl => {\r\n\t\t\tconst dataDuration: string = toastEl.getAttribute(this.DATA_DURATION);\r\n\t\t\tconst duration: number = dataDuration ? parseFloat(dataDuration) : null;\r\n\t\t\tconst closeOnClick: boolean = strToBoolean(toastEl.getAttribute(this.DATA_CLOSE_ON_CLICK));\r\n\t\t\tconst option: TToast = {\r\n\t\t\t\ttext: null,\r\n\t\t\t\telement: toastEl,\r\n\t\t\t\tbtn: {\r\n\t\t\t\t\ttext: null,\r\n\t\t\t\t\tcloseOnClick: closeOnClick\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (duration) {\r\n\t\t\t\toption.duration = duration;\r\n\t\t\t}\r\n\t\t\tToast\r\n\t\t\t\t.getInstance()\r\n\t\t\t\t.add(option)\r\n\t\t})\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.containerEl = document.getElementById(this.ID_CONTAINER);\r\n\t\tif (this.containerEl) {\r\n\t\t\tthis.showExisting();\r\n\t\t}\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport Dropdown from \"@modules/dropdown/Dropdown\";\r\n\r\nexport default class DropdownAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-dropdownAuto';\r\n\r\n\tprivate DATA_ACTIVATED: string = 'data-dropdown-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\tnew Dropdown(handler);\r\n\t\t});\r\n\t}\r\n}\r\n","import {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport Select from \"@modules/select/Select\";\r\n\r\nexport default class SelectAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-selectAuto';\r\n\tprivate name: string = 'select';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst blocks: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\tblocks.forEach(block => {\r\n\t\t\tif (strToBoolean(block.getAttribute(this.getDataActivatedName()))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tblock.setAttribute(this.getDataActivatedName(), 'true');\r\n\r\n\t\t\tnew Select(block);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getDataActivatedName(): string {\r\n\t\treturn `data-${this.name}-activated`\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport FilterList from \"@modules/filter-list/FilterList\";\r\n\r\nexport default class FilterListAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_BLOCK: string = 'js-filterListBlock';\r\n\tprivate CLASS_INPUT: string = 'js-filterListInput';\r\n\tprivate CLASS_LIST: string = 'js-filterList';\r\n\r\n\tprivate DATA_ACTIVATED: string = 'data-filter-list-activated';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst blocks: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_BLOCK)) as Array<HTMLElement>;\r\n\t\tblocks.forEach(block => {\r\n\t\t\tif (strToBoolean(block.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tblock.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\tconst input: HTMLInputElement = block.querySelector(`.${this.CLASS_INPUT}`);\r\n\t\t\tconst list: HTMLInputElement = block.querySelector(`.${this.CLASS_LIST}`);\r\n\t\t\tnew FilterList({\r\n\t\t\t\tlist,\r\n\t\t\t\tinput\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"../dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport HandleEmptyContentRefresh from \"@modules/handle-empty-content/HandleEmptyContentRefresh\";\r\n\r\nexport default class HandleEmptyContentRefreshAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-handleEmptyContentRefreshHandler';\r\n\r\n\tprivate DATA_ACTIVATED: string = 'data-handle-empty-content-refresh-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\tnew HandleEmptyContentRefresh(handler);\r\n\t\t});\r\n\t}\r\n}\r\n","import {DynamicInsertionElements} from \"../dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport HandleEmptyContentVisibility from \"@modules/handle-empty-content/HandleEmptyContentVisibility\";\r\n\r\nexport default class HandleEmptyContentVisibilityAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-handleEmptyContentVisibilityHandler';\r\n\r\n\tprivate DATA_ACTIVATED: string = 'data-handle-empty-content-visibility-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\tnew HandleEmptyContentVisibility(handler);\r\n\t\t});\r\n\t}\r\n}\r\n","import 'lazysizes/plugins/bgset/ls.bgset.min';\r\nimport lazySizes from 'lazysizes';\r\n\r\nexport default class LazyLoadImage {\r\n\tprivate CLASS_HANDLER: string = 'js-lazyLoadImage';\r\n\tprivate CLASS_LOADED: string = 'is-lazyload-loaded';\r\n\tprivate CLASS_LOADING: string = 'is-lazyload-loading';\r\n\tprivate CLASS_PRELOAD: string = 'is-lazyload-preload';\r\n\tprivate CLASS_ERROR: string = 'is-lazyload-error';\r\n\r\n\tpublic init(): void {\r\n\t\tlazySizes.cfg.lazyClass = this.CLASS_HANDLER;\r\n\t\tlazySizes.cfg.loadedClass = this.CLASS_LOADED;\r\n\t\tlazySizes.cfg.loadingClass = this.CLASS_LOADING;\r\n\t\tlazySizes.cfg.preloadClass = this.CLASS_PRELOAD;\r\n\t\tlazySizes.cfg.errorClass = this.CLASS_ERROR;\r\n\t\tlazySizes.init();\r\n\t}\r\n}\r\n","import {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport SmoothScroll from \"@modules/scroll/SmoothScroll\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter, map} from \"rxjs/operators\";\r\n\r\nexport default class SmoothScrollAutoActivation extends SmoothScroll {\r\n\tprivate CLASS_HANDLER: string = 'js-smoothScrollAuto';\r\n\tprivate DATA_ATTR_ELEMENT_ID: string = 'data-smooth-scroll-id';\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\tbehavior: \"smooth\",\r\n\t\t});\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t\tmap(event => getDefinitionElement(event.target as HTMLElement, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(handler => {\r\n\t\t\t\tthis.scrollBy(handler);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate scrollBy(mover: HTMLElement): void {\r\n\t\tconst itemId: string = mover.getAttribute(this.DATA_ATTR_ELEMENT_ID);\r\n\r\n\t\tif (itemId) {\r\n\t\t\tconst anchor: HTMLElement = document.getElementById(itemId);\r\n\r\n\t\t\tif (anchor) {\r\n\t\t\t\tthis.scrollTo(anchor)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","import {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport ToggleConnectedArea from \"@modules/toggle/ToggleConnectedArea\";\r\n\r\nexport default class ToggleConnectedAreaAutoActivated extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-toggleConnectedAreaAuto';\r\n\r\n\tprivate DATA_ACTIVATED: string = 'data-toggle-connected-area-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.DATA_ACTIVATED))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.DATA_ACTIVATED, 'true');\r\n\t\t\tnew ToggleConnectedArea(handler);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n","import {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport TextareaAutoHeight from \"@modules/textarea/TextareaAutoHeight\";\r\n\r\nexport default class TextareaAutoHeightAutoActivation extends DynamicInsertionElements {\r\n\tprivate CLASS_HANDLER: string = 'js-textareaAutoHeight';\r\n\r\n\tprivate DATA_ATTR_ACTIVATED: string = 'data-textarea-auto-height-activated';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst textareas: Array<HTMLTextAreaElement> = Array.from(\r\n\t\t\tscope.getElementsByClassName(this.CLASS_HANDLER)\r\n\t\t) as Array<HTMLTextAreaElement>;\r\n\t\ttextareas\r\n\t\t\t.filter(textarea => {\r\n\t\t\t\treturn !strToBoolean(textarea.getAttribute(this.DATA_ATTR_ACTIVATED))\r\n\t\t\t})\r\n\t\t\t.forEach(textarea => {\r\n\t\t\t\ttextarea.setAttribute(this.DATA_ATTR_ACTIVATED, 'true');\r\n\t\t\t\tnew TextareaAutoHeight(textarea);\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {strToBoolean} from \"@helpers/index\";\r\nimport Tab from \"@modules/tab/Tab\";\r\n\r\nexport default class TabAutoActivation {\r\n\tprivate CLASS_SELECTOR: string = 'js-tabAuto';\r\n\r\n\tprivate readonly name: string = 'tab-auto';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tArray\r\n\t\t\t.from(scope.getElementsByClassName(this.CLASS_SELECTOR))\r\n\t\t\t.forEach(tab => {\r\n\t\t\t\tif (strToBoolean(tab.getAttribute(this.getDataAttrActivated()))) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttab.setAttribute(this.getDataAttrActivated(), 'true');\r\n\r\n\t\t\t\tnew Tab(tab as HTMLElement);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getDataAttrActivated(): string {\r\n\t\treturn `data-${this.name}-activated`;\r\n\t}\r\n}\r\n","import AutoActivation from \"@modules/auto-activation/AutoActivation\";\r\nimport RequestReplacementDataAttr from \"@modules/request-replacement/RequestReplacementDataAttr\";\r\n\r\nexport default class RequestReplacementDataAttrAutoActivation extends AutoActivation {\r\n\tconstructor() {\r\n\t\tsuper('request-replacement-data-attr', 'js-requestReplacementDataAttrAuto', true);\r\n\t}\r\n\r\n\tprotected initInstance(handler: HTMLElement) {\r\n\t\tnew RequestReplacementDataAttr(handler).init();\r\n\t}\r\n}\r\n","import AutoActivation from \"@modules/auto-activation/AutoActivation\";\r\nimport AnalyticsClickOnProductCard from \"@modules/analytics/AnalyticsClickOnProductCard\";\r\n\r\nexport default class AnalyticsClickOnProductCardAutoActivation extends AutoActivation {\r\n\tconstructor() {\r\n\t\tsuper('analytics-click-cn-product-card', 'js-analyticsClickOnProductCardAuto', true);\r\n\t}\r\n\r\n\tprotected initInstance(handler: HTMLElement) {\r\n\t\tnew AnalyticsClickOnProductCard(handler).init();\r\n\t}\r\n}\r\n","import AutoActivation from \"@modules/auto-activation/AutoActivation\";\r\nimport AnalyticsAddToCartInProductCostLine from \"@modules/analytics/AnalyticsAddToCartInProductCostLine\";\r\nimport ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\n\r\nexport default class AnalyticsAddToCartInProductCostLineAutoActivation extends AutoActivation {\r\n\tconstructor() {\r\n\t\tsuper('analytics-add-to-cart-in-product-cost-line', 'js-analyticsAddToCartInProductCostLineAuto', true);\r\n\t}\r\n\r\n\tprotected initInstance(handler: ProductCostLineComponent) {\r\n\t\tnew AnalyticsAddToCartInProductCostLine(handler).init();\r\n\t}\r\n}\r\n","import AutoActivation from \"@modules/auto-activation/AutoActivation\";\r\nimport AnalyticsAddToCartOnProductCard from \"@modules/analytics/AnalyticsAddToCartOnProductCard\";\r\n\r\nexport default class AnalyticsAddToCartOnProductCardAutoActivation extends AutoActivation {\r\n\tconstructor() {\r\n\t\tsuper('analytics-add-to-cart-on-product-card', 'js-analyticsAddToCartOnProductCardAuto', true);\r\n\t}\r\n\r\n\tprotected initInstance(handler: HTMLElement) {\r\n\t\tnew AnalyticsAddToCartOnProductCard(handler).init();\r\n\t}\r\n}\r\n","import {TWebComponentLiteSlotMap} from \"@modules/web-component/model\";\r\nimport {LitElement} from \"lit-element\";\r\n\r\nexport default class WebComponentLite extends LitElement {\r\n\tprivate slotMap: TWebComponentLiteSlotMap;\r\n\tprivate slotListMap: Record<string, Array<Element>>;\r\n\tprivate elementChildren: Array<ChildNode> = [];\r\n\tprivate isFirstRendered: boolean = false;\r\n\r\n\tpublic connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tif (!this.elementChildren.length) {\r\n\t\t\tthis.elementChildren = this.getElementChildren();\r\n\t\t}\r\n\t\tthis.slotMap = this.getSlotMap();\r\n\t\tthis.slotListMap = this.getSlotListMap();\r\n\r\n\t\tif (!this.isFirstRendered) {\r\n\t\t\tthis.beforeFirstRendered();\r\n\t\t}\r\n\t\tthis.isFirstRendered = true;\r\n\t}\r\n\r\n\tprivate getSlotMap(): TWebComponentLiteSlotMap {\r\n\t\treturn Array\r\n\t\t\t.from(this.children)\r\n\t\t\t.filter(element => element.hasAttribute('slot'))\r\n\t\t\t.reduce((map, obj) => ({\r\n\t\t\t\t...map,\r\n\t\t\t\t[obj.getAttribute('slot')]: obj\r\n\t\t\t}), {});\r\n\t}\r\n\r\n\tprivate getSlotListMap(): Record<string, Array<Element>> {\r\n\t\tconst listMap: Record<string, Array<Element>> = {};\r\n\t\tArray\r\n\t\t\t.from(this.children)\r\n\t\t\t.filter(element => element.hasAttribute('slot'))\r\n\t\t\t.forEach(element => {\r\n\t\t\t\tconst name = element.getAttribute('slot');\r\n\t\t\t\tlistMap[name] = [\r\n\t\t\t\t\t...listMap[name] ?? [],\r\n\t\t\t\t\telement,\r\n\t\t\t\t];\r\n\t\t\t});\r\n\t\treturn listMap;\r\n\t}\r\n\r\n\tprivate getElementChildren(): Array<ChildNode> {\r\n\t\treturn Array\r\n\t\t\t.from(this.childNodes)\r\n\t\t\t.filter(element => {\r\n\t\t\t\tif (element instanceof Element || element instanceof HTMLElement) {\r\n\t\t\t\t\treturn !element.hasAttribute('slot')\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected getSlot(slotName: string): ChildNode | null {\r\n\t\treturn this.slotMap[slotName] || null;\r\n\t}\r\n\r\n\tprotected getSlotList(slotName: string): Array<ChildNode> {\r\n\t\treturn this.slotListMap[slotName] || [];\r\n\t}\r\n\r\n\tprotected getChildren(): Array<ChildNode> {\r\n\t\treturn this.elementChildren;\r\n\t}\r\n\r\n\tprotected createRenderRoot() {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprotected beforeFirstRendered(): void {\r\n\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-example')\r\nclass ExampleComponent extends WebComponentLite {\r\n\t@property()\r\n\tname: string = 'Name';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\trender(): TemplateResult {\r\n\t\tconst header = this.getSlot('header');\r\n\t\tconst body = this.getSlot('body');\r\n\t\tconst children = this.getChildren();\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-example\">\r\n\t\t\t\t<input type=\"text\" value=\"text value\" name=\"field-in-custom-element\">\r\n\t\t\t\t${header ?\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<header class=\"c-example__header\">\r\n\t\t\t\t\t\t\t<mark>Header slot start</mark>\r\n\t\t\t\t\t\t\t${header}\r\n\t\t\t\t\t\t\t<mark>Header slot end</mark>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t` :\r\n\t\t\t\t\tnull}\r\n\t\t\t\t<p>My name ${this.name}</p>\r\n\t\t\t\t${body ?\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<div class=\"c-example__body\">\r\n\t\t\t\t\t\t\t<mark>Body slot start</mark>\r\n\t\t\t\t\t\t\t${body}\r\n\t\t\t\t\t\t\t<mark>Body slot end</mark>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t` :\r\n\t\t\t\t\tnull}\r\n\t\t\t\t${children.length ?\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<div class=\"c-example__other\">\r\n\t\t\t\t\t\t\t<mark>Other slot</mark>\r\n\t\t\t\t\t\t\t${children}\r\n\t\t\t\t\t\t\t<mark>Other slot end</mark>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t` :\r\n\t\t\t\t\tnull}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import StepComponent from \"@components/steps/StepComponent\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, queryAll, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-steps')\r\nclass StepsComponent extends WebComponentLite {\r\n\r\n\t@queryAll('c-step')\r\n\tsteps: NodeListOf<StepComponent>;\r\n\r\n\t@property({\r\n\t\tattribute: false\r\n\t})\r\n\tselectedIndex: number = 0;\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.setDefaultActiveStep();\r\n\t}\r\n\r\n\tpublic nextStep() {\r\n\t\tif (this.selectedIndex >= this.steps.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedIndex++\r\n\t}\r\n\r\n\tpublic prevStep() {\r\n\t\tif (this.selectedIndex <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedIndex--;\r\n\t}\r\n\r\n\tprivate setDefaultActiveStep() {\r\n\t\tconst activeIndex = Array.from(this.steps).findIndex(step => step.selected);\r\n\t\tif (activeIndex != -1 || !this.steps.length) {\r\n\t\t\tthis.selectedIndex = activeIndex\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.steps.item(0).selected = true;\r\n\t}\r\n\r\n\tprotected nextBtnHandler(event: Event) {\r\n\t\tevent.preventDefault();\r\n\t\tthis.nextStep();\r\n\t}\r\n\r\n\tprotected prevBtnHandler(event: Event) {\r\n\t\tevent.preventDefault();\r\n\t\tthis.prevStep();\r\n\t}\r\n\r\n\tprotected isDisabledNextBtn(): boolean {\r\n\t\treturn this.selectedIndex >= this.steps.length - 1;\r\n\t}\r\n\r\n\tprotected isDisabledPrevBtn(): boolean {\r\n\t\treturn this.selectedIndex <= 0;\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-steps\">\r\n\t\t\t\t<header class=\"c-steps__header\">\r\n\t\t\t\t\t${this.selectedIndex + 1}   ${this.steps.length}\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<div class=\"c-steps__content\">\r\n\t\t\t\t\t${Array.from(this.steps).map((step, index) => {\r\n\t\t\t\t\t\tstep.selected = this.selectedIndex === index;\r\n\t\t\t\t\t\treturn step;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<footer class=\"c-steps__footer\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\t@click=\"${this.prevBtnHandler}\"\r\n\t\t\t\t\t\t?disabled=\"${this.isDisabledPrevBtn()}\">\r\n\t\t\t\t\t\tPrev\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\t@click=\"${this.nextBtnHandler}\"\r\n\t\t\t\t\t\t?disabled=\"${this.isDisabledNextBtn()}\">\r\n\t\t\t\t\t\tNext\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</footer>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-step')\r\nexport default class StepComponent extends WebComponentLite {\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean\r\n\t})\r\n\tselected: boolean = false;\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst children = this.getChildren();\r\n\r\n\t\treturn html`\r\n\t\t\t${children}\r\n\t\t`;\r\n\t}\r\n}\r\n\r\n\r\n","export enum EProductBasketBundlerOptionControlSignals {\r\n\tNEXT,\r\n\tPREV,\r\n}\r\n","import {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\n\r\nexport type TProductBasketBundlerOptionState = {\r\n\tkey: EProductBasketBundlerOptions\r\n\tstate: EProductBasketBundlerOptionStates\r\n\tmessage?: string\r\n}\r\n\r\nexport enum EProductBasketBundlerOptionStates {\r\n\tLOADING = 'LOADING',\r\n\tWAITING = 'WAITING',\r\n\tREADY = 'READY',\r\n\tERROR = 'ERROR',\r\n}\r\n","export enum EProductBasketBundlerStoreTypes {\r\n\tSELECTED_OPTION = 'SELECTED_OPTION',\r\n}\r\n","import {TProductBundlerOptionPaymentMethod} from \"@components/product-basket-bundler/product-bundler-option-payment-method/model\";\r\nimport {TAccessory} from \"@models/Accessory\";\r\nimport {TInsurance} from \"@models/Insurance\";\r\nimport {TTariff} from \"@models/Tariff\";\r\n\r\nexport enum EProductBasketBundlerOptions {\r\n\tPAYMENT_METHOD = 'PAYMENT_METHOD',\r\n\tCONTRACT_TARIFF = 'CONTRACT_TARIFF',\r\n\tINSURANCE = 'INSURANCE',\r\n\tACCESSORY = 'ACCESSORY',\r\n}\r\n\r\nexport type EProductBasketBundlerControl = {\r\n\tloading?: boolean\r\n\tdisabled?: boolean\r\n\tvisible?: boolean\r\n}\r\n\r\nexport type TProductBasketBundlerGetOptionsRequest = {\r\n\tskuId: string\r\n}\r\n\r\nexport type TProductBasketBundlerGetOptionsResponse = Array<EProductBasketBundlerOptions>\r\n\r\nexport type TProductBasketBundlerAddToCardRequest = {\r\n\tskuId: number | string\r\n\tperiod: number\r\n\ttariff?: TTariff\r\n\tpaymentMethod?: TProductBundlerOptionPaymentMethod\r\n\tphoneNumber?: string\r\n\toperatorName?: string\r\n\tinsurance?: Array<TInsurance>\r\n\taccessory?: Array<TAccessory>\r\n}\r\n\r\nexport type TProductBasketBundlerAddToCardResponse = {}\r\n","import {EProductBasketBundlerOptionControlSignals} from \"@components/product-basket-bundler/product-basket-bundler-option-controls/model\";\r\nimport {Subject} from \"rxjs\";\r\n\r\nexport default class ProductBasketBundlerOptionControls {\r\n\tpublic signal: Subject<EProductBasketBundlerOptionControlSignals> = new Subject<EProductBasketBundlerOptionControlSignals>();\r\n\r\n\tpublic emitSignal(signal: EProductBasketBundlerOptionControlSignals): void {\r\n\t\tthis.signal.next(signal);\r\n\t}\r\n}\r\n","import {TProductBasketBundlerOptionState} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport {BehaviorSubject, Subject} from \"rxjs\";\r\n\r\nexport default class ProductBasketBundlerOptionStates {\r\n\tpublic states: BehaviorSubject<Array<TProductBasketBundlerOptionState>> = new BehaviorSubject<Array<TProductBasketBundlerOptionState>>([]);\r\n\r\n\tpublic onChangeState: Subject<TProductBasketBundlerOptionState> = new Subject<TProductBasketBundlerOptionState>();\r\n\r\n\tpublic updateState(state: TProductBasketBundlerOptionState): void {\r\n\t\tconst hasState = this.states.getValue().find(item => item.key === state.key);\r\n\t\tif (hasState) {\r\n\t\t\tthis.states.next(\r\n\t\t\t\tthis.states.getValue().map(item => {\r\n\t\t\t\t\tif (item.key === state.key) {\r\n\t\t\t\t\t\tthis.onChangeState.next(state);\r\n\t\t\t\t\t\treturn state;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t} else {\r\n\t\t\tthis.states.next(\r\n\t\t\t\t[\r\n\t\t\t\t\t...this.states.getValue(),\r\n\t\t\t\t\tstate,\r\n\t\t\t\t]\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.onChangeState.next(state);\r\n\t}\r\n}\r\n","export function Metadata(key: string | symbol, value: unknown): PropertyDecorator {\r\n\treturn function (target: Object, propertyKey: string | symbol) {\r\n\t\tReflect.defineMetadata(key, value, target, propertyKey);\r\n\r\n\t\tlet propertyKeys = Reflect.getOwnMetadata(key, target) || (Reflect.getMetadata(key, target) || []).slice(0);\r\n\t\tReflect.defineMetadata(key, propertyKeys, target);\r\n\t\tpropertyKeys.push(propertyKey);\r\n\t};\r\n}\r\n\r\nexport function getMetadataPropertyKeys(key: string, target: Object): Array<string | symbol> {\r\n\treturn Reflect.getMetadata(key, target) || [];\r\n}\r\n\r\nexport function getPropertyMetadataKeys(target: Object, propertyKey: string): Array<string | symbol> {\r\n\treturn Reflect.getMetadataKeys(target, propertyKey) || [];\r\n}\r\n","import {TContractTariff} from \"@models/Contract\";\r\n\r\nexport enum EProductBundlerOptionPaymentMethodTypes {\r\n\tCONTRACT_TARIFF = 'CONTRACT_TARIFF',\r\n\tFULL_PRICE = 'FULL_PRICE',\r\n}\r\n\r\nexport type TProductBundlerOptionPaymentMethodRequest = {\r\n\tskuId: string\r\n}\r\n\r\nexport type TProductBundlerOptionPaymentMethodResponse = Array<TProductBundlerOptionPaymentMethod>;\r\n\r\nexport type TProductBundlerOptionPaymentMethod =\r\n\tTProductBundlerOptionPaymentMethodContract\r\n\t| TProductBundlerOptionPaymentMethodFullPrice;\r\n\r\nexport type TProductBundlerOptionPaymentMethodCommon = {\r\n\tid: number\r\n}\r\n\r\nexport type TProductBundlerOptionPaymentMethodContract = TProductBundlerOptionPaymentMethodCommon & {\r\n\ttype: EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF\r\n\tcontractTariff: TContractTariff\r\n}\r\n\r\nexport type TProductBundlerOptionPaymentMethodFullPrice = TProductBundlerOptionPaymentMethodCommon & {\r\n\ttype: EProductBundlerOptionPaymentMethodTypes.FULL_PRICE\r\n\tprice: string\r\n}\r\n","import {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport {EProductBasketBundlerStoreTypes} from \"@components/product-basket-bundler/product-basket-bundler-store/model\";\r\nimport {TProductBundlerOptionPaymentMethod} from \"@components/product-basket-bundler/product-bundler-option-payment-method/model\";\r\nimport {TProductOptionTariffPhoneInfo} from \"@components/product-basket-bundler/tariff-model\";\r\nimport {TSelectContractTariffSelected} from \"@components/select-tariff/model\";\r\nimport {Metadata} from \"@decorators/property/metadata\";\r\nimport {TAccessory} from \"@models/Accessory\";\r\nimport {TInsurance} from \"@models/Insurance\";\r\nimport 'reflect-metadata';\r\nimport {BehaviorSubject, merge, Observable} from \"rxjs\";\r\n\r\nexport default class ProductBasketBundlerStore {\r\n\tpublic skuId: string;\r\n\r\n\tpublic readonly phoneInfo: BehaviorSubject<TProductOptionTariffPhoneInfo> = new BehaviorSubject<TProductOptionTariffPhoneInfo>(null);\r\n\r\n\t@Metadata('type', EProductBasketBundlerStoreTypes.SELECTED_OPTION)\r\n\t@Metadata('optionType', EProductBasketBundlerOptions.PAYMENT_METHOD)\r\n\t@Metadata('required', true)\r\n\tpublic readonly selectedPaymentMethod: BehaviorSubject<TProductBundlerOptionPaymentMethod> = new BehaviorSubject<TProductBundlerOptionPaymentMethod>(null);\r\n\r\n\t@Metadata('type', EProductBasketBundlerStoreTypes.SELECTED_OPTION)\r\n\t@Metadata('optionType', EProductBasketBundlerOptions.CONTRACT_TARIFF)\r\n\t@Metadata('required', true)\r\n\tpublic readonly selectedContractTariff: BehaviorSubject<TSelectContractTariffSelected> = new BehaviorSubject<TSelectContractTariffSelected>(null);\r\n\r\n\t@Metadata('type', EProductBasketBundlerStoreTypes.SELECTED_OPTION)\r\n\t@Metadata('optionType', EProductBasketBundlerOptions.INSURANCE)\r\n\t@Metadata('required', false)\r\n\tpublic readonly selectedInsurance: BehaviorSubject<Array<TInsurance>> = new BehaviorSubject<Array<TInsurance>>([]);\r\n\r\n\t@Metadata('type', EProductBasketBundlerStoreTypes.SELECTED_OPTION)\r\n\t@Metadata('optionType', EProductBasketBundlerOptions.ACCESSORY)\r\n\t@Metadata('required', false)\r\n\tpublic readonly selectedAccessory: BehaviorSubject<Array<TAccessory>> = new BehaviorSubject<Array<TAccessory>>([]);\r\n\r\n\tpublic getStreamChangeByType(type: EProductBasketBundlerStoreTypes): Observable<unknown> {\r\n\t\tconst propertyKeys: Array<string | symbol> = this.getProperties('type', type);\r\n\t\treturn merge(\r\n\t\t\t...propertyKeys.map(key => this[key])\r\n\t\t);\r\n\t}\r\n\r\n\tpublic getSelectedValueByType(option: EProductBasketBundlerOptions): unknown {\r\n\t\tconst propertyKey = this.getPropertyKeyByTypeAndOption(EProductBasketBundlerStoreTypes.SELECTED_OPTION, option);\r\n\t\tif (!propertyKey) {\r\n\t\t\tthrow new Error(`selected by type ${option} not found`);\r\n\t\t}\r\n\t\tconst selected: BehaviorSubject<unknown> = this[propertyKey];\r\n\t\tif (!(selected instanceof BehaviorSubject)) {\r\n\t\t\tthrow new Error(`selected by type ${option} not BehaviorSubject`);\r\n\t\t}\r\n\t\treturn selected.getValue();\r\n\t}\r\n\r\n\tpublic clearSelectedValueByType(option: EProductBasketBundlerOptions): void {\r\n\t\tconst propertyKey = this.getPropertyKeyByTypeAndOption(EProductBasketBundlerStoreTypes.SELECTED_OPTION, option);\r\n\t\tif (!propertyKey) {\r\n\t\t\tthrow new Error(`selected by type ${option} not found`);\r\n\t\t}\r\n\t\tconst selected: BehaviorSubject<unknown> = this[propertyKey];\r\n\t\tif (!(selected instanceof BehaviorSubject)) {\r\n\t\t\tthrow new Error(`selected by type ${option} not BehaviorSubject`);\r\n\t\t}\r\n\t\tselected.next(null);\r\n\t}\r\n\r\n\tpublic selectedIsRequired(option: EProductBasketBundlerOptions): boolean {\r\n\t\tconst propertyKey = this.getPropertyKeyByTypeAndOption(EProductBasketBundlerStoreTypes.SELECTED_OPTION, option);\r\n\t\tif (!propertyKey) {\r\n\t\t\tthrow new Error(`selected by type ${option} not found`);\r\n\t\t}\r\n\t\treturn Boolean(Reflect.getMetadata('required', this, propertyKey));\r\n\t}\r\n\r\n\tprivate getPropertyKeyByTypeAndOption(type: EProductBasketBundlerStoreTypes, option: EProductBasketBundlerOptions): string | symbol {\r\n\t\treturn this.getProperties('type', type)\r\n\t\t\t.find(propertyKey => {\r\n\t\t\t\treturn Reflect.getMetadata('optionType', this, propertyKey) === option\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getProperties(key: string, value: string): Array<string | symbol> {\r\n\t\treturn (Reflect.getMetadata(key, this) || [])\r\n\t\t\t.filter(propertyKey => {\r\n\t\t\t\treturn Reflect.getMetadata(key, this, propertyKey) === value\r\n\t\t\t});\r\n\t}\r\n}\r\n","export interface ILoader {\r\n\treInit(options: TLoaderOption): void\r\n\r\n\tshow(): void\r\n\r\n\thide(): void\r\n\r\n\tgetHTMLElement(): HTMLElement\r\n}\r\n\r\nexport type TLoaderOption = {\r\n\telement: HTMLElement | 'create'\r\n\tmodifications?: Array<ELoaderModification>\r\n}\r\n\r\nexport enum ELoaderModification {\r\n\tmd = 'c-loader_md',\r\n\tlg = 'c-loader_lg',\r\n\tfixed = 'c-loader_fixed'\r\n}\r\n\r\nexport enum ELoaderSize {\r\n\tSM = 'sm',\r\n\tMD = 'md',\r\n\tLG = 'lg',\r\n}\r\n\r\nexport enum ELoaderType {\r\n\tPRIMARY = 'primary',\r\n\tGHOST = 'ghost',\r\n}\r\n\r\nexport enum ELoaderMods {\r\n\r\n}\r\n","import BtnComponent from \"@components/btn/BtnComponent\";\r\nimport {EProductBasketBundlerOptionControlSignals} from \"@components/product-basket-bundler/product-basket-bundler-option-controls/model\";\r\nimport ProductBasketBundlerOptionControls\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-option-controls/ProductBasketBundlerOptionControls\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport ProductBasketBundlerOptionStates\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-option-states/ProductBasketBundlerOptionStates\";\r\nimport {EProductBasketBundlerStoreTypes} from \"@components/product-basket-bundler/product-basket-bundler-store/model\";\r\nimport ProductBasketBundlerStore\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-store/ProductBasketBundlerStore\";\r\nimport {\r\n\tEProductBundlerOptionPaymentMethodTypes,\r\n\tTProductBundlerOptionPaymentMethod\r\n} from \"@components/product-basket-bundler/product-bundler-option-payment-method/model\";\r\nimport ProductBundlerOptionComponent\r\n\tfrom \"@components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent\";\r\nimport {TProductCostLineOnBtnClickEventDetail} from \"@components/product-cost-line/model\";\r\nimport {TSelectContractTariffSelected} from \"@components/select-tariff/model\";\r\nimport {TAccessory} from \"@models/Accessory\";\r\nimport {TInsurance} from \"@models/Insurance\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport SmoothScroll from \"@modules/scroll/SmoothScroll\";\r\nimport {EToastType, IToast} from \"@modules/toast/model\";\r\nimport Toast from \"@modules/toast/Toast\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {\r\n\tcustomElement,\r\n\thtml,\r\n\tstate,\r\n\tproperty,\r\n\tPropertyValues,\r\n\tqueryAll,\r\n\tqueryAsync,\r\n\tTemplateResult\r\n} from \"lit-element\";\r\nimport 'reflect-metadata';\r\nimport {from, fromEvent, of} from \"rxjs\";\r\nimport {filter} from \"rxjs/internal/operators\";\r\nimport {map, switchMap} from \"rxjs/operators\";\r\nimport {EBtnMods, EBtnSize, EBtnState, EBtnType} from \"../btn/model\";\r\nimport {ELoaderSize, ELoaderType} from \"../loader/model\";\r\nimport ProductCostLineComponent from \"../product-cost-line/ProductCostLineComponent\";\r\nimport {\r\n\tEProductBasketBundlerControl,\r\n\tEProductBasketBundlerOptions,\r\n\tTProductBasketBundlerAddToCardRequest,\r\n\tTProductBasketBundlerGetOptionsRequest,\r\n\tTProductBasketBundlerGetOptionsResponse\r\n} from \"./model\";\r\n\r\n@customElement('c-product-basket-bundler')\r\nexport default class ProductBasketBundlerComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'sku-id',\r\n\t})\r\n\tpublic skuId: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'confirmed-link',\r\n\t})\r\n\tpublic confirmedLink: string = '';\r\n\r\n\t@state()\r\n\tpublic currentStepIndex: number = 0;\r\n\r\n\t@state()\r\n\tprivate optionTypes: Array<EProductBasketBundlerOptions> = [];\r\n\r\n\t@queryAll('[product-basket-bundler-option]')\r\n\tprivate options: NodeListOf<ProductBundlerOptionComponent>\r\n\r\n\t@queryAsync('[product-basket-bundler-next-btn]')\r\n\tprivate btnNext: Promise<BtnComponent>;\r\n\r\n\t@queryAsync('[product-basket-bundler-prev-btn]')\r\n\tprivate btnPrev: Promise<BtnComponent>;\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate error: unknown;\r\n\r\n\t@state()\r\n\tprivate isAddToCartRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate prevControl: EProductBasketBundlerControl = {\r\n\t\tdisabled: false,\r\n\t\tloading: false,\r\n\t\tvisible: false,\r\n\t};\r\n\r\n\t@state()\r\n\tprivate nextControl: EProductBasketBundlerControl = {\r\n\t\tdisabled: false,\r\n\t\tloading: false,\r\n\t\tvisible: true,\r\n\t};\r\n\r\n\t@state()\r\n\tprivate optionIsReady: boolean = false;\r\n\r\n\tprotected httpService: HttpRequest = new HttpRequest();\r\n\tprivate readonly store: ProductBasketBundlerStore;\r\n\tprivate readonly optionStates: ProductBasketBundlerOptionStates;\r\n\tprivate readonly controls: ProductBasketBundlerOptionControls;\r\n\tprivate readonly productCostLine: ProductCostLineComponent;\r\n\tprivate smoothScroll: SmoothScroll = new SmoothScroll({\r\n\t\tblock: 'start',\r\n\t});\r\n\tprivate smoothScrollController: SmoothScroll = new SmoothScroll({\r\n\t\tblock: \"center\",\r\n\t});\r\n\tprivate toast: IToast = Toast.getInstance();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.store = new ProductBasketBundlerStore();\r\n\t\tthis.optionStates = new ProductBasketBundlerOptionStates();\r\n\t\tthis.controls = new ProductBasketBundlerOptionControls();\r\n\t\tthis.productCostLine = document.querySelector(`c-product-cost-line`);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues): void {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.getOptions();\r\n\t\tthis.updateBtnAvailableInProductCostLine();\r\n\t\tthis.store.skuId = this.skuId;\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.optionStates\r\n\t\t\t.onChangeState\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(state => state.key === this.getCurrentOptionType())\r\n\t\t\t)\r\n\t\t\t.subscribe((state) => {\r\n\t\t\t\tthis.updateControlsState(state.key, state.state);\r\n\r\n\t\t\t\tconst isFirst = this.isFirstOption(state.key);\r\n\t\t\t\tif (!isFirst) {\r\n\t\t\t\t\tthis.scrollToTopContainer();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tthis.store\r\n\t\t\t.getStreamChangeByType(EProductBasketBundlerStoreTypes.SELECTED_OPTION)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateCostInProductCostLine();\r\n\t\t\t\tthis.updateBtnAvailableInProductCostLine();\r\n\t\t\t})\r\n\r\n\t\tfromEvent(this.productCostLine, 'on-btn-click')\r\n\t\t\t.subscribe((event: CustomEvent<TProductCostLineOnBtnClickEventDetail>) => {\r\n\t\t\t\tthis.handleClickBtnAddToCart(event);\r\n\t\t\t});\r\n\r\n\t\tthis.controls\r\n\t\t\t.signal\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(signal => {\r\n\t\t\t\tswitch (signal) {\r\n\t\t\t\t\tcase EProductBasketBundlerOptionControlSignals.NEXT:\r\n\t\t\t\t\t\tthis.handleNextSignal();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase EProductBasketBundlerOptionControlSignals.PREV:\r\n\t\t\t\t\t\tthis.handlePrevSignal();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handlePrevSignal(): void {\r\n\t\tthis.prevStep();\r\n\t}\r\n\r\n\tprivate handleNextSignal(): void {\r\n\t\tif (this.currentStepIndex >= this.optionTypes.length - 1) {\r\n\t\t\tthis.addToCart();\r\n\t\t} else {\r\n\t\t\tthis.nextStep();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleClickBtnAddToCart(event: CustomEvent<TProductCostLineOnBtnClickEventDetail>): void {\r\n\t\tif (event.detail.states.includes(EBtnState.DISABLED)) {\r\n\t\t\tthis.notifyAboutInactiveBtnAddToCart();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.addToCart();\r\n\t}\r\n\r\n\tprivate notifyAboutInactiveBtnAddToCart(): void {\r\n\t\tthis.toast.add({\r\n\t\t\ttype: EToastType.INFO,\r\n\t\t\ttext: '      ',\r\n\t\t});\r\n\t\tthis.scrollToNextBtn();\r\n\t}\r\n\r\n\tprivate scrollToNextBtn(): void {\r\n\t\tfrom(this.btnNext)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap(component => {\r\n\t\t\t\t\tif (!component) {\r\n\t\t\t\t\t\tconsole?.error('ProductBasketBundlerComponent: btn next is not defined !');\r\n\t\t\t\t\t\treturn of(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn from(component.updateComplete)\r\n\t\t\t\t\t\t.pipe(\r\n\t\t\t\t\t\t\tmap(() => component)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(value => Boolean(value))\r\n\t\t\t)\r\n\t\t\t.subscribe(component => {\r\n\t\t\t\tthis.smoothScrollController.scrollTo(component);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateControlsState(option: EProductBasketBundlerOptions, state: EProductBasketBundlerOptionStates): void {\r\n\t\tconst isFirst = this.isFirstOption(option);\r\n\t\tconst isLast = this.isLastOption(option);\r\n\r\n\t\tswitch (state) {\r\n\t\t\tcase EProductBasketBundlerOptionStates.LOADING:\r\n\t\t\t\tthis.prevControl = {\r\n\t\t\t\t\tvisible: !isFirst,\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t}\r\n\t\t\t\tthis.nextControl = {\r\n\t\t\t\t\tvisible: !isLast,\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase EProductBasketBundlerOptionStates.ERROR:\r\n\t\t\t\tthis.prevControl = {\r\n\t\t\t\t\tvisible: !isFirst,\r\n\t\t\t\t\tdisabled: false,\r\n\t\t\t\t}\r\n\t\t\t\tthis.nextControl = {\r\n\t\t\t\t\tvisible: !isLast,\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase EProductBasketBundlerOptionStates.WAITING:\r\n\t\t\t\tthis.prevControl = {\r\n\t\t\t\t\tvisible: !isFirst,\r\n\t\t\t\t\tdisabled: false,\r\n\t\t\t\t}\r\n\t\t\t\tthis.nextControl = {\r\n\t\t\t\t\tvisible: false,\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase EProductBasketBundlerOptionStates.READY:\r\n\t\t\t\tthis.prevControl = {\r\n\t\t\t\t\tvisible: !isFirst,\r\n\t\t\t\t\tdisabled: false,\r\n\t\t\t\t}\r\n\t\t\t\tthis.nextControl = {\r\n\t\t\t\t\tvisible: !isLast,\r\n\t\t\t\t\tdisabled: false,\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate scrollToTopContainer(): void {\r\n\t\tthis.smoothScroll.scrollTo(this.parentElement);\r\n\t}\r\n\r\n\tprivate addToCart(): void {\r\n\t\tif (this.isAddToCartRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.productCostLine.isLoadingBtn = true;\r\n\t\tthis.productCostLine.isDisableBtn = true;\r\n\t\tthis.isAddToCartRequesting = true;\r\n\t\tconst data: TProductBasketBundlerAddToCardRequest = {\r\n\t\t\tskuId: this.skuId,\r\n\t\t\tpaymentMethod: this.store.selectedPaymentMethod.getValue() || null,\r\n\t\t\tperiod: this.store.selectedContractTariff.getValue()?.period?.value || null,\r\n\t\t\ttariff: this.store.selectedContractTariff.getValue()?.tariff || null,\r\n\t\t\tphoneNumber: this.store.phoneInfo.getValue()?.number || null,\r\n\t\t\toperatorName: this.store.phoneInfo.getValue()?.operator?.name || null,\r\n\t\t\tinsurance: this.store.selectedInsurance.getValue() || null,\r\n\t\t\taccessory: this.store.selectedAccessory.getValue() || null,\r\n\t\t};\r\n\r\n\t\tthis.httpService\r\n\t\t\t.request({\r\n\t\t\t\turl: '/products/add_to_basket/',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t//TODO: handle response\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\t//TODO: handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isAddToCartRequesting = false;\r\n\t\t\t\tthis.productCostLine.isLoadingBtn = false;\r\n\t\t\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getOptions(): void {\r\n\t\tthis.isLoading = true;\r\n\t\tconst data: TProductBasketBundlerGetOptionsRequest = {\r\n\t\t\tskuId: this.skuId,\r\n\t\t};\r\n\t\tthis.httpService\r\n\t\t\t.request<TProductBasketBundlerGetOptionsResponse>({\r\n\t\t\t\turl: '/products/basket-bundler-options/',\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.optionTypes = response.data.data;\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\t\t\t\tthis.error = reject;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getCurrentOptionType(): EProductBasketBundlerOptions {\r\n\t\treturn this.options.item(this.currentStepIndex).type;\r\n\t}\r\n\r\n\tprivate isFirstOption(type: EProductBasketBundlerOptions): boolean {\r\n\t\treturn this.optionTypes[0] === type;\r\n\t}\r\n\r\n\tprivate isLastOption(type: EProductBasketBundlerOptions): boolean {\r\n\t\treturn this.optionTypes[this.optionTypes.length - 1] === type;\r\n\t}\r\n\r\n\tpublic nextStep(): void {\r\n\t\tif (this.currentStepIndex >= this.optionTypes.length - 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst prevStep = this.options.item(this.currentStepIndex);\r\n\t\tthis.currentStepIndex++\r\n\t\tconst currentStep = this.options.item(this.currentStepIndex);\r\n\t\tcurrentStep.requestData();\r\n\t\tthis.updateBtnAvailableInProductCostLine();\r\n\t\tprevStep.isActive = false;\r\n\t\tcurrentStep.isActive = true;\r\n\t}\r\n\r\n\tpublic prevStep(): void {\r\n\t\tif (this.currentStepIndex <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst prevStep = this.options.item(this.currentStepIndex);\r\n\t\tprevStep.resetData();\r\n\t\tthis.currentStepIndex--;\r\n\t\tconst currentStep = this.options.item(this.currentStepIndex);\r\n\t\tthis.updateBtnAvailableInProductCostLine();\r\n\t\tprevStep.isActive = false;\r\n\t\tcurrentStep.isActive = true;\r\n\r\n\t\tthis.prevControl = {\r\n\t\t\tvisible: this.currentStepIndex != 0,\r\n\t\t\tdisabled: false,\r\n\t\t}\r\n\t\tthis.nextControl = {\r\n\t\t\tvisible: true,\r\n\t\t\tdisabled: false,\r\n\t\t}\r\n\t\tthis.scrollToTopContainer();\r\n\t}\r\n\r\n\tprotected nextBtnHandler(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.nextStep();\r\n\t}\r\n\r\n\tprotected prevBtnHandler(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.prevStep();\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn this.getLoaderTemplate();\r\n\t\t}\r\n\r\n\t\tif (this.error) {\r\n\t\t\treturn this.getErrorTemplate();\r\n\t\t}\r\n\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-product-basket-bundler\">\r\n\t\t\t\t${this.getHeaderTemplate()}\r\n\r\n\t\t\t\t<div class=\"c-product-basket-bundler__content\">\r\n\t\t\t\t\t${this.getOptionTemplates(this.optionTypes).map((step, index) => {\r\n\t\t\t\t\t\tconst activeClass: string = this.currentStepIndex === index ? 'c-product-basket-bundler__item_active' : '';\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<div class=\"c-product-basket-bundler__item ${activeClass}\">\r\n\t\t\t\t\t\t\t\t${step}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t`;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<footer class=\"c-product-basket-bundler__footer\">\r\n\t\t\t\t\t${this.getPrevBtnTemplate()}\r\n\t\t\t\t\t${this.getNextBtnTemplate()}\r\n\t\t\t\t</footer>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getHeaderTemplate(): TemplateResult {\r\n\t\tif (this.optionTypes.length > 1) {\r\n\t\t\treturn html`\r\n\t\t\t\t<header class=\"c-product-basket-bundler__header\">\r\n\t\t\t\t\t<p class=\"c-product-basket-bundler__progress\">\r\n\t\t\t\t\t\t${this.currentStepIndex + 1}   ${this.optionTypes.length}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</header>\r\n\t\t\t`;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate getLoaderTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-loader active\r\n\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t  size=\"${ELoaderSize.MD}\"\r\n\t\t\t\t\t  class=\"c-product-basket-bundler__loader\">\r\n\t\t\t</c-loader>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p>   </p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPrevBtnTemplate(): TemplateResult {\r\n\t\tif (!this.prevControl.visible) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<c-btn product-basket-bundler-prev-btn\r\n\t\t\t\t   class=\"c-product-basket-bundler__btn c-product-basket-bundler__btn-prev\"\r\n\t\t\t\t   type=\"${EBtnType.LINK}\"\r\n\t\t\t\t   size=\"${EBtnSize.LG}\"\r\n\t\t\t\t   .mods=\"${[EBtnMods.WITHOUT_P, EBtnMods.ADAPTIVE_TO_MD]}\"\r\n\t\t\t\t   prependIconClass=\"o-icon_angle-left-filled\"\r\n\t\t\t\t   @click=\"${this.prevBtnHandler}\"\r\n\t\t\t\t   ?loading=\"${this.prevControl.loading}\"\r\n\t\t\t\t   ?disabled=\"${this.prevControl.disabled}\">\r\n\t\t\t\t<span class=\"u-d-none u-d-sm-inline\"> </span>\r\n\t\t\t\t<span class=\"u-d-sm-none\"></span>\r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNextBtnTemplate(): TemplateResult {\r\n\t\tif (!this.nextControl.visible) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<c-btn product-basket-bundler-next-btn\r\n\t\t\t\t   class=\"c-product-basket-bundler__btn c-product-basket-bundler__btn-next\"\r\n\t\t\t\t   type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t   .mods=\"${[EBtnMods.ADAPTIVE_TO_MD]}\"\r\n\t\t\t\t   @click=\"${this.nextBtnHandler}\"\r\n\t\t\t\t   ?loading=\"${this.nextControl.loading}\"\r\n\t\t\t\t   ?disabled=\"${this.nextControl.disabled}\">\r\n\t\t\t\t<span class=\"u-d-none u-d-sm-inline\"> </span>\r\n\t\t\t\t<span class=\"u-d-sm-none\"></span>\r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getOptionTemplates(types: Array<EProductBasketBundlerOptions>): Array<TemplateResult> {\r\n\t\treturn types.map((type, index) => this.getOptionByTypeTemplate(type, index))\r\n\t}\r\n\r\n\tprivate getOptionByTypeTemplate(type: EProductBasketBundlerOptions, index: number): TemplateResult {\r\n\t\tswitch (type) {\r\n\t\t\tcase EProductBasketBundlerOptions.PAYMENT_METHOD:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<c-product-bundler-option-payment-method product-basket-bundler-option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .isActive=\"${index === 0}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .store=\"${this.store}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .controls=\"${this.controls}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .states=\"${this.optionStates}\"/>\r\n\t\t\t\t`;\r\n\t\t\tcase EProductBasketBundlerOptions.CONTRACT_TARIFF:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<c-product-bundler-option-contract-tariff product-basket-bundler-option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .isActive=\"${index === 0}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .store=\"${this.store}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .controls=\"${this.controls}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .states=\"${this.optionStates}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .confirmedLink=\"${this.confirmedLink}\">\r\n\t\t\t\t`;\r\n\t\t\tcase EProductBasketBundlerOptions.INSURANCE:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<c-product-bundler-option-insurance product-basket-bundler-option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isActive=\"${index === 0}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.store=\"${this.store}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.controls=\"${this.controls}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.states=\"${this.optionStates}\">\r\n\t\t\t\t`;\r\n\t\t\tcase EProductBasketBundlerOptions.ACCESSORY:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<c-product-bundler-option-accessory product-basket-bundler-option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisActive=\"${index === 0}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.store=\"${this.store}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.controls=\"${this.controls}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.states=\"${this.optionStates}\">\r\n\t\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateCostInProductCostLine(): void {\r\n\t\tif (!this.productCostLine) {\r\n\t\t\tthrow new Error('ProductCostLine is not defined');\r\n\t\t}\r\n\t\tlet price: number = 0;\r\n\t\tlet pricePerMonth: number = 0;\r\n\t\tconst paymentMethod: TProductBundlerOptionPaymentMethod = this.store.selectedPaymentMethod.getValue();\r\n\t\tif (paymentMethod) {\r\n\t\t\tconst tariffPrice = this.getContractTariffPrice(paymentMethod.type);\r\n\t\t\tconst paymentMethodPrice = this.getPaymentMethodPrice(tariffPrice);\r\n\t\t\tconst insurancePrice = this.getInsurancePrice(paymentMethod.type);\r\n\t\t\tconst accessoryPrice = this.getAccessoryPrice(paymentMethod.type);\r\n\r\n\t\t\tconst optionsPrice: number = paymentMethodPrice + tariffPrice + insurancePrice + accessoryPrice;\r\n\t\t\tif (paymentMethod.type === EProductBundlerOptionPaymentMethodTypes.FULL_PRICE) {\r\n\t\t\t\tprice = optionsPrice;\r\n\t\t\t\tpricePerMonth = 0;\r\n\t\t\t} else if (paymentMethod.type === EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF) {\r\n\t\t\t\tprice = 0;\r\n\t\t\t\tpricePerMonth = optionsPrice;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.productCostLine.price = price.toString();\r\n\t\tthis.productCostLine.pricePerMonth = pricePerMonth.toString();\r\n\t}\r\n\r\n\tprivate getPaymentMethodPrice(tariffPrice: number): number {\r\n\t\tconst paymentMethod: TProductBundlerOptionPaymentMethod = this.store.selectedPaymentMethod.getValue();\r\n\r\n\t\tif (!tariffPrice) {\r\n\t\t\tif (paymentMethod.type === EProductBundlerOptionPaymentMethodTypes.FULL_PRICE) {\r\n\t\t\t\treturn parseFloat(paymentMethod.price) || 0;\r\n\t\t\t} else if (paymentMethod.type === EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF) {\r\n\t\t\t\treturn parseFloat(paymentMethod.contractTariff?.pricePerMonth) || 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tprivate getContractTariffPrice(paymentType: EProductBundlerOptionPaymentMethodTypes): number {\r\n\t\tconst contractTariff: TSelectContractTariffSelected = this.store.selectedContractTariff.getValue();\r\n\t\tif (!contractTariff) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tswitch (paymentType) {\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF:\r\n\t\t\t\treturn parseFloat(contractTariff.tariff?.pricePerMonth || contractTariff.period?.pricePerMonth) || 0;\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.FULL_PRICE:\r\n\t\t\t\treturn parseFloat(contractTariff.tariff?.price || contractTariff.period?.pricePerMonth) || 0;\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getInsurancePrice(paymentType: EProductBundlerOptionPaymentMethodTypes): number {\r\n\t\tconst insurance: Array<TInsurance> = this.store.selectedInsurance.getValue() || [];\r\n\t\tif (!insurance.length) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tswitch (paymentType) {\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF:\r\n\t\t\t\treturn insurance.map(item => parseFloat(item.pricePerMonth)).reduce((prev, current) => prev + current, 0);\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.FULL_PRICE:\r\n\t\t\t\treturn insurance.map(item => parseFloat(item.price)).reduce((prev, current) => prev + current, 0);\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getAccessoryPrice(paymentType: EProductBundlerOptionPaymentMethodTypes): number {\r\n\t\tconst accessory: Array<TAccessory> = this.store.selectedAccessory.getValue() || [];\r\n\t\tif (!accessory.length) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tswitch (paymentType) {\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF:\r\n\t\t\t\treturn accessory.map(item => parseFloat(item.pricePerMonth)).reduce((prev, current) => prev + current, 0);\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.FULL_PRICE:\r\n\t\t\t\treturn accessory.map(item => parseFloat(item.price)).reduce((prev, current) => prev + current, 0)\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateBtnAvailableInProductCostLine(): void {\r\n\t\tif (this.currentStepIndex < this.optionTypes.length - 1) {\r\n\t\t\tthis.productCostLine.isDisableBtn = true;\r\n\t\t} else {\r\n\t\t\tconst option: ProductBundlerOptionComponent = this.options.item(this.currentStepIndex);\r\n\t\t\tif (!option) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst value: Object | Array<Object> = this.store.getSelectedValueByType(\r\n\t\t\t\toption.type\r\n\t\t\t);\r\n\t\t\tconst required: boolean = this.store.selectedIsRequired(option.type);\r\n\t\t\tif (required) {\r\n\t\t\t\tthis.productCostLine.isDisableBtn = !Boolean(value);\r\n\t\t\t} else {\r\n\t\t\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","export interface IMoneyFormatter {\r\n\r\n}\r\n\r\nexport enum EMoneyFormatterTypes {\r\n\tSYMBOL_SUPERSCRIPT = 'SYMBOL_SUPERSCRIPT',\r\n\tTHOUSAND_SUPERSCRIPT = 'THOUSAND_SUPERSCRIPT',\r\n\tTHOUSAND_MONTH_SUPERSCRIPT = 'THOUSAND_MONTH_SUPERSCRIPT',\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport ProductBasketBundlerOptionControls\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-option-controls/ProductBasketBundlerOptionControls\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport ProductBasketBundlerOptionStates\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-option-states/ProductBasketBundlerOptionStates\";\r\nimport ProductBasketBundlerStore\r\n\tfrom \"@components/product-basket-bundler/product-basket-bundler-store/ProductBasketBundlerStore\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {html, state, property, PropertyValues, TemplateResult} from \"lit-element\";\r\n\r\nexport default class ProductBundlerOptionComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tpublic store: ProductBasketBundlerStore;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tpublic states: ProductBasketBundlerOptionStates;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tpublic controls: ProductBasketBundlerOptionControls;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic isActive: boolean = false;\r\n\r\n\t@state()\r\n\tprotected isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprotected isNetworkError: boolean = false;\r\n\r\n\tprotected httpService: HttpRequest = new HttpRequest();\r\n\r\n\tpublic readonly type: EProductBasketBundlerOptions;\r\n\r\n\tpublic requestData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.states.updateState({\r\n\t\t\tkey: this.type,\r\n\t\t\tstate: EProductBasketBundlerOptionStates.LOADING,\r\n\t\t});\r\n\t\tconsole.log('request data');\r\n\t\tthis.isLoading = true;\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.isLoading = false;\r\n\t\t\tthis.states.updateState({\r\n\t\t\t\tkey: this.type,\r\n\t\t\t\tstate: EProductBasketBundlerOptionStates.READY,\r\n\t\t\t});\r\n\t\t}, 1500)\r\n\t}\r\n\r\n\tpublic resetData(): void {\r\n\t\tconsole.log('reset data');\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tif (this.isActive) {\r\n\t\t\tthis.requestData();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn html`\r\n\t\t\t\t<c-loader active\r\n\t\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t\t  size=\"${ELoaderSize.MD}\"\r\n\t\t\t\t\t\t  class=\"c-product-basket-bundler__loader\">\r\n\t\t\t\t</c-loader>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>    !</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p class=\"u-mb-20\">   </p>\r\n\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.LG}\"\r\n\t\t\t\t\t   @click=\"${this.btnReloadHandler}\">\r\n\t\t\t\t\t\r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected btnReloadHandler(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.reloadData();\r\n\t}\r\n\r\n\tprotected reloadData(): void {\r\n\r\n\t}\r\n}\r\n","import {EMoneyFormatterTypes, IMoneyFormatter} from \"@modules/formatter/model\";\r\nimport Mask, {EMaskTypes} from \"@modules/mask/Mask\";\r\n\r\nexport class MoneyFormatter implements IMoneyFormatter {\r\n\tstatic readonly symbol = '';\r\n\r\n\tstatic format(value: string, type?: EMoneyFormatterTypes): string {\r\n\t\tswitch (type) {\r\n\t\t\tcase EMoneyFormatterTypes.SYMBOL_SUPERSCRIPT:\r\n\t\t\t\treturn MoneyFormatter.toSymbolSup(value);\r\n\t\t\tcase EMoneyFormatterTypes.THOUSAND_SUPERSCRIPT:\r\n\t\t\t\treturn MoneyFormatter.toThousandSup(value);\r\n\t\t\tcase EMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT:\r\n\t\t\t\treturn MoneyFormatter.toThousandMonthSup(value);\r\n\t\t\tdefault:\r\n\t\t\t\treturn MoneyFormatter.toDefault(value);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic toDefault(value: string): string {\r\n\t\treturn MoneyFormatter.getMaskedValue(value) + MoneyFormatter.symbol;\r\n\t}\r\n\r\n\tstatic toSymbolSup(value: string): string {\r\n\t\treturn `${MoneyFormatter.getMaskedValue(value)}<sup>${MoneyFormatter.symbol}</sup>`;\r\n\t}\r\n\r\n\tstatic toThousandSup(value: string): string {\r\n\t\tconst price: Array<string> = MoneyFormatter.getMaskedValue(value).split(' ');\r\n\t\tconst first: string = price[0];\r\n\t\tprice.splice(0, 1);\r\n\t\tconst sup: string = price.join(' ');\r\n\r\n\t\treturn `${first}<sup>${sup} ${MoneyFormatter.symbol}</sup>`;\r\n\t}\r\n\r\n\tstatic toThousandMonthSup(value: string): string {\r\n\t\tconst price: Array<string> = MoneyFormatter.getMaskedValue(value).split(' ');\r\n\t\tconst first: string = price[0];\r\n\t\tprice.splice(0, 1);\r\n\t\tconst sup: string = price.join(' ');\r\n\r\n\t\treturn `${first}<sup>${sup} ${MoneyFormatter.symbol}/</sup>`;\r\n\t}\r\n\r\n\tstatic getMaskedValue(value: string): string {\r\n\t\treturn Mask.getFormattedValue(value, EMaskTypes.MONEY);\r\n\t}\r\n}\r\n","import {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport {\r\n\tEProductBundlerOptionPaymentMethodTypes,\r\n\tTProductBundlerOptionPaymentMethod,\r\n\tTProductBundlerOptionPaymentMethodContract,\r\n\tTProductBundlerOptionPaymentMethodFullPrice,\r\n\tTProductBundlerOptionPaymentMethodRequest,\r\n\tTProductBundlerOptionPaymentMethodResponse\r\n} from \"@components/product-basket-bundler/product-bundler-option-payment-method/model\";\r\nimport ProductBundlerOptionComponent\r\n\tfrom \"@components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent\";\r\nimport {TTariffCard} from \"@components/tariff-card/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {customElement, html, state, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-product-bundler-option-payment-method')\r\nexport default class ProductBundlerOptionPaymentMethodComponent extends ProductBundlerOptionComponent {\r\n\ttype = EProductBasketBundlerOptions.PAYMENT_METHOD;\r\n\r\n\t@state()\r\n\tprivate selected: TProductBundlerOptionPaymentMethod;\r\n\r\n\t@state()\r\n\tprivate data: TProductBundlerOptionPaymentMethodResponse;\r\n\r\n\tpublic requestData(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tpublic resetData(): void {\r\n\t\tthis.data = []\r\n\t\tthis.selected = null;\r\n\t\tthis.store.selectedPaymentMethod.next(null);\r\n\t}\r\n\r\n\tprotected reloadData() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst data: TProductBundlerOptionPaymentMethodRequest = {\r\n\t\t\tskuId: this.store.skuId,\r\n\t\t};\r\n\t\tthis.states.updateState({\r\n\t\t\tkey: this.type,\r\n\t\t\tstate: EProductBasketBundlerOptionStates.LOADING,\r\n\t\t});\r\n\t\tthis.httpService\r\n\t\t\t.request<TProductBundlerOptionPaymentMethodResponse>({\r\n\t\t\t\turl: '/products/payment-type/',\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.data = response.data.data;\r\n\t\t\t\tthis.selected = this.data[0];\r\n\t\t\t\tthis.store.selectedPaymentMethod.next(this.selected);\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.READY,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.ERROR,\r\n\t\t\t\t\tmessage: reject,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\tif (!this.data) {\r\n\t\t\treturn this.getNotDataTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<h4 class=\"c-product-bundler-option__section-title\">  </h4>\r\n\t\t\t<div class=\"u-space-items u-space-items-16 u-d-inline-block u-w-100\">\r\n\t\t\t\t${this.data.map(item =>\r\n\t\t\t\t\tthis.getToggleCardTemplate(item.type)\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getNotDataTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>  !</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getToggleCardTemplate(type: EProductBundlerOptionPaymentMethodTypes): TemplateResult {\r\n\t\tswitch (type) {\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF:\r\n\t\t\t\treturn this.getToggleCardContractTemplate();\r\n\t\t\tcase EProductBundlerOptionPaymentMethodTypes.FULL_PRICE:\r\n\t\t\t\treturn this.getToggleCardFullPriceTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn html`<p>type not found</p>`;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getToggleCardContractTemplate(): TemplateResult {\r\n\t\tconst data = this.data?.find(item => item.type === EProductBundlerOptionPaymentMethodTypes.CONTRACT_TARIFF) as TProductBundlerOptionPaymentMethodContract;\r\n\t\tif (!data) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet tariffCard: TTariffCard;\r\n\t\tconst pricePerMonth: string = MoneyFormatter.format(\r\n\t\t\tdata.contractTariff?.pricePerMonth,\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT\r\n\t\t);\r\n\t\ttariffCard = {\r\n\t\t\tid: data.id,\r\n\t\t\ttitle: '  ',\r\n\t\t\tsubTitle: ` ${data.contractTariff?.period} `,\r\n\t\t\tcosts: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `${pricePerMonth}`,\r\n\t\t\t\t\tsubTitle: ` ${data.contractTariff?.period} `\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `${data.contractTariff?.overpayment}<sup>%</sup>`,\r\n\t\t\t\t\tsubTitle: ''\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t};\r\n\r\n\t\treturn html`\r\n\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t   type=\"radio\"\r\n\t\t\t\t\t\t   name=\"${this.type}\"\r\n\t\t\t\t\t\t   .value=\"${tariffCard.id}\"\r\n\t\t\t\t\t\t   ?checked=\"${tariffCard.id === this.selected?.id}\"\r\n\t\t\t\t\t\t   @on-change=\"${this.handleChange}\">\r\n\t\t\t\t<c-tariff-card .data=\"${tariffCard}\"\r\n\t\t\t\t\t\t\t   class=\"u-w-100\">\r\n\t\t\t</c-toggle-card>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getToggleCardFullPriceTemplate(): TemplateResult {\r\n\t\tconst data = this.data?.find(item => item.type === EProductBundlerOptionPaymentMethodTypes.FULL_PRICE) as TProductBundlerOptionPaymentMethodFullPrice;\r\n\r\n\t\tif (!data) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst price: string = MoneyFormatter.format(\r\n\t\t\tdata.price,\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\r\n\t\treturn html`\r\n\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t   type=\"radio\"\r\n\t\t\t\t\t\t   name=\"${this.type}\"\r\n\t\t\t\t\t\t   .value=\"${data.id}\"\r\n\t\t\t\t\t\t   ?checked=\"${data.id === this.selected?.id}\"\r\n\t\t\t\t\t\t   @on-change=\"${this.handleChange}\">\r\n\t\t\t\t<div class=\"u-d-flex u-flex-row u-justify-content-between u-align-items-center\">\r\n\t\t\t\t\t<h2 class=\"c-product-bundler-option-payment-method__full-price-value u-flex-shrink-0\">\r\n\t\t\t\t\t\t${unsafeHTML(price)}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p class=\"c-product-bundler-option-payment-method__full-price-title\">   </p>\r\n\t\t\t\t</div>\r\n\t\t\t</c-toggle-card>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleChange(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tconst id: number = parseFloat(toggle.value);\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selected = this.data.find(item => item.id == id);\r\n\t\tthis.store.selectedPaymentMethod.next(this.selected);\r\n\t}\r\n}\r\n","export enum EPhoneValidationForContractTariffStages {\r\n\tENTER_PHONE_NUMBER = 'ENTER_PHONE_NUMBER',\r\n\tVALIDATE_SMS_CODE = 'VALIDATE_SMS_CODE',\r\n\tDENIED_ABILITY_TO_CONNECT_TARIFF = 'DENIED_ABILITY_TO_CONNECT_TARIFF',\r\n\tPHONE_INFORMATION = 'PHONE_INFORMATION',\r\n\tEMPTY = 'EMPTY',\r\n}\r\n\r\nexport enum EPhoneValidationForContractTariffStatuses {\r\n\tAPPROVED_ABILITY_TO_CONNECT_TARIFF = 'APPROVED_ABILITY_TO_CONNECT_TARIFF',\r\n\tDENIED_ABILITY_TO_CONNECT_TARIFF = 'DENIED_ABILITY_TO_CONNECT_TARIFF',\r\n}\r\n\r\nexport enum EPhoneValidationForContractTariffSlots {\r\n\tFORM_VALIDATE_SMS = 'form-validate-sms',\r\n\tFORM_GET_SMS = 'form-get-sms',\r\n}\r\n","import {TOperator} from \"@models/Operator\";\r\n\r\nexport enum EProductBundlerOptionContractTariffStages {\r\n\tSELECT_TARIFF = 'SELECT_TARIFF',\r\n\tWITHOUT_TARIFF = 'WITHOUT_TARIFF',\r\n}\r\n\r\nexport type EProductBundlerOptionContractTariffPhoneInfo = {\r\n\toperator: TOperator\r\n\tnumber: string\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {EPhoneValidationForContractTariffStatuses} from \"@components/phone-validation-for-contract-tariff/model\";\r\nimport PhoneValidationForContractTariffComponent\r\n\tfrom \"@components/phone-validation-for-contract-tariff/PhoneValidationForContractTariffComponent\";\r\nimport {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport {EProductBasketBundlerOptionControlSignals} from \"@components/product-basket-bundler/product-basket-bundler-option-controls/model\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport {\r\n\tEProductBundlerOptionContractTariffPhoneInfo,\r\n\tEProductBundlerOptionContractTariffStages\r\n} from \"@components/product-basket-bundler/product-bundler-option-contract-tariff/model\";\r\nimport {EProductBundlerOptionPaymentMethodTypes} from \"@components/product-basket-bundler/product-bundler-option-payment-method/model\";\r\nimport ProductBundlerOptionComponent\r\n\tfrom \"@components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent\";\r\nimport {TSelectContractTariffSelected} from \"@components/select-tariff/model\";\r\nimport {customElement, html, property, PropertyValues, query, state, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-product-bundler-option-contract-tariff')\r\nexport default class ProductBundlerOptionContractTariffComponent extends ProductBundlerOptionComponent {\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic confirmedLink: string;\r\n\r\n\t@query('[phone-validation-for-contract-tariff]')\r\n\tprivate phoneValidationForContractTariff: PhoneValidationForContractTariffComponent;\r\n\r\n\t@state()\r\n\tprivate stage: EProductBundlerOptionContractTariffStages;\r\n\r\n\t@state()\r\n\tprivate phoneInfo: EProductBundlerOptionContractTariffPhoneInfo;\r\n\r\n\t@state()\r\n\tprivate sectionTitle: string = '';\r\n\r\n\ttype = EProductBasketBundlerOptions.CONTRACT_TARIFF;\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic requestData(): void {\r\n\t\tthis.stage = null;\r\n\t\tthis.states.updateState({\r\n\t\t\tkey: this.type,\r\n\t\t\tstate: EProductBasketBundlerOptionStates.WAITING,\r\n\t\t});\r\n\t}\r\n\r\n\tpublic resetData(): void {\r\n\t\tthis.store.selectedContractTariff.next(null);\r\n\t\tthis.changeStage(null);\r\n\t\tthis.phoneValidationForContractTariff.resetStage();\r\n\t\tthis.store.phoneInfo.next(null);\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<h4 class=\"c-product-bundler-option__section-title\">${this.sectionTitle}</h4>\r\n\r\n\t\t\t${this.getValidatePhoneTemplate()}\r\n\t\t\t${this.getResultByStageTemplate(this.stage)}\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getValidatePhoneTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-phone-validation-for-contract-tariff phone-validation-for-contract-tariff\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.confirmedLink=\"${this.confirmedLink}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@on-click-skip=\"${this.handleBtnClickSkipTariff}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@on-status-change=\"${this.handlePhoneValidationForContractTariffStatusChange}\">\r\n\t\t\t\t<form slot=\"form-validate-sms\" action=\"/products/verify_otp/\" method=\"POST\">\r\n\t\t\t\t\t<input type=\"text\" name=\"skuId\" .value=\"${this.store.skuId}\">\r\n\t\t\t\t</form>\r\n\t\t\t\t<form slot=\"form-get-sms\" action=\"/products/send_otp/\" method=\"POST\">\r\n\t\t\t\t\t<input type=\"text\" name=\"skuId\" .value=\"${this.store.skuId}\">\r\n\t\t\t\t</form>\r\n\t\t\t</c-phone-validation-for-contract-tariff>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handlePhoneValidationForContractTariffStatusChange(event: CustomEvent): void {\r\n\t\tconst status: EPhoneValidationForContractTariffStatuses = event.detail.status;\r\n\t\tconst component: PhoneValidationForContractTariffComponent = (event.target as PhoneValidationForContractTariffComponent);\r\n\t\tthis.phoneInfo = {\r\n\t\t\toperator: component.getOperator(),\r\n\t\t\tnumber: component.getPhoneNumber(),\r\n\t\t};\r\n\t\tthis.store.phoneInfo.next(this.phoneInfo);\r\n\t\tswitch (status) {\r\n\t\t\tcase EPhoneValidationForContractTariffStatuses.APPROVED_ABILITY_TO_CONNECT_TARIFF:\r\n\t\t\t\tthis.changeStage(EProductBundlerOptionContractTariffStages.SELECT_TARIFF);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getResultByStageTemplate(stage: EProductBundlerOptionContractTariffStages): TemplateResult {\r\n\t\tswitch (stage) {\r\n\t\t\tcase EProductBundlerOptionContractTariffStages.SELECT_TARIFF:\r\n\t\t\t\treturn this.getSelectTariffTemplate(true);\r\n\t\t\tcase EProductBundlerOptionContractTariffStages.WITHOUT_TARIFF:\r\n\t\t\t\treturn this.getSelectTariffTemplate(false);\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getSelectTariffTemplate(hasTariffs: boolean): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"${'c-product-bundler-option-contract-tariff_' + (hasTariffs ? 'tariff' : 'period')}\">\r\n\t\t\t\t<c-select-tariff request-on-creation=\"true\"\r\n\t\t\t\t\t\t\t\t get-request-config=\"${{\r\n\t\t\t\t\t\t\t\t\t url: '/products/contract_tariffs/',\r\n\t\t\t\t\t\t\t\t\t method: \"GET\",\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t add-data-get=\"${{\r\n\t\t\t\t\t\t\t\t\t skuId: this.store.skuId,\r\n\t\t\t\t\t\t\t\t\t operatorName: this.phoneInfo.operator.name,\r\n\t\t\t\t\t\t\t\t\t phoneNumber: this.phoneInfo.number,\r\n\t\t\t\t\t\t\t\t\t hasTariffs: hasTariffs,\r\n\t\t\t\t\t\t\t\t\t paymentMethodId: this.store.selectedPaymentMethod.getValue()?.id,\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t @on-change=\"${this.handleChangeTariff}\">\r\n\t\t\t\t</c-select-tariff>\r\n\t\t\t</div>\r\n\t\t\t${!hasTariffs ? this.getAddTariffTemplate() : null}\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getAddTariffTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-btn type=\"${EBtnType.SECONDARY}\"\r\n\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t   @click=\"${this.handleBtnAddTariff}\">\r\n\t\t\t\t \r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate updateTitle(contractTariff?: TSelectContractTariffSelected): void {\r\n\t\tif (contractTariff && !contractTariff.tariff && !contractTariff.isSkip && contractTariff.period) {\r\n\t\t\tthis.sectionTitle = '';\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.sectionTitle = '';\r\n\t}\r\n\r\n\tprivate handleChangeTariff(event: CustomEvent): void {\r\n\t\tconst selected: TSelectContractTariffSelected = event.detail;\r\n\t\tthis.store.selectedContractTariff.next(selected);\r\n\t}\r\n\r\n\tprivate handleBtnClickSkipTariff(event: Event): void {\r\n\t\tif (this.store.selectedPaymentMethod.getValue().type === EProductBundlerOptionPaymentMethodTypes.FULL_PRICE) {\r\n\t\t\tthis.resetData();\r\n\t\t\tthis.store.phoneInfo.next(this.phoneInfo);\r\n\t\t\tthis.store.selectedContractTariff.next({\r\n\t\t\t\ttariff: null,\r\n\t\t\t\tisSkip: true,\r\n\t\t\t\tperiod: null,\r\n\t\t\t});\r\n\t\t\tthis.controls.emitSignal(EProductBasketBundlerOptionControlSignals.NEXT);\r\n\t\t} else {\r\n\t\t\tthis.changeStage(EProductBundlerOptionContractTariffStages.WITHOUT_TARIFF);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleBtnAddTariff(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.resetData();\r\n\t}\r\n\r\n\tprivate changeStage(stage: EProductBundlerOptionContractTariffStages) {\r\n\t\tthis.stage = stage;\r\n\t\tif (this.stage) {\r\n\t\t\tthis.states.updateState({\r\n\t\t\t\tkey: this.type,\r\n\t\t\t\tstate: EProductBasketBundlerOptionStates.READY,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.states.updateState({\r\n\t\t\t\tkey: this.type,\r\n\t\t\t\tstate: EProductBasketBundlerOptionStates.WAITING,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.store.selectedContractTariff\r\n\t\t\t.subscribe(contractTariff => {\r\n\t\t\t\tthis.updateTitle(contractTariff);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import { TemplateResult } from 'lit-element';\r\n\r\nexport type TTariffCard = {\r\n\tid: number;\r\n\ttitle: string;\r\n\ttype?: string;\r\n\tsubTitle?: string;\r\n\tprepend?: string | TemplateResult;\r\n\tcosts: Array<TTariffCardCostItem>;\r\n\tinfoTitle?: string;\r\n};\r\n\r\nexport type TTariffCardCostItem = {\r\n\tprepend?: string;\r\n\ttitle: string;\r\n\tsubTitle?: string;\r\n\tprice?: string;\r\n\tsize?: ETariffCardCostItemSize;\r\n};\r\n\r\nexport enum ETariffCardCostItemSize {\r\n\tSM = 'sm'\r\n}\r\n","import ModalComponent from \"@components/modal/ModalComponent\";\r\nimport {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport {\r\n\tTProductBundlerOptionInsuranceRequest,\r\n\tTProductBundlerOptionInsuranceResponse\r\n} from \"@components/product-basket-bundler/product-bundler-option-insurance/model\";\r\nimport ProductBundlerOptionComponent\r\n\tfrom \"@components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent\";\r\nimport {ETariffCardCostItemSize, TTariffCard} from \"@components/tariff-card/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {TInsurance} from \"@models/Insurance\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {customElement, html, state, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-product-bundler-option-insurance')\r\nexport default class ProductBundlerOptionInsuranceComponent extends ProductBundlerOptionComponent {\r\n\ttype = EProductBasketBundlerOptions.INSURANCE;\r\n\r\n\tprivate data: TProductBundlerOptionInsuranceResponse;\r\n\r\n\t@state()\r\n\tformattedData: Array<TTariffCard> = [];\r\n\r\n\t@query('[product-bundler-option-insurance-detail-modal]')\r\n\tprivate modal: ModalComponent;\r\n\r\n\t@state()\r\n\tprivate selected: Array<TInsurance> = [];\r\n\r\n\t@query('[toggle-skip]')\r\n\tprivate toggleSkipEl: ToggleCardComponent;\r\n\r\n\tpublic requestData(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tpublic resetData(): void {\r\n\t\tthis.selected = [];\r\n\t\tthis.data = [];\r\n\t\tthis.formattedData = [];\r\n\t\tthis.store.selectedInsurance.next([]);\r\n\t}\r\n\r\n\tprotected reloadData(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<h4 class=\"c-product-bundler-option__section-title\">  </h4>\r\n\t\t\t<div class=\"u-space-items u-space-items-16 u-d-inline-block u-w-100\">\r\n\t\t\t\t${this.formattedData.map(insurance => {\r\n\t\t\t\t\t\tconst isSelected = Boolean(this.selected.find(item => item.id == insurance.id));\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t   name=\"insurance\"\r\n\t\t\t\t\t\t\t\t\t\t   .value=\"${insurance.id}\"\r\n\t\t\t\t\t\t\t\t\t\t   ?checked=\"${isSelected}\"\r\n\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleChange}\">\r\n\t\t\t\t\t\t\t\t<c-tariff-card .data=\"${insurance}\">\r\n\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t\t${this.getSkipTemplate()}\r\n\t\t\t</div>\r\n\t\t\t<c-modal product-bundler-option-insurance-detail-modal>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getSkipTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t   toggle-skip\r\n\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t   name=\"insurance\"\r\n\t\t\t\t\t\t   .value=\"${null}\"\r\n\t\t\t\t\t\t   @on-change=\"${this.handleClickSkip}\">\r\n\t\t\t\t<div class=\"u-h-100 u-d-flex u-flex-row u-align-items-center\">\r\n\t\t\t\t\t<p>    </p>\r\n\t\t\t\t</div>\r\n\t\t\t</c-toggle-card>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickSkip(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selected = [];\r\n\t}\r\n\r\n\tprivate handleChange(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tconst id: number = parseFloat(toggle.value)\r\n\t\tif (toggle.checked) {\r\n\t\t\tthis.toggleSkipEl.checked = false;\r\n\t\t\tthis.selected = [\r\n\t\t\t\t...this.selected,\r\n\t\t\t\tthis.data.find(item => item.id == id),\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tthis.selected = this.selected.filter(item => item.id !== id);\r\n\t\t}\r\n\t\tthis.store.selectedInsurance.next(this.selected);\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tthis.states.updateState({\r\n\t\t\tkey: this.type,\r\n\t\t\tstate: EProductBasketBundlerOptionStates.LOADING,\r\n\t\t});\r\n\t\tconst data: TProductBundlerOptionInsuranceRequest = {\r\n\t\t\tskuId: this.store.skuId,\r\n\t\t\tperiod: this.store.selectedContractTariff.getValue()?.period?.value,\r\n\t\t\tpaymentTypeId: this.store.selectedPaymentMethod.getValue()?.id,\r\n\t\t\ttariffPrice: this.store.selectedContractTariff.getValue()?.tariff?.price,\r\n\t\t\taccessories: this.store.selectedAccessory.getValue()?.map(item => item.sku)\r\n\t\t};\r\n\t\tthis.httpService\r\n\t\t\t.request<TProductBundlerOptionInsuranceResponse>({\r\n\t\t\t\turl: '/products/insurance/',\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.data = response.data.data;\r\n\t\t\t\tthis.formattedData = this.formatData(this.data);\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.READY,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.ERROR,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate formatData(data: TProductBundlerOptionInsuranceResponse): Array<TTariffCard> {\r\n\t\treturn data?.map(item => {\r\n\t\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\t\titem.pricePerMonth,\r\n\t\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT\r\n\t\t\t);\r\n\t\t\tconst payoutPrice = MoneyFormatter.format(\r\n\t\t\t\titem.payoutPrice,\r\n\t\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\tid: item.id,\r\n\t\t\t\ttitle: item.name,\r\n\t\t\t\tsubTitle: item.shortDescription,\r\n\t\t\t\tprepend: this.getPrependTemplate(item),\r\n\t\t\t\tinfoTitle: '  ',\r\n\t\t\t\tcosts: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: pricePerMonth,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: payoutPrice,\r\n\t\t\t\t\t\tsubTitle: ' ',\r\n\t\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}) || [];\r\n\t}\r\n\r\n\tprivate getPrependTemplate(item: TInsurance): TemplateResult {\r\n\t\tif (!item.description) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<button class=\"c-btn-clear u-color-secondary\"\r\n\t\t\t\t\t@click=\"${this.handleBtnOpenDetail(item)}\">\r\n\t\t\t\t\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleBtnOpenDetail(item: TInsurance) {\r\n\t\treturn (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.modal.title = item.name;\r\n\t\t\tthis.modal.setBody(\r\n\t\t\t\t`\r\n\t\t\t\t\t<div class=\"s-wysiwyg\">\r\n\t\t\t\t\t\t${item.description}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`\r\n\t\t\t)\r\n\t\t\tthis.modal.open();\r\n\t\t}\r\n\t}\r\n}\r\n","import {TAccessoryCard} from \"@components/accessory-card/model\";\r\nimport {EProductBasketBundlerOptions} from \"@components/product-basket-bundler/model\";\r\nimport {EProductBasketBundlerOptionStates} from \"@components/product-basket-bundler/product-basket-bundler-option-states/model\";\r\nimport {\r\n\tTProductBundlerOptionAccessoryRequest,\r\n\tTProductBundlerOptionAccessoryResponse\r\n} from \"@components/product-basket-bundler/product-bundler-option-accessory/model\";\r\nimport ProductBundlerOptionComponent\r\n\tfrom \"@components/product-basket-bundler/product-bundler-option/ProductBundlerOptionComponent\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {TAccessory} from \"@models/Accessory\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {customElement, html, state, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-product-bundler-option-accessory')\r\nexport default class ProductBundlerOptionAccessoryComponent extends ProductBundlerOptionComponent {\r\n\ttype = EProductBasketBundlerOptions.ACCESSORY;\r\n\r\n\tprivate data: TProductBundlerOptionAccessoryResponse;\r\n\r\n\t@state()\r\n\tprivate selected: Array<TAccessory> = [];\r\n\r\n\t@query('[toggle-skip]')\r\n\tprivate toggleSkipEl: ToggleCardComponent;\r\n\r\n\tprivate formattedData: Array<TAccessoryCard> = [];\r\n\r\n\tpublic requestData(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tpublic resetData(): void {\r\n\t\tthis.data = [];\r\n\t\tthis.selected = [];\r\n\t\tthis.formattedData = [];\r\n\t\tthis.store.selectedAccessory.next([]);\r\n\t}\r\n\r\n\tprotected reloadData() {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<h4 class=\"c-product-bundler-option__section-title\">   </h4>\r\n\t\t\t<div class=\"u-space-items u-space-items-16 u-d-inline-block u-w-100\">\r\n\t\t\t\t${this.formattedData?.map(accessory => {\r\n\t\t\t\t\t\tconst isSelected = Boolean(this.selected.find(item => item.id === accessory.id));\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t   name=\"accessory\"\r\n\t\t\t\t\t\t\t\t\t\t   .value=\"${accessory.id}\"\r\n\t\t\t\t\t\t\t\t\t\t   ?checked=\"${isSelected}\"\r\n\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleChange}\">\r\n\t\t\t\t\t\t\t\t<c-accessory-card .data=\"${accessory}\">\r\n\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t\t${this.getSkipTemplate()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getSkipTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t   toggle-skip\r\n\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t   name=\"accessory\"\r\n\t\t\t\t\t\t   .value=\"${null}\"\r\n\t\t\t\t\t\t   @on-change=\"${this.handleClickSkip}\">\r\n\t\t\t\t<div class=\"u-h-100 u-d-flex u-flex-row u-align-items-center\">\r\n\t\t\t\t\t<p>   </p>\r\n\t\t\t\t</div>\r\n\t\t\t</c-toggle-card>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickSkip(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selected = [];\r\n\t}\r\n\r\n\tprivate handleChange(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (toggle.checked) {\r\n\t\t\tthis.toggleSkipEl.checked = false;\r\n\t\t\tthis.selected = [\r\n\t\t\t\t...this.selected,\r\n\t\t\t\tthis.data.find(item => item.id == toggle.value),\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tthis.selected = this.selected.filter(item => item.id !== toggle.value);\r\n\t\t}\r\n\t\tthis.store.selectedAccessory.next(this.selected);\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tthis.states.updateState({\r\n\t\t\tkey: this.type,\r\n\t\t\tstate: EProductBasketBundlerOptionStates.LOADING,\r\n\t\t});\r\n\t\tconst data: TProductBundlerOptionAccessoryRequest = {\r\n\t\t\tskuId: this.store.skuId,\r\n\t\t\tperiod: this.store.selectedContractTariff.getValue()?.period?.value,\r\n\t\t};\r\n\t\tthis.httpService\r\n\t\t\t.request<TProductBundlerOptionAccessoryResponse>({\r\n\t\t\t\turl: '/products/accessories/',\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.data = response.data.data;\r\n\t\t\t\tthis.formattedData = this.formatData(this.data);\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.READY,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.states.updateState({\r\n\t\t\t\t\tkey: this.type,\r\n\t\t\t\t\tstate: EProductBasketBundlerOptionStates.ERROR,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate formatData(data: Array<TAccessory>): Array<TAccessoryCard> {\r\n\t\treturn data?.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\tid: item.id,\r\n\t\t\t\ttitle: item.title,\r\n\t\t\t\timg: item.img,\r\n\t\t\t\tprice: item.price,\r\n\t\t\t\tpricePerMonth: item.pricePerMonth,\r\n\t\t\t}\r\n\t\t}) || [];\r\n\t}\r\n}\r\n","import {TOperator} from \"@models/Operator\";\r\nimport {TTariff} from \"@models/Tariff\";\r\n\r\nexport enum EProductOptionTariffStages {\r\n\tSELECT_TARIFF = 'SELECT_TARIFF',\r\n\tWITHOUT_TARIFF = 'WITHOUT_TARIFF',\r\n}\r\n\r\nexport type TProductOptionTariffPhoneInfo = {\r\n\toperator: TOperator\r\n\tnumber: string\r\n}\r\n\r\nexport type TProductOptionTariffAddToCardData = {\r\n\tskuId: number | string\r\n\tperiod: number\r\n\ttariff?: TTariff\r\n\tphoneNumber?: string\r\n\toperatorName?: string\r\n}\r\n\r\nexport type TProductOptionTariffMinimalContractTariffResponse = TTariff;\r\n","import {ETariffCardCostItemSize, TTariffCard} from \"@components/tariff-card/model\";\r\nimport {TOperator} from \"@models/Operator\";\r\nimport {TTariff} from \"@models/Tariff\";\r\n\r\nexport class TariffFormatter {\r\n\tstatic toTariffCard(tariff: TTariff, operator?: TOperator): TTariffCard {\r\n\t\treturn {\r\n\t\t\tid: tariff.id,\r\n\t\t\ttitle: tariff.name,\r\n\t\t\tsubTitle: `    ${tariff.period} `,\r\n\t\t\tinfoTitle: `   ${TariffFormatter.getOperatorName(operator)}`.toUpperCase(),\r\n\t\t\tcosts: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: 'UNLIM',\r\n\t\t\t\t\tsubTitle: tariff.unlimitedDesc,\r\n\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `${tariff.megabyte / 1000} GB`,\r\n\t\t\t\t\tsubTitle: tariff.megabyteDesc,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `${tariff.minutes} `,\r\n\t\t\t\t\tsubTitle: tariff.minutesDesc,\r\n\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `${(+tariff.price).toFixed(0)} `,\r\n\t\t\t\t\tsubTitle: tariff.priceDesc,\r\n\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tstatic getOperatorName(operator: TOperator): string {\r\n\t\tif (!operator) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tconst operatorName: string = operator.name.toLowerCase();\r\n\t\tif (operatorName == 'kcell' || operatorName == 'activ') {\r\n\t\t\treturn 'kcell  activ'\r\n\t\t}\r\n\t\treturn operatorName;\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {EPhoneValidationForContractTariffStatuses} from \"@components/phone-validation-for-contract-tariff/model\";\r\nimport PhoneValidationForContractTariffComponent\r\n\tfrom \"@components/phone-validation-for-contract-tariff/PhoneValidationForContractTariffComponent\";\r\nimport {\r\n\tEProductOptionTariffStages,\r\n\tTProductOptionTariffAddToCardData,\r\n\tTProductOptionTariffMinimalContractTariffResponse,\r\n\tTProductOptionTariffPhoneInfo\r\n} from \"@components/product-basket-bundler/tariff-model\";\r\nimport ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\nimport {TSelectContractTariffSelected} from \"@components/select-tariff/model\";\r\nimport {TTariffCard} from \"@components/tariff-card/model\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {TariffFormatter} from \"@modules/formatter/TariffFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\n@customElement('c-product-option-tariff')\r\nexport default class ProductOptionTariffComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'sku-id',\r\n\t})\r\n\tpublic skuId: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'confirmed-link',\r\n\t})\r\n\tpublic confirmedLink: string = '';\r\n\r\n\t@state()\r\n\tprivate advantageousContractCard: TTariffCard;\r\n\r\n\t@state()\r\n\tprotected error: unknown;\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isNetworkError: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isAddToCartRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate stage: EProductOptionTariffStages;\r\n\r\n\t@state()\r\n\tprivate phoneInfo: TProductOptionTariffPhoneInfo;\r\n\r\n\t@query('[phone-validation-for-contract-tariff]')\r\n\tprivate phoneValidationForContractTariff: PhoneValidationForContractTariffComponent;\r\n\r\n\tprivate productCostLine: ProductCostLineComponent;\r\n\r\n\tprivate advantageousContractTariff: TProductOptionTariffMinimalContractTariffResponse;\r\n\r\n\tprivate selectedTariff: TSelectContractTariffSelected;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.productCostLine = document.querySelector(`c-product-cost-line`);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.getAdvantageousContract();\r\n\t}\r\n\r\n\tprivate getAdvantageousContract(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isNetworkError = false;\r\n\t\tthis.isLoading = true;\r\n\t\tconst formData: FormData = new FormData();\r\n\t\tformData.append('skuId', this.skuId);\r\n\t\tthis.httpService\r\n\t\t\t.request<TProductOptionTariffMinimalContractTariffResponse>({\r\n\t\t\t\turl: '/products/minimal_contract_tariff/',\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\tdata: formData\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconst data = response.data.data;\r\n\t\t\t\tthis.advantageousContractTariff = data;\r\n\t\t\t\tthis.advantageousContractCard = this.advantageousContractToTariffCard(data);\r\n\t\t\t\tthis.updatePricePerMonthInProductCostLine(this.advantageousContractTariff.pricePerMonth);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn html`\r\n\t\t\t\t<c-loader active\r\n\t\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t\t  size=\"${ELoaderSize.MD}\"\r\n\t\t\t\t\t\t  class=\"c-product-basket-bundler__loader\">\r\n\t\t\t\t</c-loader>\r\n\t\t\t`;\r\n\t\t}\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\t\tif (!this.advantageousContractTariff) {\r\n\t\t\treturn this.getNotDataTemplate();\r\n\t\t}\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t${this.getAdvantageousContractTemplate()}\r\n\t\t\t${!this.stage\r\n\t\t\t\t? this.getAdvantageousContractDetailTemplate()\r\n\t\t\t\t: null\r\n\t\t\t}\r\n\t\t\t${this.stage === EProductOptionTariffStages.SELECT_TARIFF\r\n\t\t\t\t? html`<h4 class=\"c-product-option-tariff__section-title\"></h4>`\r\n\t\t\t\t: null\r\n\t\t\t}\r\n\t\t\t${this.getValidatePhoneTemplate()}\r\n\t\t\t${this.getResultByStageTemplate(this.stage)}\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNotDataTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>  !</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getAdvantageousContractTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-tariff-card class=\"c-product-option-tariff__advantageous-contract u-min-w-100\"\r\n\t\t\t\t\t\t   .data=\"${this.advantageousContractCard}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getAdvantageousContractDetailTemplate(): TemplateResult {\r\n\t\tlet data: TTariffCard;\r\n\t\tif (!this.advantageousContractTariff.id) {\r\n\t\t\treturn html`\r\n\t\t\t\t<div class=\"u-mb-10 u-mb-md-30\"></div>\r\n\t\t\t`;\r\n\t\t}\r\n\t\tdata = TariffFormatter.toTariffCard(this.advantageousContractTariff);\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-product-option-tariff__advantageous-contract-detail\">\r\n\t\t\t\t<c-tariff-card class=\"u-min-w-100\"\r\n\t\t\t\t\t\t\t   .data=\"${data}\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getResultByStageTemplate(stage: EProductOptionTariffStages): TemplateResult {\r\n\t\tswitch (stage) {\r\n\t\t\tcase EProductOptionTariffStages.SELECT_TARIFF:\r\n\t\t\t\treturn this.getSelectTariffTemplate();\r\n\t\t\tcase EProductOptionTariffStages.WITHOUT_TARIFF:\r\n\t\t\t\treturn this.getWithoutTariffTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getValidatePhoneTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-phone-validation-for-contract-tariff phone-validation-for-contract-tariff\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.confirmedLink=\"${this.confirmedLink}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@on-click-skip=\"${this.handleBtnClickSkipTariff}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@on-status-change=\"${this.handlePhoneValidationForContractTariffStatusChange}\">\r\n\t\t\t\t<form slot=\"form-validate-sms\" action=\"/products/verify_otp/\" method=\"POST\">\r\n\t\t\t\t\t<input type=\"text\" name=\"skuId\" .value=\"${this.skuId}\">\r\n\t\t\t\t</form>\r\n\t\t\t\t<form slot=\"form-get-sms\" action=\"/products/send_otp/\" method=\"POST\">\r\n\t\t\t\t\t<input type=\"text\" name=\"skuId\" .value=\"${this.skuId}\">\r\n\t\t\t\t</form>\r\n\t\t\t</c-phone-validation-for-contract-tariff>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getSelectTariffTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-product-option-tariff__tariff\">\r\n\t\t\t\t<c-select-tariff request-on-creation=\"true\"\r\n\t\t\t\t\t\t\t\t get-request-config=\"${{\r\n\t\t\t\t\t\t\t\t\t url: '/products/contract_tariffs/',\r\n\t\t\t\t\t\t\t\t\t method: \"GET\",\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t add-data-get=\"${{\r\n\t\t\t\t\t\t\t\t\t skuId: this.skuId,\r\n\t\t\t\t\t\t\t\t\t operatorName: this.phoneInfo.operator.name,\r\n\t\t\t\t\t\t\t\t\t phoneNumber: this.phoneInfo.number,\r\n\t\t\t\t\t\t\t\t\t hasTariffs: true,\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t @on-change=\"${this.handleChangeTariff}\">\r\n\t\t\t\t</c-select-tariff>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getWithoutTariffTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-product-option-tariff__period\">\r\n\t\t\t\t<c-select-tariff request-on-creation=\"true\"\r\n\t\t\t\t\t\t\t\t get-request-config=\"${{\r\n\t\t\t\t\t\t\t\t\t url: '/products/contract_tariffs/',\r\n\t\t\t\t\t\t\t\t\t method: \"GET\",\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t add-data-get=\"${{\r\n\t\t\t\t\t\t\t\t\t skuId: this.skuId,\r\n\t\t\t\t\t\t\t\t\t operatorName: this.phoneInfo.operator.name,\r\n\t\t\t\t\t\t\t\t\t phoneNumber: this.phoneInfo.number,\r\n\t\t\t\t\t\t\t\t\t hasTariffs: false,\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t @on-change=\"${this.handleChangeTariff}\">\r\n\t\t\t\t</c-select-tariff>\r\n\t\t\t</div>\r\n\r\n\t\t\t<c-btn type=\"${EBtnType.SECONDARY}\"\r\n\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t   @click=\"${this.handleBtnAddTariff}\">\r\n\t\t\t\t \r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate advantageousContractToTariffCard(data: TProductOptionTariffMinimalContractTariffResponse): TTariffCard {\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\tdata.pricePerMonth,\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tid: null,\r\n\t\t\ttitle: ' ',\r\n\t\t\tsubTitle: null,\r\n\t\t\tinfoTitle: null,\r\n\t\t\tcosts: [\r\n\t\t\t\t{\r\n\t\t\t\t\tprepend: '',\r\n\t\t\t\t\ttitle: `${pricePerMonth}`,\r\n\t\t\t\t\tsubTitle: ` ${data.period} `,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: `0<sup>%</sup>`,\r\n\t\t\t\t\tsubTitle: ``,\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updatePricePerMonthInProductCostLine(price: string): void {\r\n\t\tif (!this.productCostLine) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.productCostLine.pricePerMonth = price;\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getAdvantageousContract();\r\n\t}\r\n\r\n\tprivate changeStage(stage: EProductOptionTariffStages) {\r\n\t\tthis.stage = stage;\r\n\t}\r\n\r\n\tprivate handleBtnClickSkipTariff(event: Event): void {\r\n\t\tthis.changeStage(EProductOptionTariffStages.WITHOUT_TARIFF);\r\n\t}\r\n\r\n\tprivate handleBtnAddTariff(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.phoneValidationForContractTariff.resetStage();\r\n\t\tthis.changeStage(null);\r\n\t}\r\n\r\n\tprivate handlePhoneValidationForContractTariffStatusChange(event: CustomEvent): void {\r\n\t\tconst status: EPhoneValidationForContractTariffStatuses = event.detail.status;\r\n\t\tconst component: PhoneValidationForContractTariffComponent = (event.target as PhoneValidationForContractTariffComponent);\r\n\t\tthis.phoneInfo = {\r\n\t\t\toperator: component.getOperator(),\r\n\t\t\tnumber: component.getPhoneNumber(),\r\n\t\t};\r\n\t\tswitch (status) {\r\n\t\t\tcase EPhoneValidationForContractTariffStatuses.APPROVED_ABILITY_TO_CONNECT_TARIFF:\r\n\t\t\t\tthis.changeStage(EProductOptionTariffStages.SELECT_TARIFF);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleChangeTariff(event: CustomEvent): void {\r\n\t\tconst selected: TSelectContractTariffSelected = event.detail;\r\n\t\tthis.selectedTariff = selected;\r\n\t\tthis.updateLoanInfo(selected);\r\n\t}\r\n\r\n\tprivate updateLoanInfo(selected: TSelectContractTariffSelected): void {\r\n\t\tlet pricePerMonth: string;\r\n\t\tif (selected.isSkip) {\r\n\t\t\tpricePerMonth = selected.period.pricePerMonth;\r\n\t\t} else {\r\n\t\t\tpricePerMonth = selected.tariff.pricePerMonth;\r\n\t\t}\r\n\t\tthis.advantageousContractCard = this.advantageousContractToTariffCard({\r\n\t\t\t...this.advantageousContractTariff,\r\n\t\t\tpricePerMonth: pricePerMonth,\r\n\t\t\tperiod: selected.period.value,\r\n\t\t});\r\n\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\tthis.updatePricePerMonthInProductCostLine(pricePerMonth);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.productCostLine, 'on-btn-click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.addToCart();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate addToCart(): void {\r\n\t\tif (this.isAddToCartRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.productCostLine.isLoadingBtn = true;\r\n\t\tthis.productCostLine.isDisableBtn = true;\r\n\t\tthis.isAddToCartRequesting = true;\r\n\t\tconst data: TProductOptionTariffAddToCardData = {\r\n\t\t\tskuId: this.skuId,\r\n\t\t\tperiod: this.selectedTariff.period.value,\r\n\t\t\ttariff: this.selectedTariff.tariff || null,\r\n\t\t\tphoneNumber: this.phoneInfo.number || null,\r\n\t\t\toperatorName: this.phoneInfo.operator.name || null,\r\n\t\t};\r\n\r\n\t\tthis.httpService\r\n\t\t\t.request({\r\n\t\t\t\turl: '/products/add_to_basket/',\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t//TODO: handle response\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\t//TODO: handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isAddToCartRequesting = false;\r\n\t\t\t\tthis.productCostLine.isLoadingBtn = false;\r\n\t\t\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\t\t})\r\n\t}\r\n}\r\n\r\n","import {EBtnMods, EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-btn')\r\nexport default class BtnComponent extends WebComponentLite {\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic disabled: boolean = false;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean\r\n\t})\r\n\tpublic loading: boolean = false;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic prependIconClass: string = null;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic appendIconClass: string = null;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: EBtnSize,\r\n\t})\r\n\tpublic size: EBtnSize = EBtnSize.MD;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Array,\r\n\t})\r\n\tpublic mods: Array<EBtnMods> = [];\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: EBtnType,\r\n\t})\r\n\tpublic type: EBtnType = EBtnType.PRIMARY;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic link: string;\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [this.size, this.type, ...this.mods];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-btn_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst children = this.getChildren();\r\n\r\n\t\tif (this.link) {\r\n\t\t\treturn html`\r\n\t\t\t\t<a .href=\"${this.link}\" class=\"c-btn ${this.getMods()} ${this.loading && 'is-loading'}\"\r\n\t\t\t\t   ?disabled=\"${this.disabled}\">\r\n\t\t\t\t\t${this.getPrepend()}\r\n\t\t\t\t\t${this.getLoader()}\r\n\t\t\t\t\t<span class=\"c-btn__text\">\r\n\t\t\t\t\t\t${children}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t${this.getAppend()}\r\n\t\t\t`;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<button class=\"c-btn ${this.getMods()} ${this.loading && 'is-loading'}\"\r\n\t\t\t\t\t?disabled=\"${this.disabled}\">\r\n\t\t\t\t${this.getPrepend()}\r\n\t\t\t\t${this.getLoader()}\r\n\t\t\t\t<span class=\"c-btn__text\">\r\n\t\t\t\t\t\t${children}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t${this.getAppend()}\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getLoader(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-btn__loader\">\r\n\t\t\t\t<i class=\"o-icon o-icon_loader-line-filled\"></i>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getPrepend(): TemplateResult {\r\n\t\tif (!this.prependIconClass) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-btn__prepend o-icon-box\">\r\n\t\t\t\t<i class=\"o-icon ${this.prependIconClass}\"></i>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getAppend(): TemplateResult {\r\n\t\tif (!this.appendIconClass) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-btn__append o-icon-box\">\r\n\t\t\t\t<i class=\"o-icon ${this.appendIconClass}></i>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\n","export enum EToggleType {\r\n\tCHECKBOX = 'checkbox',\r\n\tRADIO = 'radio',\r\n}\r\n","import {EToggleType} from \"@components/toggle-card/model\";\r\nimport {isFunction} from \"@helpers/index\";\r\nimport {TDynamicAction} from \"@models/Action\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\n@customElement('c-toggle-card')\r\nexport default class ToggleCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic checked: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic disabled: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic name: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true\r\n\t})\r\n\tpublic value: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'price-per-month-value',\r\n\t})\r\n\tpublic pricePerMonth: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'insurance-type-value',\r\n\t})\r\n\tpublic insuranceType: string;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: EToggleType,\r\n\t})\r\n\tpublic type: EToggleType = EToggleType.CHECKBOX;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic marker: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic dark: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-change',\r\n\t})\r\n\tpublic onChange: TDynamicAction<boolean>;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'detail-value',\r\n\t})\r\n\tpublic detailValue: Object = {};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tif (this.checked && this.type === EToggleType.RADIO) {\r\n\t\t\tthis.active();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst marker = this.getMarker();\r\n\t\tconst children = this.getChildren();\r\n\r\n\t\tlet detailValue: string = this.getDetailValue();\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-toggle-card\">\r\n\t\t\t\t<input class=\"c-toggle-card__hidden-input\"\r\n\t\t\t\t\t   .type=\"${this.type}\"\r\n\t\t\t\t\t   .name=\"${this.name}\"\r\n\t\t\t\t\t   .value=\"${this.value}\"\r\n\t\t\t\t\t   ?checked=\"${this.checked}\"\r\n\t\t\t\t\t   ?disabled=\"${this.disabled}\">\r\n\t\t\t\t<input class=\"c-toggle-card__hidden-input\"\r\n\t\t\t\t\t\t?disabled=\"${!this.checked}\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"${this.name}_monthly_payment\"\r\n\t\t\t\t\t\t.value=\"${this.pricePerMonth}\">\r\n\t\t\t\t<input class=\"c-toggle-card__hidden-input\"\r\n\t\t\t\t\t\t?disabled=\"${!this.checked}\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"${this.name}_type\"\r\n\t\t\t\t\t\t.value=\"${this.insuranceType}\">\r\n\t\t\t\t<input class=\"c-toggle-card__hidden-input\"\r\n\t\t\t\t\t   ?disabled=\"${!this.checked}\"\r\n\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t   .name=\"${this.name}-${this.value}-detail\"\r\n\t\t\t\t\t   .value=\"${detailValue}\">\r\n\t\t\t\t${marker}\r\n\t\t\t\t<div class=\"c-toggle-card__content\">\r\n\t\t\t\t\t${children}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getDetailValue(): string {\r\n\t\tlet detailValue: string = '{}';\r\n\r\n\t\tif (this.detailValue) {\r\n\t\t\ttry {\r\n\t\t\t\tdetailValue = JSON.stringify(this.detailValue);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.log('ToggleCardComponent: errors when trying to convert an object to a string !');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn detailValue;\r\n\t}\r\n\r\n\tprotected getMarker(): TemplateResult {\r\n\t\tif (!this.marker) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-toggle-card__marker\">\r\n\t\t\t\t<div class=\"c-toggle-card__marker-icon\"></div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this, 'click')\r\n\t\t\t.subscribe(async () => {\r\n\t\t\t\tawait this.handleClick();\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate async handleClick(): Promise<void> {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet checked: boolean;\r\n\t\tif (this.onChange && isFunction(this.onChange)) {\r\n\t\t\tchecked = await this.onChange();\r\n\t\t} else {\r\n\t\t\tchecked = this.checked && this.type !== EToggleType.RADIO;\r\n\t\t}\r\n\r\n\t\tif (checked) {\r\n\t\t\tthis.disable();\r\n\t\t} else {\r\n\t\t\tthis.active();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate active(): void {\r\n\t\tif (this.type === EToggleType.RADIO) {\r\n\t\t\tthis.disableActiveRelatedElements();\r\n\t\t}\r\n\t\tthis.checked = true;\r\n\t}\r\n\r\n\tprivate disable(): void {\r\n\t\tthis.checked = false;\r\n\t}\r\n\r\n\tprivate disableActiveRelatedElements(): void {\r\n\t\tthis.getRelatedElements()\r\n\t\t\t.forEach(el => el.checked = false);\r\n\t}\r\n\r\n\tprivate getRelatedElements(): Array<ToggleCardComponent> {\r\n\t\treturn Array.from(\r\n\t\t\tdocument.querySelectorAll(`${this.localName}[type=\"${this.type}\"][name=\"${this.name}\"]:not([value=\"${this.value}\"])`)\r\n\t\t)\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\r\n\t\tif (name === 'checked' && old !== value) {\r\n\t\t\tconst event = new CustomEvent('on-change', {\r\n\t\t\t\tdetail: {}\r\n\t\t\t});\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-loader')\r\nexport default class LoaderComponent extends WebComponentLite {\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic active: boolean = false;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic type: ELoaderType = ELoaderType.PRIMARY;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic size: ELoaderSize = ELoaderSize.MD;\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [this.size, this.type];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-loader_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-loader ${this.getMods()}\">\r\n\t\t\t\t<div class=\"c-loader__content\">\r\n\t\t\t\t\t<div class=\"c-loader__icon\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import {TTariffCard, TTariffCardCostItem} from \"@components/tariff-card/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-tariff-card')\r\nexport default class TariffCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object\r\n\t})\r\n\tdata: TTariffCard;\r\n\r\n\tprotected render(): TemplateResult {\r\n\r\n\t\treturn html`\r\n\t\t\t<article class=\"c-tariff-card\">\r\n\t\t\t\t<header class=\"c-tariff-card__header\">\r\n\t\t\t\t\t<h4 class=\"c-tariff-card__title\">\r\n\t\t\t\t\t\t${unsafeHTML(this.data?.title)}\r\n\t\t\t\t\t</h4>\r\n\t\t\t\t\t${this.data?.subTitle ?\r\n\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t<h6 class=\"c-tariff-card__sub-title\">${unsafeHTML(this.data?.subTitle)}</h6>\r\n\t\t\t\t\t\t` :\r\n\t\t\t\t\t\tnull}\r\n\t\t\t\t\t${this.getPrepend()}\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-tariff-card__body\">\r\n\t\t\t\t\t${this.getCostTemplate()}\r\n\t\t\t\t</div>\r\n\t\t\t\t<footer class=\"c-tariff-card__footer\">\r\n\t\t\t\t\t${this.data?.infoTitle ?\r\n\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t<h4 class=\"c-tariff-card__info-title\">${unsafeHTML(this.data?.infoTitle)}</h4>\r\n\t\t\t\t\t\t` :\r\n\t\t\t\t\t\tnull}\r\n\t\t\t\t</footer>\r\n\t\t\t</article>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPrepend(): TemplateResult {\r\n\t\tif (!this.data?.prepend) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet result;\r\n\t\tif (this.data.prepend instanceof TemplateResult) {\r\n\t\t\tresult = this.data.prepend;\r\n\t\t} else {\r\n\t\t\tresult = unsafeHTML(this.data.prepend)\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-tariff-card__prepend\">\r\n\t\t\t\t${result}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getCostTemplate(): TemplateResult {\r\n\t\tconst cost: Array<TTariffCardCostItem> = this.data?.costs || [];\r\n\r\n\t\tif (!cost.length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-tariff-card-cost\">\r\n\t\t\t\t${cost.map(item =>\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<section\r\n\t\t\t\t\t\t\tclass=\"c-tariff-card-cost__item ${this.getMods('c-tariff-card-cost__item', [item.size])}\">\r\n\t\t\t\t\t\t\t<h4 class=\"c-tariff-card-cost__title\">\r\n\t\t\t\t\t\t\t\t${item.prepend ? html`<span>${item.prepend}</span>` : null}\r\n\t\t\t\t\t\t\t\t${unsafeHTML(item.title)}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t${item.subTitle ?\r\n\t\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t\t<p class=\"c-tariff-card-cost__sub-title\">${unsafeHTML(item.subTitle)}</p>\r\n\t\t\t\t\t\t\t\t` :\r\n\t\t\t\t\t\t\t\tnull}\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t`\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getMods(key: string, list: Array<string>): string {\r\n\t\treturn list\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `${key}_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n}\r\n","import {TImg} from \"@models/Img\";\r\n\r\nexport type TOperatorCard = {\r\n\timg: TImg\r\n\ttitle: string\r\n}\r\n\r\nexport enum EOperatorCardDirection {\r\n\tVERTICAL = 'vertical',\r\n\tHORIZONTAL = 'horizontal',\r\n}\r\n","import {EOperatorCardDirection, TOperatorCard} from \"@components/operator-card/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-operator-card')\r\nexport default class OperatorCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object\r\n\t})\r\n\tpublic data: TOperatorCard;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic direction: EOperatorCardDirection = EOperatorCardDirection.VERTICAL;\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-operator-card ${this.getMods()}\">\r\n\t\t\t\t<div class=\"c-operator-card__img-box\">\r\n\t\t\t\t\t<img class=\"c-operator-card__img\"\r\n\t\t\t\t\t\t src=\"${this.data?.img?.url}\"\r\n\t\t\t\t\t\t alt=\"${this.data?.img?.altText}\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 class=\"c-operator-card__title\">${this.data?.title}</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [this.direction];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-operator-card_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n}\r\n","export type TTermCard = {\r\n\tvalue: number\r\n\ttitle: string\r\n}\r\n\r\nexport enum ETermCardSizes {\r\n\tMEDIUM = 'md',\r\n}\r\n","import {ETermCardSizes, TTermCard} from \"@components/term-card/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-term-card')\r\nexport default class TermCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: ETermCardSizes,\r\n\t})\r\n\tpublic size: ETermCardSizes;\r\n\r\n\t@property({\r\n\t\ttype: Object\r\n\t})\r\n\tdata: TTermCard;\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [this.size || ''];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-term-card_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-term-card ${this.getMods()}\">\r\n\t\t\t\t<h4 class=\"c-term-card__title\">${this.data?.value}</h4>\r\n\t\t\t\t<p class=\"c-term-card__sub-title\">${this.data?.title}</p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import {TAccessoryCard} from \"@components/accessory-card/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-accessory-card')\r\nexport default class AccessoryCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object\r\n\t})\r\n\tdata: TAccessoryCard\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst price = MoneyFormatter.format(\r\n\t\t\tthis.data.price,\r\n\t\t)\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\tthis.data.pricePerMonth,\r\n\t\t)\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-accessory-card\">\r\n\t\t\t\t<header class=\"c-accessory-card__header\">\r\n\t\t\t\t\t<div class=\"c-accessory-card__img-box\">\r\n\t\t\t\t\t\t<img class=\"c-accessory-card__img\"\r\n\t\t\t\t\t\t\t src=\"${this.data?.img?.url}\" alt=\"${this.data?.img?.altText}\">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-accessory-card__body\">\r\n\t\t\t\t\t<h4 class=\"c-accessory-card__title\">${this.data?.title}</h4>\r\n\t\t\t\t\t<div class=\"c-accessory-card__costs\">\r\n\t\t\t\t\t\t<div class=\"c-accessory-card__price-box\">\r\n\t\t\t\t\t\t\t<h4 class=\"c-accessory-card__price-per-month\">${pricePerMonth}/</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"c-accessory-card__price-box\">\r\n\t\t\t\t\t\t\t<h5 class=\"c-accessory-card__price\">${price}</h5>\r\n\t\t\t\t\t\t\t<p class=\"c-accessory-card__price-label\"> </p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import {Observable, Subject} from \"rxjs\";\r\nimport {IResize} from \"@modules/resize/model\";\r\n\r\nexport default class Resize implements IResize {\r\n\tprivate $stream: Subject<ResizeObserverEntry> = new Subject<ResizeObserverEntry>();\r\n\r\n\tprivate resizeObserver: ResizeObserver;\r\n\r\n\tconstructor(element: Element) {\r\n\t\tthis.resizeObserver = new ResizeObserver(entries => {\r\n\t\t\tfor (let entry of entries) {\r\n\t\t\t\tthis.$stream.next(entry);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.resizeObserver.observe(element);\r\n\t}\r\n\r\n\tpublic getStream(): Observable<ResizeObserverEntry> {\r\n\t\treturn this.$stream.asObservable();\r\n\t}\r\n}\r\n","import gsap from \"gsap\";\r\nimport {ScrollTrigger} from \"gsap/ScrollTrigger\";\r\nimport Resize from \"@modules/resize/Resize\";\r\nimport {IResize} from \"@modules/resize/model\";\r\nimport {IVisibility} from \"@modules/visibility/model\";\r\nimport Visibility from \"@modules/visibility/Visibility\";\r\nimport ScrollTriggerInstance = gsap.plugins.ScrollTriggerInstance;\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default class StickyCostLine {\r\n\tprivate CLASS_HANDLER: string = 'js-stickyCostLineHandler';\r\n\tprivate CLASS_FIXED_DUPLICATE: string = 'js-stickyCostLineFixedDuplicate';\r\n\r\n\tprivate handlerEl: HTMLElement;\r\n\tprivate fixedDuplicateEl: HTMLElement;\r\n\tprivate resize: IResize;\r\n\tprivate trigger: ScrollTriggerInstance;\r\n\tprivate visibility: IVisibility;\r\n\r\n\tprivate handlerHeight: number;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.handlerEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tthis.fixedDuplicateEl = document.querySelector(`.${this.CLASS_FIXED_DUPLICATE}`);\r\n\t\tif (!this.handlerEl || !this.fixedDuplicateEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.visibility = new Visibility();\r\n\t\tthis.resize = new Resize(document.body);\r\n\t\tthis.handlerHeight = this.handlerEl.offsetHeight;\r\n\t\tthis.initTrigger();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate initTrigger(): void {\r\n\t\tthis.trigger = ScrollTrigger.create({\r\n\t\t\ttrigger: this.handlerEl,\r\n\t\t\tstart: \"bottom bottom\",\r\n\t\t\tendTrigger: this.handlerEl,\r\n\t\t\tend: \"bottom bottom\",\r\n\t\t\tmarkers: false, //for debug,\r\n\t\t\tonUpdate: self => this.updateFixedDuplicate(self.progress)\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.resize\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tScrollTrigger.refresh();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateFixedDuplicate(progress: number): void {\r\n\t\tif (progress > 0) {\r\n\t\t\tthis.visibility.hide(this.fixedDuplicateEl);\r\n\t\t} else {\r\n\t\t\tthis.visibility.show(this.fixedDuplicateEl);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import {EBtnMods, EBtnSize, EBtnState, EBtnType} from \"@components/btn/model\";\r\nimport {TProductCostLineOnBtnClickEventDetail} from \"@components/product-cost-line/model\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport StickyCostLine from \"@scenario/StickyCostLine\";\r\nimport {customElement, html, property, PropertyValues, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-product-cost-line')\r\nexport default class ProductCostLineComponent extends WebComponentLite {\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t\tattribute: 'price',\r\n\t})\r\n\tprice: string;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t\tattribute: 'price-per-month',\r\n\t})\r\n\tpricePerMonth: string;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'is-disable-btn',\r\n\t})\r\n\tisDisableBtn: boolean;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'is-loading-btn',\r\n\t})\r\n\tisLoadingBtn: boolean;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t\tattribute: 'btn-text',\r\n\t})\r\n\tbtnText: string = ' ';\r\n\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tnew StickyCostLine().init();\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t${this.getFixedWrapper(this.getContent())}\r\n\t\t\t${this.getStaticWrapper(this.getContent())}\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getFixedWrapper(content: TemplateResult): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-product-cost-line c-product-cost-line_fixed js-stickyCostLineFixedDuplicate\">\r\n\t\t\t\t${content}\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getStaticWrapper(content: TemplateResult): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-product-cost-line js-stickyCostLineHandler\">\r\n\t\t\t\t${content}\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getContent(): TemplateResult {\r\n\t\tconst price: string = MoneyFormatter.format(\r\n\t\t\t(this.price || '0'), EMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\t\tconst pricePerMonth: string = MoneyFormatter.format(\r\n\t\t\t(this.pricePerMonth || '0'), EMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT\r\n\t\t);\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-product-cost-line__content\">\r\n\t\t\t\t<div class=\"c-product-cost-line__info\">\r\n\t\t\t\t\t<div class=\"c-product-cost-line__title-box\">\r\n\t\t\t\t\t\t<h3 class=\"c-product-cost-line__title\"></h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"c-product-cost-line__price-box\">\r\n\t\t\t\t\t\t<h4 class=\"c-product-cost-line__sub-title\"> </h4>\r\n\t\t\t\t\t\t<div class=\"c-product-cost-line__cost\">\r\n\t\t\t\t\t\t\t${unsafeHTML(pricePerMonth)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"c-product-cost-line__price-box\">\r\n\t\t\t\t\t\t<h4 class=\"c-product-cost-line__sub-title\"> </h4>\r\n\t\t\t\t\t\t<div class=\"c-product-cost-line__cost\">\r\n\t\t\t\t\t\t\t${unsafeHTML(price)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-product-cost-line__btn-box\">\r\n\t\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t\t   size=\"${EBtnSize.LG}\"\r\n\t\t\t\t\t\t   .mods=\"${[EBtnMods.ADAPTIVE_TO_MD]}\"\r\n\t\t\t\t\t\t   ?loading=\"${this.isLoadingBtn}\"\r\n\t\t\t\t\t\t   ?disabled=\"${this.isDisableBtn}\"\r\n\t\t\t\t\t\t   @click=\"${this.handleBtnClick}\">\r\n\t\t\t\t\t\t${this.btnText}\r\n\t\t\t\t\t</c-btn>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleBtnClick(event: CustomEvent): void {\r\n\t\tlet states: Array<EBtnState> = [];\r\n\t\tif (this.isDisableBtn) {\r\n\t\t\tstates.push(EBtnState.DISABLED);\r\n\t\t}\r\n\t\tif (this.isLoadingBtn) {\r\n\t\t\tstates.push(EBtnState.LOADING);\r\n\t\t}\r\n\t\tif (!this.isDisableBtn && !this.isLoadingBtn) {\r\n\t\t\tstates.push(EBtnState.ACTIVE);\r\n\t\t}\r\n\t\tlet detail: TProductCostLineOnBtnClickEventDetail = {\r\n\t\t\tstates: states,\r\n\t\t}\r\n\t\tconst customEvent = new CustomEvent<TProductCostLineOnBtnClickEventDetail>('on-btn-click', {\r\n\t\t\tdetail: detail,\r\n\t\t});\r\n\t\tthis.dispatchEvent(customEvent);\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {IModal} from \"@modules/modal/model\";\r\nimport Modal from \"@modules/modal/Modal\";\r\nimport {strToBoolean} from \"@helpers/index\";\r\n\r\n@customElement('c-modal')\r\nexport default class ModalComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\tbackdrop: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\tmaskClosable: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\tclosable: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true\r\n\t})\r\n\ttitle: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true\r\n\t})\r\n\tsubTitle: string;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\topened: boolean = false;\r\n\r\n\t@query('.js-modal')\r\n\tprivate modalEl: HTMLDialogElement;\r\n\r\n\tprivate modal: IModal;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.modal = new Modal({\r\n\t\t\telement: this.modalEl,\r\n\t\t\tmaskClosable: this.maskClosable,\r\n\t\t});\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (name === 'opened') {\r\n\t\t\tthis.toggle(strToBoolean(value === '' ? true : value));\r\n\t\t}\r\n\r\n\t\tif (name === 'maskclosable') {\r\n\t\t\tif (this.modal) {\r\n\t\t\t\tthis.modal.maskClosable = strToBoolean(value === '' ? true : value)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name === 'closable') {\r\n\t\t\tif (this.modal) {\r\n\t\t\t\tthis.modal.closable = strToBoolean(value === '' ? true : value)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.modal.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.modal.close();\r\n\t}\r\n\r\n\tpublic setBody(content: string): void {\r\n\t\tthis.modal.getBodyEl().innerHTML = content;\r\n\t}\r\n\r\n\tpublic setFooter(content: string): void {\r\n\t\tthis.modal.getFooterEl().innerHTML = content;\r\n\t}\r\n\r\n\tprivate toggle(state: boolean): void {\r\n\t\tif (state) {\r\n\t\t\tthis.open();\r\n\t\t} else {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<dialog class=\"c-modal js-modal ${this.backdrop ? 'c-modal_backdrop' : ''}\">\r\n\t\t\t\t<div class=\"c-modal__view js-modalView\">\r\n\t\t\t\t\t<div class=\"c-modal__content js-modalContent\">\r\n\t\t\t\t\t\t<button class=\"c-modal__close js-modalClose\">\r\n\t\t\t\t\t\t\t<i class=\"o-icon o-icon_close-filled\"></i>\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t${this.getHeader()}\r\n\r\n\t\t\t\t\t\t${this.getExtraTop()}\r\n\r\n\t\t\t\t\t\t${this.getBody()}\r\n\r\n\t\t\t\t\t\t${this.getFooter()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</dialog>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getHeader(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<header class=\"c-modal__header js-modalHeader\">\r\n\t\t\t\t<div class=\"c-modal__title\">\r\n\t\t\t\t\t<h5 class=\"js-modalTitle\">${this.title}</h5>\r\n\t\t\t\t\t<p>${this.subTitle || ''}</p>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t\r\n\t\t\t</header>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getExtraTop(): TemplateResult {\r\n\t\tconst content = this.getSlot('extra-top');\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-modal__extra-top js-modalExtraTop\">\r\n\t\t\t\t${content}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getBody(): TemplateResult {\r\n\t\tconst content = this.getSlot('body');\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-modal__body js-modalBody js-customScroll\">\r\n\t\t\t\t${content}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getFooter(): TemplateResult {\r\n\t\tconst content = this.getSlot('footer');\r\n\t\treturn html`\r\n\t\t\t<footer class=\"c-modal__footer js-modalFooter\">\r\n\t\t\t\t${content}\r\n\t\t\t</footer>\r\n\t\t`;\r\n\t}\r\n}\r\n","export enum ESlideMenuDirection {\r\n\tNEXT = 'next',\r\n\tBACK = 'back',\r\n}\r\n\r\nexport type TItemShiftStream = {\r\n\tdirection: ESlideMenuDirection\r\n\titem: HTMLElement\r\n\thandler: HTMLElement\r\n\tbody: HTMLElement\r\n}\r\n","import {ESlideMenuDirection, TItemShiftStream} from \"@components/slide-menu/model\";\r\nimport {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {combineLatest, fromEvent, Subject} from \"rxjs\";\r\nimport {filter, pairwise, startWith} from \"rxjs/internal/operators\";\r\n\r\nexport default class SlideMenu {\r\n\tprivate CLASS_MAIN: string = 'js-slideMenu';\r\n\tprivate CLASS_CONTAINER: string = 'js-slideMenuContainer';\r\n\tprivate CLASS_LIST: string = 'js-slideMenuList';\r\n\tprivate CLASS_ITEM: string = 'js-slideMenuItem';\r\n\tprivate CLASS_HEADER: string = 'js-slideMenuHeader';\r\n\tprivate CLASS_BODY: string = 'js-slideMenuBody';\r\n\tprivate CLASS_HANDLER: string = 'js-slideMenuHandler';\r\n\r\n\tprivate DATA_ATTR_DIRECTION: string = 'data-slide-menu-direction';\r\n\r\n\tprivate slideMenuEl: HTMLElement;\r\n\tprivate containerEl: HTMLElement;\r\n\r\n\tprivate immersionLevel: number = 0;\r\n\r\n\tprivate isAnimating: boolean = false;\r\n\r\n\tprivate itemShiftStream: Subject<TItemShiftStream> = new Subject<TItemShiftStream>();\r\n\r\n\tconstructor(slideMenu: HTMLElement) {\r\n\t\tthis.slideMenuEl = slideMenu;\r\n\t\tthis.initElements();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.slideMenuEl, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, `.${this.CLASS_HANDLER}`)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst handler: HTMLElement = getDefinitionElement(event.target as HTMLElement, `.${this.CLASS_HANDLER}`);\r\n\t\t\t\tconst direction: ESlideMenuDirection = this.getDirection(handler);\r\n\t\t\t\tif (direction === ESlideMenuDirection.NEXT) {\r\n\t\t\t\t\tthis.slideNext(handler);\r\n\t\t\t\t} else if (direction === ESlideMenuDirection.BACK) {\r\n\t\t\t\t\tthis.slideBack(handler);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tcombineLatest([\r\n\t\t\tfromEvent<TransitionEvent>(this.containerEl, 'transitionend'),\r\n\t\t\tthis.itemShiftStream.asObservable(),\r\n\t\t])\r\n\t\t\t.pipe(\r\n\t\t\t\tstartWith([null, null]),\r\n\t\t\t\tpairwise(),\r\n\t\t\t\tfilter(([prev, current]) => {\r\n\t\t\t\t\tconst prevTranTimeStamp = prev?.[0]?.timeStamp;\r\n\t\t\t\t\tconst currentTranTimeStamp = current[0].timeStamp;\r\n\t\t\t\t\treturn prevTranTimeStamp !== currentTranTimeStamp;\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe(([prev, [transitionEndEvent, itemShift]]) => {\r\n\t\t\t\tthis.isAnimating = false;\r\n\t\t\t\tif (itemShift.direction === ESlideMenuDirection.BACK) {\r\n\t\t\t\t\titemShift.body.style.visibility = 'hidden';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getPrevBody(handler: HTMLElement): HTMLElement {\r\n\t\tconst item: HTMLElement = handler.closest(`.${this.CLASS_ITEM}`);\r\n\t\tconst body: HTMLElement = item.closest(`.${this.CLASS_BODY}`);\r\n\t\treturn body ? body : this.containerEl.querySelector(`.${this.CLASS_LIST}`);\r\n\t}\r\n\r\n\tprivate slideNext(handler: HTMLElement): void {\r\n\t\tif (this.isAnimating) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst item: HTMLElement = this.getItem(handler);\r\n\t\tconst body: HTMLElement = this.getBody(item);\r\n\t\tthis.containerEl.style.maxHeight = this.containerEl.offsetHeight + 'px';\r\n\t\tthis.containerEl.style.minHeight = this.containerEl.offsetHeight + 'px';\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.immersionLevel += 1;\r\n\t\tbody.style.visibility = 'visible';\r\n\t\tthis.itemShiftStream.next({\r\n\t\t\tdirection: ESlideMenuDirection.NEXT,\r\n\t\t\tbody,\r\n\t\t\titem,\r\n\t\t\thandler,\r\n\t\t});\r\n\t\tthis.containerEl.style.maxHeight = body.offsetHeight + 'px';\r\n\t\tthis.containerEl.style.minHeight = body.offsetHeight + 'px';\r\n\t\tthis.shiftContainer(this.immersionLevel);\r\n\t}\r\n\r\n\tprivate slideBack(handler: HTMLElement): void {\r\n\t\tif (this.isAnimating) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst item: HTMLElement = this.getItem(handler);\r\n\t\tconst body: HTMLElement = this.getBody(item);\r\n\t\tconst prevBody: HTMLElement = this.getPrevBody(handler);\r\n\t\tthis.containerEl.style.maxHeight = body.offsetHeight + 'px';\r\n\t\tthis.containerEl.style.minHeight = body.offsetHeight + 'px';\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.immersionLevel -= 1;\r\n\t\tthis.itemShiftStream.next({\r\n\t\t\tdirection: ESlideMenuDirection.BACK,\r\n\t\t\tbody,\r\n\t\t\titem,\r\n\t\t\thandler,\r\n\t\t});\r\n\t\tthis.containerEl.style.maxHeight = prevBody.offsetHeight + 'px';\r\n\t\tthis.containerEl.style.minHeight = prevBody.offsetHeight + 'px';\r\n\t\tthis.shiftContainer(this.immersionLevel);\r\n\t}\r\n\r\n\tprivate shiftContainer(level: number): void {\r\n\t\tthis.containerEl.style.transform = `translateX(-${100 * level}%)`;\r\n\t}\r\n\r\n\tprivate getBody(item: HTMLElement): HTMLElement {\r\n\t\tlet body: HTMLElement = item.querySelector(`.${this.CLASS_BODY}`);\r\n\t\tif (!body) {\r\n\t\t\tthrow new Error('SlideMenu: body is not defined !');\r\n\t\t}\r\n\t\treturn body;\r\n\t}\r\n\r\n\tprivate getItem(handler: HTMLElement): HTMLElement {\r\n\t\tlet item: HTMLElement;\r\n\t\tif (handler.classList.contains(this.CLASS_ITEM)) {\r\n\t\t\titem = handler;\r\n\t\t} else {\r\n\t\t\titem = handler.closest(`.${this.CLASS_ITEM}`);\r\n\t\t}\r\n\t\tif (!item) {\r\n\t\t\tthrow new Error('SlideMenu: item is not defined !');\r\n\t\t}\r\n\t\treturn item;\r\n\t}\r\n\r\n\tprivate getDirection(handler: HTMLElement): ESlideMenuDirection {\r\n\t\tconst dataValue: string = handler.getAttribute(this.DATA_ATTR_DIRECTION);\r\n\t\tswitch (dataValue) {\r\n\t\t\tcase ESlideMenuDirection.BACK:\r\n\t\t\t\treturn ESlideMenuDirection.BACK;\r\n\t\t\tcase ESlideMenuDirection.NEXT:\r\n\t\t\t\treturn ESlideMenuDirection.NEXT;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error('SlideMenu: direction is not defined !');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tthis.containerEl = this.slideMenuEl.querySelector(`.${this.CLASS_CONTAINER}`);\r\n\t\tif (!this.containerEl) {\r\n\t\t\tthrow new Error('SlideMenu: container is not defined !');\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import SlideMenuAutoActivation from \"@components/slide-menu/SlideMenuAutoActivation\";\r\n\r\nnew SlideMenuAutoActivation().init();\r\n","import SlideMenu from \"@components/slide-menu/SlideMenu\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\n\r\nexport default class SlideMenuAutoActivation extends DynamicInsertionElements {\r\n\tprivate name: string = 'slide-menu';\r\n\tprivate CLASS_HANDLER: string = 'js-slideMenuAuto';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic init(): void {\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tconst handlers: Array<HTMLElement> = Array.from(scope.getElementsByClassName(this.CLASS_HANDLER)) as Array<HTMLElement>;\r\n\t\thandlers.forEach(handler => {\r\n\t\t\tif (strToBoolean(handler.getAttribute(this.getDataActivatedName()))) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\thandler.setAttribute(this.getDataActivatedName(), 'true');\r\n\t\t\tnew SlideMenu(handler);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getDataActivatedName(): string {\r\n\t\treturn `data-${this.name}-activated`\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-form-item')\r\nexport default class FormItemComponent extends WebComponentLite {\r\n\tprotected render(): TemplateResult {\r\n\t\tconst child = this.getChildren();\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-form-item js-formItem\">\r\n\t\t\t\t<div class=\"c-form-item__control\">\r\n\t\t\t\t\t${child}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-form-item__message-wrapper\">\r\n\t\t\t\t\t<p class=\"c-form-item__message js-formItemMessage\">This is message</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import Mask, {EMaskTypes, MASK_FORMATS} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport IMask from \"imask\";\r\nimport {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport AnyMaskedOptions = IMask.AnyMaskedOptions;\r\nimport InputMask = IMask.InputMask;\r\n\r\n@customElement('c-input')\r\nexport default class InputComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic label: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic name: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic value: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic type: string = '';\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic textarea: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic fieldClass: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'mask-type'\r\n\t})\r\n\tpublic maskType: EMaskTypes;\r\n\r\n\t@query('[input-field]')\r\n\tprivate field: HTMLInputElement;\r\n\r\n\tpublic mask: InputMask<AnyMaskedOptions>;\r\n\r\n\tpublic getMask(): InputMask<AnyMaskedOptions> {\r\n\t\treturn this.mask;\r\n\t}\r\n\r\n\tpublic focus(): void {\r\n\t\tthis.field.focus();\r\n\t}\r\n\r\n\tpublic getValue(): string {\r\n\t\treturn this.field.value;\r\n\t}\r\n\r\n\tpublic setValue(value: string): void {\r\n\t\tthis.field.value = value;\r\n\t\tthis.dispatchInputChange();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.initMask();\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis.mask?.destroy();\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-input js-field\">\r\n\t\t\t\t${this.getField()}\r\n\t\t\t\t<label class=\"c-input__label\">${this.label}</label>\r\n\t\t\t\t<div class=\"c-input__bar\"></div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (this.field && name === 'value') {\r\n\t\t\tif (this.mask) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.mask.updateValue();\r\n\t\t\t\t\tthis.mask.updateControl();\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initMask(): void {\r\n\t\tif (this.maskType) {\r\n\t\t\tthis.mask = IMask(\r\n\t\t\t\tthis.field,\r\n\t\t\t\tMASK_FORMATS[this.maskType].option,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate dispatchInputChange(): void {\r\n\t\tthis.field.dispatchEvent(new Event('input'));\r\n\t\tthis.field.dispatchEvent(new Event('change'));\r\n\t}\r\n\r\n\tprivate getField(): TemplateResult {\r\n\t\tif (this.textarea) {\r\n\t\t\treturn html`\r\n\t\t\t\t<textarea input-field\r\n\t\t\t\t\t\t  class=\"c-input__field ${this.fieldClass}\"\r\n\t\t\t\t\t\t  .type=\"${this.type}\"\r\n\t\t\t\t\t\t  .value=\"${this.value}\"\r\n\t\t\t\t\t\t  .name=\"${this.name}\"\r\n\t\t\t\t\t\t  placeholder=\"textarea\">\r\n\t\t\t\t</textarea>\r\n\t\t\t`;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<input input-field\r\n\t\t\t\t   class=\"c-input__field ${this.fieldClass}\"\r\n\t\t\t\t   .type=\"${this.type}\"\r\n\t\t\t\t   .value=\"${this.value}\"\r\n\t\t\t\t   .name=\"${this.name}\"\r\n\t\t\t\t   placeholder=\"&amp;nbsp;\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tif (this.mask) {\r\n\t\t\tthis.mask.on('accept', () => {\r\n\t\t\t\tthis.emitEventOnChange();\r\n\t\t\t});\r\n\t\t\tthis.mask.on('complete', () => {\r\n\t\t\t\tthis.emitEventOnChange();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tmerge(\r\n\t\t\t\tfromEvent(this.field, 'input'),\r\n\t\t\t\t// fromEvent(this.field, 'change').pipe(tap(() => console.log('event change'))),\r\n\t\t\t\tfromEvent(this.field, 'cut'),\r\n\t\t\t\tfromEvent(this.field, 'paste'),\r\n\t\t\t\tfromEvent(this.field, 'drop'),\r\n\t\t\t\t// fromEvent(this.field, 'keydown').pipe(tap(() => console.log('event keydown'))),\r\n\t\t\t)\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tthis.emitEventOnChange();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate emitEventOnChange(): void {\r\n\t\tif (this.mask) {\r\n\t\t\tthis.value = Mask.getFormattedValue(this.field.value, this.maskType);\r\n\t\t} else {\r\n\t\t\tthis.value = this.field.value;\r\n\t\t}\r\n\t\tconst event = new CustomEvent('on-change', {\r\n\t\t\tdetail: {}\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {TCodeInputChangeEventDetail} from \"@components/code-input/model\";\r\nimport {EMaskTypes, MASK_FORMATS} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport IMask from \"imask\";\r\nimport {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport AnyMaskedOptions = IMask.AnyMaskedOptions;\r\nimport InputMask = IMask.InputMask;\r\n\r\n@customElement('c-code-input')\r\nexport default class CodeInputComponent extends WebComponentLite {\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic name: string = '';\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: String,\r\n\t})\r\n\tpublic value: string = '';\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic disabled: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'mask-type',\r\n\t})\r\n\tpublic maskType: string = EMaskTypes.SMS_CODE;\r\n\r\n\t@query('[code-input-field]')\r\n\tprivate field: HTMLInputElement;\r\n\r\n\tprivate mask: InputMask<AnyMaskedOptions>;\r\n\r\n\tpublic getMask(): InputMask<AnyMaskedOptions> {\r\n\t\treturn this.mask;\r\n\t}\r\n\r\n\tpublic focus(): void {\r\n\t\tthis.field.focus();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.initMask();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis.mask.destroy();\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (this.field && name === 'value') {\r\n\t\t\tif (this.mask) {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.mask?.updateValue();\r\n\t\t\t\t\tthis.mask?.updateControl();\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initMask(): void {\r\n\t\tthis.mask = IMask(\r\n\t\t\tthis.field,\r\n\t\t\tMASK_FORMATS[this.maskType || EMaskTypes.SMS_CODE].option,\r\n\t\t);\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-code-input\">\r\n\t\t\t\t<input code-input-field\r\n\t\t\t\t\t   class=\"c-code-input__field\"\r\n\t\t\t\t\t   type=\"text\"\r\n\t\t\t\t\t   .name=\"${this.name}\"\r\n\t\t\t\t\t   .value=\"${this.value}\"\r\n\t\t\t\t\t   ?disabled=\"${this.disabled}\"\r\n\t\t\t\t\t   pattern=\"[0-9]*\"\r\n\t\t\t\t\t   inputmode=\"numeric\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.mask.on('accept', () => {\r\n\t\t\tthis.emitEventOnChange({\r\n\t\t\t\tvalue: this.mask.unmaskedValue,\r\n\t\t\t\tisComplete: false,\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.mask.on('complete', () => {\r\n\t\t\tthis.emitEventOnChange({\r\n\t\t\t\tvalue: this.mask.unmaskedValue,\r\n\t\t\t\tisComplete: true,\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnChange(detail: TCodeInputChangeEventDetail): void {\r\n\t\tthis.value = this.field.value;\r\n\t\tconst event = new CustomEvent('on-change', {\r\n\t\t\tdetail: detail,\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {ITimer, TTimerValue} from \"@modules/timer/model\";\r\nimport {BehaviorSubject, interval, Observable, Subscription} from \"rxjs\";\r\nimport {filter, map, takeWhile, tap} from \"rxjs/operators\";\r\n\r\nexport default class Timer implements ITimer {\r\n\tprivate streamTimer: BehaviorSubject<TTimerValue> = new BehaviorSubject<TTimerValue>(null);\r\n\tprivate isStopped: boolean = false;\r\n\tprivate lastSec: number;\r\n\r\n\tprivate intervalStream: Subscription;\r\n\r\n\tpublic getStream(): Observable<any> {\r\n\t\treturn this.streamTimer\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(value => Boolean(value))\r\n\t\t\t)\r\n\t}\r\n\r\n\tpublic start(ms: number): void {\r\n\t\tif (this.intervalStream) {\r\n\t\t\tthis.stop();\r\n\t\t}\r\n\t\tthis.isStopped = false;\r\n\t\tthis.intervalStream = interval(1000)\r\n\t\t\t.pipe(\r\n\t\t\t\tmap(value => (ms / 1000) - value),\r\n\t\t\t\ttakeWhile(value => {\r\n\t\t\t\t\treturn !this.isStopped && value > -1;\r\n\t\t\t\t}),\r\n\t\t\t\ttap(sec => {\r\n\t\t\t\t\tthis.lastSec = sec;\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe(value => {\r\n\t\t\t\tthis.streamTimer.next({\r\n\t\t\t\t\tsecond: value,\r\n\t\t\t\t\tfillTime: this.secondToFullTime(value),\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n\r\n\tpublic stop(): void {\r\n\t\tthis.isStopped = true;\r\n\t\tif (this.intervalStream) {\r\n\r\n\t\tthis.intervalStream.unsubscribe();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate secondToFullTime(sec: number) {\r\n\t\tconst hours = Math.floor(sec / 3600);\r\n\t\tconst minutes = Math.floor(sec / 60) % 60;\r\n\t\tconst seconds = sec % 60;\r\n\r\n\t\treturn [hours, minutes, seconds]\r\n\t\t\t.map((v) => v < 10 ? '0' + v : v)\r\n\t\t\t.filter((v, i) => v !== '00' || i > 0)\r\n\t\t\t.join(':');\r\n\t}\r\n}\r\n","import {ITimer, TTimerValue} from \"@modules/timer/model\";\r\nimport Timer from \"@modules/timer/Timer\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property, TemplateResult} from \"lit-element\";\r\nimport {Observable} from \"rxjs\";\r\n\r\n@customElement('c-timer')\r\nexport default class TimerTextComponent extends WebComponentLite {\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Number,\r\n\t})\r\n\tpublic time: number = 0;\r\n\r\n\tprivate timer: ITimer;\r\n\r\n\t@state()\r\n\tprivate output: string = '00:00';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.timer = new Timer();\r\n\t\tthis.timer\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(stream => {\r\n\t\t\t\tthis.output = stream.fillTime;\r\n\t\t\t});\r\n\t}\r\n\r\n\tpublic getStream(): Observable<TTimerValue> {\r\n\t\treturn this.timer.getStream();\r\n\t}\r\n\r\n\tconnectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tif (this.time > 0) {\r\n\t\t\tthis.timer.start(this.time);\r\n\t\t}\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (name === 'time') {\r\n\t\t\tthis.timer.start(parseFloat(value));\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<span>${this.output}</span>\r\n\t\t`;\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis.timer.stop();\r\n\t}\r\n}\r\n","import {TOperator} from \"@models/Operator\";\r\nimport {TTariffConnection} from \"@models/Tariff\";\r\n\r\nexport enum EValidateSMSCodeStatuses {\r\n\tVALIDATION_SUCCESSFUL = 'VALIDATION_SUCCESSFUL',\r\n\tVALIDATION_ERROR = 'VALIDATION_ERROR',\r\n\tOUT_SMS_REQUESTS = 'OUT_SMS_REQUESTS',\r\n\tOUT_VALIDATION_REQUESTS = 'OUT_VALIDATION_REQUESTS',\r\n\tERROR = 'ERROR',\r\n}\r\n\r\nexport type TValidateSMSCodeBootstrapData = {\r\n\ttimer?: number\r\n\tattemptsCountSend?: number\r\n\tattemptsCountValidate?: number\r\n}\r\n\r\nexport type TValidateSMSCodeResponse = {\r\n\toperator: TOperator\r\n\ttariffConnection: TTariffConnection\r\n}\r\n\r\nexport type TValidateSMSCodeEventDetail = {\r\n\tstatus: EValidateSMSCodeStatuses,\r\n\toperator: TOperator\r\n\ttariffConnection: TTariffConnection\r\n}\r\n\r\nexport enum EValidateSMSCodeSlots {\r\n\tFORM_VALIDATE = 'form-validate',\r\n\tFORM_GET = 'form-get',\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport CodeInputComponent from \"@components/code-input/CodeInputComponent\";\r\nimport {\r\n\tEValidateSMSCodeSlots,\r\n\tEValidateSMSCodeStatuses,\r\n\tTValidateSMSCodeBootstrapData,\r\n\tTValidateSMSCodeEventDetail,\r\n\tTValidateSMSCodeResponse\r\n} from \"@components/validate-sms-code/model\";\r\nimport {isNotNullOrUndefined} from \"@helpers/index\";\r\nimport {TSMSValidationGetResponse, TSMSValidationValidateReject} from \"@models/SMSValidation\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {TRequestResponse} from \"@modules/http-request/model\";\r\nimport Mask, {EMaskTypes} from \"@modules/mask/Mask\";\r\nimport {ITimer} from \"@modules/timer/model\";\r\nimport Timer from \"@modules/timer/Timer\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError, Method} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-validate-sms-code')\r\nexport default class ValidateSMSCodeComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number'\r\n\t})\r\n\tphoneNumber: string = undefined;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic confirmed: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'form-code-name'\r\n\t})\r\n\tformCodeName: string = 'code';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'form-phone-number-name'\r\n\t})\r\n\tformPhoneNumberName: string = 'phoneNumber';\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'bootstrap-data'\r\n\t})\r\n\tbootstrapData: TValidateSMSCodeBootstrapData;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'request-on-creation',\r\n\t})\r\n\tpublic requestOnCreation: boolean = false;\r\n\r\n\t@query('[validate-sms-code-field]')\r\n\tprivate codeInput: CodeInputComponent;\r\n\r\n\t@state()\r\n\tprivate attemptsCountSend: number = 0;\r\n\r\n\t@state()\r\n\tprivate attemptsCountValidate: number = 0;\r\n\r\n\t@state()\r\n\tprivate timerOutput: string = '00:00';\r\n\r\n\t@state()\r\n\tprivate isValidationRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isSMSRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isTimerActive: boolean = false;\r\n\r\n\tprotected httpService: HttpRequest = new HttpRequest();\r\n\r\n\tprivate formValidateEl: HTMLFormElement;\r\n\tprivate formGetEl: HTMLFormElement;\r\n\tprivate timer: ITimer;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.timer = new Timer();\r\n\t\tthis.timer\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(stream => {\r\n\t\t\t\tthis.isTimerActive = true;\r\n\t\t\t\tthis.timerOutput = stream.fillTime;\r\n\r\n\t\t\t\tif (stream.second === 0) {\r\n\t\t\t\t\tthis.isTimerActive = false;\r\n\t\t\t\t\tthis.timerEnded();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.initSlots();\r\n\t\tthis.initBootstrapData();\r\n\t\tif (this.requestOnCreation) {\r\n\t\t\tthis.getSMSCode();\r\n\t\t}\r\n\t\tthis.focusInputField();\r\n\t}\r\n\r\n\tprivate initSlots(): void {\r\n\t\tthis.formValidateEl = this.getSlot(EValidateSMSCodeSlots.FORM_VALIDATE) as HTMLFormElement;\r\n\t\tif (!this.formValidateEl) {\r\n\t\t\tthrow new Error(`ValidateSMSCodeComponent: slot with name '${EValidateSMSCodeSlots.FORM_VALIDATE}' is not defined !`);\r\n\t\t}\r\n\t\tthis.formGetEl = this.getSlot(EValidateSMSCodeSlots.FORM_GET) as HTMLFormElement;\r\n\t\tif (!this.formGetEl) {\r\n\t\t\tthrow new Error(`ValidateSMSCodeComponent: slot with name '${EValidateSMSCodeSlots.FORM_GET}' is not defined !`);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-validate-sms-code\">\r\n\t\t\t\t<c-code-input validate-sms-code-field\r\n\t\t\t\t\t\t\t  name=\"code\"\r\n\t\t\t\t\t\t\t  @on-change=\"${this.handleFieldChange}\">\r\n\t\t\t\t</c-code-input>\r\n\r\n\t\t\t\t<div class=\"u-text-center c-validate-sms-code__message\">\r\n\t\t\t\t\t<p class=\"c-validate-sms-code__timer\">\r\n\t\t\t\t\t\t  ${this.getFormattedPhoneNumber()}   .\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t   : ${this.timerOutput}\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<p class=\"c-validate-sms-code__count\">\r\n\t\t\t\t\t\t${unsafeHTML(this.getCountMessage())}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this.isVisibleBtnRetry() ?\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<c-btn class=\"c-validate-sms-code__btn-retry\"\r\n\t\t\t\t\t\t\t   type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t\t\t   ?loading=\"${this.isLoadingBtnRetry()}\"\r\n\t\t\t\t\t\t\t   ?disabled=\"${this.isDisableBtnRetry()}\"\r\n\t\t\t\t\t\t\t   @click=\"${this.handleClickBtnRetry}\">\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t</c-btn>\r\n\t\t\t\t\t` :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div class=\"u-d-none\">\r\n\t\t\t\t\t${this.formValidateEl}\r\n\t\t\t\t\t${this.formGetEl}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getCountMessage(): string {\r\n\t\tconst message: Array<string> = [];\r\n\t\tif (isNotNullOrUndefined(this.attemptsCountSend)) {\r\n\t\t\tmessage.push(`    : ${this.attemptsCountSend}`)\r\n\t\t}\r\n\t\tif (isNotNullOrUndefined(this.attemptsCountValidate)) {\r\n\t\t\tmessage.push(`   : ${this.attemptsCountValidate}`)\r\n\t\t}\r\n\t\treturn message.reverse().join('<br>');\r\n\t}\r\n\r\n\tprivate getFormattedPhoneNumber(): string {\r\n\t\tif (!this.phoneNumber) {\r\n\t\t\tthrow new Error(`ValidateSMSCodeComponent: phoneNumber is not defined !`);\r\n\t\t}\r\n\t\treturn Mask.getFormattedValue(this.phoneNumber, EMaskTypes.PHONE);\r\n\t}\r\n\r\n\tprivate handleClickBtnRetry() {\r\n\t\tthis.codeInput.value = '';\r\n\t\tthis.codeInput.focus();\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprivate getSMSCode(): void {\r\n\t\tif (this.isLoadingBtnRetry() || this.isDisableBtnRetry()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isSMSRequesting = true;\r\n\t\tconst formData: FormData = new FormData(this.formGetEl);\r\n\t\tformData.append(this.formPhoneNumberName, this.phoneNumber);\r\n\t\tformData.append('confirmed', String(this.confirmed));\r\n\t\tthis.httpService\r\n\t\t\t.request<TSMSValidationGetResponse>({\r\n\t\t\t\turl: this.formGetEl.action,\r\n\t\t\t\tmethod: this.formGetEl.method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tconst data = response.data.data;\r\n\t\t\t\tthis.updateAttemptsCountSend(data.attemptsCountSend)\r\n\t\t\t\tthis.updateAttemptsCountValidate(data.attemptsCountValidate);\r\n\t\t\t\tthis.startTimer(data.duration);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\t//TODO: handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isSMSRequesting = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate validateSMSCode(): void {\r\n\t\tif (this.isValidationRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isValidationRequesting = true;\r\n\t\tconst formData: FormData = new FormData(this.formValidateEl);\r\n\t\tformData.append(this.formCodeName, this.codeInput.value);\r\n\t\tformData.append(this.formPhoneNumberName, this.phoneNumber);\r\n\t\tthis.httpService\r\n\t\t\t.request<TValidateSMSCodeResponse>({\r\n\t\t\t\turl: this.formValidateEl.action,\r\n\t\t\t\tmethod: this.formValidateEl.method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.emitEvent({\r\n\t\t\t\t\tstatus: EValidateSMSCodeStatuses.VALIDATION_SUCCESSFUL,\r\n\t\t\t\t\toperator: response.data.data.operator,\r\n\t\t\t\t\ttariffConnection: response.data.data.tariffConnection,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError<TRequestResponse<TSMSValidationValidateReject>>) => {\r\n\t\t\t\tconst data = reject.response.data.data;\r\n\t\t\t\tthis.updateAttemptsCountSend(data.attemptsCountSend);\r\n\t\t\t\tthis.updateAttemptsCountValidate(data.attemptsCountValidate);\r\n\t\t\t\tthis.emitEvent({\r\n\t\t\t\t\tstatus: EValidateSMSCodeStatuses.VALIDATION_ERROR,\r\n\t\t\t\t\toperator: null,\r\n\t\t\t\t\ttariffConnection: null,\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isValidationRequesting = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleFieldChange(event: CustomEvent): void {\r\n\t\tif (event.detail.isComplete) {\r\n\t\t\tthis.validateSMSCode();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate startTimer(value: number): void {\r\n\t\tif (value > 0) {\r\n\t\t\tthis.isTimerActive = true;\r\n\t\t}\r\n\t\tthis.timer.start(value);\r\n\t}\r\n\r\n\tprivate timerEnded(): void {\r\n\r\n\t}\r\n\r\n\tprivate updateAttemptsCountSend(value: number): void {\r\n\t\tthis.attemptsCountSend = value;\r\n\t\tif (isNotNullOrUndefined(value) && value <= 0) {\r\n\t\t\tthis.emitEvent({\r\n\t\t\t\tstatus: EValidateSMSCodeStatuses.OUT_SMS_REQUESTS,\r\n\t\t\t\toperator: null,\r\n\t\t\t\ttariffConnection: null,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateAttemptsCountValidate(value: number): void {\r\n\t\tthis.attemptsCountValidate = value;\r\n\t\tif (isNotNullOrUndefined(value) && value <= 0) {\r\n\t\t\tthis.emitEvent({\r\n\t\t\t\tstatus: EValidateSMSCodeStatuses.OUT_VALIDATION_REQUESTS,\r\n\t\t\t\toperator: null,\r\n\t\t\t\ttariffConnection: null,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate initBootstrapData(): void {\r\n\t\tif (!this.bootstrapData) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isNotNullOrUndefined(this.bootstrapData.timer)) {\r\n\t\t\tthis.startTimer(this.bootstrapData.timer)\r\n\t\t}\r\n\t\tthis.updateAttemptsCountSend(this.bootstrapData.attemptsCountSend);\r\n\t\tthis.updateAttemptsCountValidate(this.bootstrapData.attemptsCountValidate);\r\n\t}\r\n\r\n\tprivate focusInputField(): void {\r\n\t\tthis.codeInput\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.codeInput.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEvent(data: TValidateSMSCodeEventDetail): void {\r\n\t\tconst event = new CustomEvent('on-status-change', {\r\n\t\t\tdetail: data,\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate isVisibleBtnRetry(): boolean {\r\n\t\tif (this.attemptsCountSend <= 0 || this.isTimerActive) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate isDisableBtnRetry(): boolean {\r\n\t\tif (this.isSMSRequesting || this.isValidationRequesting) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate isLoadingBtnRetry(): boolean {\r\n\t\tif (this.isSMSRequesting) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n","import {TOperator} from \"@models/Operator\";\r\n\r\nexport type TTariffTree = {\r\n\toperator?: TOperator\r\n\tperiods: Array<TTariffPeriod>\r\n\treasonAbsenceTariffs?: string\r\n\ttariffConnection?: TTariffConnection\r\n}\r\n\r\nexport type TTariffPeriod = {\r\n\tvalue: number\r\n\tpricePerMonth: string\r\n\ttariffs: Array<TTariff>\r\n}\r\n\r\nexport type TTariff = {\r\n\tid: number\r\n\tsku: string\r\n\tuuid: string\r\n\tname: string\r\n\tperiod: number\r\n\tmegabyte: number\r\n\tmegabyteDesc?: string\r\n\tminutes: number\r\n\tminutesDesc?: string\r\n\tpricePerMonth: string\r\n\tprice: string\r\n\tpriceDesc?: string\r\n\tunlimitedDesc?: string\r\n\t\r\n}\r\n\r\nexport enum ETariffConnectionStatuses {\r\n\tAPPROVED = 'APPROVED',\r\n\tDENIED = 'DENIED',\r\n}\r\n\r\nexport type TTariffConnection = {\r\n\tstatus: ETariffConnectionStatuses\r\n\tmessage: string\r\n}\r\n\r\nexport enum EPriceRequestTypes {\r\n\tTARIFF = 'TARIFF',\r\n\tINSURANCE = 'INSURANCE',\r\n}\r\n\r\nexport type TTariffPriceRequest = {\r\n\tprice: string,\r\n\ttype: EPriceRequestTypes\r\n}\r\n\r\nexport type TPricesResponse = {\r\n\tpricePerMonth: string\r\n\tprice: string\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport CheckboxComponent from \"@components/checkbox/CheckboxComponent\";\r\nimport InputComponent from \"@components/input/InputComponent\";\r\nimport {\r\n\tEPhoneValidationForContractTariffSlots,\r\n\tEPhoneValidationForContractTariffStages,\r\n\tEPhoneValidationForContractTariffStatuses,\r\n} from \"@components/phone-validation-for-contract-tariff/model\";\r\nimport {\r\n\tEValidateSMSCodeSlots,\r\n\tEValidateSMSCodeStatuses,\r\n\tTValidateSMSCodeEventDetail\r\n} from \"@components/validate-sms-code/model\";\r\nimport {TOperator} from \"@models/Operator\";\r\nimport {TSMSValidationGetResponse} from \"@models/SMSValidation\";\r\nimport {ETariffConnectionStatuses} from \"@models/Tariff\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport Mask, {EMaskTypes} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError, Method} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, queryAsync, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\nimport {from, of} from \"rxjs\";\r\nimport {filter} from \"rxjs/internal/operators\";\r\nimport {map, switchMap} from \"rxjs/operators\";\r\n\r\n@customElement('c-phone-validation-for-contract-tariff')\r\nexport default class PhoneValidationForContractTariffComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'confirmed-link',\r\n\t})\r\n\tpublic confirmedLink: string = '';\r\n\r\n\t@state()\r\n\tprivate getSMSResponse: TSMSValidationGetResponse;\r\n\r\n\t@state()\r\n\tprivate validateSMSCodeDetail: TValidateSMSCodeEventDetail\r\n\r\n\t@state()\r\n\tprivate stage: EPhoneValidationForContractTariffStages = EPhoneValidationForContractTariffStages.ENTER_PHONE_NUMBER;\r\n\r\n\t@state()\r\n\tprivate isSMSRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isCompletePhoneNumber: boolean = false;\r\n\r\n\t@queryAsync('[fieldPhoneNumber]')\r\n\tprivate fieldPhoneNumberAsync: Promise<InputComponent>;\r\n\r\n\t@state()\r\n\tprivate fieldPhoneNumber: InputComponent;\r\n\r\n\t@queryAsync('[fieldConfirmed]')\r\n\tprivate fieldConfirmedAsync: Promise<CheckboxComponent>;\r\n\r\n\t@state()\r\n\tprivate confirmed: boolean = false;\r\n\r\n\t@state()\r\n\tprivate phoneNumber: string;\r\n\r\n\t@state()\r\n\tprivate isNetworkError: boolean = false;\r\n\r\n\tprivate formValidateSMSEl: HTMLFormElement;\r\n\tprivate formGetSMSEl: HTMLFormElement;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\r\n\tpublic getOperator(): TOperator {\r\n\t\treturn this.validateSMSCodeDetail.operator;\r\n\t}\r\n\r\n\tpublic getPhoneNumber(): string {\r\n\t\treturn this.phoneNumber;\r\n\t}\r\n\r\n\tpublic resetStage(): void {\r\n\t\tthis.changeStage(EPhoneValidationForContractTariffStages.ENTER_PHONE_NUMBER);\r\n\t}\r\n\r\n\tpublic focusInputEnterPhoneNumber(): void {\r\n\t\tfrom(this.fieldPhoneNumberAsync)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap(component => {\r\n\t\t\t\t\tif (!component) {\r\n\t\t\t\t\t\tconsole?.error('PhoneValidationForContractTariffComponent: fieldPhoneNumber is not defined !');\r\n\t\t\t\t\t\treturn of(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn from(component.updateComplete)\r\n\t\t\t\t\t\t.pipe(\r\n\t\t\t\t\t\t\tmap(() => component)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(value => Boolean(value))\r\n\t\t\t)\r\n\t\t\t.subscribe(component => {\r\n\t\t\t\tcomponent.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t${this.getTemplateByStage(this.stage)}\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.initSlots();\r\n\t}\r\n\r\n\tprotected updated(_changedProperties: PropertyValues) {\r\n\t\tsuper.updated(_changedProperties);\r\n\t\tthis.updateAsyncEls();\r\n\t}\r\n\r\n\tprivate initSlots(): void {\r\n\t\tthis.formValidateSMSEl = this.getSlot(EPhoneValidationForContractTariffSlots.FORM_VALIDATE_SMS) as HTMLFormElement;\r\n\t\tif (!this.formValidateSMSEl) {\r\n\t\t\tthrow new Error(`ValidateSMSCodeComponent: slot with name '${EPhoneValidationForContractTariffSlots.FORM_VALIDATE_SMS}' is not defined !`);\r\n\t\t}\r\n\t\tthis.formValidateSMSEl.setAttribute('slot', EValidateSMSCodeSlots.FORM_VALIDATE);\r\n\t\tthis.formGetSMSEl = this.getSlot(EPhoneValidationForContractTariffSlots.FORM_GET_SMS) as HTMLFormElement;\r\n\t\tif (!this.formGetSMSEl) {\r\n\t\t\tthrow new Error(`ValidateSMSCodeComponent: slot with name '${EPhoneValidationForContractTariffSlots.FORM_GET_SMS}' is not defined !`);\r\n\t\t}\r\n\t\tthis.formGetSMSEl.setAttribute('slot', EValidateSMSCodeSlots.FORM_GET);\r\n\t}\r\n\r\n\tprivate getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getEnterPhoneNumberTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<form @submit=\"${this.handleFormSubmit}\">\r\n\t\t\t\t<c-form-item class=\"u-mb-24\">\r\n\t\t\t\t\t<c-input fieldPhoneNumber\r\n\t\t\t\t\t\t\t label=\" \"\r\n\t\t\t\t\t\t\t name=\"phone\"\r\n\t\t\t\t\t\t\t value=\"\"\r\n\t\t\t\t\t\t\t type=\"tel\"\r\n\t\t\t\t\t\t\t fieldClass=\"\"\r\n\t\t\t\t\t\t\t .maskType=\"${EMaskTypes.PHONE}\"\r\n\t\t\t\t\t\t\t @on-change=\"${this.handleInputPhoneNumberChange}\">\r\n\t\t\t\t\t</c-input>\r\n\t\t\t\t</c-form-item>\r\n\t\t\t\t<c-checkbox fieldConfirmed\r\n\t\t\t\t\t\t\tname=\"confirmed\"\r\n\t\t\t\t\t\t\tvalue=\"confirmed\"\r\n\t\t\t\t\t\t\tclass=\"u-mb-40\"\r\n\t\t\t\t\t\t\t@on-change=\"${this.handleChangeConfirmed}\">\r\n\t\t\t\t\t<div class=\"u-ml-10\">\r\n\t\t\t\t\t\t  ,          \r\n\t\t\t\t\t\t<a class=\"c-link c-link_secondary\"\r\n\t\t\t\t\t\t   .href=\"${this.confirmedLink}\"\r\n\t\t\t\t\t\t   target=\"_blank\">\r\n\t\t\t\t\t\t\t     \r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</c-checkbox>\r\n\t\t\t\t<div class=\"c-phone-validation-for-contract-tariff__get-sms-code\">\r\n\t\t\t\t\t<c-btn class=\"c-phone-validation-for-contract-tariff__get-sms-code-btn\"\r\n\t\t\t\t\t\t   type=\"${this.confirmed ? EBtnType.PRIMARY : EBtnType.SECONDARY}\"\r\n\t\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t\t   ?loading=\"${this.isLoadingBtnGetSMS()}\"\r\n\t\t\t\t\t\t   ?disabled=\"${this.isDisabledBtnGetSMS()}\"\r\n\t\t\t\t\t\t   @click=\"${this.handleClickBtnGetSMSCode}\">\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t</c-btn>\r\n\t\t\t\t\t${!this.confirmed\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t<p class=\"c-phone-validation-for-contract-tariff__get-sms-code-hint\">\r\n\t\t\t\t\t\t\t\t   ,   \r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getValidateSMSCodeTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-validate-sms-code .phoneNumber=\"${this.phoneNumber}\"\r\n\t\t\t\t\t\t\t\t .confirmed=\"${this.confirmed}\"\r\n\t\t\t\t\t\t\t\t .bootstrapData=\"${{\r\n\t\t\t\t\t\t\t\t\t timer: this.getSMSResponse.duration,\r\n\t\t\t\t\t\t\t\t\t attemptsCountSend: this.getSMSResponse.attemptsCountSend,\r\n\t\t\t\t\t\t\t\t\t attemptsCountValidate: this.getSMSResponse.attemptsCountValidate,\r\n\t\t\t\t\t\t\t\t }}\"\r\n\t\t\t\t\t\t\t\t @on-status-change=\"${this.handleValidateSMSCodeStatusChange}\">\r\n\t\t\t\t${this.formValidateSMSEl}\r\n\t\t\t\t${this.formGetSMSEl}\r\n\t\t\t</c-validate-sms-code>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getDeniedAbilityToConnectTariffTemplate(): TemplateResult {\r\n\t\tconst tariffConnection = this.validateSMSCodeDetail.tariffConnection;\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-phone-validation-for-contract-tariff__invalid-phone\">\r\n\t\t\t\t<p class=\"c-phone-validation-for-contract-tariff__invalid-phone-title\">\r\n\t\t\t\t\t${unsafeHTML(tariffConnection.message)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<c-btn class=\"c-phone-validation-for-contract-tariff__invalid-phone-action\"\r\n\t\t\t\t\t   type=\"${EBtnType.SECONDARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleBtnClickChangePhone}\">\r\n\t\t\t\t\t \r\n\t\t\t\t</c-btn>\r\n\t\t\t\t<button class=\"c-phone-validation-for-contract-tariff__invalid-phone-skip-btn\"\r\n\t\t\t\t\t\t@click=\"${this.handleBtnClickContinueWithoutTariff}\">\r\n\t\t\t\t\t  \r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPhoneInformation(): TemplateResult {\r\n\t\tconst phoneNumber: string = Mask.getFormattedValue(this.phoneNumber, EMaskTypes.PHONE);\r\n\t\tconst operator: TOperator = this.validateSMSCodeDetail.operator;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-phone-validation-for-contract-tariff__result\">\r\n\t\t\t\t<section class=\"c-section\">\r\n\t\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t\t<h4 class=\"c-section__title\">  </h4>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t\t<p class=\"c-phone-validation-for-contract-tariff__result-phone\">\r\n\t\t\t\t\t\t\t${phoneNumber}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t\t<section class=\"c-section u-d-none\">\r\n\t\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t\t<h4 class=\"c-section__title\"> </h4>\r\n\t\t\t\t\t</header>\r\n\t\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t\t<div class=\"c-phone-validation-for-contract-tariff__result-operator\">\r\n\t\t\t\t\t\t\t<div class=\"c-phone-validation-for-contract-tariff__result-operator-img-box\">\r\n\t\t\t\t\t\t\t\t<img class=\"c-phone-validation-for-contract-tariff__result-operator-img\"\r\n\t\t\t\t\t\t\t\t\t .src=\"${operator.logo}\"\r\n\t\t\t\t\t\t\t\t\t .alt=\"${operator.logo}\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h4 class=\"c-phone-validation-for-contract-tariff__result-operator-title\">\r\n\t\t\t\t\t\t\t\t${operator.name}\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</section>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getTemplateByStage(stage: EPhoneValidationForContractTariffStages): TemplateResult {\r\n\t\tswitch (stage) {\r\n\t\t\tcase EPhoneValidationForContractTariffStages.ENTER_PHONE_NUMBER:\r\n\t\t\t\treturn this.getEnterPhoneNumberTemplate();\r\n\t\t\tcase EPhoneValidationForContractTariffStages.VALIDATE_SMS_CODE:\r\n\t\t\t\treturn this.getValidateSMSCodeTemplate();\r\n\t\t\tcase EPhoneValidationForContractTariffStages.DENIED_ABILITY_TO_CONNECT_TARIFF:\r\n\t\t\t\treturn this.getDeniedAbilityToConnectTariffTemplate();\r\n\t\t\tcase EPhoneValidationForContractTariffStages.PHONE_INFORMATION:\r\n\t\t\t\treturn this.getPhoneInformation();\r\n\t\t\tcase EPhoneValidationForContractTariffStages.EMPTY:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleInputPhoneNumberChange(event: Event): void {\r\n\t\tthis.phoneNumber = Mask.getUnmaskedValue(this.fieldPhoneNumber.getValue(), EMaskTypes.PHONE);\r\n\t\tthis.checkPhoneNumberFiled();\r\n\t}\r\n\r\n\tprivate checkPhoneNumberFiled(): void {\r\n\t\tthis.isCompletePhoneNumber = Mask.isCompleteValue(this.fieldPhoneNumber.getValue(), EMaskTypes.PHONE);\r\n\t}\r\n\r\n\tprivate isLoadingBtnGetSMS(): boolean {\r\n\t\tif (this.isSMSRequesting) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate isDisabledBtnGetSMS(): boolean {\r\n\t\tif (this.isSMSRequesting || !this.isCompletePhoneNumber || !this.confirmed) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate handleClickBtnGetSMSCode(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isDisabledBtnGetSMS()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprivate handleFormSubmit(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t}\r\n\r\n\tprivate changeStage(stage: EPhoneValidationForContractTariffStages) {\r\n\t\tthis.stage = stage;\r\n\t\tswitch (stage) {\r\n\t\t\tcase EPhoneValidationForContractTariffStages.ENTER_PHONE_NUMBER:\r\n\t\t\t\tthis.stageEnterPhoneNumber();\r\n\t\t\t\tbreak;\r\n\t\t\tcase EPhoneValidationForContractTariffStages.PHONE_INFORMATION:\r\n\t\t\t\tthis.stageApprovedAbilityToConnectTariff();\r\n\t\t\t\tbreak;\r\n\t\t\tcase EPhoneValidationForContractTariffStages.DENIED_ABILITY_TO_CONNECT_TARIFF:\r\n\t\t\t\tthis.stageDeniedAbilityToConnectTariff();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate stageEnterPhoneNumber() {\r\n\t\tthis.fieldPhoneNumberAsync\r\n\t\t\t.then(fieldPhoneNumber => {\r\n\t\t\t\tthis.fieldPhoneNumber = fieldPhoneNumber;\r\n\t\t\t\treturn fieldPhoneNumber.updateComplete;\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.fieldPhoneNumber.focus();\r\n\t\t\t\tthis.checkPhoneNumberFiled();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate stageApprovedAbilityToConnectTariff(): void {\r\n\t\tthis.emitEventStatusChange(EPhoneValidationForContractTariffStatuses.APPROVED_ABILITY_TO_CONNECT_TARIFF);\r\n\t}\r\n\r\n\tprivate stageDeniedAbilityToConnectTariff(): void {\r\n\t\tthis.emitEventStatusChange(EPhoneValidationForContractTariffStatuses.DENIED_ABILITY_TO_CONNECT_TARIFF);\r\n\t}\r\n\r\n\tprivate getSMSCode(): void {\r\n\t\tif (this.isSMSRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isSMSRequesting = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst formData: FormData = new FormData(this.formGetSMSEl);\r\n\t\tformData.append('phoneNumber', this.phoneNumber);\r\n\t\tformData.append('confirmed', String(this.confirmed));\r\n\t\tthis.httpService\r\n\t\t\t.request<TSMSValidationGetResponse>({\r\n\t\t\t\turl: this.formGetSMSEl.action,\r\n\t\t\t\tmethod: this.formGetSMSEl.method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconst data = response.data.data;\r\n\t\t\t\tthis.getSMSResponse = data;\r\n\t\t\t\tthis.changeStage(EPhoneValidationForContractTariffStages.VALIDATE_SMS_CODE);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isSMSRequesting = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate updateAsyncEls(): void {\r\n\t\tthis.fieldPhoneNumberAsync\r\n\t\t\t.then(field => {\r\n\t\t\t\tthis.fieldPhoneNumber = field;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleChangeConfirmed(): void {\r\n\t\tthis.fieldConfirmedAsync\r\n\t\t\t.then(field => {\r\n\t\t\t\tthis.confirmed = field.checked;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleBtnClickChangePhone(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.changeStage(EPhoneValidationForContractTariffStages.ENTER_PHONE_NUMBER);\r\n\t}\r\n\r\n\tprivate handleBtnClickContinueWithoutTariff(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.changeStage(EPhoneValidationForContractTariffStages.EMPTY);\r\n\t\tconst customEvent = new CustomEvent('on-click-skip', {\r\n\t\t\tdetail: {},\r\n\t\t});\r\n\t\tthis.dispatchEvent(customEvent);\r\n\t}\r\n\r\n\tprivate emitEventStatusChange(status: EPhoneValidationForContractTariffStatuses): void {\r\n\t\tconst customEvent = new CustomEvent('on-status-change', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstatus: status,\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(customEvent);\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprivate handleValidateSMSCodeStatusChange(event: CustomEvent): void {\r\n\t\tconst detail: TValidateSMSCodeEventDetail = event.detail;\r\n\t\tthis.validateSMSCodeDetail = detail;\r\n\t\tswitch (detail.status) {\r\n\t\t\tcase EValidateSMSCodeStatuses.VALIDATION_SUCCESSFUL:\r\n\t\t\t\tif (detail.tariffConnection.status === ETariffConnectionStatuses.APPROVED) {\r\n\t\t\t\t\tthis.changeStage(EPhoneValidationForContractTariffStages.PHONE_INFORMATION);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.changeStage(EPhoneValidationForContractTariffStages.DENIED_ABILITY_TO_CONNECT_TARIFF);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html} from \"lit-element\";\r\n\r\n@customElement('c-network-error')\r\nexport default class NetworkErrorComponent extends WebComponentLite {\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p class=\"u-mb-20\">   </p>\r\n\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleBtnClickReload}\">\r\n\t\t\t\t\t\r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tconst customEvent = new CustomEvent('on-click-reload', {\r\n\t\t\tdetail: {},\r\n\t\t});\r\n\t\tthis.dispatchEvent(customEvent);\r\n\t}\r\n}\r\n","export enum EAlertTypes {\r\n\tSUCCESS = 'success',\r\n\tINFO = 'info',\r\n\tWARNING = 'warning',\r\n\tERROR = 'error',\r\n}\r\n\r\nexport enum EAlertMods {\r\n\tSM = 'sm',\r\n}\r\n","export enum EComponentStatuses {\r\n\tLOADING = 'LOADING',\r\n\tWAITING = 'WAITING',\r\n\tREADY = 'READY',\r\n\tERROR = 'ERROR'\r\n}\r\n","import {EAlertMods, EAlertTypes} from \"@components/alert/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {\r\n\tTSelectContractTariffSelected,\r\n\tTSelectTariffFormattedData,\r\n\tTSelectTariffInitSelected,\r\n\tTSelectTariffPeriod,\r\n\tTSelectTariffSelectedMap,\r\n\tTSelectTariffStatusChangeEventDetail\r\n} from \"@components/select-tariff/model\";\r\nimport {TTariffCard} from \"@components/tariff-card/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {TTariff, TTariffPeriod, TTariffTree} from \"@models/Tariff\";\r\nimport {TariffFormatter} from \"@modules/formatter/TariffFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError, AxiosRequestConfig} from \"axios\";\r\nimport {customElement, html, property, PropertyValues, state, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\nimport {objectToFormData} from \"@helpers/index\";\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\n\r\n@customElement('c-select-tariff')\r\nexport default class SelectTariffComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'request-on-creation',\r\n\t})\r\n\tpublic requestOnCreation: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-data-get'\r\n\t})\r\n\tpublic addDataGet: object = {};\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-request-config',\r\n\t})\r\n\tpublic getRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/get-tariffs',\r\n\t\tmethod: \"GET\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'init-selected',\r\n\t})\r\n\tpublic initSelected: TSelectTariffInitSelected;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'calculate-request-config',\r\n\t})\r\n\tpublic calculatePricesRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/checkout/calculate_prices/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isNetworkError: boolean = false;\r\n\r\n\t@state()\r\n\tprivate formattedData: TSelectTariffFormattedData;\r\n\r\n\t@state()\r\n\tprivate data: TTariffTree;\r\n\r\n\t@state()\r\n\tprivate selected: TSelectTariffSelectedMap = {\r\n\t\tperiod: null,\r\n\t\ttariff: null,\r\n\t}\r\n\r\n\t@state()\r\n\tprivate periodTitle: string = '';\r\n\r\n\tprivate isFirstLoaded: boolean;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\tpublic readonly status: BehaviorSubject<EComponentStatuses> = new BehaviorSubject<EComponentStatuses>(EComponentStatuses.LOADING);\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tif (this.requestOnCreation) {\r\n\t\t\tthis.getData();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn html`\r\n\t\t\t\t<c-loader active\r\n\t\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t\t  size=\"${ELoaderSize.MD}\"\r\n\t\t\t\t\t\t  class=\"c-product-basket-bundler__loader\">\r\n\t\t\t\t</c-loader>\r\n\t\t\t`;\r\n\t\t}\r\n\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\r\n\t\tif (!this.formattedData) {\r\n\t\t\treturn this.getNotDataTemplate();\r\n\t\t}\r\n\r\n\t\tif (!this.formattedData?.periods?.length) {\r\n\t\t\treturn this.getConnectionResultMessageTemplate();\r\n\t\t}\r\n\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst {url, method} = this.getRequestConfig;\r\n\t\tconst formData: FormData = objectToFormData({\r\n\t\t\t...this.addDataGet || {},\r\n\t\t});\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tthis.httpService\r\n\t\t\t.request<TTariffTree>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tconst data = response.data.data;\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tthis.formattedData = this.getFormattedData(data);\r\n\t\t\t\tthis.updatePeriodTitle();\r\n\t\t\t\tif (this.isFirstLoaded) {\r\n\t\t\t\t\tthis.selectFirst();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setInitSelected();\r\n\t\t\t\t}\r\n\t\t\t\tthis.isFirstLoaded = true;\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.status.next(EComponentStatuses.ERROR);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate getFormattedData(data: TTariffTree): TSelectTariffFormattedData {\r\n\t\treturn {\r\n\t\t\t...data,\r\n\t\t\tperiods: this.getFormattedPeriods(data.periods)\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getFormattedPeriods(periods: Array<TTariffPeriod>): Array<TSelectTariffPeriod> {\r\n\t\treturn periods?.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tvalue: item.value,\r\n\t\t\t\ttariffs: this.getFormattedTariffs(item.tariffs)\r\n\t\t\t}\r\n\t\t}) || [];\r\n\t}\r\n\r\n\tprivate getFormattedTariffs(tariffs: Array<TTariff>): Array<TTariffCard> {\r\n\t\treturn tariffs?.map(item => TariffFormatter.toTariffCard(item, this.data.operator)) || [];\r\n\t}\r\n\r\n\tprivate selectFirst(): void {\r\n\t\tconst period = this.data?.periods?.[0] || null;\r\n\t\tconst tariff = period?.tariffs?.[0] || null;\r\n\t\tthis.selected = {\r\n\t\t\tperiod: period ? period.value : null,\r\n\t\t\ttariff: tariff ? tariff.id : null,\r\n\t\t};\r\n\t\tthis.emitEventOnChange({\r\n\t\t\tisSkip: Boolean(tariff),\r\n\t\t\tperiod: period,\r\n\t\t\ttariff: tariff,\r\n\t\t});\r\n\t}\r\n\r\n\tprivate setInitSelected(): void {\r\n\t\tconst initSelected = this.initSelected;\r\n\t\tif (!initSelected || !Object.entries(initSelected).length) {\r\n\t\t\tthis.selectFirst();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst period = this.data?.periods?.find(period => period.value === initSelected.period) || null;\r\n\t\tconst tariff = period?.tariffs?.find(tariff => tariff.id === initSelected.tariff) || null;\r\n\t\tthis.selected = {\r\n\t\t\tperiod: period ? period.value : null,\r\n\t\t\ttariff: tariff ? tariff.id : null,\r\n\t\t};\r\n\t\tthis.emitEventOnChange({\r\n\t\t\tisSkip: Boolean(tariff),\r\n\t\t\tperiod: period,\r\n\t\t\ttariff: tariff,\r\n\t\t});\r\n\t}\r\n\r\n\tprivate getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNotDataTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>  !</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-space-items u-space-items-44 u-d-inline-block u-w-100\">\r\n\t\t\t\t${this.getPeriodTemplate()}\r\n\t\t\t\t${this.getTariffTemplate()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getConnectionResultMessageTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<p class=\"c-select-tariff__connection-result-message\">\r\n\t\t\t\t${unsafeHTML(\r\n\t\t\t\t\tthis.data.tariffConnection?.message\r\n\t\t\t\t)}\r\n\t\t\t</p>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPeriodTemplate(): TemplateResult {\r\n\t\tconst periods = this.formattedData?.periods || [];\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\">${this.periodTitle}</h4>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<ul class=\"c-operator-card-list\">\r\n\t\t\t\t\t\t${periods.map(period =>\r\n\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t<li class=\"c-operator-card-list__item\">\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"period\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   class=\"u-w-100 u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${this.selected.period == period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleClickPeriod}\">\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"u-w-100 u-h-100 u-d-flex u-align-items-center u-justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<c-term-card .data=\"${period}\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getTariffTemplate(): TemplateResult {\r\n\t\tconst selectedPeriod = this.selected.period;\r\n\t\tconst tariffs = this.formattedData.periods.find(period => period.value === selectedPeriod)?.tariffs || [];\r\n\t\tlet show: boolean = true;\r\n\r\n\t\tif (!tariffs.length && !this.data.reasonAbsenceTariffs) {\r\n\t\t\tshow = false;\r\n\t\t}\r\n\r\n\t\tif (!selectedPeriod || !show) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconsole.log(this.formattedData)\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\"> </h4>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<div class=\"u-space-items u-space-items-16 u-d-inline-block u-w-100\">\r\n\t\t\t\t\t\t${tariffs.length ?\r\n\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t${tariffs.map(tariff =>\r\n\t\t\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"tariff\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${tariff.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .detailValue=\"${this.getTariffByPeriodAndId(selectedPeriod, tariff.id)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${this.selected.tariff == tariff.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleClickTariff}\">\r\n\t\t\t\t\t\t\t\t\t\t\t<c-tariff-card class=\"u-min-w-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .data=\"${tariff}\">\r\n\t\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t${this.getSkipTariffTemplate()}\r\n\t\t\t\t\t\t\t` :\r\n\t\t\t\t\t\t\tthis.reasonAbsenceTariffsTemplate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getTariffByPeriodAndId(period: number, tariffId: number): TTariff | null {\r\n\t\tconst tariffs = this.data.periods.find(per => per.value === period)?.tariffs || [];\r\n\t\tif (!tariffs.length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn tariffs.find(tariff => tariff.id === tariffId);\r\n\t}\r\n\r\n\tprivate updatePeriodTitle(): void {\r\n\t\tconst tariffs = this.formattedData.periods.find(period => period.value === this.selected.period)?.tariffs || [];\r\n\t\tif (this.selected && this.selected.period && !tariffs?.length) {\r\n\t\t\tthis.periodTitle = ' ';\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.periodTitle = ' ';\r\n\t}\r\n\r\n\tprivate reasonAbsenceTariffsTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-alert type=\"${EAlertTypes.WARNING}\"\r\n\t\t\t\t\t .mods=\"${[EAlertMods.SM]}\">\r\n\t\t\t\t${this.data.reasonAbsenceTariffs}\r\n\t\t\t</c-alert>\r\n\t\t`\r\n\t}\r\n\r\n\tprivate getSkipTariffTemplate(): TemplateResult {\r\n\t\treturn html``;  // tariffs are required now\r\n\t\t// return html`\r\n\t\t// \t<c-toggle-card marker\r\n\t\t// \t\t\t\t   type=\"radio\"\r\n\t\t// \t\t\t\t   name=\"tariff\"\r\n\t\t// \t\t\t\t   .value=\"${null}\"\r\n\t\t// \t\t\t\t   ?checked=\"${this.selected.tariff == null}\"\r\n\t\t// \t\t\t\t   @on-change=\"${this.handleClickSkipTariff}\">\r\n\t\t// \t\t<div class=\"u-h-100 u-d-flex u-flex-row u-align-items-center\">\r\n\t\t// \t\t\t<p> </p>\r\n\t\t// \t\t</div>\r\n\t\t// \t</c-toggle-card>\r\n\t\t// `;\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate handleClickPeriod(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst periodValue: number = parseFloat(toggle.value);\r\n\t\tconst period: TTariffPeriod = this.data.periods.find(item => item.value == periodValue);\r\n\t\tconst firstTariff: TTariff = period.tariffs?.[0];\r\n\t\tconst isSkip: boolean = !period.tariffs.length ? false : !Boolean(this.selected.tariff);\r\n\t\tthis.emitEventOnChange({\r\n\t\t\tisSkip: isSkip,\r\n\t\t\tperiod: period,\r\n\t\t\ttariff: isSkip ? null : firstTariff,\r\n\t\t});\r\n\t\tthis.selected = {\r\n\t\t\tperiod: periodValue,\r\n\t\t\ttariff: isSkip ? null : (firstTariff ? firstTariff.id : null),\r\n\t\t}\r\n\t\tthis.updatePeriodTitle();\r\n\t}\r\n\r\n\tprivate handleClickTariff(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst tariffId: number = parseFloat(toggle.value);\r\n\t\tconst period: TTariffPeriod = this.data.periods.find(item => item.value == this.selected.period);\r\n\t\tthis.selected = {\r\n\t\t\tperiod: this.selected.period,\r\n\t\t\ttariff: tariffId,\r\n\t\t}\r\n\t\tthis.emitEventOnChange({\r\n\t\t\tisSkip: false,\r\n\t\t\tperiod: period,\r\n\t\t\ttariff: period.tariffs.find(item => item.id == tariffId),\r\n\t\t});\r\n\t}\r\n\r\n\tprivate handleClickSkipTariff(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst tariffId: number = parseFloat(toggle.value)\r\n\t\tthis.selected = {\r\n\t\t\tperiod: this.selected.period,\r\n\t\t\ttariff: tariffId,\r\n\t\t}\r\n\t\tconst period: TTariffPeriod = this.data.periods.find(item => item.value == this.selected.period)\r\n\t\tthis.emitEventOnChange({\r\n\t\t\tisSkip: true,\r\n\t\t\tperiod: period,\r\n\t\t\ttariff: null,\r\n\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnChange(data: TSelectContractTariffSelected): void {\r\n\t\tconst event = new CustomEvent('on-change', {\r\n\t\t\tdetail: data,\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.attachEventOnStatusChange();\r\n\t}\r\n\r\n\tprivate attachEventOnStatusChange(): void {\r\n\t\tthis.status\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(status => {\r\n\t\t\t\tthis.emitEventOnStatusChange(status);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnStatusChange(status: EComponentStatuses): void {\r\n\t\tconst event: CustomEvent<TSelectTariffStatusChangeEventDetail> = new CustomEvent('on-status-change', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstatus: status,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property} from \"lit-element\";\r\n\r\n@customElement('c-checkbox')\r\nexport default class CheckboxComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic value: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic name: string = '';\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic checked: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t})\r\n\tpublic disabled: boolean = false;\r\n\r\n\tprotected render(): unknown {\r\n\t\tconst children = this.getChildren();\r\n\r\n\t\treturn html`\r\n\t\t\t<label class=\"c-checkbox\">\r\n\t\t\t\t<input class=\"c-checkbox__input\"\r\n\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t   .name=\"${this.name}\"\r\n\t\t\t\t\t   .value=\"${this.value}\"\r\n\t\t\t\t\t   ?checked=\"${this.checked}\"\r\n\t\t\t\t\t   ?disabled=\"${this.disabled}\"\r\n\t\t\t\t\t   @change=\"${this.handleChange}\">\r\n\t\t\t\t<div class=\"c-checkbox__checkmark\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_checkmark-filled\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span class=\"c-checkbox__label\">\r\n\t\t\t\t\t${children}\r\n\t\t\t\t</span>\r\n\t\t\t</label>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleChange(event: Event): void {\r\n\t\tthis.checked = (event.target as HTMLInputElement).checked;\r\n\t\tconst customEvent = new CustomEvent('on-change', {\r\n\t\t\tdetail: {},\r\n\t\t});\r\n\t\tthis.dispatchEvent(customEvent);\r\n\t}\r\n}\r\n","import {EAlertMods, EAlertTypes} from \"@components/alert/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property} from \"lit-element\";\r\n\r\n@customElement('c-alert')\r\nexport default class AlertComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic type: EAlertTypes;\r\n\r\n\t@property({\r\n\t\ttype: Array,\r\n\t})\r\n\tpublic mods: Array<EAlertMods> = [];\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'icon-class',\r\n\t})\r\n\tpublic iconClass: string;\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-alert ${this.getMods()}\">\r\n\t\t\t\t<div class=\"c-alert__icon-box\">\r\n\t\t\t\t\t<i class=\"o-icon ${this.getIconClass()}\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-alert__message\">\r\n\t\t\t\t\t${this.getChildren()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [this.type, ...this.mods];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-alert_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n\r\n\tprotected getIconClass(): string {\r\n\t\tswitch (this.type) {\r\n\t\t\tcase EAlertTypes.SUCCESS:\r\n\t\t\t\treturn 'o-icon_checkmark-filled';\r\n\t\t\tcase EAlertTypes.INFO:\r\n\t\t\t\treturn 'o-icon_exclamation-filled';\r\n\t\t\tcase EAlertTypes.WARNING:\r\n\t\t\t\treturn 'o-icon_exclamation-filled';\r\n\t\t\tcase EAlertTypes.ERROR:\r\n\t\t\t\treturn 'o-icon_close-filled';\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.iconClass;\r\n\t\t}\r\n\t}\r\n}\r\n","import {getDefinitionElement, getIndexElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport {EAnimationType, IAnimation} from \"@modules/animation/model\";\r\nimport {ICarousel} from \"@modules/carousel/model\";\r\nimport {IImageViewer, TImageViewerOption} from \"@modules/image-viewer/model\";\r\nimport {IScrollable} from \"@modules/scroll/model\";\r\nimport Scrollable from \"@modules/scroll/Scrollable\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter, map} from \"rxjs/operators\";\r\n\r\nexport default class ImageViewer implements IImageViewer {\r\n\tprivate CLASS_OPEN: string = 'is-open';\r\n\r\n\tprivate closeBtnEl: HTMLButtonElement;\r\n\tprivate animation: IAnimation;\r\n\r\n\tprivate scrollable: IScrollable = new Scrollable(document.body, {\r\n\t\tsaveScrollIndent: true,\r\n\t});\r\n\r\n\tconstructor(\r\n\t\tprivate viewerEl: HTMLElement,\r\n\t\tprivate carousel: ICarousel,\r\n\t\tprivate options: TImageViewerOption\r\n\t) {\r\n\t\tconst defaultOptions: Partial<TImageViewerOption> = {\r\n\t\t\tclasses: {\r\n\t\t\t\tclassHandler: 'js-imageViewerHandler',\r\n\t\t\t\tclassBlock: 'js-imageViewer',\r\n\t\t\t\tclassClose: 'js-imageViewerClose',\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.findElements();\r\n\t\tthis.animation = new Animation(this.viewerEl, {\r\n\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\tname: 'o-animation-fade-in',\r\n\t\t\tdisplayProperty: 'flex',\r\n\t\t\tafterEnter: () => {\r\n\t\t\t\tthis.viewerEl.classList.add(this.CLASS_OPEN);\r\n\t\t\t\t// openFullscreen(this.viewerEl);\r\n\t\t\t},\r\n\t\t\tbeforeLeave: () => {\r\n\t\t\t\t// closeFullscreen();\r\n\t\t\t},\r\n\t\t\tafterLeave: () => {\r\n\t\t\t\tthis.viewerEl.classList.remove(this.CLASS_OPEN);\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.scrollable.disable();\r\n\t\tthis.animation.show();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.scrollable.enable();\r\n\t\tthis.animation.hide();\r\n\t}\r\n\r\n\tpublic isOpen(): boolean {\r\n\t\treturn this.viewerEl.classList.contains(this.CLASS_OPEN);\r\n\t}\r\n\r\n\tprivate findElements(): void {\r\n\t\tthis.closeBtnEl = this.viewerEl.querySelector(`.${this.options.classes.classClose}`);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.options.classes.classHandler}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t\tmap(event => getDefinitionElement(event.target as HTMLElement, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(handler => {\r\n\t\t\t\tconst index: number = getIndexElement(handler.parentElement, handler as HTMLElement);\r\n\t\t\t\tthis.carousel.to(index);\r\n\t\t\t\tif (!this.isOpen()) {\r\n\t\t\t\t\tthis.open();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\tfromEvent(this.closeBtnEl, 'click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.close();\r\n\t\t\t})\r\n\t}\r\n}\r\n","import Carousel from \"@modules/carousel/Carousel\";\r\nimport ImageViewer from \"@modules/image-viewer/ImageViewer\";\r\n\r\nconst productImageViewer: HTMLElement = document.querySelector(`.js-imageViewerProduct`);\r\nif (productImageViewer) {\r\n\tnew ImageViewer(\r\n\t\tproductImageViewer,\r\n\t\tnew Carousel(productImageViewer, {\r\n\t\t\tconfigName: 'imageViewer',\r\n\t\t}),\r\n\t\t{\r\n\t\t\tclasses: {\r\n\t\t\t\tclassHandler: 'js-imageViewerProductHandler',\r\n\t\t\t\tclassBlock: 'js-imageViewerProduct',\r\n\t\t\t\tclassClose: 'js-imageViewerClose',\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n}\r\n","import {TRequestResponse} from \"@modules/http-request/model\";\r\nimport {AxiosError, AxiosResponse} from \"axios\";\r\n\r\nexport enum EValidatePhoneNumberAndSMSStages {\r\n\tENTER_PHONE_NUMBER = 'ENTER_PHONE_NUMBER',\r\n\tVALIDATE_SMS_CODE = 'VALIDATE_SMS_CODE',\r\n}\r\n\r\nexport type TValidatePhoneNumberAndSMSEnterSMSData = {\r\n\testimate?: number\r\n\tattemptsCountSend?: number\r\n\tattemptsCountValidate?: number\r\n}\r\n\r\nexport type TValidatePhoneNumberAndSMSEventResponse<T> = {\r\n\tresponse: AxiosResponse<TRequestResponse<T>>\r\n}\r\n\r\nexport type TValidatePhoneNumberAndSMSEventReject<T> = {\r\n\tresponse: AxiosError<TRequestResponse<T>>\r\n}\r\n\r\nexport enum EValidatePhoneNumberWithConfirmationAndSmsSlots {\r\n\tCONFIRMATION_CONTENT = 'confirmation-content'\r\n}\r\n","import EnterPhoneNumberComponent from \"@components/enter-phone-number/EnterPhoneNumberComponent\";\r\nimport {TEnterPhoneNumberActionBtnClickEventDetail} from \"@components/enter-phone-number/model\";\r\nimport EnterSMSCodeComponent from \"@components/enter-sms-code/EnterSMSCodeComponent\";\r\nimport {TEnterSMSCodeFullFilledCodeEventDetail} from \"@components/enter-sms-code/model\";\r\nimport {\r\n\tEValidatePhoneNumberAndSMSStages,\r\n\tTValidatePhoneNumberAndSMSEnterSMSData,\r\n\tTValidatePhoneNumberAndSMSEventReject,\r\n\tTValidatePhoneNumberAndSMSEventResponse\r\n} from \"@components/validate-phone-number-and-sms/model\";\r\nimport {objectToFormData} from \"@helpers/index\";\r\nimport {TSMSValidationGetResponse, TSMSValidationValidateReject} from \"@models/SMSValidation\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {TRequestResponse} from \"@modules/http-request/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError, AxiosRequestConfig, AxiosResponse} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, queryAsync, TemplateResult} from \"lit-element\";\r\nimport {from, of} from \"rxjs\";\r\nimport {filter, map, tap} from \"rxjs/internal/operators\";\r\nimport {switchMap} from \"rxjs/operators\";\r\n\r\n@customElement('c-validate-phone-number-and-sms')\r\nexport default class ValidatePhoneNumberAndSmsComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-data-validate-sms'\r\n\t})\r\n\tpublic addDataValidateSMS: object = {};\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-data-get-sms'\r\n\t})\r\n\tpublic addDataGetSMS: object = {};\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-sms-request-config',\r\n\t})\r\n\tpublic getSMSRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/test/send_otp/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'validate-sms-request-config',\r\n\t})\r\n\tpublic validateSMSRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/test/verify_otp/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@state()\r\n\tprivate isNetworkError: boolean = false;\r\n\r\n\t@state()\r\n\tprivate stage: EValidatePhoneNumberAndSMSStages = EValidatePhoneNumberAndSMSStages.ENTER_PHONE_NUMBER;\r\n\r\n\t@state()\r\n\tprivate isSMSRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isSMSValidation: boolean = false;\r\n\r\n\t@state()\r\n\tprivate enterSMSData: TValidatePhoneNumberAndSMSEnterSMSData;\r\n\r\n\t@queryAsync('[validate-phone-number-and-sms-enter-phone-number]')\r\n\tprotected enterPhoneNumberComponentAsync: Promise<EnterPhoneNumberComponent>;\r\n\r\n\t@queryAsync('[validate-phone-number-and-sms-enter-sms-code]')\r\n\tprivate enterSMSCodeComponentAsync: Promise<EnterSMSCodeComponent>;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\r\n\tprivate phoneNumber: string;\r\n\tprivate smsCode: string;\r\n\r\n\tpublic focusInputEnterPhoneNumber(): void {\r\n\t\tfrom(this.enterPhoneNumberComponentAsync)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap(component => {\r\n\t\t\t\t\tif (!component) {\r\n\t\t\t\t\t\tconsole?.error('ValidatePhoneNumberAndSmsComponent: enterPhoneNumberComponent is not defined !');\r\n\t\t\t\t\t\treturn of(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn from(component.updateComplete)\r\n\t\t\t\t\t\t.pipe(\r\n\t\t\t\t\t\t\tmap(() => component)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(value => Boolean(value))\r\n\t\t\t)\r\n\t\t\t.subscribe(component => {\r\n\t\t\t\tcomponent.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t${this.getTemplateByStage(this.stage)}\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.initSlots();\r\n\t}\r\n\r\n\tprivate getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getEnterPhoneNumberTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-enter-phone-number validate-phone-number-and-sms-enter-phone-number\r\n\t\t\t\t\t\t\t\t  ?loading-btn=\"${this.isLoadingBtnGetSMS()}\"\r\n\t\t\t\t\t\t\t\t  ?disable-btn=\"${this.isDisabledBtnGetSMS()}\"\r\n\t\t\t\t\t\t\t\t  @on-action-btn-click=\"${this.handleClickBtnGetSMS}\">\r\n\t\t\t</c-enter-phone-number>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getEnterSMSCodeTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-enter-sms-code validate-phone-number-and-sms-enter-sms-code\r\n\t\t\t\t\t\t\t  .attemptsCountSend=\"${this.enterSMSData.attemptsCountSend}\"\r\n\t\t\t\t\t\t\t  .attemptsCountValidate=\"${this.enterSMSData.attemptsCountValidate}\"\r\n\t\t\t\t\t\t\t  ?loading-btn-retry=\"${this.isLoadingBtnGetNewSMS()}\"\r\n\t\t\t\t\t\t\t  ?disable-btn-retry=\"${this.isDisabledBtnGetNewSMS()}\"\r\n\t\t\t\t\t\t\t  @on-click-btn-retry=\"${this.handleClickBtnGetNewSMSCode}\"\r\n\t\t\t\t\t\t\t  @on-full-filled-code=\"${this.handleFullFilledCode}\">\r\n\t\t\t</c-enter-sms-code>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected initSlots(): void {\r\n\r\n\t}\r\n\r\n\tprotected getTemplateByStage(stage: EValidatePhoneNumberAndSMSStages): TemplateResult {\r\n\t\tswitch (stage) {\r\n\t\t\tcase EValidatePhoneNumberAndSMSStages.ENTER_PHONE_NUMBER:\r\n\t\t\t\treturn this.getEnterPhoneNumberTemplate();\r\n\t\t\tcase EValidatePhoneNumberAndSMSStages.VALIDATE_SMS_CODE:\r\n\t\t\t\treturn this.getEnterSMSCodeTemplate();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected changeStage(stage: EValidatePhoneNumberAndSMSStages) {\r\n\t\tthis.stage = stage;\r\n\t\tswitch (stage) {\r\n\t\t\tcase EValidatePhoneNumberAndSMSStages.ENTER_PHONE_NUMBER:\r\n\t\t\t\tthis.stageEnterPhoneNumber();\r\n\t\t\t\tbreak;\r\n\t\t\tcase EValidatePhoneNumberAndSMSStages.VALIDATE_SMS_CODE:\r\n\t\t\t\tthis.stageValidateSMSCode();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected stageEnterPhoneNumber(): void {\r\n\t\tthis.phoneNumber = null;\r\n\t\tthis.smsCode = null;\r\n\t}\r\n\r\n\tprotected stageValidateSMSCode(): Promise<void> {\r\n\t\treturn from(this.enterSMSCodeComponentAsync)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap(el => {\r\n\t\t\t\t\treturn from(el.updateComplete)\r\n\t\t\t\t\t\t.pipe(\r\n\t\t\t\t\t\t\tmap(() => el)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t}),\r\n\t\t\t\ttap(component => {\r\n\t\t\t\t\tcomponent.focus();\r\n\t\t\t\t\tif (this.enterSMSData.estimate) {\r\n\t\t\t\t\t\tcomponent.startTimer(this.enterSMSData.estimate)\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tmap(() => {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t})\r\n\t\t\t).toPromise();\r\n\t}\r\n\r\n\tprivate getSMSCode(): void {\r\n\t\tif (this.isSMSRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isSMSRequesting = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst data: FormData = this.getDataForGetSMSCode();\r\n\t\tthis.httpService\r\n\t\t\t.request<TSMSValidationGetResponse>({\r\n\t\t\t\t...this.getSMSRequestConfig,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.enterSMSData = {\r\n\t\t\t\t\testimate: response.data.data.duration,\r\n\t\t\t\t\tattemptsCountSend: response.data.data.attemptsCountSend,\r\n\t\t\t\t\tattemptsCountValidate: response.data.data.attemptsCountValidate,\r\n\t\t\t\t}\r\n\t\t\t\tthis.changeStage(EValidatePhoneNumberAndSMSStages.VALIDATE_SMS_CODE);\r\n\t\t\t\tthis.onResponseGetSMSCode(response);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.onRejectGetSMSCode(reject);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isSMSRequesting = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprotected getDataForGetSMSCode(): FormData {\r\n\t\treturn objectToFormData({\r\n\t\t\t...this.addDataGetSMS || {},\r\n\t\t\tphoneNumber: this.phoneNumber,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected onResponseGetSMSCode<T = TSMSValidationGetResponse>(response: AxiosResponse<TRequestResponse<T>>): void {\r\n\t\tthis.emitEventOnResponseGetSMSCode(response);\r\n\t}\r\n\r\n\tprotected onRejectGetSMSCode<T = unknown>(reject: AxiosError<TRequestResponse<T>>): void {\r\n\t\tthis.emitEventOnRejectGetSMSCode(reject);\r\n\t}\r\n\r\n\tprivate emitEventOnResponseGetSMSCode<T = unknown>(response: AxiosResponse<TRequestResponse<T>>): void {\r\n\t\tconst event: CustomEvent<TValidatePhoneNumberAndSMSEventResponse<T>> = new CustomEvent('on-response-get-sms-code', {\r\n\t\t\tdetail: {\r\n\t\t\t\tresponse: response\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate emitEventOnRejectGetSMSCode<T = unknown>(response: AxiosError<TRequestResponse<T>>): void {\r\n\t\tconst event: CustomEvent<TValidatePhoneNumberAndSMSEventReject<T>> = new CustomEvent('on-reject-get-sms-code', {\r\n\t\t\tdetail: {\r\n\t\t\t\tresponse: response\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate validateSMSCode(): void {\r\n\t\tif (this.isSMSValidation) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isSMSValidation = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst data: FormData = this.getDataForValidateSMSCode();\r\n\t\tthis.httpService\r\n\t\t\t.request<unknown>({\r\n\t\t\t\t...this.validateSMSRequestConfig,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.onResponseValidateSMSCode(response);\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError<TRequestResponse<TSMSValidationValidateReject>>) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (reject.response.status === 400) {\r\n\t\t\t\t\tthis.enterSMSData = {\r\n\t\t\t\t\t\tattemptsCountValidate: reject.response.data.data.attemptsCountValidate,\r\n\t\t\t\t\t\tattemptsCountSend: reject.response.data.data.attemptsCountSend,\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.onRejectValidateSMSCode(reject);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isSMSValidation = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprotected getDataForValidateSMSCode(): FormData {\r\n\t\treturn objectToFormData({\r\n\t\t\t...this.addDataValidateSMS || {},\r\n\t\t\tphoneNumber: this.phoneNumber,\r\n\t\t\tcode: this.smsCode,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected onResponseValidateSMSCode<T = unknown>(response: AxiosResponse<TRequestResponse<T>>): void {\r\n\t\tthis.emitEventOnResponseValidateSMSCode(response);\r\n\t}\r\n\r\n\tprotected onRejectValidateSMSCode<T = TSMSValidationValidateReject>(reject: AxiosError<TRequestResponse<T>>): void {\r\n\t\tthis.emitEventOnRejectValidateSMSCode(reject);\r\n\t}\r\n\r\n\tprivate emitEventOnResponseValidateSMSCode<T = unknown>(response: AxiosResponse<TRequestResponse<T>>): void {\r\n\t\tconst event: CustomEvent<TValidatePhoneNumberAndSMSEventResponse<T>> = new CustomEvent('on-response-validate-sms-code', {\r\n\t\t\tdetail: {\r\n\t\t\t\tresponse: response\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate emitEventOnRejectValidateSMSCode<T = unknown>(response: AxiosError<TRequestResponse<T>>): void {\r\n\t\tconst event: CustomEvent<TValidatePhoneNumberAndSMSEventReject<T>> = new CustomEvent('on-reject-validate-sms-code', {\r\n\t\t\tdetail: {\r\n\t\t\t\tresponse: response\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprotected isDisabledBtnGetSMS(): boolean {\r\n\t\treturn this.isSMSRequesting;\r\n\t}\r\n\r\n\tprotected isLoadingBtnGetSMS(): boolean {\r\n\t\treturn this.isSMSRequesting;\r\n\t}\r\n\r\n\tprotected isDisabledBtnGetNewSMS(): boolean {\r\n\t\treturn this.isSMSRequesting;\r\n\t}\r\n\r\n\tprotected isLoadingBtnGetNewSMS(): boolean {\r\n\t\treturn this.isSMSRequesting;\r\n\t}\r\n\r\n\tprotected handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprotected handleClickBtnGetSMS(event: CustomEvent<TEnterPhoneNumberActionBtnClickEventDetail>): void {\r\n\t\tthis.phoneNumber = event.detail.phoneNumber;\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprotected handleClickBtnGetNewSMSCode(event: CustomEvent): void {\r\n\t\tthis.getSMSCode();\r\n\t}\r\n\r\n\tprotected handleFullFilledCode(event: CustomEvent<TEnterSMSCodeFullFilledCodeEventDetail>): void {\r\n\t\tthis.smsCode = event.detail.value;\r\n\t\tthis.validateSMSCode();\r\n\t}\r\n}\r\n","import EnterPhoneNumberWithConfirmationComponent\r\n\tfrom \"@components/enter-phone-number/EnterPhoneNumberWithConfirmationComponent\";\r\nimport {EValidatePhoneNumberWithConfirmationAndSmsSlots} from \"@components/validate-phone-number-and-sms/model\";\r\nimport ValidatePhoneNumberAndSmsComponent\r\n\tfrom \"@components/validate-phone-number-and-sms/ValidatePhoneNumberAndSmsComponent\";\r\nimport {concatFormData, objectToFormData} from \"@helpers/index\";\r\nimport {customElement, html, queryAsync, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-validate-phone-number-with-confirmation-and-sms')\r\nexport default class ValidatePhoneNumberWithConfirmationAndSmsComponent extends ValidatePhoneNumberAndSmsComponent {\r\n\t@queryAsync('[validate-phone-number-and-sms-enter-phone-number-with-confirmation]')\r\n\tprotected enterPhoneNumberComponentAsync: Promise<EnterPhoneNumberWithConfirmationComponent>;\r\n\r\n\tprivate confirmationChecked: boolean = false;\r\n\r\n\tprotected getEnterPhoneNumberTemplate(): TemplateResult {\r\n\t\tconst confirmContent = this.getSlot(EValidatePhoneNumberWithConfirmationAndSmsSlots.CONFIRMATION_CONTENT);\r\n\r\n\t\treturn html`\r\n\t\t\t<c-enter-phone-number-with-confirmation validate-phone-number-and-sms-enter-phone-number-with-confirmation\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t?loading-btn=\"${this.isLoadingBtnGetSMS()}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t?disable-btn=\"${this.isDisabledBtnGetSMS()}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.confirmationChecked=\"${this.confirmationChecked}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@on-action-btn-click=\"${this.handleClickBtnGetSMS}\">\r\n\t\t\t\t${confirmContent}\r\n\t\t\t</c-enter-phone-number-with-confirmation>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getDataForGetSMSCode(): FormData {\r\n\t\treturn concatFormData(\r\n\t\t\tsuper.getDataForGetSMSCode(),\r\n\t\t\tobjectToFormData({\r\n\t\t\t\tconfirmed: this.confirmationChecked,\r\n\t\t\t}),\r\n\t\t);\r\n\t}\r\n\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {TEnterPhoneNumberActionBtnClickEventDetail} from \"@components/enter-phone-number/model\";\r\nimport InputComponent from \"@components/input/InputComponent\";\r\nimport {EMaskTypes} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-enter-phone-number')\r\nexport default class EnterPhoneNumberComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-value',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic phoneNumberValue: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-name',\r\n\t})\r\n\tpublic phoneNumberName: string = 'phoneNumber';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-label',\r\n\t})\r\n\tpublic phoneNumberLabel: string = ' ';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'action-btn-text',\r\n\t})\r\n\tpublic actionBtnText: string = ' ';\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'loading-btn',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic loadingBtn: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'disable-btn',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic disableBtn: boolean = false;\r\n\r\n\t@query('[enter-phone-number-input-field]')\r\n\tprivate fieldPhoneNumber: InputComponent;\r\n\r\n\t@state()\r\n\tprivate isCompletePhoneNumber: boolean = false;\r\n\r\n\tpublic getMaskedPhoneNumber(): string {\r\n\t\treturn this.fieldPhoneNumber.getValue();\r\n\t}\r\n\r\n\tpublic focus(): void {\r\n\t\tthis.fieldPhoneNumber\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.fieldPhoneNumber.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-enter-phone-number\">\r\n\t\t\t\t${this.getPhoneNumberFieldTemplate()}\r\n\t\t\t\t${this.getActionBtn()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getPhoneNumberFieldTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-form-item class=\"c-enter-phone-number__phone-number-field\">\r\n\t\t\t\t<c-input enter-phone-number-input-field\r\n\t\t\t\t\t\t .label=\"${this.phoneNumberLabel}\"\r\n\t\t\t\t\t\t .name=\"${this.phoneNumberName}\"\r\n\t\t\t\t\t\t .value=\"${this.phoneNumberValue}\"\r\n\t\t\t\t\t\t type=\"tel\"\r\n\t\t\t\t\t\t fieldClass=\"\"\r\n\t\t\t\t\t\t .maskType=\"${EMaskTypes.PHONE}\"\r\n\t\t\t\t\t\t @on-change=\"${this.handleInputFiledChange}\">\r\n\t\t\t\t</c-input>\r\n\t\t\t</c-form-item>\r\n\t\t`\r\n\t}\r\n\r\n\tprotected getActionBtn(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-btn class=\"c-enter-phone-number__btn\"\r\n\t\t\t\t   .type=\"${this.isDisabledActionBtn() ? EBtnType.SECONDARY : EBtnType.PRIMARY}\"\r\n\t\t\t\t   .size=\"${EBtnSize.MD}\"\r\n\t\t\t\t   ?loading=\"${this.isLoadingActionBtn()}\"\r\n\t\t\t\t   ?disabled=\"${this.isDisabledActionBtn()}\"\r\n\t\t\t\t   @click=\"${this.handleClickActionBtn}\">\r\n\t\t\t\t${this.actionBtnText}\r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.fieldPhoneNumber\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.isCompletePhoneNumber = this.fieldPhoneNumber.getMask()?.masked.isComplete;\r\n\t\t\t\tthis.fieldPhoneNumber.getMask()?.on('accept', () => {\r\n\t\t\t\t\tthis.isCompletePhoneNumber = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis.fieldPhoneNumber.getMask()?.on('complete', () => {\r\n\t\t\t\t\tthis.isCompletePhoneNumber = true;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected isLoadingActionBtn(): boolean {\r\n\t\treturn this.loadingBtn;\r\n\t}\r\n\r\n\tprotected isDisabledActionBtn(): boolean {\r\n\t\tif (!this.isCompletePhoneNumber || this.disableBtn) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprotected handleClickActionBtn(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isDisabledActionBtn()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.emitEventActionBtnClick();\r\n\t}\r\n\r\n\tprotected handleInputFiledChange(event: Event): void {\r\n\t\tthis.phoneNumberValue = this.fieldPhoneNumber.value;\r\n\t}\r\n\r\n\tprivate emitEventActionBtnClick(): void {\r\n\t\tconst event = new CustomEvent<TEnterPhoneNumberActionBtnClickEventDetail>('on-action-btn-click', {\r\n\t\t\tdetail: {\r\n\t\t\t\tphoneNumber: this.fieldPhoneNumber.getMask().unmaskedValue,\r\n\t\t\t\tmaskedPhoneNumber: this.phoneNumberValue,\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","export type TEnterPhoneNumberActionBtnClickEventDetail = {\r\n\tphoneNumber: string\r\n\tmaskedPhoneNumber: string\r\n}\r\n\r\nexport enum EEnterPhoneNumberWithConfirmationSlots {\r\n\tCONFIRMATION_CONTENT = 'confirmation-content'\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport CheckboxComponent from \"@components/checkbox/CheckboxComponent\";\r\nimport EnterPhoneNumberComponent from \"@components/enter-phone-number/EnterPhoneNumberComponent\";\r\nimport {EEnterPhoneNumberWithConfirmationSlots} from \"@components/enter-phone-number/model\";\r\nimport {customElement, html, property, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-enter-phone-number-with-confirmation')\r\nexport default class EnterPhoneNumberWithConfirmationComponent extends EnterPhoneNumberComponent {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'confirmation-checked',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic confirmationChecked: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'confirmation-checkbox-name',\r\n\t})\r\n\tpublic confirmationCheckboxName: string = 'confirmed';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'confirmation-checkbox-value',\r\n\t})\r\n\tpublic confirmationCheckboxValue: string = 'confirmed';\r\n\r\n\t@query('[enter-phone-number-with-confirmation-confirm-checkbox]')\r\n\tprivate confirmationCheckboxField: CheckboxComponent;\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-enter-phone-number c-enter-phone-number_with-confirmation\">\r\n\t\t\t\t${this.getPhoneNumberFieldTemplate()}\r\n\t\t\t\t${this.getConfirmationCheckboxTemplate()}\r\n\t\t\t\t${this.getActionBtn()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getConfirmationCheckboxTemplate(): TemplateResult {\r\n\t\tconst confirmContent = this.getSlot(EEnterPhoneNumberWithConfirmationSlots.CONFIRMATION_CONTENT);\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-enter-phone-number__confirmation-checkbox\">\r\n\t\t\t\t<c-checkbox enter-phone-number-with-confirmation-confirm-checkbox\r\n\t\t\t\t\t\t\t.name=\"${this.confirmationCheckboxName}\"\r\n\t\t\t\t\t\t\t.value=\"${this.confirmationCheckboxValue}\"\r\n\t\t\t\t\t\t\t?checked=\"${this.confirmationChecked}\"\r\n\t\t\t\t\t\t\t@on-change=\"${this.handleChangeConfirmationCheckbox}\">\r\n\t\t\t\t\t<div class=\"u-ml-10\">\r\n\t\t\t\t\t\t${confirmContent}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</c-checkbox>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getActionBtn(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<footer class=\"c-enter-phone-number__footer\">\r\n\t\t\t\t<c-btn class=\"c-enter-phone-number__btn\"\r\n\t\t\t\t\t   .type=\"${this.isDisabledActionBtn() ? EBtnType.SECONDARY : EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   .size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   ?loading=\"${this.isLoadingActionBtn()}\"\r\n\t\t\t\t\t   ?disabled=\"${this.isDisabledActionBtn()}\"\r\n\t\t\t\t\t   @click=\"${this.handleClickActionBtn}\">\r\n\t\t\t\t\t${this.actionBtnText}\r\n\t\t\t\t</c-btn>\r\n\t\t\t\t${!this.confirmationChecked\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t<p class=\"c-enter-phone-number__hint\">\r\n\t\t\t\t\t\t\t   ,   \r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t`\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</footer>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected isDisabledActionBtn(): boolean {\r\n\t\treturn super.isDisabledActionBtn() || !this.confirmationChecked;\r\n\t}\r\n\r\n\tprivate handleChangeConfirmationCheckbox(event: Event): void {\r\n\t\tthis.confirmationChecked = this.confirmationCheckboxField.checked;\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {TEnterPhoneNumberActionBtnClickEventDetail} from \"@components/enter-phone-number/model\";\r\nimport InputComponent from \"@components/input/InputComponent\";\r\nimport {EMaskTypes} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, internalProperty, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-enter-phone-number-without-button')\r\nexport default class EnterPhoneNumberComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-value',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic phoneNumberValue: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-name',\r\n\t})\r\n\tpublic phoneNumberName: string = 'phoneNumber';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number-label',\r\n\t})\r\n\tpublic phoneNumberLabel: string = ' ';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'action-btn-text',\r\n\t})\r\n\tpublic actionBtnText: string = ' ';\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'loading-btn',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic loadingBtn: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'disable-btn',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic disableBtn: boolean = false;\r\n\r\n\t@query('[enter-phone-number-input-field]')\r\n\tprivate fieldPhoneNumber: InputComponent;\r\n\r\n\t@internalProperty()\r\n\tprivate isCompletePhoneNumber: boolean = false;\r\n\r\n\tpublic getMaskedPhoneNumber(): string {\r\n\t\treturn this.fieldPhoneNumber.getValue();\r\n\t}\r\n\r\n\tpublic focus(): void {\r\n\t\tthis.fieldPhoneNumber\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.fieldPhoneNumber.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-enter-phone-number\">\r\n\t\t\t\t${this.getPhoneNumberFieldTemplate()}\r\n\t\t\t\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getPhoneNumberFieldTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-form-item class=\"c-enter-phone-number__phone-number-field\">\r\n\t\t\t\t<c-input enter-phone-number-input-field\r\n\t\t\t\t\t\t .label=\"${this.phoneNumberLabel}\"\r\n\t\t\t\t\t\t .name=\"${this.phoneNumberName}\"\r\n\t\t\t\t\t\t .value=\"${this.phoneNumberValue}\"\r\n\t\t\t\t\t\t type=\"tel\"\r\n\t\t\t\t\t\t fieldClass=\"\"\r\n\t\t\t\t\t\t .maskType=\"${EMaskTypes.PHONE}\"\r\n\t\t\t\t\t\t @on-change=\"${this.handleInputFiledChange}\">\r\n\t\t\t\t</c-input>\r\n\t\t\t</c-form-item>\r\n\t\t`\r\n\t}\r\n\r\n\tprotected getActionBtn(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-btn class=\"c-enter-phone-number__btn\"\r\n\t\t\t\t   .type=\"${this.isDisabledActionBtn() ? EBtnType.SECONDARY : EBtnType.PRIMARY}\"\r\n\t\t\t\t   .size=\"${EBtnSize.MD}\"\r\n\t\t\t\t   ?loading=\"${this.isLoadingActionBtn()}\"\r\n\t\t\t\t   ?disabled=\"${this.isDisabledActionBtn()}\"\r\n\t\t\t\t   @click=\"${this.handleClickActionBtn}\">\r\n\t\t\t\t${this.actionBtnText}\r\n\t\t\t</c-btn>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.fieldPhoneNumber\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.isCompletePhoneNumber = this.fieldPhoneNumber.getMask()?.masked.isComplete;\r\n\t\t\t\tthis.fieldPhoneNumber.getMask()?.on('accept', () => {\r\n\t\t\t\t\tthis.isCompletePhoneNumber = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis.fieldPhoneNumber.getMask()?.on('complete', () => {\r\n\t\t\t\t\tthis.isCompletePhoneNumber = true;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected isLoadingActionBtn(): boolean {\r\n\t\treturn this.loadingBtn;\r\n\t}\r\n\r\n\tprotected isDisabledActionBtn(): boolean {\r\n\t\tif (!this.isCompletePhoneNumber || this.disableBtn) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprotected handleClickActionBtn(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isDisabledActionBtn()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.emitEventActionBtnClick();\r\n\t}\r\n\r\n\tprotected handleInputFiledChange(event: Event): void {\r\n\t\tthis.phoneNumberValue = this.fieldPhoneNumber.value;\r\n\t}\r\n\r\n\tprivate emitEventActionBtnClick(): void {\r\n\t\tconst event = new CustomEvent<TEnterPhoneNumberActionBtnClickEventDetail>('on-action-btn-click', {\r\n\t\t\tdetail: {\r\n\t\t\t\tphoneNumber: this.fieldPhoneNumber.getMask().unmaskedValue,\r\n\t\t\t\tmaskedPhoneNumber: this.phoneNumberValue,\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport CodeInputComponent from \"@components/code-input/CodeInputComponent\";\r\nimport {TCodeInputChangeEventDetail} from \"@components/code-input/model\";\r\nimport {TEnterSMSCodeFullFilledCodeEventDetail} from \"@components/enter-sms-code/model\";\r\nimport {isNotNullOrUndefined} from \"@helpers/index\";\r\nimport {ITimer} from \"@modules/timer/model\";\r\nimport Timer from \"@modules/timer/Timer\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property, query, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-enter-sms-code')\r\nexport default class EnterSMSCodeComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'btn-retry',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic btnRetry: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'loading-btn-retry',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic loadingBtnRetry: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\tattribute: 'disable-btn-retry',\r\n\t\treflect: true,\r\n\t})\r\n\tpublic disableBtnRetry: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'phone-number',\r\n\t})\r\n\tpublic phoneNumber: string;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t})\r\n\tpublic estimate: number = 0;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t\tattribute: 'attempts-count-send',\r\n\t})\r\n\tpublic attemptsCountSend: number;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t\tattribute: 'attempts-count-validate',\r\n\t})\r\n\tpublic attemptsCountValidate: number;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic value: string;\r\n\r\n\t@state()\r\n\tprivate timerOutput: string = '00:00';\r\n\r\n\t@state()\r\n\tprivate isTimerActive: boolean = false;\r\n\r\n\t@query('[enter-sms-code-code-input]')\r\n\tprivate codeInput: CodeInputComponent;\r\n\r\n\tprivate timer: ITimer = new Timer();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.handleTimerStream();\r\n\t}\r\n\r\n\tpublic focus(): void {\r\n\t\tthis.codeInput\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.codeInput.focus();\r\n\t\t\t});\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (name === 'estimate') {\r\n\t\t\tthis.startTimer(parseFloat(value));\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-enter-sms-code\">\r\n\t\t\t\t<c-code-input enter-sms-code-code-input\r\n\t\t\t\t\t\t\t  name=\"code\"\r\n\t\t\t\t\t\t\t  .value=\"${this.value}\"\r\n\t\t\t\t\t\t\t  @on-change=\"${this.handleInputFieldChange}\">\r\n\t\t\t\t</c-code-input>\r\n\r\n\t\t\t\t<div class=\"u-text-center c-enter-sms-code__message\">\r\n\t\t\t\t\t<p class=\"c-enter-sms-code__timer\">\r\n\t\t\t\t\t\t  ${this.phoneNumber}   .\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t   : ${this.timerOutput}\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<p class=\"c-enter-sms-code__count\">\r\n\t\t\t\t\t\t${unsafeHTML(this.getCountMessage())}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t${this.isVisibleBtnRetry() ?\r\n\t\t\t\t\thtml`\r\n\t\t\t\t\t\t<c-btn class=\"c-enter-sms-code__btn-retry\"\r\n\t\t\t\t\t\t\t   type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t\t\t   ?loading=\"${this.isLoadingBtnRetry()}\"\r\n\t\t\t\t\t\t\t   ?disabled=\"${this.isDisableBtnRetry()}\"\r\n\t\t\t\t\t\t\t   @click=\"${this.handleClickBtnRetry}\">\r\n\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t</c-btn>\r\n\t\t\t\t\t` :\r\n\t\t\t\t\tnull\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected handleInputFieldChange(event: CustomEvent<TCodeInputChangeEventDetail>): void {\r\n\t\tthis.value = this.codeInput.value;\r\n\t\tif (event.detail.isComplete) {\r\n\t\t\tthis.emitEventFullyFilledCode();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected handleClickBtnRetry(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.emitEventClickBtnRetry();\r\n\t}\r\n\r\n\tprotected getCountMessage(): string {\r\n\t\tconst message: Array<string> = [];\r\n\t\tif (isNotNullOrUndefined(this.attemptsCountSend)) {\r\n\t\t\tmessage.push(`    : ${this.attemptsCountSend}`)\r\n\t\t}\r\n\t\tif (isNotNullOrUndefined(this.attemptsCountValidate)) {\r\n\t\t\tmessage.push(`   : ${this.attemptsCountValidate}`)\r\n\t\t}\r\n\t\treturn message.reverse().join('<br>');\r\n\t}\r\n\r\n\tprotected isVisibleBtnRetry(): boolean {\r\n\t\tif (this.attemptsCountSend <= 0 || this.isTimerActive || !this.btnRetry) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprotected isDisableBtnRetry(): boolean {\r\n\t\treturn this.disableBtnRetry;\r\n\t}\r\n\r\n\tprotected isLoadingBtnRetry(): boolean {\r\n\t\treturn this.loadingBtnRetry;\r\n\t}\r\n\r\n\tpublic startTimer(value: number): void {\r\n\t\tif (value > 0) {\r\n\t\t\tthis.isTimerActive = true;\r\n\t\t}\r\n\t\tthis.timer.start(value);\r\n\t}\r\n\r\n\tprivate handleTimerStream(): void {\r\n\t\tthis.timer\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(stream => {\r\n\t\t\t\tthis.isTimerActive = true;\r\n\t\t\t\tthis.timerOutput = stream.fillTime;\r\n\r\n\t\t\t\tif (stream.second === 0) {\r\n\t\t\t\t\tthis.isTimerActive = false;\r\n\t\t\t\t\tthis.timerEnded();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected timerEnded(): void {\r\n\t\tthis.emitEventTimerEnded();\r\n\t}\r\n\r\n\tprivate emitEventClickBtnRetry(): void {\r\n\t\tconst event = new CustomEvent('on-click-btn-retry', {\r\n\t\t\tdetail: {},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate emitEventFullyFilledCode(): void {\r\n\t\tconst event = new CustomEvent<TEnterSMSCodeFullFilledCodeEventDetail>('on-full-filled-code', {\r\n\t\t\tdetail: {\r\n\t\t\t\tvalue: this.value,\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate emitEventTimerEnded(): void {\r\n\t\tconst event = new CustomEvent('on-timer-ended', {\r\n\t\t\tdetail: {},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {TSMSValidationValidateReject} from \"@models/SMSValidation\";\r\nimport {TTariffConnection} from \"@models/Tariff\";\r\n\r\nexport type TContractTariffsValidatePhoneToConnectTariffValidateSMSCodeResponse = {\r\n\ttariffConnection: TTariffConnection\r\n}\r\nexport type TContractTariffsValidatePhoneToConnectTariffValidateSMSCodeReject = TSMSValidationValidateReject;\r\n\r\nexport enum EContractTariffsValidatePhoneToConnectTariffSlots {\r\n\tCONFIRMATION_CONTENT = 'confirmation-content'\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {\r\n\tEContractTariffsValidatePhoneToConnectTariffSlots,\r\n\tTContractTariffsValidatePhoneToConnectTariffValidateSMSCodeReject,\r\n\tTContractTariffsValidatePhoneToConnectTariffValidateSMSCodeResponse\r\n} from \"@components/contract-tariffs/contract-tariffs-validate-phone-to-connect-tariff/model\";\r\nimport {\r\n\tTValidatePhoneNumberAndSMSEventReject,\r\n\tTValidatePhoneNumberAndSMSEventResponse\r\n} from \"@components/validate-phone-number-and-sms/model\";\r\nimport ValidatePhoneNumberAndSmsComponent\r\n\tfrom \"@components/validate-phone-number-and-sms/ValidatePhoneNumberAndSmsComponent\";\r\nimport {ETariffConnectionStatuses, TTariffConnection} from \"@models/Tariff\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport {customElement, html, state, queryAsync, TemplateResult, property} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\nimport {from} from \"rxjs\";\r\nimport {map, switchMap} from \"rxjs/operators\";\r\n\r\n@customElement('c-contract-tariffs-validate-phone-to-connect-tariff')\r\nexport default class ContractTariffsValidatePhoneToConnectTariffComponent extends WebComponentLite {\r\n\t@queryAsync('[contract-tariffs-validate-phone-to-connect-tariff-validator]')\r\n\tprivate validatorAsync: Promise<ValidatePhoneNumberAndSmsComponent>;\r\n\r\n\t@state()\r\n\tprivate tariffConnection: TTariffConnection;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'send-otp-request-config',\r\n\t})\r\n\tprivate getSMSRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/contract-tariff/send_otp/',\r\n\t\tmethod: 'POST'\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'verify-otp-request-config',\r\n\t})\r\n\tprivate validateSMSRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/contract-tariff/verify_otp/',\r\n\t\tmethod: 'POST'\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.tariffConnection) {\r\n\t\t\treturn this.getTariffConnectionTemplate();\r\n\t\t}\r\n\r\n\t\tconst confirmContent = this.getSlot(EContractTariffsValidatePhoneToConnectTariffSlots.CONFIRMATION_CONTENT);\r\n\r\n\t\treturn html`\r\n\t\t\t<c-validate-phone-number-with-confirmation-and-sms\r\n\t\t\t\tcontract-tariffs-validate-phone-to-connect-tariff-validator\r\n\t\t\t\t.getSMSRequestConfig=\"${this.getSMSRequestConfig}\"\r\n\t\t\t\t.validateSMSRequestConfig=\"${this.validateSMSRequestConfig}\"\r\n\t\t\t\t@on-response-get-sms-code=\"${this.handleResponseGetSMSCode}\"\r\n\t\t\t\t@on-reject-get-sms-code=\"${this.handleRejectGetSMSCode}\"\r\n\t\t\t\t@on-response-validate-sms-code=\"${this.handleResponseValidateSMSCode}\"\r\n\t\t\t\t@on-reject-validate-sms-code=\"${this.handleRejectValidateSMSCode}\">\r\n\t\t\t\t${confirmContent}\r\n\t\t\t</c-validate-phone-number-with-confirmation-and-sms>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getTariffConnectionTemplate(): TemplateResult {\r\n\t\tswitch (this.tariffConnection.status) {\r\n\t\t\tcase ETariffConnectionStatuses.DENIED:\r\n\t\t\t\treturn this.getDeniedConnectTariffTemplate();\r\n\t\t\tdefault:\r\n\t\t\t\treturn html`\r\n\t\t\t\t\t<p>   </p>\r\n\t\t\t\t`\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getDeniedConnectTariffTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-phone-validation-for-contract-tariff__invalid-phone\">\r\n\t\t\t\t<p class=\"c-phone-validation-for-contract-tariff__invalid-phone-title\">\r\n\t\t\t\t\t${unsafeHTML(this.tariffConnection.message)}\r\n\t\t\t\t</p>\r\n\t\t\t\t<c-btn class=\"c-phone-validation-for-contract-tariff__invalid-phone-action\"\r\n\t\t\t\t\t   type=\"${EBtnType.SECONDARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleBtnClickChangePhone}\">\r\n\t\t\t\t\t \r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleResponseGetSMSCode(event: CustomEvent): void {\r\n\r\n\t}\r\n\r\n\tprivate handleRejectGetSMSCode(event: CustomEvent): void {\r\n\r\n\t}\r\n\r\n\tprivate handleResponseValidateSMSCode(event: CustomEvent<TValidatePhoneNumberAndSMSEventResponse<TContractTariffsValidatePhoneToConnectTariffValidateSMSCodeResponse>>): void {\r\n\t\tthis.tariffConnection = event.detail.response.data.data.tariffConnection;\r\n\t}\r\n\r\n\tprivate handleRejectValidateSMSCode(event: CustomEvent<TValidatePhoneNumberAndSMSEventReject<TContractTariffsValidatePhoneToConnectTariffValidateSMSCodeReject>>): void {\r\n\r\n\t}\r\n\r\n\tprivate handleBtnClickChangePhone(): void {\r\n\t\tthis.tariffConnection = null;\r\n\t\tfrom(this.validatorAsync)\r\n\t\t\t.pipe(\r\n\t\t\t\tswitchMap(component => {\r\n\t\t\t\t\treturn from(component.updateComplete)\r\n\t\t\t\t\t\t.pipe(\r\n\t\t\t\t\t\t\tmap(() => component)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t)\r\n\t\t\t.subscribe(component => {\r\n\t\t\t\tcomponent.focusInputEnterPhoneNumber();\r\n\t\t\t});\r\n\t}\r\n}\r\n","import {TTariff, TTariffTree} from \"@models/Tariff\";\r\n\r\nexport type TContractTariffsBasketBundlerPaymentMethod = {\r\n\tid: string\r\n\ttype: EContractTariffsBasketBundlerPaymentMethods\r\n\tlabel: string\r\n}\r\n\r\nexport enum EContractTariffsBasketBundlerPaymentMethods {\r\n\tINSTALLMENT = 'INSTALLMENT',\r\n\tFULL_PRICE = 'FULL_PRICE',\r\n}\r\n\r\n\r\nexport type TContractTariffsBasketBundlerResponse = {\r\n\tphoneNumber: string\r\n\tpaymentMethods: Array<TContractTariffsBasketBundlerPaymentMethod>\r\n\ttariffTree: TTariffTree\r\n}\r\n\r\nexport type TContractTariffsBasketBundlerAddToCardRequest = {\r\n\tphoneNumber: string\r\n\tpaymentMethod: TContractTariffsBasketBundlerPaymentMethod\r\n\tperiod: number\r\n\ttariff?: TTariff\r\n}\r\n\r\nexport type TContractTariffsBasketBundlerAddToCardResponse = {\r\n\r\n}\r\n","import {EAlertMods, EAlertTypes} from \"@components/alert/model\";\r\nimport {\r\n\tEContractTariffsBasketBundlerPaymentMethods,\r\n\tTContractTariffsBasketBundlerAddToCardRequest,\r\n\tTContractTariffsBasketBundlerAddToCardResponse,\r\n\tTContractTariffsBasketBundlerPaymentMethod,\r\n\tTContractTariffsBasketBundlerResponse\r\n} from \"@components/contract-tariffs/contract-tariffs-basket-bundler/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {EOperatorCardDirection, TOperatorCard} from \"@components/operator-card/model\";\r\nimport ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\nimport {TSelectTariffFormattedData, TSelectTariffPeriod} from \"@components/select-tariff/model\";\r\nimport {TTariffCard} from \"@components/tariff-card/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {TOperator} from \"@models/Operator\";\r\nimport {TTariff, TTariffPeriod, TTariffTree} from \"@models/Tariff\";\r\nimport {TariffFormatter} from \"@modules/formatter/TariffFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport Mask, {EMaskTypes} from \"@modules/mask/Mask\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosError} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\nimport {fromEvent, Subject} from \"rxjs\";\r\n\r\n@customElement('c-contract-tariffs-basket-bundler')\r\nexport default class ContractTariffsBasketBundlerComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'link-to-change-phone-number',\r\n\t})\r\n\tpublic linkToChangePhoneNumber: string;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-request-data',\r\n\t})\r\n\tprivate addRequestData: Object = {};\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'link-to-bundler-items',\r\n\t})\r\n\tpublic linkToBundlerItems: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'add-to-cart-link',\r\n\t})\r\n\tpublic addToCartLink: string;\r\n\r\n\t@state()\r\n\tprivate data: TContractTariffsBasketBundlerResponse;\r\n\r\n\t@state()\r\n\tprivate isNetworkError: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isAddToCartRequesting: boolean = false;\r\n\r\n\t@state()\r\n\tprivate selectedPeriodValue: number;\r\n\r\n\t@state()\r\n\tprivate selectedPaymentMethod: TContractTariffsBasketBundlerPaymentMethod;\r\n\r\n\t@state()\r\n\tprivate selectedTariff: TTariff;\r\n\r\n\t@state()\r\n\tprivate formattedTariffTree: TSelectTariffFormattedData;\r\n\r\n\tprivate readonly productCostLine: ProductCostLineComponent;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\r\n\tprivate onOptionChangeStream: Subject<void> = new Subject();\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.productCostLine = document.querySelector(`c-product-cost-line`);\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn this.getLoadingTemplate();\r\n\t\t}\r\n\r\n\t\tif (this.isNetworkError) {\r\n\t\t\treturn this.getNetworkErrorTemplate();\r\n\t\t}\r\n\r\n\t\tif (!this.data) {\r\n\t\t\treturn this.getNoDataTemplate();\r\n\t\t}\r\n\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-contract-tariffs-basket-bundler\">\r\n\t\t\t\t<h2 class=\"c-contract-tariffs-basket-bundler__title\">  </h2>\r\n\t\t\t\t<div class=\"c-contract-tariffs-basket-bundler__content\">\r\n\t\t\t\t\t<div class=\"c-contract-tariffs-basket-bundler__left\">\r\n\t\t\t\t\t\t<div class=\"c-column c-column_gap-30\">\r\n\t\t\t\t\t\t\t<div class=\"c-column__container\">\r\n\t\t\t\t\t\t\t\t${this.getPhoneNumberTemplate()}\r\n\t\t\t\t\t\t\t\t${this.getPaymentTypesTemplate()}\r\n\t\t\t\t\t\t\t\t${this.formattedTariffTree?.periods?.length ? this.getPeriodTemplate() : null}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div class=\"c-contract-tariffs-basket-bundler__right\">\r\n\t\t\t\t\t\t${!this.formattedTariffTree?.periods?.length\r\n\t\t\t\t\t\t\t? this.getTariffConnectionResultMessageTemplate()\r\n\t\t\t\t\t\t\t: this.getTariffsTemplate()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPhoneNumberTemplate(): TemplateResult {\r\n\t\tconst phoneNumber: string = Mask.getFormattedValue(\r\n\t\t\tthis.data.phoneNumber,\r\n\t\t\tEMaskTypes.PHONE\r\n\t\t);\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header u-d-flex u-flex-row u-justify-content-between u-align-items-center\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\">  </h4>\r\n\t\t\t\t\t<a href=\"${this.linkToChangePhoneNumber}\"\r\n\t\t\t\t\t   class=\"c-btn c-btn_link\">\r\n\t\t\t\t\t\t<span class=\"c-btn__text\"></span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<p class=\"c-contract-tariffs-basket-bundler__phone-number\">\r\n\t\t\t\t\t\t${phoneNumber}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getOperatorTemplate(): TemplateResult {\r\n\t\tconst operator: TOperator = this.data.tariffTree?.operator;\r\n\t\tconst operatorCard: TOperatorCard = {\r\n\t\t\timg: {\r\n\t\t\t\turl: operator?.logo,\r\n\t\t\t\taltText: operator?.name,\r\n\t\t\t},\r\n\t\t\ttitle: operator?.name\r\n\t\t};\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\"> </h4>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<c-operator-card .direction=\"${EOperatorCardDirection.HORIZONTAL}\"\r\n\t\t\t\t\t\t\t\t\t .data=\"${operatorCard}\">\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPaymentTypesTemplate(): TemplateResult {\r\n\t\tconst paymentMethods: Array<TContractTariffsBasketBundlerPaymentMethod> = this.data.paymentMethods || [];\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\"> </h4>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<div class=\"c-column c-column_gap-16\">\r\n\t\t\t\t\t\t<div class=\"c-column__container\">\r\n\t\t\t\t\t\t\t${paymentMethods.map(method => {\r\n\t\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t   type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"payment-type\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${method.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${method.id === this.selectedPaymentMethod?.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleClickPaymentMethod}\">\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"u-d-flex u-flex-row u-justify-content-between u-align-items-center u-h-100\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p>${method.label}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getPeriodTemplate(): TemplateResult {\r\n\t\tconst periods = this.formattedTariffTree?.periods || [];\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-section\">\r\n\t\t\t\t<header class=\"c-section__header\">\r\n\t\t\t\t\t<h4 class=\"c-section__title\"> </h4>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"c-section__body\">\r\n\t\t\t\t\t<ul class=\"c-operator-card-list\">\r\n\t\t\t\t\t\t${periods.map(period =>\r\n\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t<li class=\"c-operator-card-list__item\">\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"period\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   class=\"u-w-100 u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${period.value == this.selectedPeriodValue}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleClickPeriod}\">\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"u-w-100 u-h-100 u-d-flex u-align-items-center u-justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<c-term-card .data=\"${period}\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getTariffsTemplate(): TemplateResult {\r\n\t\tconst tariffs = this.formattedTariffTree.periods.find(period => period.value === this.selectedPeriodValue)?.tariffs || [];\r\n\t\tlet show: boolean = true;\r\n\r\n\t\tif (!tariffs.length && !this.data.tariffTree.reasonAbsenceTariffs) {\r\n\t\t\tshow = false;\r\n\t\t}\r\n\r\n\t\tif (!this.selectedPeriodValue || !show) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-column c-column_gap-16\">\r\n\t\t\t\t<div class=\"c-column__container\">\r\n\t\t\t\t\t${tariffs.length ?\r\n\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t${tariffs.map(tariff =>\r\n\t\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t   type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"tariff\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${tariff.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${tariff.id == this.selectedTariff?.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleClickTariff}\">\r\n\t\t\t\t\t\t\t\t\t\t<c-tariff-card class=\"u-min-w-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .data=\"${tariff}\">\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t` :\r\n\t\t\t\t\t\tthis.reasonAbsenceTariffsTemplate()\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`\r\n\t}\r\n\r\n\tprivate reasonAbsenceTariffsTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-alert type=\"${EAlertTypes.WARNING}\"\r\n\t\t\t\t\t .mods=\"${[EAlertMods.SM]}\">\r\n\t\t\t\t${this.data.tariffTree.reasonAbsenceTariffs}\r\n\t\t\t</c-alert>\r\n\t\t`\r\n\t}\r\n\r\n\tprivate getTariffConnectionResultMessageTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<p class=\"c-contract-tariffs-basket-bundler__tariff-connection-result-message\">\r\n\t\t\t\t${unsafeHTML(\r\n\t\t\t\t\tthis.data.tariffTree.tariffConnection?.message\r\n\t\t\t\t)}\r\n\t\t\t</p>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNetworkErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-contract-tariffs-basket-bundler\">\r\n\t\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getLoadingTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-contract-tariffs-basket-bundler c-contract-tariffs-basket-bundler_loading\">\r\n\t\t\t\t<c-loader active\r\n\t\t\t\t\t\t  type=\"${ELoaderType.GHOST}\"\r\n\t\t\t\t\t\t  size=\"${ELoaderSize.LG}\"\r\n\t\t\t\t\t\t  class=\"c-contract-tariffs-basket-bundler__loader\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getNoDataTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-contract-tariffs-basket-bundler c-contract-tariffs-basket-bundler_loading\">\r\n\t\t\t\t<p>  !</p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.isNetworkError = false;\r\n\t\tconst data: Object = {\r\n\t\t\t...this.addRequestData || {},\r\n\t\t};\r\n\t\tthis.httpService\r\n\t\t\t.request<TContractTariffsBasketBundlerResponse>({\r\n\t\t\t\turl: this.linkToBundlerItems,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.data = response.data.data;\r\n\t\t\t\tthis.formattedTariffTree = this.getFormattedTariffTree(this.data.tariffTree);\r\n\t\t\t\tthis.setFirstSelected();\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\tif (HttpRequest.isNetworkError(reject)) {\r\n\t\t\t\t\tthis.isNetworkError = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate addToCart(): void {\r\n\t\tif (this.isAddToCartRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isAddToCartRequesting = true;\r\n\t\tthis.productCostLine.isLoadingBtn = true;\r\n\t\tthis.productCostLine.isDisableBtn = true;\r\n\t\tconst data: TContractTariffsBasketBundlerAddToCardRequest = {\r\n\t\t\tphoneNumber: this.data.phoneNumber,\r\n\t\t\ttariff: this.selectedTariff,\r\n\t\t\tperiod: this.selectedPeriodValue,\r\n\t\t\tpaymentMethod: this.selectedPaymentMethod,\r\n\t\t};\r\n\t\tthis.httpService\r\n\t\t\t.request<TContractTariffsBasketBundlerAddToCardResponse>({\r\n\t\t\t\turl: this.addToCartLink,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\t//TODO: handle response\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError) => {\r\n\t\t\t\t//TODO: handle response\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isAddToCartRequesting = false;\r\n\t\t\t\tthis.productCostLine.isLoadingBtn = false;\r\n\t\t\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.onOptionChangeStream\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateCostInProductCostLine();\r\n\t\t\t\tthis.updateBtnAvailableInProductCostLine();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.productCostLine, 'on-btn-click')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.addToCart();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getFormattedTariffTree(data: TTariffTree): TSelectTariffFormattedData {\r\n\t\treturn {\r\n\t\t\t...data,\r\n\t\t\tperiods: this.getFormattedPeriods(data.periods || [])\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getFormattedPeriods(periods: Array<TTariffPeriod>): Array<TSelectTariffPeriod> {\r\n\t\treturn periods?.map(item => {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tvalue: item.value,\r\n\t\t\t\ttariffs: this.getFormattedTariffs(item.tariffs || [])\r\n\t\t\t}\r\n\t\t}) || [];\r\n\t}\r\n\r\n\tprivate getFormattedTariffs(tariffs: Array<TTariff>): Array<TTariffCard> {\r\n\t\treturn tariffs?.map(item => TariffFormatter.toTariffCard(item, this.data.tariffTree.operator)) || [];\r\n\t}\r\n\r\n\tprivate setFirstSelected(): void {\r\n\t\tthis.selectedPaymentMethod = this.data.paymentMethods[0];\r\n\t\tthis.selectedPeriodValue = this.data.tariffTree.periods?.[0]?.value;\r\n\t\tthis.selectedTariff = this.data.tariffTree.periods?.[0]?.tariffs?.[0];\r\n\t\tthis.onOptionChangeStream.next();\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate handleClickPaymentMethod(event: CustomEvent): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedPaymentMethod = this.data.paymentMethods.find(item => item.id == toggle.value);\r\n\t\tthis.onOptionChangeStream.next();\r\n\t}\r\n\r\n\tprivate handleClickTariff(event: CustomEvent): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst tariffId: number = parseFloat(toggle.value);\r\n\t\tconst period: TTariffPeriod = this.data.tariffTree.periods.find(item => item.value == this.selectedPeriodValue);\r\n\t\tconst tariff: TTariff = period.tariffs.find(item => item.id == tariffId);\r\n\t\tthis.selectedTariff = tariff;\r\n\t\tthis.onOptionChangeStream.next();\r\n\t}\r\n\r\n\tprivate handleClickPeriod(event: CustomEvent): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst periodValue: number = parseFloat(toggle.value);\r\n\t\tconst period: TTariffPeriod = this.data.tariffTree.periods.find(item => item.value == periodValue);\r\n\t\tconst firstTariff: TTariff = period.tariffs?.[0];\r\n\r\n\t\tthis.selectedPeriodValue = periodValue;\r\n\t\tthis.selectedTariff = firstTariff;\r\n\t\tthis.onOptionChangeStream.next();\r\n\t}\r\n\r\n\tprivate getTariffPrice(paymentType: EContractTariffsBasketBundlerPaymentMethods): number {\r\n\t\tconst tariff: TTariff = this.selectedTariff;\r\n\t\tif (!tariff) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\tswitch (paymentType) {\r\n\t\t\tcase EContractTariffsBasketBundlerPaymentMethods.INSTALLMENT:\r\n\t\t\t\treturn parseFloat(tariff?.pricePerMonth) ?? 0;\r\n\t\t\tcase EContractTariffsBasketBundlerPaymentMethods.FULL_PRICE:\r\n\t\t\t\treturn parseFloat(tariff?.price) ?? 0;\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateCostInProductCostLine(): void {\r\n\t\tlet price: number = 0;\r\n\t\tlet pricePerMonth: number = 0;\r\n\t\tconst paymentMethod: TContractTariffsBasketBundlerPaymentMethod = this.selectedPaymentMethod;\r\n\t\tif (paymentMethod) {\r\n\t\t\tconst tariffPrice = this.getTariffPrice(paymentMethod.type);\r\n\r\n\t\t\tif (paymentMethod.type === EContractTariffsBasketBundlerPaymentMethods.INSTALLMENT) {\r\n\t\t\t\tprice = 0;\r\n\t\t\t\tpricePerMonth = tariffPrice;\r\n\t\t\t} else if (paymentMethod.type === EContractTariffsBasketBundlerPaymentMethods.FULL_PRICE) {\r\n\t\t\t\tprice = tariffPrice;\r\n\t\t\t\tpricePerMonth = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.productCostLine.price = price.toString();\r\n\t\tthis.productCostLine.pricePerMonth = pricePerMonth.toString();\r\n\t}\r\n\r\n\tprivate updateBtnAvailableInProductCostLine(): void {\r\n\t\tconst isAllSelected: boolean = Boolean(this.selectedTariff && this.selectedPaymentMethod)\r\n\t\tthis.productCostLine.isDisableBtn = !isAllSelected;\r\n\t}\r\n}\r\n","import SmoothScroll from \"@modules/scroll/SmoothScroll\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, PropertyValues} from \"lit-element\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {debounceTime} from \"rxjs/operators\";\r\n\r\n@customElement('c-up-button')\r\nexport default class UpButtonComponent extends WebComponentLite {\r\n\t@state()\r\n\tprivate isVisible: boolean = false;\r\n\r\n\tprivate smoothScroll: SmoothScroll = new SmoothScroll({\r\n\t\tblock: 'start',\r\n\t});\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.updateVisibility();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<button class=\"c-up-button ${this.isVisible ? 'c-up-button_show' : ''}\"\r\n\t\t\t\t\t@click=\"${this.handleClick}\">\r\n\t\t\t\t<i class=\"o-icon o-icon_angle-top-filled\"></i>\r\n\t\t\t</button>\r\n\t\t`\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(window, 'scroll')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(60),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateVisibility();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleClick(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.smoothScroll.scrollToTop();\r\n\t}\r\n\r\n\tprivate updateVisibility(): void {\r\n\t\tif (window.scrollY > window.innerHeight * 2) {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isVisible = false;\r\n\t}\r\n}\r\n","export type TSchedule = Array<TScheduleItem>\r\n\r\nexport type TScheduleItem = {\r\n\t[key in string]: TScheduleItemData\r\n}\r\n\r\nexport type TScheduleItemData = {\r\n\tstart: string\r\n\tend: string\r\n}\r\n\r\nexport enum EScheduleDaysOfWeek {\r\n\tMONDAY = 'monday',\r\n\tTUESDAY = 'tuesday',\r\n\tWEDNESDAY = 'wednesday',\r\n\tTHURSDAY = 'thursday',\r\n\tFRIDAY = 'friday',\r\n\tSATURDAY = 'saturday',\r\n\tSUNDAY = 'sunday',\r\n}\r\n\r\nexport type TScheduleDaysOfWeekTranslation = {\r\n\t[key in EScheduleDaysOfWeek]: string\r\n}\r\n\r\nexport type TScheduleTime = {\r\n\thours: number\r\n\tminutes: number\r\n}\r\n\r\nexport enum EScheduleStatus {\r\n\tOPEN,\r\n\tCLOSE,\r\n}\r\n\r\nexport type TScheduleBeforeTime = {\r\n\tminutes: number\r\n\tmilliseconds: number\r\n}\r\n\r\nexport const scheduleDaysOfWeekShotTranslationRu: TScheduleDaysOfWeekTranslation = {\r\n\t[EScheduleDaysOfWeek.MONDAY]: '',\r\n\t[EScheduleDaysOfWeek.TUESDAY]: '',\r\n\t[EScheduleDaysOfWeek.WEDNESDAY]: '',\r\n\t[EScheduleDaysOfWeek.THURSDAY]: '',\r\n\t[EScheduleDaysOfWeek.FRIDAY]: '',\r\n\t[EScheduleDaysOfWeek.SATURDAY]: '',\r\n\t[EScheduleDaysOfWeek.SUNDAY]: '',\r\n}\r\n","import {\r\n\tEScheduleDaysOfWeek,\r\n\tEScheduleStatus,\r\n\tscheduleDaysOfWeekShotTranslationRu,\r\n\tTSchedule,\r\n\tTScheduleBeforeTime,\r\n\tTScheduleItemData,\r\n\tTScheduleTime\r\n} from \"@components/schedule/model\";\r\nimport {ITimer} from \"@modules/timer/model\";\r\nimport Timer from \"@modules/timer/Timer\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property} from \"lit-element\";\r\n\r\n@customElement('c-schedule')\r\nexport default class ScheduleComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic title: string = ' ';\r\n\r\n\t@property({\r\n\t\ttype: Array,\r\n\t})\r\n\tset data(value: TSchedule) {\r\n\t\tthis.reset();\r\n\t\tthis._data = value;\r\n\t};\r\n\r\n\tget data(): TSchedule {\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t@state()\r\n\tprivate status: EScheduleStatus;\r\n\r\n\t@state()\r\n\tprivate timerOutput: string = '00:00';\r\n\r\n\t@state()\r\n\tprivate _data: TSchedule = [];\r\n\r\n\tprivate startTrackingWithMinute: number = 30;\r\n\tprivate timerBefore: ITimer = new Timer();\r\n\tprivate isTimerActivated: boolean = false;\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-schedule\">\r\n\t\t\t\t<h4 class=\"c-schedule__title\">${this.title}:</h4>\r\n\t\t\t\t<table class=\"c-schedule__table\">\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t${Object.values(EScheduleDaysOfWeek).map(dayWeek => {\r\n\t\t\t\t\t\tconst translate = scheduleDaysOfWeekShotTranslationRu;\r\n\t\t\t\t\t\tconst item = this._data.find((item) => {\r\n\t\t\t\t\t\t\treturn item.hasOwnProperty(dayWeek);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (!item) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst itemData = item[dayWeek];\r\n\t\t\t\t\t\tconst isCurrentDayWeek = this.isCurrentDayWeek(dayWeek);\r\n\t\t\t\t\t\tif (isCurrentDayWeek) {\r\n\t\t\t\t\t\t\tthis.updateStatus(itemData);\r\n\t\t\t\t\t\t\tthis.initTimer(itemData);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<tr class=\"c-schedule__row ${isCurrentDayWeek ? this.getStatusClass(this.status) : ''}\">\r\n\t\t\t\t\t\t\t\t<th class=\"c-schedule__col c-schedule__label\">${translate[dayWeek]}</th>\r\n\t\t\t\t\t\t\t\t<td class=\"c-schedule__col c-schedule__time\">\r\n\t\t\t\t\t\t\t\t\t<time>${itemData.start} - ${itemData.end}</time>\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t<td class=\"c-schedule__col c-schedule__status\">\r\n\t\t\t\t\t\t\t\t\t${isCurrentDayWeek ? this.getStatusText(this.status) : ''}\r\n\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t`;\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis.timerBefore.stop();\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tif (name == 'data') {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t}\r\n\r\n\tprivate reset(): void {\r\n\t\tthis.timerBefore.stop();\r\n\t\tthis.isTimerActivated = false;\r\n\t\tthis.timerOutput = '00:00';\r\n\t}\r\n\r\n\tprivate isCurrentDayWeek(dayWeek: EScheduleDaysOfWeek): boolean {\r\n\t\tconst currentDate: Date = new Date();\r\n\t\tconst currentDayWeek: EScheduleDaysOfWeek = Object.values(EScheduleDaysOfWeek)[currentDate.getDay() - 1];\r\n\t\treturn dayWeek === currentDayWeek;\r\n\t}\r\n\r\n\tprivate initTimer(data: TScheduleItemData): void {\r\n\t\tif (this.isTimerActivated) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.updateStatus(data);\r\n\t\tconst startBeforeTime: TScheduleBeforeTime = this.getBeforeTime(data.start);\r\n\t\tconst endBeforeTime: TScheduleBeforeTime = this.getBeforeTime(data.end);\r\n\t\tlet isStarted: boolean = false;\r\n\t\tif (startBeforeTime.minutes > 0 && startBeforeTime.minutes <= this.startTrackingWithMinute) {\r\n\t\t\tisStarted = true;\r\n\t\t\tthis.timerBefore.start(startBeforeTime.milliseconds);\r\n\t\t} else if (endBeforeTime.minutes > 0 && endBeforeTime.minutes <= this.startTrackingWithMinute) {\r\n\t\t\tisStarted = true;\r\n\t\t\tthis.timerBefore.start(endBeforeTime.milliseconds);\r\n\t\t}\r\n\t\tif (isStarted) {\r\n\t\t\tthis.isTimerActivated = true;\r\n\t\t\tthis.timerBefore\r\n\t\t\t\t.getStream()\r\n\t\t\t\t.subscribe(stream => {\r\n\t\t\t\t\tthis.timerOutput = stream.fillTime;\r\n\r\n\t\t\t\t\tif (stream.second === 0) {\r\n\t\t\t\t\t\tthis.isTimerActivated = true;\r\n\t\t\t\t\t\tthis.timerEnded(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate timerEnded(data: TScheduleItemData): void {\r\n\t\tthis.updateStatus(data);\r\n\t}\r\n\r\n\tprivate getBeforeTime(time: string): TScheduleBeforeTime {\r\n\t\tconst currentDate: Date = new Date();\r\n\t\tconst endTime: TScheduleTime = this.parseTime(time);\r\n\t\tconst hoursDiff: number = endTime.hours - currentDate.getHours();\r\n\t\tconst minutesDiff: number = endTime.minutes - currentDate.getMinutes();\r\n\t\tconst diffInMinutes: number = hoursDiff == 0 ? minutesDiff : (hoursDiff * 60) - minutesDiff;\r\n\t\tconst diffInMilliseconds: number = diffInMinutes * 60000;\r\n\r\n\t\treturn {\r\n\t\t\tminutes: diffInMinutes,\r\n\t\t\tmilliseconds: diffInMilliseconds,\r\n\t\t}\r\n\t}\r\n\r\n\tprivate parseTime(value: string): TScheduleTime {\r\n\t\tconst parseTime: Array<string> = value.split(':')\r\n\t\treturn {\r\n\t\t\thours: parseFloat(parseTime[0]),\r\n\t\t\tminutes: parseFloat(parseTime[1]),\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateStatus(data: TScheduleItemData): void {\r\n\t\tconst startBeforeTime: TScheduleBeforeTime = this.getBeforeTime(data.start);\r\n\t\tconst endBeforeTime: TScheduleBeforeTime = this.getBeforeTime(data.end);\r\n\t\tif (startBeforeTime.minutes < 0 && endBeforeTime.minutes > 0) {\r\n\t\t\tthis.status = EScheduleStatus.OPEN;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.status = EScheduleStatus.CLOSE;\r\n\t}\r\n\r\n\tprivate getStatusText(status: EScheduleStatus): string {\r\n\t\tif (status == EScheduleStatus.OPEN) {\r\n\t\t\treturn ' ';\r\n\t\t}\r\n\t\treturn '';\r\n\t}\r\n\r\n\tprivate getStatusClass(status: EScheduleStatus): string {\r\n\t\tif (status == EScheduleStatus.OPEN) {\r\n\t\t\treturn 'c-schedule__row_open';\r\n\t\t}\r\n\t\treturn 'c-schedule__row_close';\r\n\t}\r\n}\r\n\r\n\r\n","import ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\nimport Btn from \"@modules/btn/Btn\";\r\n\r\nexport enum EProductCartHandlerStatus {\r\n\tADD,\r\n\tREMOVE\r\n}\r\n\r\nexport default class ProductCartHandler {\r\n\tprivate CLASS_HANDLER: string = 'js-addToCartHandler';\r\n\tprivate CLASS_ACTIVE: string = 'is-active';\r\n\tprivate CLASS_LOADING: string = 'is-loading';\r\n\tprivate CLASS_HANDLER_ON_PRODUCT_PAGE: string = 'js-addToCartHandlerOnProductPage';\r\n\r\n\tprivate DATA_ADDED_TEXT: string = 'data-add-to-cart-added-text';\r\n\tprivate DATA_ADDED_ICON: string = 'data-add-to-cart-added-icon';\r\n\tprivate DATA_REMOVED_TEXT: string = 'data-add-to-cart-removed-text';\r\n\tprivate DATA_REMOVED_ICON: string = 'data-add-to-cart-removed-icon';\r\n\r\n\tprivate productCostLine: ProductCostLineComponent;\r\n\r\n\tprivate static instance: ProductCartHandler;\r\n\r\n\tconstructor() {\r\n\t\tif (ProductCartHandler.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use ProductCartIdentical.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tProductCartHandler.instance = this;\r\n\t\tthis.productCostLine = document.querySelector(`c-product-cost-line`);\r\n\t}\r\n\r\n\tpublic static getInstance(): ProductCartHandler {\r\n\t\tif (!ProductCartHandler.instance) {\r\n\t\t\tProductCartHandler.instance = new ProductCartHandler();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic setActive(sku: string, handler?: HTMLElement,): void {\r\n\t\tthis.updateStatusesBySky(sku, EProductCartHandlerStatus.ADD);\r\n\t\tthis.updateStatusOnProductPage(sku, EProductCartHandlerStatus.ADD, handler);\r\n\t}\r\n\r\n\tpublic setUnactive(sku: string, handler?: HTMLElement): void {\r\n\t\tthis.updateStatusesBySky(sku, EProductCartHandlerStatus.REMOVE);\r\n\t\tthis.updateStatusOnProductPage(sku, EProductCartHandlerStatus.REMOVE, handler);\r\n\t}\r\n\r\n\tpublic setLoader(handler: HTMLElement): void {\r\n\t\thandler.classList.add(this.CLASS_LOADING);\r\n\r\n\t\tif (this.isProductPageHandler(handler)) {\r\n\t\t\tif (this.productCostLine) {\r\n\t\t\t\tthis.productCostLine\r\n\t\t\t\t\t.updateComplete\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.productCostLine.isLoadingBtn = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic removeLoader(handler: HTMLElement): void {\r\n\t\thandler.classList.remove(this.CLASS_LOADING);\r\n\r\n\t\tif (this.isProductPageHandler(handler)) {\r\n\t\t\tif (this.productCostLine) {\r\n\t\t\t\tthis.productCostLine\r\n\t\t\t\t\t.updateComplete\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.productCostLine.isLoadingBtn = false;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setDisabled(handler: HTMLElement): void {\r\n\t\tif (handler instanceof HTMLButtonElement) {\r\n\t\t\thandler.disabled = true;\r\n\t\t}\r\n\r\n\t\tif (this.isProductPageHandler(handler)) {\r\n\t\t\tif (this.productCostLine) {\r\n\t\t\t\tthis.productCostLine\r\n\t\t\t\t\t.updateComplete\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.productCostLine.isDisableBtn = true;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic removeDisabled(handler: HTMLElement): void {\r\n\t\tif (handler instanceof HTMLButtonElement) {\r\n\t\t\thandler.disabled = false;\r\n\t\t}\r\n\r\n\t\tif (this.isProductPageHandler(handler)) {\r\n\t\t\tif (this.productCostLine) {\r\n\t\t\t\tthis.productCostLine\r\n\t\t\t\t\t.updateComplete\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.productCostLine.isDisableBtn = false;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getIdenticalProductCardHandlers(sku: string): Array<HTMLElement> {\r\n\t\tconst inputs: Array<HTMLInputElement> = Array.from(\r\n\t\t\tdocument.querySelectorAll(`.${this.CLASS_HANDLER} input[name=\"sku\"][value=\"${sku}\"]`)\r\n\t\t);\r\n\t\treturn inputs\r\n\t\t\t.map(input => input.closest(`.${this.CLASS_HANDLER}`));\r\n\t}\r\n\r\n\tprivate updateStatusesBySky(sku: string, status: EProductCartHandlerStatus): void {\r\n\t\tconst productCardHandlers = this.getIdenticalProductCardHandlers(sku);\r\n\t\tproductCardHandlers.forEach(handler => {\r\n\t\t\tthis.updateStatusByHandler(handler, status);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate updateStatusByHandler(handler: HTMLElement, status: EProductCartHandlerStatus): void {\r\n\t\tswitch (status) {\r\n\t\t\tcase EProductCartHandlerStatus.ADD:\r\n\t\t\t\thandler.classList.add(this.CLASS_ACTIVE);\r\n\t\t\t\tbreak;\r\n\t\t\tcase EProductCartHandlerStatus.REMOVE:\r\n\t\t\t\thandler.classList.remove(this.CLASS_ACTIVE);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateStatusOnProductPage(sku: string, status: EProductCartHandlerStatus, handler?: HTMLElement): void {\r\n\t\tif (!handler) {\r\n\t\t\thandler = this.getProductPageHandlerBySku(sku);\r\n\t\t}\r\n\t\tif (!handler) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst isProductPageHandler: boolean = this.isProductPageHandler(handler);\r\n\t\tif (!isProductPageHandler) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.updateStatusByHandler(handler, status);\r\n\t\tthis.updateBtnText(handler, status);\r\n\t}\r\n\r\n\tprivate isProductPageHandler(handler: HTMLElement): boolean {\r\n\t\treturn handler.classList.contains(this.CLASS_HANDLER_ON_PRODUCT_PAGE);\r\n\t}\r\n\r\n\tprivate updateBtnText(handler: HTMLElement, status: EProductCartHandlerStatus): void {\r\n\t\tconst addedText: string = handler.getAttribute(this.DATA_ADDED_TEXT);\r\n\t\tconst addedIcon: string = handler.getAttribute(this.DATA_ADDED_ICON);\r\n\t\tconst removedText: string = handler.getAttribute(this.DATA_REMOVED_TEXT);\r\n\t\tconst removedIcon: string = handler.getAttribute(this.DATA_REMOVED_ICON);\r\n\r\n\t\tlet btn = addedText && new Btn(handler as HTMLButtonElement);\r\n\r\n\t\tswitch (status) {\r\n\t\t\tcase EProductCartHandlerStatus.ADD:\r\n\t\t\t\tbtn.setText(addedText);\r\n\t\t\t\tif (addedIcon) {\r\n\t\t\t\t\tbtn.setPrependIcon(addedIcon);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase EProductCartHandlerStatus.REMOVE:\r\n\t\t\t\tbtn.setText(removedText);\r\n\t\t\t\tif (removedIcon) {\r\n\t\t\t\t\tbtn.setPrependIcon(removedIcon);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tbtn.removePrependIcon();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif (this.productCostLine) {\r\n\t\t\tthis.productCostLine\r\n\t\t\t\t.updateComplete\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase EProductCartHandlerStatus.ADD:\r\n\t\t\t\t\t\t\tthis.productCostLine.btnText = addedText;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase EProductCartHandlerStatus.REMOVE:\r\n\t\t\t\t\t\t\tthis.productCostLine.btnText = removedText;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getProductPageHandlerBySku(sku: string): HTMLElement {\r\n\t\tconst handler: HTMLElement = document.querySelector(`.${this.CLASS_HANDLER}.${this.CLASS_HANDLER_ON_PRODUCT_PAGE}`);\r\n\t\tconst skuInput = handler?.querySelector(`input[name=\"sku\"][value=\"${sku}\"]`);\r\n\t\tif (!handler || !skuInput) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn handler;\r\n\t}\r\n}\r\n","export default class Badge {\r\n\tprivate badgeEl: HTMLElement;\r\n\r\n\tconstructor(badgeEl: HTMLElement) {\r\n\t\tthis.badgeEl = badgeEl;\r\n\t}\r\n\r\n\tpublic setValue(value: string): void {\r\n\t\tthis.badgeEl.innerText = value;\r\n\t}\r\n}\r\n","import Badge from \"@components/badge/Badge\";\r\n\r\nexport default class CartQuantity {\r\n\tprivate CLASS_BADGE: string = 'js-cartBudge';\r\n\r\n\tprivate static instance: CartQuantity;\r\n\r\n\tprivate badges: Array<Badge> = [];\r\n\r\n\tconstructor() {\r\n\t\tif (CartQuantity.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use CartQuantity.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tCartQuantity.instance = this;\r\n\t\tconst badgeEls: Array<HTMLElement> = Array.from(document.getElementsByClassName(this.CLASS_BADGE)) as Array<HTMLElement>;\r\n\t\tthis.badges = badgeEls.map(badgeEl => new Badge(badgeEl));\r\n\t}\r\n\r\n\tpublic static getInstance(): CartQuantity {\r\n\t\tif (!CartQuantity.instance) {\r\n\t\t\tCartQuantity.instance = new CartQuantity();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic update(value: number): void {\r\n\t\tconst badgeValue = value == 0 ? '' : value.toString();\r\n\t\tthis.badges.forEach(badge => badge.setValue(badgeValue));\r\n\t}\r\n}\r\n","import {IBtn, TBtnOption} from \"@modules/btn/model\";\r\n\r\nexport default class Btn implements IBtn {\r\n\tconstructor(private btnEl: HTMLButtonElement, private options?: TBtnOption) {\r\n\t\tconst defaultOptions: TBtnOption = {\r\n\t\t\tclasses: {\r\n\t\t\t\tloading: 'is-loading',\r\n\t\t\t\tdisabled: 'is-disabled',\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t}\r\n\r\n\tpublic addLoader(): this {\r\n\t\tthis.btnEl.classList.add(this.options.classes.loading);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic removeLoader(): this {\r\n\t\tthis.btnEl.classList.remove(this.options.classes.loading);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic disable(): this {\r\n\t\tthis.btnEl.disabled = true;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic fakeDisable(): this {\r\n\t\tthis.btnEl.classList.add(this.options.classes.disabled);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic enable(): this {\r\n\t\tthis.btnEl.disabled = false;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic fakeEnable(): this {\r\n\t\tthis.btnEl.classList.remove(this.options.classes.disabled);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setText(text: string): this {\r\n\t\tconst textEl: HTMLElement = this.btnEl.querySelector(`.c-btn__text`);\r\n\t\tif (textEl) {\r\n\t\t\ttextEl.innerText = text;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setPrependIcon(iconClass: string): this {\r\n\t\tthis.createPrepend(iconClass);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic removePrependIcon(): this {\r\n\t\tthis.getPrepend().remove();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setAppendIcon(iconClass: string): this {\r\n\t\tthis.createAppend(iconClass);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic removeAppendIcon(): this {\r\n\t\tthis.getAppend().remove();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic isDisabled(): boolean {\r\n\t\treturn this.btnEl.disabled;\r\n\t}\r\n\r\n\tpublic isFakeDisabled(): boolean {\r\n\t\treturn this.btnEl.classList.contains(this.options.classes.disabled);\r\n\t}\r\n\r\n\tpublic isLoading(): boolean {\r\n\t\treturn this.btnEl.classList.contains(this.options.classes.loading);\r\n\t}\r\n\r\n\tpublic getBtn(): HTMLButtonElement {\r\n\t\treturn this.btnEl;\r\n\t}\r\n\r\n\tprivate createPrepend(iconClass: string): HTMLElement {\r\n\t\tconst current: HTMLElement = this.getPrepend();\r\n\t\tif (current) {\r\n\t\t\tcurrent.remove();\r\n\t\t}\r\n\t\tthis.btnEl.insertAdjacentHTML(\"afterbegin\", this.getPrependTemplate(iconClass));\r\n\t\treturn this.getPrepend();\r\n\t}\r\n\r\n\tprivate createAppend(iconClass: string): HTMLElement {\r\n\t\tconst current: HTMLElement = this.getAppend();\r\n\t\tif (current) {\r\n\t\t\tcurrent.remove();\r\n\t\t}\r\n\t\tthis.btnEl.insertAdjacentHTML(\"beforeend\", this.getAppendTemplate(iconClass));\r\n\t\treturn this.getPrepend();\r\n\t}\r\n\r\n\tprivate getPrepend(): HTMLElement {\r\n\t\treturn this.btnEl.querySelector(`.c-btn__prepend`);\r\n\t}\r\n\r\n\tprivate getAppend(): HTMLElement {\r\n\t\treturn this.btnEl.querySelector(`.c-btn__append`);\r\n\t}\r\n\r\n\tprivate getPrependTemplate(iconClass: string): string {\r\n\t\treturn `\r\n\t\t\t<div class=\"c-btn__prepend o-icon-box\">\r\n\t\t\t\t<i class=\"o-icon ${iconClass}\"></i>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getAppendTemplate(iconClass: string): string {\r\n\t\treturn `\r\n\t\t\t<div class=\"c-btn__append o-icon-box\">\r\n\t\t\t\t<i class=\"o-icon ${iconClass}\"></i>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {TCartPreviewResponse} from \"@components/cart-preview/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {TCartItem, TCartRemoveRequest, TCartRemoveResponse} from \"@models/Cart\";\r\nimport CartQuantity from \"@modules/cart/CartQuantity\";\r\nimport ProductCartHandler from \"@modules/cart/ProductCartHandler\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport {customElement, html, state, property, PropertyValues, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-cart-preview')\r\nexport default class CartPreviewComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'cart-url',\r\n\t})\r\n\tpublic cartUrl: string = '';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'catalog-url',\r\n\t})\r\n\tpublic catalogUrl: string = '';\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-request-config',\r\n\t})\r\n\tpublic getRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/checkout/preview/',\r\n\t\tmethod: \"GET\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'remove-request-config',\r\n\t})\r\n\tpublic removeRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/remove/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isGlobalLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate error: unknown;\r\n\r\n\t@state()\r\n\tprivate items: Array<TCartItem> = [];\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\tprivate cartQuantity: CartQuantity = CartQuantity.getInstance();\r\n\tprivate productCartHandler: ProductCartHandler = ProductCartHandler.getInstance();\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tlet template: TemplateResult;\r\n\r\n\t\tif (this.isLoading) {\r\n\t\t\ttemplate = this.getLoaderTemplate();\r\n\t\t} else if (this.error) {\r\n\t\t\ttemplate = this.getErrorTemplate();\r\n\t\t} else if (!this.items.length) {\r\n\t\t\ttemplate = this.getEmptyTemplate();\r\n\t\t} else {\r\n\t\t\ttemplate = this.getContentTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<article class=\"c-cart-preview\">\r\n\t\t\t\t${template}\r\n\r\n\t\t\t\t<c-loader class=\"c-cart-preview__loader ${this.isGlobalLoading ? 'c-cart-preview__loader_active' : ''}\"\r\n\t\t\t\t\t\t  .active=\"${this.isGlobalLoading}\"\r\n\t\t\t\t\t\t  .type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t\t  .size=\"${ELoaderSize.MD}\">\r\n\t\t\t</article>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-cart-preview__body\">\r\n\t\t\t\t<ul class=\"c-cart-preview__list\">\r\n\t\t\t\t\t${this.items.map(item => this.getItemTemplate(item))}\r\n\t\t\t\t</ul>\r\n\t\t\t\t${this.getSummaryTemplate()}\r\n\t\t\t</div>\r\n\t\t\t<footer class=\"c-cart-preview__footer\">\r\n\t\t\t\t<c-btn .link=\"${this.cartUrl}\"\r\n\t\t\t\t\t   .size=\"${EBtnSize.LG}\"\r\n\t\t\t\t\t   .type=\"${EBtnType.PRIMARY}\">\r\n\t\t\t\t\t  \r\n\t\t\t\t</c-btn>\r\n\t\t\t</footer>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getItemTemplate(item: TCartItem): TemplateResult {\r\n\t\tconst {availability, quantity, product: {price, img, name}} = item;\r\n\r\n\t\tconst notAvailableClass = 'c-cart-preview-item_not_available';\r\n\r\n\t\tconst formatterPrice = MoneyFormatter.format(\r\n\t\t\tprice,\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\t\treturn html`\r\n\t\t\t<li class=\"c-cart-preview__item c-cart-preview-item ${availability ? '' : notAvailableClass}\">\r\n\t\t\t\t<div class=\"c-cart-preview-item__img-box\">\r\n\t\t\t\t\t<img data-src=\"${img}\" alt=\"pic\" class=\"c-cart-preview-item__img u-shimmer js-lazyLoadImage\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-cart-preview-item__body\">\r\n\t\t\t\t\t<h6 class=\"c-cart-preview-item__name\">${name}</h6>\r\n\t\t\t\t\t<p class=\"c-cart-preview-item__price\">\r\n\t\t\t\t\t\t${unsafeHTML(formatterPrice)}\r\n\t\t\t\t\t\t${quantity > 1\r\n\t\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<span>x${quantity}</span>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t${\r\n\t\t\t\t\t\tavailability\r\n\t\t\t\t\t\t\t? null\r\n\t\t\t\t\t\t\t: html`\r\n\t\t\t\t\t\t\t\t<p class=\"c-cart-preview-item__not-available\">  </p>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-cart-preview-item__controls\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"c-cart-preview-item__remove\"\r\n\t\t\t\t\t\t@click=\"${(event) => this.handleClickRemoveItem(event, item)}\">\r\n\t\t\t\t\t\t<i class=\"o-icon o-icon_garbage-can-filled\"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t`\r\n\t}\r\n\r\n\tprivate handleClickRemoveItem(event: Event, item: TCartItem): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.removeItem(item);\r\n\t}\r\n\r\n\tprivate getSummaryTemplate(): TemplateResult {\r\n\t\tconst totalPrice = this.items.reduce((prevValue, currValue) => {\r\n\t\t\tconst {quantity, product: {price}} = currValue;\r\n\t\t\treturn prevValue + (parseFloat(price) * quantity);\r\n\t\t}, 0);\r\n\t\tconst formatterTotalPrice = MoneyFormatter.format(\r\n\t\t\ttotalPrice.toString(),\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-cart-preview__summary\">\r\n\t\t\t\t<h4 class=\"c-cart-preview__summary-title\"></h4>\r\n\t\t\t\t<p class=\"c-cart-preview__summary-total\">${unsafeHTML(formatterTotalPrice)}</p>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getLoaderTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-loader active\r\n\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t  size=\"${ELoaderSize.MD}\">\r\n\t\t\t</c-loader>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p class=\"u-mb-20\">   </p>\r\n\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleClickBtnReload}\">\r\n\t\t\t\t\t\r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickBtnReload(event: Event): void {\r\n\t\tevent.stopPropagation();\r\n\t\tevent.stopImmediatePropagation()\r\n\t\tevent.preventDefault();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate getEmptyTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-result c-result_404\">\r\n\t\t\t\t<div class=\"c-result__icon\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_cart\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h5 class=\"c-result__title\">\r\n\t\t\t\t\t  \r\n\t\t\t\t</h5>\r\n\t\t\t\t<p class=\"c-result__sub-title\">\r\n\t\t\t\t\t     ,    !\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"u-text-center\">\r\n\t\t\t\t<c-btn .link=\"${this.catalogUrl}\"\r\n\t\t\t\t\t   .size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   .type=\"${EBtnType.PRIMARY}\">\r\n\t\t\t\t\t \r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tpublic getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.error = null;\r\n\t\tconst {url, method} = this.getRequestConfig;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartPreviewResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.items = response.data?.data || [];\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\t\t\t\tthis.error = reject;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate removeItem(item: TCartItem): void {\r\n\t\tconst {url, method} = this.removeRequestConfig;\r\n\t\tconst data: TCartRemoveRequest = {\r\n\t\t\tsku: item.product.sku,\r\n\t\t}\r\n\t\tthis.isGlobalLoading = true;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartRemoveResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.getData();\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\tthis.cartQuantity.update(response.data.data.cartItemCount);\r\n\t\t\t\tthis.productCartHandler.setUnactive(data.sku);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t});\r\n\t}\r\n}\r\n","import {isFunction} from \"@helpers/index\";\r\nimport {TDynamicAction} from \"@models/Action\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property, PropertyValues, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-range-count')\r\nexport default class RangeCountComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Number,\r\n\t})\r\n\tpublic max: number = 1000;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t})\r\n\tpublic min: number = 0;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t})\r\n\tpublic step: number = 1;\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic value: number;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-decrement',\r\n\t})\r\n\tpublic onDecrement: TDynamicAction<boolean>;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-increment',\r\n\t})\r\n\tpublic onIncrement: TDynamicAction<boolean>;\r\n\r\n\t@state()\r\n\tprivate isLoadingDecrement: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isLoadingIncrement: boolean = false;\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tif (this.value == null) {\r\n\t\t\tthis.value = this.min ?? 0;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-range-count js-rangeCount\">\r\n\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t   hidden=\"hidden\"\r\n\t\t\t\t\t   .value=\"${this.value}\"/>\r\n\t\t\t\t${this.getBtnDecrementTemplate()}\r\n\t\t\t\t<output class=\"c-range-count__result\">${this.value}</output>\r\n\t\t\t\t${this.getBtnIncrementTemplate()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getBtnDecrementTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<button\r\n\t\t\t\tclass=\"c-range-count__btn c-range-count__btn_left ${this.isLoadingDecrement ? 'c-range-count__btn_loading' : ''}\"\r\n\t\t\t\t?disabled=\"${this.isDisableDecrement()}\"\r\n\t\t\t\t@click=\"${this.handleClickDecrement}\">\r\n\t\t\t\t<i class=\"o-icon o-icon_minus-filled c-range-count__btn-icon\"></i>\r\n\t\t\t\t<i class=\"o-icon o-icon_loader-line-filled c-range-count__btn-loader\"></i>\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getBtnIncrementTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<button\r\n\t\t\t\tclass=\"c-range-count__btn c-range-count__btn_right ${this.isLoadingIncrement ? 'c-range-count__btn_loading' : ''}\"\r\n\t\t\t\t?disabled=\"${this.isDisableIncrement()}\"\r\n\t\t\t\t@click=\"${this.handleClickIncrement}\">\r\n\t\t\t\t<i class=\"o-icon o-icon_plus-filled c-range-count__btn-icon\"></i>\r\n\t\t\t\t<i class=\"o-icon o-icon_loader-line-filled c-range-count__btn-loader\"></i>\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate isDisableDecrement(): boolean {\r\n\t\treturn this.value <= this.min || this.isLoadingIncrement;\r\n\t}\r\n\r\n\tprivate isDisableIncrement(): boolean {\r\n\t\treturn this.value >= this.max || this.isLoadingDecrement;\r\n\t}\r\n\r\n\tprivate async handleClickDecrement(event: Event): Promise<void> {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isLoadingDecrement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isFunction(this.onDecrement)) {\r\n\t\t\tthis.isLoadingDecrement = true;\r\n\t\t\tconst res = await this.onDecrement();\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.decrement();\r\n\t\t\t}\r\n\t\t\tthis.isLoadingDecrement = false;\r\n\t\t} else {\r\n\t\t\tthis.decrement();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic decrement(): void {\r\n\t\tif (this.value - 1 >= this.min) {\r\n\t\t\tthis.value--;\r\n\t\t} else {\r\n\t\t\tthis.value = this.min;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async handleClickIncrement(event: Event): Promise<void> {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isLoadingIncrement) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.onIncrement && typeof this.onIncrement === 'function') {\r\n\t\t\tthis.isLoadingIncrement = true;\r\n\t\t\tconst res = await this.onIncrement();\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.increment();\r\n\t\t\t}\r\n\t\t\tthis.isLoadingIncrement = false;\r\n\t\t} else {\r\n\t\t\tthis.increment();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic increment(): void {\r\n\t\tif (this.value + 1 <= this.max) {\r\n\t\t\tthis.value++;\r\n\t\t} else {\r\n\t\t\tthis.value = this.max;\r\n\t\t}\r\n\t}\r\n}\r\n","import {TProduct} from \"@models/Product\";\r\n\r\nexport type TCartAddRequest = {\r\n\tsku: string\r\n}\r\nexport type TCartAddResponse = {\r\n\tcartItemCount: number\r\n}\r\n\r\nexport type TCartRemoveRequest = {\r\n\tsku: string\r\n}\r\nexport type TCartRemoveResponse = {\r\n\tcartItemCount: number\r\n}\r\n\r\nexport type TCartEditRequest = {\r\n\tsku: string\r\n\ttype: ECartEditTypes\r\n}\r\nexport type TCartEditResponse = {\r\n\tcartItemCount: number\r\n}\r\n\r\nexport enum ECartEditTypes {\r\n\tINCREMENT = 'INCREMENT',\r\n\tDECREMENT = 'DECREMENT',\r\n}\r\n\r\nexport type TCartViewRequest = {}\r\n\r\nexport type TCartViewResponse = {\r\n\titems: Array<TCartItem>\r\n\taccessories: Array<TCartItem>\r\n\tcartItemCount: number\r\n}\r\n\r\nexport type TCartItem = {\r\n\tproduct: TProduct\r\n\tquantity: number\r\n\tmin: number\r\n\tmax: number\r\n\tavailability: boolean\r\n}\r\n","export enum ECartCostLineNames {\r\n\tPREPAYMENT = 'prepayment',\r\n\tPRICE_PER_MONTH = 'price-per-month',\r\n\tPERIOD = 'period',\r\n\tFULL_PRICE = 'full-price',\r\n}\r\n","import {ECartCostLineNames} from \"@modules/cart/model\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\n\r\nexport type TCartCostLineItem = {\r\n\trootEl: HTMLElement\r\n\ttitleEl: HTMLElement\r\n\tvalueEl: HTMLElement\r\n}\r\n\r\nexport default class CartCostLine {\r\n\tprivate CLASS_ITEM: string = 'js-cartCostLineItem';\r\n\tprivate CLASS_ITEM_TITLE: string = 'js-cartCostLineItemTitle';\r\n\tprivate CLASS_ITEM_VALUE: string = 'js-cartCostLineItemValue';\r\n\r\n\tprivate DATA_ATTR_ITEM_NAME: string = 'data-name';\r\n\tprivate DATA_ATTR_ITEM_EL_INITIAL_VALUE: string = 'data-initial-value';\r\n\r\n\tprivate el: HTMLElement;\r\n\r\n\tconstructor(el: HTMLElement) {\r\n\t\tthis.el = el;\r\n\t}\r\n\r\n\tpublic updateItemValue(name: ECartCostLineNames | string, value: string): void {\r\n\t\tconst item = this.getItemByName(name);\r\n\t\tif (!item) {\r\n\t\t\tconsole.error(`CartCostLine: item with name ${name} is not defined !`);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\titem.valueEl.innerHTML = value;\r\n\t}\r\n\r\n\tpublic getItemInitialValue(name: ECartCostLineNames): string {\r\n\t\tconst item = this.getItemByName(name);\r\n\t\tif (!item) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn item.valueEl.getAttribute(this.DATA_ATTR_ITEM_EL_INITIAL_VALUE) || null;\r\n\t}\r\n\r\n\tpublic handleLoader(status: EComponentStatuses): void {\r\n\t\tif (status === EComponentStatuses.LOADING) {\r\n\t\t\tconst item = this.getItemByName(ECartCostLineNames.PRICE_PER_MONTH);\r\n\t\t\tif (!item) {\r\n\t\t\t\tconsole.error(`CartCostLine: item with name ${name} is not defined !`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\titem.valueEl.innerHTML = '<div class=\"c-loader_ghost c-loader_md\">\\n' +\r\n\t\t\t\t'                                        <div class=\"c-loader__content\">\\n' +\r\n\t\t\t\t'                                            <div class=\"c-loader__icon\"></div>\\n' +\r\n\t\t\t\t'                                        </div>\\n' +\r\n\t\t\t\t'                                    </div>';\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getItemByName(name: string): TCartCostLineItem {\r\n\t\tconst rootEl: HTMLElement = this.el.querySelector(`.${this.CLASS_ITEM}[${this.DATA_ATTR_ITEM_NAME}=${name}]`);\r\n\r\n\t\tif (!rootEl) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst titleEl: HTMLElement = rootEl.querySelector(`.${this.CLASS_ITEM_TITLE}`);\r\n\t\tconst valueEl: HTMLElement = rootEl.querySelector(`.${this.CLASS_ITEM_VALUE}`);\r\n\r\n\t\treturn {\r\n\t\t\trootEl,\r\n\t\t\ttitleEl,\r\n\t\t\tvalueEl,\r\n\t\t}\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {\r\n\tECartEditTypes,\r\n\tTCartAddRequest,\r\n\tTCartAddResponse,\r\n\tTCartEditRequest,\r\n\tTCartEditResponse,\r\n\tTCartItem,\r\n\tTCartRemoveRequest,\r\n\tTCartRemoveResponse,\r\n\tTCartViewRequest,\r\n\tTCartViewResponse\r\n} from \"@models/Cart\";\r\nimport CartQuantity from \"@modules/cart/CartQuantity\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport {customElement, html, property, PropertyValues, state, TemplateResult} from \"lit-element\";\r\nimport CartCostLine from \"@modules/cart/CartCostLine\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport {TEditProductsCartStatusChangeEventDetail} from \"@components/edit-products-cart/model\";\r\nimport {ECartCostLineNames} from \"@modules/cart/model\";\r\n\r\n@customElement('c-edit-products-cart')\r\nexport default class EditProductsCartComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-request-config',\r\n\t})\r\n\tpublic getRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/',\r\n\t\tmethod: \"GET\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'remove-request-config',\r\n\t})\r\n\tpublic removeRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/remove/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'edit-request-config',\r\n\t})\r\n\tpublic editRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/edit/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-request-config',\r\n\t})\r\n\tpublic addRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/add/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\r\n\t@state()\r\n\tprivate items: Array<TCartItem> = [];\r\n\r\n\t@state()\r\n\tprivate accessories: Array<TCartItem> = [];\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isGlobalLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate error: unknown;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\tprivate cartQuantity: CartQuantity = CartQuantity.getInstance();\r\n\tprivate cartCostLine: CartCostLine;\r\n\tpublic readonly status: BehaviorSubject<EComponentStatuses> = new BehaviorSubject<EComponentStatuses>(EComponentStatuses.LOADING);\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst CartCostLineEl: HTMLElement = document.querySelector('.js-cartCostLine');\r\n\t\tthis.cartCostLine = new CartCostLine(CartCostLineEl);\r\n\t}\r\n\r\n\tpublic updateData(): void {\r\n\t\tthis.getData({\r\n\t\t\twithGlobalLoading: true,\r\n\t\t});\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tlet template: TemplateResult;\r\n\t\tif (this.isLoading) {\r\n\t\t\ttemplate = this.getLoaderTemplate();\r\n\t\t} else if (this.error) {\r\n\t\t\ttemplate = this.getErrorTemplate();\r\n\t\t} else {\r\n\t\t\ttemplate = this.getContentTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart\">\r\n\t\t\t\t${template}\r\n\r\n\t\t\t\t<c-loader\r\n\t\t\t\t\tclass=\"c-edit-products-cart__global-loader ${this.isGlobalLoading ? 'c-edit-products-cart__global-loader_active' : ''}\"\r\n\t\t\t\t\t.active=\"${this.isGlobalLoading}\"\r\n\t\t\t\t\t.type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t.size=\"${ELoaderSize.MD}\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\tif (this.items.length) {\r\n\t\t\treturn html`\r\n\t\t\t\t${this.getItemsTemplate()}\r\n\t\t\t\t${this.getAccessoriesTemplate()}\r\n\t\t\t`\r\n\t\t}\r\n\t\treturn this.getEmptyTemplate()\r\n\t}\r\n\r\n\tprivate getItemsTemplate(): TemplateResult {\r\n\t\tconst accessoriesSkus = this.accessories.map(item => item.product.sku);\r\n\t\tconst filteredItems = this.items.filter(item => !accessoriesSkus.includes(item.product.sku));\r\n\r\n\t\tif (!filteredItems.length) {\r\n\t\t\treturn this.getEmptyTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<ul class=\"c-edit-products-cart__product-list\">\r\n\t\t\t\t${filteredItems.map(item => {\r\n\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t<li class=\"c-edit-products-cart__product-item\">\r\n\t\t\t\t\t\t\t<c-edit-products-cart-item .data=\"${item}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .onRemove=\"${() => this.removeItem(item)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .onDecrement=\"${() => this.editItem(item, ECartEditTypes.DECREMENT)}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .onIncrement=\"${() => this.editItem(item, ECartEditTypes.INCREMENT)}\">\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t`;\r\n\t\t\t\t})}\r\n\t\t\t</ul>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getAccessoriesTemplate(): TemplateResult {\r\n\t\tif (!this.accessories.length) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst accessoriesSkus = this.accessories.map(item => item.product.sku);\r\n\t\tconst selectedSkus = this.items.map(item => item.product.sku).filter(sku => accessoriesSkus.includes(sku));\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart__accessories\">\r\n\t\t\t\t<c-edit-products-cart-carousel-accessories .data=\"${this.accessories}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .selectedSkus=\"${selectedSkus}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t   .onChange=\"${this.handleChangeAccessories.bind(this)}\">\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getEmptyTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-result c-result_404\">\r\n\t\t\t\t<div class=\"c-result__icon\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_cart\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h5 class=\"c-result__title\">\r\n\t\t\t\t\t  \r\n\t\t\t\t</h5>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getLoaderTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-loader active\r\n\t\t\t\t\t  class=\"c-edit-products-cart__loader\"\r\n\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t  size=\"${ELoaderSize.MD}\">\r\n\t\t\t</c-loader>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"u-text-center u-py-30 u-px-20\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p class=\"u-mb-20\">   </p>\r\n\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleClickBtnReload}\">\r\n\t\t\t\t\t\r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickBtnReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate handleChangeAccessories(item: TCartItem, isAdd: boolean): void {\r\n\t\tif (isAdd) {\r\n\t\t\tthis.addItem(item);\r\n\t\t} else {\r\n\t\t\tthis.removeItem(item);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getData(options: { withGlobalLoading?: boolean, reloadOnEmpty?: boolean } = {}): void {\r\n\t\tif (this.isLoading || this.isGlobalLoading) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tif (options.withGlobalLoading) {\r\n\t\t\tthis.isGlobalLoading = true;\r\n\t\t} else {\r\n\t\t\tthis.isLoading = true;\r\n\t\t}\r\n\t\tconst {url, method} = this.getRequestConfig;\r\n\t\tconst data: TCartViewRequest = {};\r\n\t\tthis.error = null;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartViewResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.items = response?.data?.data?.items || [];\r\n\t\t\t\tthis.accessories = response?.data?.data?.accessories || [];\r\n\t\t\t\tif (options.withGlobalLoading) {\r\n\t\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (options.reloadOnEmpty) {\r\n\t\t\t\t\tthis.reloadOnEmpty();\r\n\t\t\t\t}\r\n\t\t\t\tthis.updatePriceInCostLine();\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\tif (options.withGlobalLoading) {\r\n\t\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t}\r\n\t\t\t\tthis.error = reject;\r\n\t\t\t\tthis.status.next(EComponentStatuses.ERROR);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tif (options.withGlobalLoading) {\r\n\t\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLoading = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updatePriceInCostLine(): void {\r\n\t\tconst totalPrice = MoneyFormatter.format(\r\n\t\t\tthis.getTotalPrice().toString(),\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_SUPERSCRIPT,\r\n\t\t)\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.FULL_PRICE, totalPrice);\r\n\t}\r\n\r\n\tprivate getTotalPrice(): number {\r\n\t\treturn this.items.reduce((previousValue, currentValue) => {\r\n\t\t\tconst {quantity, product: {price}} = currentValue;\r\n\t\t\treturn previousValue + (quantity * parseFloat(price))\r\n\t\t}, 0);\r\n\t}\r\n\r\n\tprivate reloadOnEmpty(): void {\r\n\t\tconst accessoriesSkus = this.accessories.map(item => item.product.sku);\r\n\t\tconst filteredItems = this.items.filter(item => !accessoriesSkus.includes(item.product.sku));\r\n\t\tif (filteredItems.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n\tprivate removeItem(item: TCartItem): void {\r\n\t\tconst {url, method} = this.removeRequestConfig;\r\n\t\tconst data: TCartRemoveRequest = {\r\n\t\t\tsku: item.product.sku,\r\n\t\t}\r\n\t\tthis.isGlobalLoading = true;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartRemoveResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\tthis.cartQuantity.update(response.data.data.cartItemCount);\r\n\t\t\t\tthis.getData({\r\n\t\t\t\t\twithGlobalLoading: true,\r\n\t\t\t\t\treloadOnEmpty: true,\r\n\t\t\t\t});\r\n\t\t\t\tthis.emitEventChange();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate editItem(item: TCartItem, type: ECartEditTypes): void {\r\n\t\tconst {url, method} = this.editRequestConfig;\r\n\t\tconst data: TCartEditRequest = {\r\n\t\t\tsku: item.product.sku,\r\n\t\t\ttype: type,\r\n\t\t};\r\n\r\n\t\tthis.isGlobalLoading = true;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartEditResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\tthis.cartQuantity.update(response.data.data.cartItemCount);\r\n\t\t\t\tthis.getData({\r\n\t\t\t\t\twithGlobalLoading: true,\r\n\t\t\t\t\treloadOnEmpty: true,\r\n\t\t\t\t});\r\n\t\t\t\tthis.emitEventChange();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate addItem(item: TCartItem): void {\r\n\t\tconst {url, method} = this.addRequestConfig;\r\n\t\tconst data: TCartAddRequest = {\r\n\t\t\tsku: item.product.sku,\r\n\t\t}\r\n\t\tthis.isGlobalLoading = true;\r\n\t\tthis.httpService\r\n\t\t\t.request<TCartAddResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: data,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\tthis.cartQuantity.update(response.data.data.cartItemCount);\r\n\t\t\t\tthis.getData({\r\n\t\t\t\t\twithGlobalLoading: true,\r\n\t\t\t\t\treloadOnEmpty: true,\r\n\t\t\t\t});\r\n\t\t\t\tthis.emitEventChange();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventChange(): void {\r\n\t\tconst event: CustomEvent = new CustomEvent('on-change');\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.status\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(status => {\r\n\t\t\t\tthis.emitEventOnStatusChange(status);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnStatusChange(status: EComponentStatuses): void {\r\n\t\tconst event: CustomEvent<TEditProductsCartStatusChangeEventDetail> = new CustomEvent('on-status-change', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstatus: status,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {isFunction} from \"@helpers/index\";\r\nimport {TDynamicAction} from \"@models/Action\";\r\nimport {TCartItem} from \"@models/Cart\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, state, property, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-edit-products-cart-item')\r\nexport default class EditProductsCartItemComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic data: TCartItem;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-remove'\r\n\t})\r\n\tpublic onRemove: TDynamicAction<boolean>;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-decrement',\r\n\t})\r\n\tpublic onDecrement: TDynamicAction<boolean>;\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-increment',\r\n\t})\r\n\tpublic onIncrement: TDynamicAction<boolean>;\r\n\r\n\t@state()\r\n\tprivate isRemoving: boolean = false;\r\n\r\n\t@state()\r\n\tprivate isChanging: boolean = false;\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tif (!this.data) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst {availability, product: {img, price, name}} = this.data;\r\n\r\n\t\tconst notAvailableClass = 'c-edit-products-cart-item_not_available';\r\n\r\n\t\tconst formatterPrice = MoneyFormatter.format(\r\n\t\t\tprice,\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart-item ${availability ? '' : notAvailableClass}\">\r\n\t\t\t\t<div class=\"c-edit-products-cart-item__img-box\">\r\n\t\t\t\t\t<img data-src=\"${img}\"\r\n\t\t\t\t\t\t alt=\"pic\"\r\n\t\t\t\t\t\t class=\"c-edit-products-cart-item__img u-shimmer js-lazyLoadImage\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-edit-products-cart-item__body\">\r\n\t\t\t\t\t<h6 class=\"c-edit-products-cart-item__name\">${name}</h6>\r\n\t\t\t\t\t<p class=\"c-edit-products-cart-item__price\">${unsafeHTML(formatterPrice)}</p>\r\n\t\t\t\t\t${this.getBtnRemoveTemplate()}\r\n\r\n\t\t\t\t\t<div class=\"c-edit-products-cart-item__controls\">\r\n\t\t\t\t\t\t${this.getRangeOrNotAvailableTemplate()}\r\n\t\t\t\t\t\t${this.getBtnRemoveTemplate()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t${this.getRangeOrNotAvailableTemplate()}\r\n\t\t\t\t<p class=\"c-edit-products-cart-item__price\">${unsafeHTML(formatterPrice)}</p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getBtnRemoveTemplate(): TemplateResult {\r\n\t\tconst removingClass = 'c-edit-products-cart-item__remove_active';\r\n\r\n\t\treturn html`\r\n\t\t\t<button\r\n\t\t\t\tclass=\"c-edit-products-cart-item__remove ${this.isRemoving ? removingClass : ''}\"\r\n\t\t\t\t?disabled=\"${this.isRemoving}\"\r\n\t\t\t\t@click=\"${this.handleClickRemove}\">\r\n\t\t\t\t<span></span>\r\n\t\t\t\t<i class=\"o-icon o-icon_garbage-can-filled c-edit-products-cart-item__remove-icon\"></i>\r\n\t\t\t\t<i class=\"o-icon o-icon_loader-line-filled c-edit-products-cart-item__remove-loader\"></i>\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getRangeTemplate(): TemplateResult {\r\n\t\tconst {quantity, min, max} = this.data;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart-item__range\">\r\n\t\t\t\t<c-range-count .min=\"${min}\"\r\n\t\t\t\t\t\t\t   .max=\"${max}\"\r\n\t\t\t\t\t\t\t   .value=\"${quantity}\"\r\n\t\t\t\t\t\t\t   .onDecrement=\"${this.onDecrement}\"\r\n\t\t\t\t\t\t\t   .onIncrement=\"${this.onIncrement}\"/>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate async handleClickRemove(event: Event): Promise<void> {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.isRemoving) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isFunction(this.onRemove)) {\r\n\t\t\tthis.isRemoving = true;\r\n\t\t\tconst res = await this.onRemove();\r\n\t\t\tif (res) {\r\n\t\t\t\tthis.onRemove();\r\n\t\t\t}\r\n\t\t\tthis.isRemoving = false;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getRangeOrNotAvailableTemplate(): TemplateResult {\r\n\t\tconst {availability} = this.data;\r\n\r\n\t\tif (availability) {\r\n\t\t\treturn this.getRangeTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<p class=\"c-edit-products-cart-item__not-available\">  </p>\r\n\t\t`;\r\n\t}\r\n}\r\n","import {TCartItem} from \"@models/Cart\";\r\nimport Carousel from \"@modules/carousel/Carousel\";\r\nimport {ICarousel} from \"@modules/carousel/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\n\r\n@customElement('c-edit-products-cart-carousel-accessories')\r\nexport default class EditProductsCartCarouselAccessoriesComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Array,\r\n\t})\r\n\tdata: Array<TCartItem> = [];\r\n\r\n\t@property({\r\n\t\ttype: Array\r\n\t})\r\n\tselectedSkus: Array<string> = [];\r\n\r\n\t@property({\r\n\t\ttype: Function\r\n\t})\r\n\tonChange: (item: TCartItem, checked: boolean) => boolean | Promise<boolean>;\r\n\r\n\t@query('.c-edit-products-cart-carousel-accessories')\r\n\tprivate containerEl: HTMLElement;\r\n\r\n\tprivate carousel: ICarousel;\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.carousel = new Carousel(this.containerEl);\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart-carousel-accessories\" data-carousel-config-name=\"cartAccessories\">\r\n\t\t\t\t<header class=\"c-edit-products-cart-carousel-accessories__header\">\r\n\t\t\t\t\t<h4 class=\"c-edit-products-cart-carousel-accessories__title\">   </h4>\r\n\t\t\t\t\t<div class=\"c-edit-products-cart-carousel-accessories__controls js-carouselControls\">\r\n\t\t\t\t\t\t<button class=\"c-edit-products-cart-carousel-accessories__control js-carouselBtnPrev\">\r\n\t\t\t\t\t\t\t<i class=\"o-icon o-icon_angle-left-filled\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button class=\"c-edit-products-cart-carousel-accessories__control js-carouselBtnNext\">\r\n\t\t\t\t\t\t\t<i class=\"o-icon o-icon_angle-right-filled\"></i>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\r\n\t\t\t\t<div class=\"c-edit-products-cart-carousel-accessories__carousel-viewport js-carouselViewport\">\r\n\t\t\t\t\t<div class=\"c-edit-products-cart-carousel-accessories__carousel-container js-carouselContainer\">\r\n\t\t\t\t\t\t${this.data.map(item => {\r\n\t\t\t\t\t\t\tconst checked = this.selectedSkus.includes(item.product.sku);\r\n\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t\t<div class=\"c-edit-products-cart-carousel-accessories__carousel-item js-carouselItem\">\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"selected-accessories\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   class=\"u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${item.product.sku}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${checked}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .onChange=\"${() => this.handleChange(item, checked)}\">\r\n\t\t\t\t\t\t\t\t\t\t<c-edit-products-cart-accessory-card .data=\"${item}\">\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate async handleChange(item: TCartItem, checked: boolean): Promise<boolean> {\r\n\t\treturn this.onChange(item, !checked);\r\n\t}\r\n}\r\n","import {TCartItem} from \"@models/Cart\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\n\r\n@customElement('c-edit-products-cart-accessory-card')\r\nexport default class EditProductsCartAccessoryCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tpublic data: TCartItem;\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst {product: {img, name, price}} = this.data;\r\n\r\n\t\tconst formattedPrice: string = MoneyFormatter.format(\r\n\t\t\tprice,\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-edit-products-cart-accessory-card\">\r\n\t\t\t\t<div class=\"c-edit-products-cart-accessory-card__img-box\">\r\n\t\t\t\t\t<img data-src=\"${img}\"\r\n\t\t\t\t\t\t alt=\"pic\"\r\n\t\t\t\t\t\t class=\"c-edit-products-cart-accessory-card__img u-shimmer js-lazyLoadImage\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 class=\"c-edit-products-cart-accessory-card__name\">${name}</h4>\r\n\t\t\t\t<p class=\"c-edit-products-cart-accessory-card__price\">${unsafeHTML(formattedPrice)}</p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","export enum ELoanTypes {\r\n\tINSTALLMENT_PLAN = 'INSTALLMENT_PLAN',\r\n\tCREDIT = 'CREDIT',\r\n}\r\n","import {\r\n\tTPaymentMethodStatusChange,\r\n\tTPaymentMethodStatusChangeEventDetail\r\n} from \"@components/payment-method/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {property, PropertyValues} from \"lit-element\";\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\n\r\nexport default class PaymentMethodComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-status-change',\r\n\t})\r\n\tpublic onStatusChange: TPaymentMethodStatusChange;\r\n\r\n\tpublic readonly status: BehaviorSubject<EComponentStatuses>;\r\n\r\n\tconstructor(initStatus: EComponentStatuses) {\r\n\t\tsuper();\r\n\t\tthis.status = new BehaviorSubject<EComponentStatuses>(initStatus);\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprotected attachEvent(): void {\r\n\t\tthis.attachEventOnStatusChange();\r\n\t}\r\n\r\n\tpublic updateData(): void {\r\n\r\n\t}\r\n\r\n\tprivate attachEventOnStatusChange(): void {\r\n\t\tthis.status\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(status => {\r\n\t\t\t\tthis.emitEventOnStatusChange(status);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnStatusChange(status: EComponentStatuses = EComponentStatuses.READY): void {\r\n\t\tconst event: CustomEvent<TPaymentMethodStatusChangeEventDetail> = new CustomEvent('on-status-change', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstatus: status,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import {EBtnSize, EBtnType} from \"@components/btn/model\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {\r\n\tTPaymentMethodLoanPeriod,\r\n\tTPaymentMethodLoanPeriodCredit,\r\n\tTPaymentMethodLoanResponse\r\n} from \"@components/payment-method/loan/model\";\r\nimport PaymentMethodComponent from \"@components/payment-method/PaymentMethodComponent\";\r\nimport {ETermCardSizes} from \"@components/term-card/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {pluralize} from \"@helpers/index\";\r\nimport {ELoanTypes} from \"@models/Loan\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport {customElement, html, property, PropertyValues, state, TemplateResult} from \"lit-element\";\r\nimport {unsafeHTML} from \"lit-html/directives/unsafe-html\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\n\r\n@customElement('c-payment-method-loan')\r\nexport default class PaymentMethodLoanComponent extends PaymentMethodComponent {\r\n\t@property({\r\n\t\ttype: String,\r\n\t})\r\n\tpublic type: ELoanTypes;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-request-config',\r\n\t})\r\n\tpublic getRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/cart/payment-method/loan',\r\n\t\tmethod: \"GET\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Number,\r\n\t\tattribute: 'init-selected-period',\r\n\t})\r\n\tpublic initSelectedPeriod: number;\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate error: unknown;\r\n\r\n\t@state()\r\n\tprivate periods: Array<TPaymentMethodLoanPeriod> = [];\r\n\r\n\t@state()\r\n\tprivate selectedPeriod: TPaymentMethodLoanPeriod;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\r\n\tprivate isFirstLoaded: boolean;\r\n\r\n\tpublic updateData(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\r\n\t\tif (name === 'type') {\r\n\t\t\tthis.getData();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tthis.isLoading = true;\r\n\t\tthis.error = null;\r\n\t\tconst {url, method} = this.getRequestConfig;\r\n\t\tthis.httpService\r\n\t\t\t.request<TPaymentMethodLoanResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tparams: {\r\n\t\t\t\t\ttype: this.type\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.periods = response.data.data.periods || [];\r\n\t\t\t\tthis.setFirstSelectedPeriod();\r\n\t\t\t\tthis.isFirstLoaded = true;\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\t\t\t\tthis.error = reject;\r\n\t\t\t\tthis.status.next(EComponentStatuses.ERROR);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate setFirstSelectedPeriod(): void {\r\n\t\tlet period;\r\n\t\tconst firstPeriod = this.periods?.[0];\r\n\t\tconst updatedCurrentSelectedPeriod = this.periods.find(item => item.value === this.selectedPeriod?.value);\r\n\t\tif (!this.isFirstLoaded) {\r\n\t\t\tperiod = this.initSelectedPeriod ? this.periods.find(item => item.value == this.initSelectedPeriod) : firstPeriod;\r\n\t\t} else {\r\n\t\t\tperiod = this.selectedPeriod ? updatedCurrentSelectedPeriod : firstPeriod;\r\n\t\t}\r\n\t\tthis.selectedPeriod = period;\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tlet template: TemplateResult;\r\n\r\n\t\tif (this.isLoading) {\r\n\t\t\ttemplate = this.getLoaderTemplate();\r\n\t\t} else if (this.error) {\r\n\t\t\ttemplate = this.getErrorTemplate();\r\n\t\t} else {\r\n\t\t\ttemplate = this.getContentTemplate();\r\n\t\t}\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-payment-method-loan\">\r\n\t\t\t\t${template}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getContentTemplate(): TemplateResult {\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\tthis.selectedPeriod?.pricePerMonth || '0',\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\t\tconst price = MoneyFormatter.format(\r\n\t\t\t'0',\r\n\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t);\r\n\t\tconst overpayment = this.type === ELoanTypes.CREDIT\r\n\t\t\t? (<TPaymentMethodLoanPeriodCredit>this.selectedPeriod)?.overpayment ?? 0\r\n\t\t\t: 0;\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-payment-method-loan__periods\">\r\n\t\t\t\t<h4 class=\"c-payment-method-loan__periods-title\">\r\n\t\t\t\t\t ${this.type === ELoanTypes.CREDIT ? '' : ''}\r\n\t\t\t\t</h4>\r\n\t\t\t\t<ul class=\"c-payment-method-loan__periods-list\">\r\n\t\t\t\t\t${this.periods.map(period =>\r\n\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t<li class=\"c-payment-method-loan__periods-item\">\r\n\t\t\t\t\t\t\t\t<c-toggle-card type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t   name=\"period\"\r\n\t\t\t\t\t\t\t\t\t\t\t   class=\"u-w-100 u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t   .value=\"${period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t   .pricePerMonth=\"${period.pricePerMonth}\"\r\n\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${this.selectedPeriod?.value == period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${(event) => this.handleClickPeriod(event, period)}\">\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclass=\"u-w-100 u-h-100 u-d-flex u-align-items-center u-justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t<c-term-card .size=\"${ETermCardSizes.MEDIUM}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t .data=\"${{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t value: period.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t title: pluralize(period.value, '', '', ''),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t }}\">\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"c-payment-method-loan__cost\">\r\n\t\t\t\t<div class=\"c-payment-method-loan__cost-item\">\r\n\t\t\t\t\t<h4 class=\"c-payment-method-loan__cost-title\"> </h4>\r\n\t\t\t\t\t<div class=\"c-payment-method-loan__cost-value\">\r\n\t\t\t\t\t\t${unsafeHTML(pricePerMonth)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-payment-method-loan__cost-item\">\r\n\t\t\t\t\t<h4 class=\"c-payment-method-loan__cost-title\">  </h4>\r\n\t\t\t\t\t<div class=\"c-payment-method-loan__cost-value\">\r\n\t\t\t\t\t\t${unsafeHTML(price)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t${this.type === ELoanTypes.CREDIT\r\n\t\t\t\t\t? html`\r\n\t\t\t\t\t\t<div class=\"c-payment-method-loan__cost-item\">\r\n\t\t\t\t\t\t\t<h4 class=\"c-payment-method-loan__cost-title\"></h4>\r\n\t\t\t\t\t\t\t<div class=\"c-payment-method-loan__cost-value\">\r\n\t\t\t\t\t\t\t\t${overpayment}\r\n\t\t\t\t\t\t\t\t<sup>%</sup>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t`\r\n\t\t\t\t\t: null\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getLoaderTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-loader class=\"c-payment-method-loan__loader\"\r\n\t\t\t\t\t  active\r\n\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t  size=\"${ELoaderSize.MD}\">\r\n\t\t\t</c-loader>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-payment-method-loan__retry\">\r\n\t\t\t\t<h4>     !</h4>\r\n\t\t\t\t<p class=\"u-mb-20\">   </p>\r\n\t\t\t\t<c-btn type=\"${EBtnType.PRIMARY}\"\r\n\t\t\t\t\t   size=\"${EBtnSize.MD}\"\r\n\t\t\t\t\t   @click=\"${this.handleClickBtnReload}\">\r\n\t\t\t\t\t\r\n\t\t\t\t</c-btn>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickBtnReload(event: Event): void {\r\n\t\tevent.preventDefault();\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate handleClickPeriod(event: CustomEvent, period: TPaymentMethodLoanPeriod): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedPeriod = period;\r\n\t}\r\n}\r\n","export enum EPaymentMethodTypes {\r\n\tINSTALLMENT_PLAN = 'INSTALLMENT_PLAN',\r\n\tCREDIT = 'CREDIT',\r\n\tFULL_PRICE = 'FULL_PRICE',\r\n}\r\n\r\n","import {customElement, html, PropertyValues, queryAsync, state, TemplateResult} from \"lit-element\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {EPaymentMethodTypes} from \"@models/PaymentMethod\";\r\nimport PaymentMethodComponent from \"@components/payment-method/PaymentMethodComponent\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport {TPaymentMethodStatusChangeEventDetail} from \"@components/payment-method/model\";\r\n\r\n@customElement('c-payment-method-select')\r\nexport default class PaymentMethodSelectComponent extends PaymentMethodComponent {\r\n\tprivate ATTR_ITEM_DATA: string = 'item-data';\r\n\r\n\t@state()\r\n\tprivate items: Array<ToggleCardComponent> = [];\r\n\r\n\t@state()\r\n\tprivate selected: EPaymentMethodTypes;\r\n\r\n\t@queryAsync('[payment-method]')\r\n\tprivate paymentMethod: Promise<PaymentMethodComponent>;\r\n\r\n\tpublic updateData(): void {\r\n\t\tthis.paymentMethod\r\n\t\t\t.then(item => {\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\titem.updateData();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tthis.items = this.getSlotList('item') as Array<ToggleCardComponent>;\r\n\t\tthis.setFirstSelected();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprotected update(changedProperties: PropertyValues) {\r\n\t\tsuper.update(changedProperties);\r\n\r\n\t\tif (changedProperties.has('selected')) {\r\n\t\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\t\tthis.updateStatusOnPaymentMethod();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-payment-method-select\">\r\n\t\t\t\t<ul class=\"c-payment-method-select__list\">\r\n\t\t\t\t\t${this.items.map(item => {\r\n\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t<li class=\"c-payment-method-select__item\">\r\n\t\t\t\t\t\t\t\t${item}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t`\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ul>\r\n\t\t\t\t${this.getItemContent()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getItemContent(): TemplateResult {\r\n\t\tlet template: TemplateResult;\r\n\t\tconst itemData = this.getItemData(this.items.find(item => item.value === this.selected));\r\n\t\tswitch (this.selected) {\r\n\t\t\tcase EPaymentMethodTypes.CREDIT:\r\n\t\t\t\ttemplate = html`\r\n\t\t\t\t\t<div class=\"u-d-none\"></div>\r\n\t\t\t\t\t<c-payment-method-loan payment-method\r\n\t\t\t\t\t\t\t\t\t\t   .initSelectedPeriod=\"${itemData['init-selected-period']}\"\r\n\t\t\t\t\t\t\t\t\t\t   .getRequestConfig=\"${itemData['get-request-config']}\"\r\n\t\t\t\t\t\t\t\t\t\t   type=\"${this.selected}\">\r\n\t\t\t\t`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase EPaymentMethodTypes.INSTALLMENT_PLAN:\r\n\t\t\t\ttemplate = html`\r\n\t\t\t\t\t<c-payment-method-loan payment-method\r\n\t\t\t\t\t\t\t\t\t\t   .initSelectedPeriod=\"${itemData['init-selected-period']}\"\r\n\t\t\t\t\t\t\t\t\t\t   .getRequestConfig=\"${itemData['get-request-config']}\"\r\n\t\t\t\t\t\t\t\t\t\t   type=\"${this.selected}\">\r\n\t\t\t\t`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase EPaymentMethodTypes.FULL_PRICE:\r\n\t\t\tdefault:\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-payment-method-select__content\">\r\n\t\t\t\t${template}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected attachEvent(): void {\r\n\t\tsuper.attachEvent();\r\n\t\tthis.items\r\n\t\t\t.forEach(item => {\r\n\t\t\t\tfromEvent(item, 'on-change')\r\n\t\t\t\t\t.subscribe(event => {\r\n\t\t\t\t\t\tif (!item.checked) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.selected = item.value as EPaymentMethodTypes;\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateStatusOnPaymentMethod(): void {\r\n\t\tif (this.selected === EPaymentMethodTypes.FULL_PRICE) {\r\n\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.paymentMethod\r\n\t\t\t.then(item => {\r\n\t\t\t\tif (!item) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfromEvent<CustomEvent<TPaymentMethodStatusChangeEventDetail>>(item, 'on-status-change')\r\n\t\t\t\t\t.subscribe(event => {\r\n\t\t\t\t\t\tthis.status.next(event.detail.status);\r\n\t\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate setFirstSelected(): void {\r\n\t\tconst checkedItem = this.items.find(item => item.checked);\r\n\t\tif (!checkedItem) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selected = checkedItem.value as EPaymentMethodTypes;\r\n\t}\r\n\r\n\tprivate getItemData(item: HTMLElement): object {\r\n\t\tconst strData = item?.getAttribute(this.ATTR_ITEM_DATA);\r\n\t\tlet data = {};\r\n\t\ttry {\r\n\t\t\tdata = JSON.parse(strData) ?? {};\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n","import {TProduct} from \"@models/Product\";\r\n\r\nexport type TInsurance = TInsuranceLife | TInsuranceCovid | TInsuranceDevice\r\n\r\nexport enum EInsuranceTypes {\r\n\tLIFE = 'LIFE',\r\n\tCOVID = 'COVID',\r\n\tDEVICE = 'PHONE',\r\n}\r\n\r\nexport type TInsuranceBase = {\r\n\tid: number\r\n\tname: string\r\n\tshortDescription: string\r\n\tdescription?: string\r\n\tprice: string\r\n\tpricePerMonth: string\r\n\tpayoutPrice: string\r\n}\r\n\r\nexport type TInsuranceLife = TInsuranceBase & {\r\n\ttype: EInsuranceTypes.LIFE\r\n}\r\nexport type TInsuranceCovid = TInsuranceBase & {\r\n\ttype: EInsuranceTypes.COVID\r\n}\r\nexport type TInsuranceDevice = TInsuranceBase & {\r\n\ttype: EInsuranceTypes.DEVICE\r\n\tperiods?: Array<TInsurancePeriod>\r\n\tproducts?: Array<TProduct>\r\n}\r\n\r\nexport type TInsurancePeriod = {\r\n\tvalue: number\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, query, queryAsync, state, TemplateResult} from \"lit-element\";\r\nimport {ETariffCardCostItemSize, TTariffCard} from \"@components/tariff-card/model\";\r\nimport ModalComponent from \"@components/modal/ModalComponent\";\r\nimport {EInsuranceTypes, TInsurance, TInsuranceDevice} from \"@models/Insurance\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport {ELoaderSize, ELoaderType} from \"@components/loader/model\";\r\nimport {objectToFormData} from \"@helpers/index\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {\r\n\tESelectInsuranceMods,\r\n\tTSelectInsuranceInitSelected,\r\n\tTSelectInsuranceInitSelectedBase,\r\n\tTSelectInsuranceInitSelectedDevice,\r\n\tTSelectInsuranceOnChangeEventDetail,\r\n\tTSelectInsuranceSelected,\r\n\tTSelectInsuranceSelectedDevice,\r\n\tTSelectInsuranceStatusChangeEventDetail\r\n} from \"@components/select-insurance/model\";\r\nimport InsuranceDeviceTypeComponent from \"@components/select-insurance/device/InsuranceDeviceTypeComponent\";\r\n\r\n@customElement('c-select-insurance')\r\nexport default class SelectInsuranceComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'add-data-get'\r\n\t})\r\n\tpublic addDataGet: object = {};\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'get-request-config',\r\n\t})\r\n\tpublic getRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/get-insurance',\r\n\t\tmethod: \"GET\",\r\n\t}\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'init-selected',\r\n\t})\r\n\tpublic initSelected: TSelectInsuranceInitSelected;\r\n\r\n\t@property({\r\n\t\treflect: true,\r\n\t\ttype: Array,\r\n\t})\r\n\tpublic mods: Array<ESelectInsuranceMods> = [];\r\n\r\n\t@query('[product-bundler-option-insurance-detail-modal]')\r\n\tprivate modal: ModalComponent;\r\n\r\n\t@state()\r\n\tprivate _selected: TSelectInsuranceSelected = [];\r\n\r\n\t@state()\r\n\tprivate isLoading: boolean = false;\r\n\r\n\t@state()\r\n\tprivate error: unknown;\r\n\r\n\t@state()\r\n\tprivate formattedData: Array<TTariffCard> = [];\r\n\r\n\t@query('[toggle-skip]')\r\n\tprivate toggleSkipEl: ToggleCardComponent;\r\n\r\n\t@queryAsync('[insurance-device-type]')\r\n\tprivate insuranceDeviceType: Promise<InsuranceDeviceTypeComponent>;\r\n\r\n\tprivate data: Array<TInsurance> = [];\r\n\r\n\tprivate isFirstLoaded: boolean;\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\tpublic readonly status: BehaviorSubject<EComponentStatuses> = new BehaviorSubject<EComponentStatuses>(EComponentStatuses.LOADING);\r\n\r\n\tget selected(): TSelectInsuranceSelected {\r\n\t\treturn [\r\n\t\t\t...this._selected\r\n\t\t];\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.getData();\r\n\r\n\t\tconst event = new CustomEvent<TSelectInsuranceOnChangeEventDetail>('first-updated', {\r\n\t\t\tdetail: this._selected,\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate getData(): void {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isLoading = true;\r\n\t\tthis.error = null;\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tconst {url, method} = this.getRequestConfig;\r\n\t\tconst formData: FormData = objectToFormData(this.addDataGet || {});\r\n\t\tthis.httpService\r\n\t\t\t.request<Array<TInsurance>>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.data = response.data.data;\r\n\t\t\t\tthis.formattedData = this.formatData(this.data);\r\n\t\t\t\tthis.setInitSelected();\r\n\t\t\t\tthis.isFirstLoaded = false;\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t})\r\n\t\t\t.catch((reject) => {\r\n\t\t\t\tthis.error = reject;\r\n\t\t\t\tthis.status.next(EComponentStatuses.ERROR);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate setInitSelected(): void {\r\n\t\tif (!this.data.length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst initSelected = this.initSelected;\r\n\t\tif (!initSelected || !Object.entries(initSelected).length) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._selected = this.initSelected.map(initSelect => {\r\n\t\t\tconst insurance = this.data.find(item => item.id === initSelect.id);\r\n\t\t\tif (this.isInitSelectedDevice(initSelect, insurance)) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tinsurance: insurance,\r\n\t\t\t\t\tperiod: initSelect.period,\r\n\t\t\t\t\tproducts: initSelect.productSkus?.filter(sku => {\r\n\t\t\t\t\t\treturn Boolean((insurance as TInsuranceDevice).products.find(item => item.sku == sku));\r\n\t\t\t\t\t}) || [],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tinsurance: insurance,\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate isInitSelectedDevice(initSelected: TSelectInsuranceInitSelectedBase | TSelectInsuranceInitSelectedDevice, insurance: TInsurance): initSelected is TSelectInsuranceInitSelectedDevice {\r\n\t\treturn initSelected.id === insurance.id && insurance.type === EInsuranceTypes.DEVICE;\r\n\t}\r\n\r\n\tprivate formatData(data: Array<TInsurance>): Array<TTariffCard> {\r\n\t\treturn data?.map(item => {\r\n\t\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\t\titem.pricePerMonth,\r\n\t\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT\r\n\t\t\t);\r\n\t\t\tconst payoutPrice = MoneyFormatter.format(\r\n\t\t\t\titem.payoutPrice,\r\n\t\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t\t);\r\n\t\t\tconst fullPrice = MoneyFormatter.format(\r\n\t\t\t\titem.price,\r\n\t\t\t\tEMoneyFormatterTypes.SYMBOL_SUPERSCRIPT\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\tid: item.id,\r\n\t\t\t\ttype: item.type,\r\n\t\t\t\ttitle: item.name,\r\n\t\t\t\tsubTitle: item.shortDescription,\r\n\t\t\t\tprepend: this.getPrependTemplate(item),\r\n\t\t\t\tinfoTitle: '  ',\r\n\t\t\t\tcosts: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: pricePerMonth,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: payoutPrice,\r\n\t\t\t\t\t\tsubTitle: ' ',\r\n\t\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: fullPrice,\r\n\t\t\t\t\t\tsubTitle: ' ',\r\n\t\t\t\t\t\tsize: ETariffCardCostItemSize.SM,\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}) || [];\r\n\t}\r\n\r\n\tprivate getPrependTemplate(item: TInsurance): TemplateResult {\r\n\t\tif (!item.description) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn html`\r\n\t\t\t<button class=\"c-btn-clear u-color-secondary\"\r\n\t\t\t\t\t@click=\"${this.handleBtnOpenDetail(item)}\">\r\n\t\t\t\t\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleBtnOpenDetail(item: TInsurance) {\r\n\t\treturn (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.modal.title = item.name;\r\n\t\t\tthis.modal.setBody(\r\n\t\t\t\t`\r\n\t\t\t\t\t<div class=\"s-wysiwyg\">\r\n\t\t\t\t\t\t${item.description}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t`\r\n\t\t\t)\r\n\t\t\tthis.modal.open();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): unknown {\r\n\t\tif (this.isLoading) {\r\n\t\t\treturn this.getLoaderTemplate();\r\n\t\t}\r\n\r\n\t\tif (this.error) {\r\n\t\t\treturn this.getErrorTemplate();\r\n\t\t}\r\n\r\n\t\tif (!this.formattedData.length) {\r\n\t\t\treturn this.getNotDataTemplate();\r\n\t\t}\r\n\r\n\t\treturn this.getContentTemplate();\r\n\t}\r\n\r\n\tprivate getLoaderTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-loader active\r\n\t\t\t\t\t  type=\"${ELoaderType.PRIMARY}\"\r\n\t\t\t\t\t  size=\"${ELoaderSize.MD}\"\r\n\t\t\t\t\t  class=\"c-product-basket-bundler__loader\">\r\n\t\t\t</c-loader>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getErrorTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<c-network-error @on-click-reload=\"${this.handleBtnClickReload}\">\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleBtnClickReload(): void {\r\n\t\tthis.getData();\r\n\t}\r\n\r\n\tprivate getNotDataTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-result c-result_404\">\r\n\t\t\t\t<div class=\"c-result__icon\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_close\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h5 class=\"c-result__title\">\r\n\t\t\t\t\t ,       \r\n\t\t\t\t</h5>\r\n\t\t\t\t<p class=\"c-result__sub-title\">\r\n\t\t\t\t\t     !\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getMods(): string {\r\n\t\tconst mods: Array<string> = [...this.mods];\r\n\t\treturn mods\r\n\t\t\t.filter(Boolean)\r\n\t\t\t.map(mod => `c-select-insurance_${mod}`)\r\n\t\t\t.join(' ');\r\n\t}\r\n\r\n\tprotected getContentTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-select-insurance ${this.getMods()}\">\r\n\t\t\t\t<ul class=\"c-select-insurance__list\">\r\n\t\t\t\t\t${this.formattedData.map(insurance => {\r\n\t\t\t\t\t\t\tconst item = this._selected.find(item => item.insurance.id == insurance.id);\r\n\t\t\t\t\t\t\tconst isSelected = Boolean(item);\r\n\t\t\t\t\t\t\tconst originalInsurance = this.data.find(item => item.id === insurance.id);\r\n\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t\t<li class=\"c-select-insurance__item\">\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t   class=\"c-select-insurance__item-card\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"insurance\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${insurance.id}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .insuranceType=\"${insurance.type}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${isSelected}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${this.handleChange}\">\r\n\t\t\t\t\t\t\t\t\t\t<c-tariff-card .data=\"${insurance}\">\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\r\n\t\t\t\t\t\t\t\t\t${\r\n\t\t\t\t\t\t\t\t\t\toriginalInsurance.type === EInsuranceTypes.DEVICE && isSelected\r\n\t\t\t\t\t\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"c-select-insurance__item-additional\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t${this.getDeviceTypeTemplate(originalInsurance, item as TSelectInsuranceSelectedDevice)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t${this.getSkipTemplate()}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<c-modal product-bundler-option-insurance-detail-modal>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getDeviceTypeTemplate(insurance: TInsuranceDevice, syncSelectedData: TSelectInsuranceSelectedDevice): TemplateResult {\r\n\t\tconst initSelected = this.initSelected?.find(item => item.id == insurance.id) || {};\r\n\r\n\t\treturn html`\r\n\t\t\t<c-insurance-device-type insurance-device-type\r\n\t\t\t\t\t\t\t\t\t .data=\"${insurance}\"\r\n\t\t\t\t\t\t\t\t\t .syncSelectedData=\"${syncSelectedData}\"\r\n\t\t\t\t\t\t\t\t\t .emitEventChange=\"${() => this.emitEventOnChange()}\"\r\n\t\t\t\t\t\t\t\t\t .initSelected=\"${initSelected}\">\r\n\t\t`\r\n\t}\r\n\r\n\tprivate getSkipTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<li class=\"c-select-insurance__item\">\r\n\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t   class=\"c-select-insurance__item-card\"\r\n\t\t\t\t\t\t\t   toggle-skip\r\n\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t   name=\"insurance\"\r\n\t\t\t\t\t\t\t   .value=\"${null}\"\r\n\t\t\t\t\t\t\t   @on-change=\"${this.handleClickSkip}\">\r\n\t\t\t\t\t<div class=\"u-h-100 u-d-flex u-flex-row u-align-items-center\">\r\n\t\t\t\t\t\t<p>    </p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</c-toggle-card>\r\n\t\t\t</li>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickSkip(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._selected = [];\r\n\t}\r\n\r\n\tprivate handleChange(event: Event): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tconst id: number = parseFloat(toggle.value)\r\n\t\tif (toggle.checked) {\r\n\t\t\tconst insurance = this.data.find(item => item.id == id);\r\n\t\t\tconst hasSuchType = this._selected.find(item => item.insurance.type === insurance.type);\r\n\t\t\tthis.toggleSkipEl.checked = false;\r\n\r\n\t\t\tif (hasSuchType) {\r\n\t\t\t\tthis._selected = [\r\n\t\t\t\t\t...this._selected.filter(item => item.insurance.type !== insurance.type),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinsurance: insurance\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tthis._selected = [\r\n\t\t\t\t\t...this._selected,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinsurance: insurance\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis._selected = this._selected.filter(item => item.insurance.id !== id);\r\n\t\t}\r\n\t\tthis.emitEventOnChange();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.attachEventOnStatusChange();\r\n\t}\r\n\r\n\tprivate attachEventOnStatusChange(): void {\r\n\t\tthis.status\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(status => {\r\n\t\t\t\tthis.emitEventOnStatusChange(status);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnChange(): void {\r\n\t\tconst event = new CustomEvent<TSelectInsuranceOnChangeEventDetail>('on-change', {\r\n\t\t\tdetail: this._selected,\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate emitEventOnStatusChange(status: EComponentStatuses): void {\r\n\t\tconst event = new CustomEvent<TSelectInsuranceStatusChangeEventDetail>('on-status-change', {\r\n\t\t\tdetail: {\r\n\t\t\t\tstatus: status,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, state, TemplateResult} from \"lit-element\";\r\nimport {TInsuranceDevice, TInsurancePeriod} from \"@models/Insurance\";\r\nimport {ETermCardSizes} from \"@components/term-card/model\";\r\nimport {isFunction, pluralize} from \"@helpers/index\";\r\nimport ToggleCardComponent from \"@components/toggle-card/ToggleCardComponent\";\r\nimport {TInsuranceDeviceTypeComponentInitSelected} from \"@components/select-insurance/device/model\";\r\nimport {TProduct} from \"@models/Product\";\r\nimport {TSelectInsuranceSelectedDevice} from \"@components/select-insurance/model\";\r\n\r\n@customElement('c-insurance-device-type')\r\nexport default class InsuranceDeviceTypeComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tpublic data: TInsuranceDevice;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'init-selected',\r\n\t})\r\n\tpublic initSelected: TInsuranceDeviceTypeComponentInitSelected;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic syncSelectedData: TSelectInsuranceSelectedDevice;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\treflect: true,\r\n\t})\r\n\tpublic emitEventChange: () => void;\r\n\r\n\t@state()\r\n\tprivate selectedPeriod: TInsurancePeriod;\r\n\r\n\t@state()\r\n\tprivate selectedProducts: Array<TProduct> = [];\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t}\r\n\r\n\tprotected beforeFirstRendered() {\r\n\t\tsuper.beforeFirstRendered();\r\n\t\tthis.setInitSelected();\r\n\t}\r\n\r\n\tprivate setFirstSelectedPeriod(): void {\r\n\t\tthis.selectedPeriod = this.data.periods?.[0];\r\n\t\tthis.syncSelectedData.period = this.selectedPeriod.value;\r\n\t}\r\n\r\n\tprivate setInitSelected(): void {\r\n\t\tconst initSelected = this.initSelected;\r\n\t\tif (!initSelected || !Object.entries(initSelected).length) {\r\n\t\t\tthis.setFirstSelectedPeriod();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedPeriod = this.data.periods.find(item => item.value === initSelected.period);\r\n\t\tthis.selectedProducts = this.data.products.length\r\n\t\t\t? initSelected.productSkus?.map(sku => {\r\n\t\t\t\treturn this.data.products.find(product => product.sku === sku);\r\n\t\t\t}).filter(Boolean)\r\n\t\t\t: [];\r\n\t\tthis.syncSelectedData.period = this.selectedPeriod.value;\r\n\t\tthis.syncSelectedData.products = this.selectedProducts;\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-insurance-device-type\">\r\n\t\t\t\t${this.getProductsSectionTemplate()}\r\n\t\t\t\t${this.getPeriodSectionTemplate()}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate getProductsSectionTemplate(): TemplateResult {\r\n\t\tconst selectedProductSkus = this.selectedProducts.map(item => item.sku);\r\n\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-insurance-device-type__section\">\r\n\t\t\t\t<h4 class=\"c-insurance-device-type__section-title\"> ,   </h4>\r\n\r\n\t\t\t\t<div class=\"c-insurance-device-type__section-content\">\r\n\t\t\t\t\t<c-insurance-device-product-carousel .data=\"${this.data.products}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t .insurance=\"${this.data}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t .selectedSkus=\"${selectedProductSkus}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t .onChange=\"${this.handleChangeSelectedProduct.bind(this)}\">\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleChangeSelectedProduct(product: TProduct, checked: boolean): boolean {\r\n\t\tif (checked) {\r\n\t\t\tthis.selectedProducts = [\r\n\t\t\t\t...this.selectedProducts,\r\n\t\t\t\tproduct,\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\tconst existIndex = this.selectedProducts.findIndex(item => item.sku == product.sku);\r\n\t\t\tif (existIndex != -1) {\r\n\t\t\t\tthis.selectedProducts.splice(existIndex, 1);\r\n\t\t\t\tthis.selectedProducts = [...this.selectedProducts];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.syncSelectedData.products = this.selectedProducts;\r\n\t\tthis.dispatchEmitEventChange();\r\n\t\treturn !checked;\r\n\t}\r\n\r\n\tprivate getPeriodSectionTemplate(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<section class=\"c-insurance-device-type__section\">\r\n\t\t\t\t<h4 class=\"c-insurance-device-type__section-title\">   </h4>\r\n\t\t\t\t<p class=\"c-insurance-device-type__section-sub-title\">\r\n\t\t\t\t\t!   \r\n\t\t\t\t\t   ,    .\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<div class=\"c-insurance-device-type__section-content\">\r\n\t\t\t\t\t<ul class=\"c-insurance-device-type__periods\">\r\n\t\t\t\t\t\t${this.data.periods.map(period =>\r\n\t\t\t\t\t\t\t\thtml`\r\n\t\t\t\t\t\t\t\t\t<li class=\"c-insurance-device-type__periods-item\">\r\n\t\t\t\t\t\t\t\t\t\t<c-toggle-card type=\"radio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   name=\"${`insurance-${this.data.id}-device-period`}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   class=\"u-w-100 u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${this.selectedPeriod?.value == period.value}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t   @on-change=\"${(event) => this.handleClickPeriod(event, period)}\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"u-w-100 u-h-100 u-d-flex u-align-items-center u-justify-content-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<c-term-card .size=\"${ETermCardSizes.MEDIUM}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .data=\"${{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t value: period.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t title: pluralize(period.value, '', '', ''),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t }}\">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate handleClickPeriod(event: Event, period: TInsurancePeriod): void {\r\n\t\tconst toggle: ToggleCardComponent = event.currentTarget as ToggleCardComponent;\r\n\t\tif (!toggle.checked) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.selectedPeriod = period;\r\n\t\tthis.syncSelectedData.period = period.value;\r\n\t\tthis.dispatchEmitEventChange();\r\n\t}\r\n\r\n\tprivate dispatchEmitEventChange(): void {\r\n\t\tif (this.emitEventChange && isFunction(this.emitEventChange)) {\r\n\t\t\tthis.emitEventChange()\r\n\t\t}\r\n\t}\r\n}\r\n","import WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property} from \"lit-element\";\r\nimport {TProduct} from \"@models/Product\";\r\n\r\n@customElement('c-insurance-device-product-card')\r\nexport default class InsuranceDeviceProductCardComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tprivate data: TProduct;\r\n\r\n\tprotected render(): unknown {\r\n\t\tconst {img, name} = this.data;\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-insurance-device-product-card\">\r\n\t\t\t\t<div class=\"c-insurance-device-product-card__img-box\">\r\n\t\t\t\t\t<img data-src=\"${img}\"\r\n\t\t\t\t\t\t alt=\"pic\"\r\n\t\t\t\t\t\t class=\"c-insurance-device-product-card__img u-shimmer js-lazyLoadImage\">\r\n\t\t\t\t</div>\r\n\t\t\t\t<h4 class=\"c-insurance-device-product-card__name\">${name}</h4>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n}\r\n","import Carousel from \"@modules/carousel/Carousel\";\r\nimport {ICarousel} from \"@modules/carousel/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, html, property, PropertyValues, query, state, TemplateResult} from \"lit-element\";\r\nimport {TProduct} from \"@models/Product\";\r\nimport {TInsuranceDevice} from \"@models/Insurance\";\r\n\r\n@customElement('c-insurance-device-product-carousel')\r\nexport default class InsuranceDeviceProductCarouselComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Array,\r\n\t})\r\n\tdata: Array<TProduct> = [];\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t})\r\n\tinsurance: TInsuranceDevice;\r\n\r\n\t@property({\r\n\t\ttype: Array\r\n\t})\r\n\tget selectedSkus() {\r\n\t\treturn this._selectedSkus;\r\n\t}\r\n\r\n\tset selectedSkus(value: Array<string>) {\r\n\t\tif (!this.isFirstSetedSelectedSku) {\r\n\t\t\tthis.setFirstSelectedIndexes(value)\r\n\t\t}\r\n\t\tthis._selectedSkus = value;\r\n\t\tthis.isFirstSetedSelectedSku = true;\r\n\t}\r\n\r\n\t@state()\r\n\t_selectedSkus: Array<string> = [];\r\n\r\n\tprivate isFirstSetedSelectedSku: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Function\r\n\t})\r\n\tonChange: (item: TProduct, checked: boolean) => boolean | Promise<boolean>;\r\n\r\n\t@query('.c-insurance-device-product-carousel')\r\n\tprivate containerEl: HTMLElement;\r\n\r\n\t@state()\r\n\tprivate checkedIndexes: Array<number> = [];\r\n\r\n\tprivate carousel: ICarousel;\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.carousel = new Carousel(this.containerEl);\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-insurance-device-product-carousel\" data-carousel-config-name=\"insuranceProduct\">\r\n\t\t\t\t<div class=\"c-insurance-device-product-carousel__carousel-viewport js-carouselViewport\">\r\n\t\t\t\t\t<div class=\"c-insurance-device-product-carousel__carousel-container js-carouselContainer\">\r\n\t\t\t\t\t\t${this.data.map((product, index) => {\r\n\t\t\t\t\t\t\tconst name = `insurance-${this.insurance.id}-device-product-sku`;\r\n\t\t\t\t\t\t\tconst checked = this.checkedIndexes.includes(index);\r\n\r\n\t\t\t\t\t\t\treturn html`\r\n\t\t\t\t\t\t\t\t<div class=\"c-insurance-device-product-carousel__carousel-item js-carouselItem\">\r\n\t\t\t\t\t\t\t\t\t<c-toggle-card marker\r\n\t\t\t\t\t\t\t\t\t\t\t\t   type=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   name=\"${name}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   class=\"u-h-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .value=\"${product.sku}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   ?checked=\"${checked}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   .onChange=\"${() => this.handleChange(product, checked, index)}\">\r\n\t\t\t\t\t\t\t\t\t\t<c-insurance-device-product-card .data=\"${product}\">\r\n\t\t\t\t\t\t\t\t\t</c-toggle-card>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t`;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprivate async handleChange(item: TProduct, checked: boolean, index: number): Promise<boolean> {\r\n\t\tif (checked) {\r\n\t\t\tthis.checkedIndexes = this.checkedIndexes.filter(i => i !== index);\r\n\t\t} else {\r\n\t\t\tthis.checkedIndexes = [\r\n\t\t\t\t...this.checkedIndexes,\r\n\t\t\t\tindex\r\n\t\t\t];\r\n\t\t}\r\n\t\treturn this.onChange(item, !checked);\r\n\t}\r\n\r\n\tprivate setFirstSelectedIndexes(skus: Array<string>): void {\r\n\t\tconst itemSkus = this.data.map(item => item.sku);\r\n\t\tthis.checkedIndexes = skus.map(checkedSku => {\r\n\t\t\tconst index = itemSkus.findIndex(sku => sku == checkedSku);\r\n\t\t\titemSkus[index] = `${itemSkus[index]}#`;\r\n\t\t\treturn index;\r\n\t\t});\r\n\t}\r\n}\r\n","import {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {strToBoolean} from \"@helpers/index\";\r\nimport Dialog from \"@modules/dialog/Dialog\";\r\nimport {IDialog, TDialogAnimation, TDialogHooks} from \"@modules/dialog/model\";\r\nimport {EAnimationType} from \"@modules/animation/model\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\n\r\n@customElement('c-dialog')\r\nexport default class DialogComponent extends WebComponentLite {\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\tpublic backdrop: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true,\r\n\t\tattribute: 'mask-closable',\r\n\t})\r\n\tpublic maskClosable: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\tpublic closable: boolean = true;\r\n\r\n\t@property({\r\n\t\ttype: Boolean,\r\n\t\treflect: true\r\n\t})\r\n\topened: boolean = false;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\treflect: true\r\n\t})\r\n\thooks: TDialogHooks = {};\r\n\r\n\t@query('.js-dialog')\r\n\tprivate modalEl: HTMLDialogElement;\r\n\r\n\tprivate dialog: IDialog;\r\n\r\n\tprotected baseClassName: string = 'c-dialog';\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.dialog = new Dialog({\r\n\t\t\telement: this.modalEl,\r\n\t\t\tclasses: {\r\n\t\t\t\tdialog: 'js-dialog',\r\n\t\t\t\tview: 'js-dialogView',\r\n\t\t\t},\r\n\t\t\tmaskClosable: this.maskClosable,\r\n\t\t\tclosable: this.closable,\r\n\t\t\tanimation: this.getAnimationOption(),\r\n\t\t\thooks: this.getHooksOption(),\r\n\t\t});\r\n\t}\r\n\r\n\tprotected getAnimationOption(): TDialogAnimation {\r\n\t\treturn {\r\n\t\t\tdialogOption: {\r\n\t\t\t\tname: 'o-animation-fade-in',\r\n\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t},\r\n\t\t\tviewOption: {\r\n\t\t\t\tname: 'o-animation-zoom-in',\r\n\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n\r\n\tprotected getHooksOption(): TDialogHooks {\r\n\t\treturn {\r\n\t\t\tafterClose: () => {\r\n\t\t\t\tthis.afterClose();\r\n\t\t\t},\r\n\t\t\tafterOpen: () => {\r\n\t\t\t\tthis.afterOpen();\r\n\t\t\t},\r\n\t\t\tbeforeClose: () => {\r\n\t\t\t\tthis.beforeClose();\r\n\t\t\t},\r\n\t\t\tbeforeOpen: () => {\r\n\t\t\t\tthis.beforeOpen();\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tprotected afterClose(): void {\r\n\t\tthis.hooks?.afterClose?.();\r\n\t}\r\n\r\n\tprotected afterOpen(): void {\r\n\t\tthis.hooks?.afterOpen?.();\r\n\t}\r\n\r\n\tprotected beforeClose(): void {\r\n\t\tthis.hooks?.beforeClose?.();\r\n\t}\r\n\r\n\tprotected beforeOpen(): void {\r\n\t\tthis.hooks?.beforeOpen?.();\r\n\t}\r\n\r\n\tattributeChangedCallback(name: string, old: string | null, value: string | null) {\r\n\t\tsuper.attributeChangedCallback(name, old, value);\r\n\t\tif (name === 'opened') {\r\n\t\t\tthis.toggle(strToBoolean(value === '' ? true : value));\r\n\t\t}\r\n\r\n\t\tif (name === 'mask-closable') {\r\n\t\t\tif (this.dialog) {\r\n\t\t\t\tthis.dialog.maskClosable = strToBoolean(value === '' ? true : value)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (name === 'closable') {\r\n\t\t\tif (this.dialog) {\r\n\t\t\t\tthis.dialog.closable = strToBoolean(value === '' ? true : value)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.dialog.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.dialog.close();\r\n\t}\r\n\r\n\tprivate toggle(state: boolean): void {\r\n\t\tif (state) {\r\n\t\t\tthis.open();\r\n\t\t} else {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected render(): TemplateResult {\r\n\t\tconst cn = this.baseClassName;\r\n\r\n\t\treturn html`\r\n\t\t\t<dialog class=\"${cn} js-dialog ${this.getMainClasses()} ${this.backdrop ? `${cn}_backdrop` : ''}\">\r\n\t\t\t\t<div class=\"${cn}__view js-dialogView\">\r\n\t\t\t\t\t<div class=\"${cn}__content js-dialogContent\">\r\n\t\t\t\t\t\t${this.getContent()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</dialog>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getContent(): TemplateResult {\r\n\t\tconst content = this.getContent();\r\n\t\treturn html`\r\n\t\t\t${content}\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getMainClasses(): string {\r\n\t\treturn '';\r\n\t}\r\n}\r\n","export type TConfirmDialogAction = () => boolean | Promise<boolean>\r\n\r\nexport enum EConfirmDialogActions {\r\n\tCANCEL = 'CANCEL',\r\n\tCONFIRM = 'CONFIRM',\r\n}\r\n","import DialogComponent from \"@components/dialog/DialogComponent\";\r\nimport {customElement, html, property, PropertyValues, query, TemplateResult} from \"lit-element\";\r\nimport {fromEvent, Subject} from \"rxjs\";\r\nimport {EConfirmDialogActions, TConfirmDialogAction} from \"@components/confirm-dialog/model\";\r\nimport {IBtn} from \"@modules/btn/model\";\r\nimport Btn from \"@modules/btn/Btn\";\r\n\r\n@customElement('c-confirm-dialog')\r\nexport default class ConfirmDialogComponent extends DialogComponent {\r\n\t@property({\r\n\t\ttype: String,\r\n\t\treflect: true\r\n\t})\r\n\tpublic title: string;\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'btn-cancel-text',\r\n\t})\r\n\tpublic btnCancelText: string = 'Cancel';\r\n\r\n\t@property({\r\n\t\ttype: String,\r\n\t\tattribute: 'btn-confirm-text',\r\n\t})\r\n\tpublic btnConfirmText: string = 'Confirm';\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-cancel',\r\n\t})\r\n\tpublic onCancel: TConfirmDialogAction\r\n\r\n\t@property({\r\n\t\ttype: Function,\r\n\t\tattribute: 'on-confirm',\r\n\t})\r\n\tpublic onConfirm: TConfirmDialogAction\r\n\r\n\t@query('[confirm-dialog-btn-cancel]')\r\n\tprivate btnCancelEl: HTMLButtonElement;\r\n\r\n\t@query('[confirm-dialog-btn-confirm]')\r\n\tprivate btnConfirmEl: HTMLButtonElement;\r\n\r\n\tmaskClosable = false;\r\n\tbaseClassName = 'c-confirm-dialog';\r\n\tprivate isActionLoadingType: EConfirmDialogActions;\r\n\tprivate btnCancel: IBtn;\r\n\tprivate btnConfirm: IBtn;\r\n\tprivate _result: boolean;\r\n\tprivate streamResult: Subject<boolean> = new Subject<boolean>();\r\n\r\n\tprotected firstUpdated(_changedProperties: PropertyValues) {\r\n\t\tsuper.firstUpdated(_changedProperties);\r\n\t\tthis.attachEvent();\r\n\t\tthis.btnCancel = new Btn(this.btnCancelEl);\r\n\t\tthis.btnConfirm = new Btn(this.btnConfirmEl);\r\n\t}\r\n\r\n\tpublic result(): Promise<unknown> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tconst sub = this.streamResult.asObservable().subscribe(value => {\r\n\t\t\t\tsub.unsubscribe();\r\n\t\t\t\tresolve(value);\r\n\t\t\t}, (error) => {\r\n\t\t\t\tsub.unsubscribe();\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\topen() {\r\n\t\tthis._result = null;\r\n\t\tsuper.open();\r\n\t}\r\n\r\n\tprotected afterClose() {\r\n\t\tsuper.afterClose();\r\n\t\tthis.streamResult.next(this._result);\r\n\t}\r\n\r\n\tprotected getContent(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t${this.getHeader()}\r\n\t\t\t${this.getBody()}\r\n\t\t\t${this.getFooter()}\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getHeader(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<header class=\"c-confirm-dialog__header js-dialogHeader\">\r\n\t\t\t\t<h4 class=\"c-confirm-dialog__title\">${this.title}</h4>\r\n\t\t\t</header>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getBody(): TemplateResult {\r\n\t\tconst body = this.getSlot('body');\r\n\r\n\t\treturn html`\r\n\t\t\t<div class=\"c-confirm-dialog__body js-dialogBody\">\r\n\t\t\t\t${body}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getFooter(): TemplateResult {\r\n\t\tconst btnCancel = this.getSlot('btn-cancel');\r\n\t\tconst btnConfirm = this.getSlot('btn-confirm');\r\n\r\n\t\treturn html`\r\n\t\t\t<footer class=\"c-confirm-dialog__footer js-dialogFooter\">\r\n\t\t\t\t<div class=\"c-confirm-dialog__action\">\r\n\t\t\t\t\t${btnCancel ?? this.getBtnCancel()}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"c-confirm-dialog__action\">\r\n\t\t\t\t\t${btnConfirm ?? this.getBtnConfirm()}\r\n\t\t\t\t</div>\r\n\t\t\t</footer>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getBtnCancel(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<button confirm-dialog-btn-cancel\r\n\t\t\t\t\tclass=\"c-btn c-btn_secondary c-btn_md c-btn_block\">\r\n\t\t\t\t<div class=\"c-btn__loader\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_loader\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span class=\"c-btn__text\">${this.btnCancelText}</span>\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected getBtnConfirm(): TemplateResult {\r\n\t\treturn html`\r\n\t\t\t<button confirm-dialog-btn-confirm\r\n\t\t\t\t\tclass=\"c-btn c-btn_primary c-btn_md c-btn_block\">\r\n\t\t\t\t<div class=\"c-btn__loader\">\r\n\t\t\t\t\t<i class=\"o-icon o-icon_loader\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t\t<span class=\"c-btn__text\">${this.btnConfirmText}</span>\r\n\t\t\t</button>\r\n\t\t`;\r\n\t}\r\n\r\n\tprotected handleClickBtnCancel(event: Event): void {\r\n\t\tif ((event.currentTarget as HTMLElement).tagName.toLowerCase() !== 'a') {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tthis._result = false;\r\n\t\tthis.handleBtnAction(EConfirmDialogActions.CANCEL, this.btnCancel, this.onCancel);\r\n\t}\r\n\r\n\tprotected handleClickBtnConfirm(event: Event): void {\r\n\t\tif ((event.currentTarget as HTMLElement).tagName.toLowerCase() !== 'a') {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t\tthis._result = true;\r\n\t\tthis.handleBtnAction(EConfirmDialogActions.CONFIRM, this.btnConfirm, this.onConfirm);\r\n\t}\r\n\r\n\tprotected handleBtnAction(type: EConfirmDialogActions, btn: IBtn, action: TConfirmDialogAction): void {\r\n\t\tif (this.isActionLoadingType) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (action && typeof action === 'function') {\r\n\t\t\tconst res = action();\r\n\t\t\tif (res instanceof Promise) {\r\n\t\t\t\tbtn.addLoader();\r\n\t\t\t\tthis.isActionLoadingType = type;\r\n\t\t\t\tthis.setDisableBtnActionByType(type, true);\r\n\t\t\t\tconst maskClosable = this.maskClosable;\r\n\t\t\t\tif (maskClosable) {\r\n\t\t\t\t\tthis.maskClosable = false;\r\n\t\t\t\t}\r\n\t\t\t\tres\r\n\t\t\t\t\t.then((status) => {\r\n\t\t\t\t\t\tif (status) {\r\n\t\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbtn.removeLoader();\r\n\t\t\t\t\t\tthis.isActionLoadingType = null;\r\n\t\t\t\t\t\tthis.setDisableBtnActionByType(type, false);\r\n\t\t\t\t\t\tthis.maskClosable = maskClosable;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tbtn.removeLoader();\r\n\t\t\t\t\t\tthis.isActionLoadingType = null;\r\n\t\t\t\t\t\tthis.setDisableBtnActionByType(type, false);\r\n\t\t\t\t\t\tthis.maskClosable = maskClosable;\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.close();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setDisableBtnActionByType(type: EConfirmDialogActions, disabled: boolean): void {\r\n\t\tconst btn: IBtn = type == EConfirmDialogActions.CANCEL ? this.btnCancel : this.btnConfirm;\r\n\t\tif (disabled) {\r\n\t\t\tbtn.disable();\r\n\t\t} else {\r\n\t\t\tbtn.enable();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected attachEvent(): void {\r\n\t\tfromEvent(this.btnCancelEl, 'click')\r\n\t\t\t.subscribe((event) => {\r\n\t\t\t\tthis.handleClickBtnCancel(event);\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.btnConfirmEl, 'click')\r\n\t\t\t.subscribe((event) => {\r\n\t\t\t\tthis.handleClickBtnConfirm(event);\r\n\t\t\t});\r\n\t}\r\n}\r\n","export interface IBtn {\r\n\taddLoader(): this\r\n\r\n\tremoveLoader(): this\r\n\r\n\tdisable(): this\r\n\r\n\tfakeDisable(): this\r\n\r\n\tenable(): this\r\n\r\n\tfakeEnable(): this\r\n\r\n\tisDisabled(): boolean\r\n\r\n\tisFakeDisabled(): boolean\r\n\r\n\tisLoading(): boolean\r\n\r\n\tsetText(text: string): this\r\n\r\n\tsetPrependIcon(iconClass: string): this\r\n\r\n\tremovePrependIcon(): this\r\n\r\n\tsetAppendIcon(iconClass: string): this\r\n\r\n\tremoveAppendIcon(): this\r\n\r\n\tgetBtn(): HTMLButtonElement\r\n}\r\n\r\nexport type TBtnOption = {\r\n\tclasses?: {\r\n\t\tloading?: string\r\n\t\tdisabled?: string\r\n\t}\r\n}\r\n\r\nexport interface IBtnSwitch extends IBtn {\r\n\tswitch(state: boolean): this\r\n}\r\n\r\nexport enum EBtnSwitchElements {\r\n\tTEXT = 'TEXT',\r\n\tPREPEND_ICON = 'PREPEND_ICON',\r\n\tAPPEND_ICON = 'APPEND_ICON',\r\n}\r\n\r\nexport type IBtnSwitchDataElementAttrs = {\r\n\t[EBtnSwitchElements.TEXT]: IBtnSwitchElement\r\n\t[EBtnSwitchElements.PREPEND_ICON]: IBtnSwitchElement\r\n\t[EBtnSwitchElements.APPEND_ICON]: IBtnSwitchElement\r\n}\r\n\r\nexport type IBtnSwitchElement = {\r\n\ttrue: string\r\n\tfalse: string\r\n\taction: (value: string) => unknown\r\n}\r\n","import {Observable} from \"rxjs\";\r\n\r\nexport interface IKeyboardState {\r\n\tgetStream(): Observable<EKeyboardState>;\r\n\r\n\tgetState(): EKeyboardState\r\n}\r\n\r\nexport enum EKeyboardState {\r\n\tACTIVE = 'ACTIVE',\r\n\tINACTIVE = 'INACTIVE',\r\n}\r\n","import {Observable} from \"rxjs\";\r\n\r\nexport interface IScreenOrientation {\r\n\tgetStream(): Observable<EScreenOrientation>\r\n\r\n\tgetOrientation(): EScreenOrientation\r\n}\r\n\r\nexport enum EScreenOrientation {\r\n\tPORTRAIT = 'portrait',\r\n\tLANDSCAPE = 'landscape',\r\n}\r\n","export enum EWindowBreakpoints {\r\n\txs = 0,\r\n\tsm = 576,\r\n\tmd = 768,\r\n\tlg = 992,\r\n\txl = 1200,\r\n\txxl = 1440,\r\n}\r\n\r\nexport enum EIdsLayout {\r\n\theader = 'js-ElHeader',\r\n\tsideNav = 'js-ElSideNav',\r\n}\r\n","import {IDynamicActivationSubjectFactory, TDynamicActivationOption} from \"@modules/dynamic-element/model\";\r\nimport {DynamicInsertionElements} from \"@modules/dynamic-element/DynamicInsertionElements\";\r\nimport {isHTMLElement, strToBoolean} from \"@helpers/index\";\r\n\r\nexport default class DynamicActivation extends DynamicInsertionElements {\r\n\tprivate readonly option: TDynamicActivationOption;\r\n\tprivate readonly dataAttrActivated: string = '';\r\n\tprivate readonly subjectFactory: IDynamicActivationSubjectFactory;\r\n\r\n\tconstructor(subjectFactory: IDynamicActivationSubjectFactory, option: TDynamicActivationOption) {\r\n\t\tsuper();\r\n\t\tthis.option = option;\r\n\t\tthis.dataAttrActivated = this.getDataAttrActivated();\r\n\t\tthis.subjectFactory = subjectFactory;\r\n\t\tthis.activate(document);\r\n\t\tthis.attachEventDynamicInsertion();\r\n\t}\r\n\r\n\tprotected dynamicInsertHandler(nodeModules: Node) {\r\n\t\tif (isHTMLElement(nodeModules)) {\r\n\t\t\tthis.activate(nodeModules as HTMLElement);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate activate(scope: HTMLElement | Document): void {\r\n\t\tArray\r\n\t\t\t.from(scope.querySelectorAll(this.option.selector))\r\n\t\t\t.forEach(handler => {\r\n\t\t\t\tif (strToBoolean(handler.getAttribute(this.dataAttrActivated))) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\thandler.setAttribute(this.dataAttrActivated, 'true');\r\n\t\t\t\tthis.subjectFactory.create(handler as HTMLElement);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getDataAttrActivated(): string {\r\n\t\treturn `data-${this.option.key}-activated`;\r\n\t}\r\n}\r\n","import Btn from \"@modules/btn/Btn\";\r\nimport {EBtnSwitchElements, IBtnSwitch, IBtnSwitchDataElementAttrs, IBtnSwitchElement} from \"@modules/btn/model\";\r\n\r\nexport default class BtnSwitch extends Btn implements IBtnSwitch {\r\n\r\n\tprivate elements: IBtnSwitchDataElementAttrs = {\r\n\t\t[EBtnSwitchElements.TEXT]: {\r\n\t\t\ttrue: 'data-btn-true-text',\r\n\t\t\tfalse: 'data-btn-false-text',\r\n\t\t\taction: this.setText,\r\n\t\t},\r\n\t\t[EBtnSwitchElements.PREPEND_ICON]: {\r\n\t\t\ttrue: 'data-btn-true-prepend-icon',\r\n\t\t\tfalse: 'data-btn-false-prepend-icon',\r\n\t\t\taction: this.setPrependIcon,\r\n\t\t},\r\n\t\t[EBtnSwitchElements.APPEND_ICON]: {\r\n\t\t\ttrue: 'data-btn-true-append-icon',\r\n\t\t\tfalse: 'data-btn-false-append-icon',\r\n\t\t\taction: this.setAppendIcon,\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor(btnEl: HTMLButtonElement) {\r\n\t\tsuper(btnEl);\r\n\t}\r\n\r\n\tpublic switch(state: boolean): this {\r\n\t\tthis.change(state);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate getValue(state: boolean, key: EBtnSwitchElements | string): string {\r\n\t\tconst attr: string = this.getElement(key)?.[`${state}`];\r\n\t\treturn this.getBtn().getAttribute(attr);\r\n\t}\r\n\r\n\tprivate getElement(key: EBtnSwitchElements | string): IBtnSwitchElement {\r\n\t\treturn this.elements[key];\r\n\t}\r\n\r\n\tprivate change(state: boolean): void {\r\n\t\tObject\r\n\t\t\t.entries(this.elements)\r\n\t\t\t.forEach(([key, element]) => {\r\n\t\t\t\tconst value = this.getValue(state, key);\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\telement.action.call(this, value);\r\n\t\t\t});\r\n\t}\r\n}\r\n","import BtnSwitch from \"@modules/btn/BtnSwitch\";\r\nimport {IBtnSwitch} from \"@modules/btn/model\";\r\nimport CollapseAnimated from \"@modules/collapse/CollapseAnimated\";\r\nimport {ECollapseState, ICollapse} from \"@modules/collapse/model\";\r\nimport SmoothScroll from \"@modules/scroll/SmoothScroll\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class AccentCollapseRemoteWithBtnSwitch {\r\n\tprivate DATA_ATTR_BTN_HANDLER_CLASS: string = 'data-accent-collapse-remote-with-btn-switch-handler';\r\n\r\n\tprivate collapseEl: HTMLElement;\r\n\tprivate collapse: ICollapse;\r\n\tprivate smoothScroll: SmoothScroll;\r\n\tprivate btnSwitchs: Array<IBtnSwitch>;\r\n\r\n\tprivate btnHandlerEls: Array<HTMLButtonElement> = [];\r\n\r\n\tconstructor(collapseEl: HTMLElement) {\r\n\t\tthis.collapseEl = collapseEl;\r\n\t\tthis.collapse = new CollapseAnimated(collapseEl);\r\n\t\tthis.smoothScroll = new SmoothScroll();\r\n\t\tconst classBtnHandler: string = collapseEl.getAttribute(this.DATA_ATTR_BTN_HANDLER_CLASS);\r\n\t\tthis.btnHandlerEls = Array.from(\r\n\t\t\tdocument.querySelectorAll(`.${classBtnHandler}`)\r\n\t\t);\r\n\t\tthis.btnSwitchs = this.btnHandlerEls.map(handler => new BtnSwitch(handler));\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.btnHandlerEls, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.toggle();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate toggle(): void {\r\n\t\tif (this.collapse.getState() === ECollapseState.OPEN) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate open(): void {\r\n\t\tthis.collapse.open();\r\n\t\tthis.btnSwitchs.forEach(btnSwitch => {\r\n\t\t\tbtnSwitch.switch(false);\r\n\t\t});\r\n\t\tthis.smoothScroll.scrollTo(this.collapseEl);\r\n\t}\r\n\r\n\tprivate close(): void {\r\n\t\tthis.collapse.close();\r\n\t\tthis.btnSwitchs.forEach(btnSwitch => {\r\n\t\t\tbtnSwitch.switch(true);\r\n\t\t});\r\n\t}\r\n}\r\n","import {EScreenOrientation, IScreenOrientation} from \"@modules/screen/model\";\r\nimport {BehaviorSubject, fromEvent, Observable} from \"rxjs\";\r\nimport {debounceTime, filter} from \"rxjs/operators\";\r\n\r\nexport default class ScreenOrientationService implements IScreenOrientation {\r\n\tprivate static instance: IScreenOrientation;\r\n\r\n\tprivate stream: BehaviorSubject<EScreenOrientation> = new BehaviorSubject<EScreenOrientation>(null);\r\n\r\n\tprivate lastOrientation: EScreenOrientation;\r\n\tprivate lastViewWidth: number;\r\n\r\n\tconstructor() {\r\n\t\tif (ScreenOrientationService.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use ScreenOrientationService.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tScreenOrientationService.instance = this;\r\n\t\tthis.lastViewWidth = document.documentElement.clientWidth;\r\n\t\tthis.attachEvent();\r\n\t\tthis.lastOrientation = this.getOrientation();\r\n\t}\r\n\r\n\tpublic static getInstance(): IScreenOrientation {\r\n\t\tif (!ScreenOrientationService.instance) {\r\n\t\t\tScreenOrientationService.instance = new ScreenOrientationService();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic getStream(): Observable<EScreenOrientation> {\r\n\t\treturn this.stream\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(stream => Boolean(stream))\r\n\t\t\t)\r\n\t}\r\n\r\n\tpublic getOrientation(): EScreenOrientation {\r\n\t\tif (window.matchMedia(\"(orientation: portrait)\").matches) {\r\n\t\t\treturn EScreenOrientation.PORTRAIT;\r\n\t\t} else if (window.matchMedia(\"(orientation: landscape)\").matches) {\r\n\t\t\treturn EScreenOrientation.LANDSCAPE;\r\n\t\t} else {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(window, 'resize')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(30),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tconst currentOrientation: EScreenOrientation = this.getOrientation();\r\n\t\t\t\tconst currentWidth: number = document.documentElement.clientWidth;\r\n\t\t\t\tif (currentOrientation !== this.lastOrientation && currentWidth !== this.lastViewWidth) {\r\n\t\t\t\t\tthis.lastViewWidth = currentWidth;\r\n\t\t\t\t\tthis.lastOrientation = currentOrientation;\r\n\t\t\t\t\tthis.stream.next(currentOrientation);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {EKeyboardState, IKeyboardState} from \"@modules/keyboard/model\";\r\nimport {IScreenOrientation} from \"@modules/screen/model\";\r\nimport ScreenOrientationService from \"@modules/screen/ScreenOrientationService\";\r\nimport {BehaviorSubject, fromEvent, Observable} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class KeyboardState implements IKeyboardState {\r\n\tprivate static instance: IKeyboardState;\r\n\r\n\tprivate screenOrientationService: IScreenOrientation;\r\n\tprivate initialFullViewHeight: number;\r\n\r\n\tprivate stream: BehaviorSubject<EKeyboardState> = new BehaviorSubject<EKeyboardState>(null);\r\n\r\n\tconstructor() {\r\n\t\tif (KeyboardState.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use KeyboardState.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tKeyboardState.instance = this;\r\n\t\tthis.screenOrientationService = ScreenOrientationService.getInstance();\r\n\t\tthis.initialFullViewHeight = this.getFullHeight();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic static getInstance(): IKeyboardState {\r\n\t\tif (!KeyboardState.instance) {\r\n\t\t\tKeyboardState.instance = new KeyboardState();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic getState(): EKeyboardState {\r\n\t\treturn EKeyboardState.ACTIVE;\r\n\t}\r\n\r\n\tpublic getStream(): Observable<EKeyboardState> {\r\n\t\treturn this.stream\r\n\t\t\t.asObservable()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(stream => Boolean(stream))\r\n\t\t\t)\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(window, 'resize')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.checkChange();\r\n\t\t\t});\r\n\r\n\t\tthis.screenOrientationService\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.initialFullViewHeight = this.getFullHeight();\r\n\t\t\t\tthis.checkChange();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate checkChange(): void {\r\n\t\tconst activeInputEl: HTMLInputElement | HTMLTextAreaElement = this.getActiveInputElement();\r\n\t\tif (activeInputEl && this.isLessMainViewHeight()) {\r\n\t\t\tthis.stream.next(EKeyboardState.ACTIVE);\r\n\t\t} else {\r\n\t\t\tthis.stream.next(EKeyboardState.INACTIVE);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isLessMainViewHeight(): boolean {\r\n\t\tconst currentViewHeight: number = document.documentElement.clientHeight;\r\n\t\treturn currentViewHeight < this.initialFullViewHeight;\r\n\t}\r\n\r\n\tprivate getActiveInputElement(): HTMLInputElement | HTMLTextAreaElement {\r\n\t\tconst activeElTagName: string = document.activeElement.tagName.toLowerCase();\r\n\t\tconst inputTagNames: Array<string> = ['input', 'textarea'];\r\n\t\tif (inputTagNames.includes(activeElTagName)) {\r\n\t\t\treturn document.activeElement as HTMLInputElement | HTMLTextAreaElement;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tprivate getFullHeight(): number {\r\n\t\treturn document.documentElement.clientHeight;\r\n\t}\r\n}\r\n","import {TErrorField} from \"@modules/http-request/model\";\r\n\r\nexport interface IFormValidator {\r\n\tshowErrors(errors: Array<TErrorField>): void\r\n\r\n\tclearMessages(): void\r\n\r\n\tclearValue(): void\r\n}\r\n\r\nexport enum EFormValidatorType {\r\n\tVALID = 'VALID',\r\n\tINVALID = 'INVALID',\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\n\r\nexport enum EPostMessageEvents {\r\n\tRELOAD_PAGE = 'reload-page',\r\n}\r\n\r\nexport default class PostMessageHandling {\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent<MessageEvent>(window, 'message')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tthis.handle(event.data);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handle(event: EPostMessageEvents): void {\r\n\t\tswitch (event) {\r\n\t\t\tcase EPostMessageEvents.RELOAD_PAGE:\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n","export type TWishlistResponse = {\r\n\tstatus: EWishlistStatus\r\n\tquantity: number\r\n}\r\n\r\nexport enum EWishlistStatus {\r\n\tADDED = 'ADDED',\r\n\tREMOVED = 'REMOVED'\r\n}\r\n","import {ECollapseState, ICollapse} from \"@modules/collapse/model\";\r\nimport {IBtnSwitch} from \"@modules/btn/model\";\r\nimport CollapseAnimated from \"@modules/collapse/CollapseAnimated\";\r\nimport BtnSwitch from \"@modules/btn/BtnSwitch\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class CollapseRemoteWithBtnSwitch {\r\n\tprivate DATA_ATTR_BTN_HANDLER_CLASS: string = 'data-collapse-remote-with-btn-switch-handler';\r\n\r\n\tprivate collapseEl: HTMLElement;\r\n\tprivate collapse: ICollapse;\r\n\tprivate btnSwitch: IBtnSwitch;\r\n\r\n\tprivate btnHandlerEl: HTMLButtonElement;\r\n\r\n\tconstructor(collapseEl: HTMLElement) {\r\n\t\tthis.collapseEl = collapseEl;\r\n\t\tthis.collapse = new CollapseAnimated(collapseEl);\r\n\t\tconst classBtnHandler: string = collapseEl.getAttribute(this.DATA_ATTR_BTN_HANDLER_CLASS);\r\n\t\tthis.btnHandlerEl = document.querySelector(`.${classBtnHandler}`);\r\n\t\tthis.btnSwitch = new BtnSwitch(this.btnHandlerEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.btnHandlerEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.toggle();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate toggle(): void {\r\n\t\tif (this.collapse.getState() === ECollapseState.OPEN) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate open(): void {\r\n\t\tthis.collapse.open();\r\n\t\tthis.btnSwitch.switch(false);\r\n\t}\r\n\r\n\tprivate close(): void {\r\n\t\tthis.collapse.close();\r\n\t\tthis.btnSwitch.switch(true);\r\n\t}\r\n}\r\n","import {EFormValidatorType, IFormValidator} from \"@modules/form/model\";\r\nimport {TErrorField} from \"@modules/http-request/model\";\r\n\r\nexport default class FormValidator implements IFormValidator {\r\n\tprivate CLASS_ITEM: string = 'js-formItem';\r\n\tprivate CLASS_MESSAGE: string = 'js-formItemMessage';\r\n\r\n\tprivate CLASS_INVALID: string = 'has-error';\r\n\tprivate CLASS_VALID: string = 'is-valid';\r\n\r\n\tprivate formEl: HTMLFormElement | HTMLElement;\r\n\r\n\tconstructor(form: HTMLFormElement | HTMLElement) {\r\n\t\tthis.formEl = form;\r\n\t}\r\n\r\n\tpublic showErrors(errors: Array<TErrorField>): void {\r\n\t\terrors.forEach(error => {\r\n\t\t\tconst items: Array<HTMLElement> = this.getFormItem(...error.fieldNames);\r\n\t\t\titems.forEach(item => {\r\n\t\t\t\tthis.showMessage(item, error.messages, EFormValidatorType.INVALID);\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tpublic clearMessages(): void {\r\n\t\tconst items: Array<HTMLElement> = this.getAllItems();\r\n\t\titems.forEach(item => {\r\n\t\t\tthis.clearClasses(item);\r\n\t\t\tthis.setMessage(item, ['']);\r\n\t\t});\r\n\t}\r\n\r\n\tpublic clearValue(): void {\r\n\t\tconst items: Array<HTMLElement> = this.getAllItems();\r\n\t\titems\r\n\t\t\t.map(item => {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t...Array.from(item.getElementsByTagName('INPUT')),\r\n\t\t\t\t\t...Array.from(item.getElementsByTagName('TEXTAREA')),\r\n\t\t\t\t\t...Array.from(item.getElementsByTagName('SELECT')),\r\n\t\t\t\t] as Array<HTMLInputElement>;\r\n\t\t\t})\r\n\t\t\t.forEach(inputs => {\r\n\t\t\t\tinputs.forEach(input => {\r\n\t\t\t\t\tif (input.type === 'checkbox' || input.type === 'radio') {\r\n\t\t\t\t\t\tinput.checked = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinput.value = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate showMessage(formItem: HTMLElement, messages: Array<string>, type: EFormValidatorType): void {\r\n\t\tthis.clearClasses(formItem);\r\n\t\tformItem.classList.add(this.getClassNameType(type));\r\n\t\tthis.setMessage(formItem, messages);\r\n\t}\r\n\r\n\tprivate getFormItem(...names): Array<HTMLElement> {\r\n\t\tconst fields: Array<HTMLInputElement> = names.map(name => {\r\n\t\t\treturn this.formEl.querySelector(`[name=\"${name}\"]`)\r\n\t\t});\r\n\t\tconst items: Array<HTMLElement> = fields.map(field => {\r\n\t\t\treturn field.closest(`.${this.CLASS_ITEM}`)\r\n\t\t})\r\n\t\treturn items.filter(Boolean);\r\n\t}\r\n\r\n\tprivate getAllItems(): Array<HTMLElement> {\r\n\t\treturn Array.from(this.formEl.getElementsByClassName(this.CLASS_ITEM)) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprivate getClassNameType(type: EFormValidatorType): string {\r\n\t\tswitch (type) {\r\n\t\t\tcase EFormValidatorType.VALID:\r\n\t\t\t\treturn this.CLASS_VALID;\r\n\t\t\tcase EFormValidatorType.INVALID:\r\n\t\t\t\treturn this.CLASS_INVALID;\r\n\t\t\tdefault:\r\n\t\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setMessage(formItem: HTMLElement, messages: Array<string>): void {\r\n\t\tconst messageEl: HTMLElement = formItem.querySelector(`.${this.CLASS_MESSAGE}`);\r\n\t\tif (!messageEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tmessageEl.innerHTML = messages.reduce((acc, value) => `${acc}<br/>${value}`);\r\n\t}\r\n\r\n\tprivate clearClasses(formItem: HTMLElement): void {\r\n\t\tformItem.classList.remove(this.CLASS_INVALID);\r\n\t\tformItem.classList.remove(this.CLASS_VALID);\r\n\t}\r\n}\r\n","export default class MenuBtn {\r\n\tprivate CLASS_MOD_ACTIVE: string = 'c-menu-btn_active';\r\n\r\n\tprivate btnEl: HTMLButtonElement;\r\n\r\n\tconstructor(menu: HTMLButtonElement) {\r\n\t\tthis.btnEl = menu;\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.btnEl.classList.add(this.CLASS_MOD_ACTIVE);\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.btnEl.classList.remove(this.CLASS_MOD_ACTIVE);\r\n\t}\r\n\r\n\tpublic isOpen(): boolean {\r\n\t\treturn this.btnEl.classList.contains(this.CLASS_MOD_ACTIVE);\r\n\t}\r\n}\r\n","import {IResize} from \"@modules/resize/model\";\r\nimport Resize from \"@modules/resize/Resize\";\r\nimport {EWindowBreakpoints} from \"@variables\";\r\nimport {gsap} from \"gsap\";\r\nimport {ScrollTrigger} from \"gsap/ScrollTrigger\";\r\nimport ScrollTriggerInstance = gsap.plugins.ScrollTriggerInstance;\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default class StickyFilters {\r\n\tprivate CLASS_MAIN: string = 'js-stickyFilters';\r\n\tprivate CLASS_HANDLER: string = 'js-stickyFiltersHandler';\r\n\r\n\tprivate mainEl: HTMLElement;\r\n\tprivate handlerEl: HTMLElement;\r\n\r\n\tprivate resize: IResize;\r\n\r\n\tprivate trigger: ScrollTriggerInstance;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.mainEl = document.querySelector(`.${this.CLASS_MAIN}`)\r\n\t\tthis.handlerEl = this.mainEl?.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tif (!this.handlerEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.resize = new Resize(document.body);\r\n\t\tthis.initTrigger();\r\n\t\tthis.checkDisableState();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate initTrigger(): void {\r\n\t\tconst topIndent: number = 20;\r\n\t\tthis.trigger = ScrollTrigger.create({\r\n\t\t\ttrigger: this.handlerEl,\r\n\t\t\tstart: `top ${topIndent}px`,\r\n\t\t\tendTrigger: this.mainEl,\r\n\t\t\tend: () => `bottom ${this.handlerEl.offsetHeight + topIndent}px`,\r\n\t\t\tpin: true,\r\n\t\t\tpinSpacing: false,\r\n\t\t\tmarkers: false, //for debug\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.resize\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.checkDisableState();\r\n\t\t\t\tif (!this.isDisabledWidth()) {\r\n\t\t\t\t\tScrollTrigger.refresh();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate isDisabledWidth(): boolean {\r\n\t\treturn window.innerWidth < EWindowBreakpoints.md\r\n\t}\r\n\r\n\tprivate checkDisableState(): void {\r\n\t\tif (this.isDisabledWidth()) {\r\n\t\t\tthis.trigger.disable();\r\n\t\t} else {\r\n\t\t\tthis.trigger.enable();\r\n\t\t}\r\n\t}\r\n}\r\n","import {IResize} from \"@modules/resize/model\";\r\nimport Resize from \"@modules/resize/Resize\";\r\nimport {EWindowBreakpoints} from \"@variables\";\r\nimport {gsap} from \"gsap\";\r\nimport {ScrollTrigger} from \"gsap/ScrollTrigger\";\r\nimport ScrollTriggerInstance = gsap.plugins.ScrollTriggerInstance;\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nexport default class StickyProductPicture {\r\n\tprivate CLASS_MAIN: string = 'js-stickyProductPicture';\r\n\tprivate CLASS_HANDLER: string = 'js-stickyProductPictureHandler';\r\n\r\n\tprivate mainEl: HTMLElement;\r\n\tprivate handlerEl: HTMLElement;\r\n\r\n\tprivate resize: IResize;\r\n\r\n\tprivate trigger: ScrollTriggerInstance;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.mainEl = document.querySelector(`.${this.CLASS_MAIN}`)\r\n\t\tthis.handlerEl = this.mainEl?.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tif (!this.handlerEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.resize = new Resize(document.body);\r\n\t\tthis.initTrigger();\r\n\t\tthis.checkDisableState();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate initTrigger(): void {\r\n\t\tconst topIndent: number = 20;\r\n\t\tthis.trigger = ScrollTrigger.create({\r\n\t\t\ttrigger: this.handlerEl,\r\n\t\t\tstart: `top ${topIndent}px`,\r\n\t\t\tendTrigger: this.mainEl,\r\n\t\t\tend: () => `bottom ${this.handlerEl.offsetHeight + topIndent}px`,\r\n\t\t\tpin: true,\r\n\t\t\tpinSpacing: false,\r\n\t\t\tmarkers: false, //for debug\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.resize\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.checkDisableState();\r\n\t\t\t\tif (!this.isDisabledWidth()) {\r\n\t\t\t\t\tScrollTrigger.refresh();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate isDisabledWidth(): boolean {\r\n\t\treturn window.innerWidth < EWindowBreakpoints.md\r\n\t}\r\n\r\n\tprivate checkDisableState(): void {\r\n\t\tif (this.isDisabledWidth()) {\r\n\t\t\tthis.trigger.disable();\r\n\t\t} else {\r\n\t\t\tthis.trigger.enable();\r\n\t\t}\r\n\t}\r\n}\r\n","import {ILoader, TLoaderOption} from \"@components/loader/model\";\r\nimport {isHTMLElement, stringToHTML} from \"@helpers/index\";\r\n\r\nexport default class Loader implements ILoader {\r\n\tprivate CLASS_BLOCK: string = 'js-loader';\r\n\r\n\tprivate CLASS_ACTIVE: string = 'is-active';\r\n\r\n\tprivate blockEl: HTMLElement;\r\n\r\n\tconstructor(protected options: TLoaderOption) {\r\n\t\tconst defaultOptions: TLoaderOption = {\r\n\t\t\telement: \"create\",\r\n\t\t};\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic reInit(options: TLoaderOption): void {\r\n\t\tconst defaultOptions: TLoaderOption = {\r\n\t\t\telement: \"create\",\r\n\t\t};\r\n\t\tthis.options = {\r\n\t\t\t...defaultOptions,\r\n\t\t\t...this.options,\r\n\t\t};\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic show(): void {\r\n\t\tthis.blockEl.classList.add(this.CLASS_ACTIVE);\r\n\t}\r\n\r\n\tpublic hide(): void {\r\n\t\tthis.blockEl.classList.remove(this.CLASS_ACTIVE);\r\n\t}\r\n\r\n\tpublic getHTMLElement(): HTMLElement {\r\n\t\treturn this.blockEl;\r\n\t}\r\n\r\n\tprivate create(): HTMLElement {\r\n\t\tconst template: string = this.getTemplate();\r\n\t\treturn stringToHTML(template);\r\n\t}\r\n\r\n\tprivate getTemplate(): string {\r\n\t\tconst modifications: string = this.options.modifications\r\n\t\t\t?.reduce((acc, val) => acc + ` ${val}`, '') || ''\r\n\t\treturn `\r\n\t\t  <div class=\"c-loader ${this.CLASS_BLOCK} ${modifications}\">\r\n\t\t\t<div class=\"c-loader__content\">\r\n\t\t\t  <div class=\"c-loader__icon\"></div>\r\n\t\t\t</div>\r\n\t\t  </div>\r\n    \t`;\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.initElements();\r\n\t}\r\n\r\n\tprivate initElements(): void {\r\n\t\tif (this.options.element === \"create\") {\r\n\t\t\tthis.blockEl = this.create();\r\n\t\t} else {\r\n\t\t\tif (!isHTMLElement(this.options.element)) {\r\n\t\t\t\tthrow new Error('Element is for HTMLElement !');\r\n\t\t\t}\r\n\t\t\tthis.blockEl = this.options.element;\r\n\t\t}\r\n\t}\r\n}\r\n","import {ELoaderModification, ILoader} from \"@components/loader/model\";\r\nimport Loader from \"@components/loader/Loader\";\r\n\r\nexport default class GlobalLoader {\r\n\tprivate static instance: GlobalLoader;\r\n\r\n\tprivate loader: ILoader;\r\n\tprivate loaderPlacementEl: HTMLElement;\r\n\r\n\tconstructor() {\r\n\t\tif (GlobalLoader.instance) {\r\n\t\t\tthrow new Error(\"Error: Instantiation failed: Use GlobalLoader.getInstance() instead of new.\");\r\n\t\t}\r\n\t\tGlobalLoader.instance = this;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tpublic static getInstance(): GlobalLoader {\r\n\t\tif (!GlobalLoader.instance) {\r\n\t\t\tGlobalLoader.instance = new GlobalLoader();\r\n\t\t}\r\n\t\treturn this.instance;\r\n\t}\r\n\r\n\tpublic show(): void {\r\n\t\tthis.loader.show();\r\n\t}\r\n\r\n\tpublic hide(): void {\r\n\t\tthis.loader.hide();\r\n\t}\r\n\r\n\tprivate init(): void {\r\n\t\tthis.loader = new Loader({\r\n\t\t\telement: \"create\",\r\n\t\t\tmodifications: [\r\n\t\t\t\tELoaderModification.fixed\r\n\t\t\t]\r\n\t\t});\r\n\t\tthis.loaderPlacementEl = document.body.appendChild(this.loader.getHTMLElement());\r\n\t}\r\n}\r\n","import {TField} from \"@modules/field/model\";\r\n\r\nexport type TFormControlsOptions = {\r\n\tonChange?: (field) => void;\r\n}\r\n\r\nexport type TFormControlsChangeSchema = Record<string, unknown>;\r\n\r\nexport default class FormControlsChange {\r\n\tprivate dirty: boolean = false;\r\n\tprivate formSchema: TFormControlsChangeSchema;\r\n\r\n\tconstructor(private form: HTMLFormElement, private options?: TFormControlsOptions) {\r\n\t\tif (!this.form) {\r\n\t\t\tthrow new Error('Form is not defined !');\r\n\t\t}\r\n\t\tthis.formSchema = this.createSchema(this.form);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic hasChanges(): boolean {\r\n\t\treturn this.dirty;\r\n\t}\r\n\r\n\tprivate createSchema(form: HTMLFormElement): TFormControlsChangeSchema {\r\n\t\tconst schema: TFormControlsChangeSchema = {};\r\n\t\tconst formData: FormData = new FormData(form);\r\n\t\tconst toggles: Array<HTMLInputElement> = Array.from(this.form.querySelectorAll(`[type=\"checkbox\"], [type=\"radio\"]`));\r\n\t\ttoggles.forEach((toggle) => {\r\n\t\t\tschema[`${toggle.name}:${toggle.value}`] = toggle.checked;\r\n\t\t});\r\n\t\tformData.forEach((value, key) => {\r\n\t\t\tconst element = this.form.querySelector(`[name=\"${key}\"]`) as HTMLInputElement\r\n\t\t\tif (this.isToggle(element)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tschema[key] = value;\r\n\t\t});\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tprivate isToggle(element: HTMLInputElement): boolean {\r\n\t\tconst type = element.type.toLowerCase();\r\n\t\treturn type === 'checkbox' || type === 'radio';\r\n\t}\r\n\r\n\tprivate checkDirty() {\r\n\t\tconst currentSchema: TFormControlsChangeSchema = this.createSchema(this.form);\r\n\t\tthis.dirty = false;\r\n\t\tObject.keys(currentSchema).forEach((key) => {\r\n\t\t\tif (this.formSchema[key] != currentSchema[key]) {\r\n\t\t\t\tthis.dirty = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst filed: Array<TField> = Array.from(this.form.querySelectorAll(`INPUT, TEXTAREA, SELECT`));\r\n\t\tthis.createInstance(filed);\r\n\t}\r\n\r\n\tprivate createInstance(fields: Array<TField>): void {\r\n\t\tfields.forEach((filed) => {\r\n\t\t\tthis.attachChange(filed);\r\n\t\t});\r\n\t}\r\n\r\n\tprivate attachChange(field: TField): void {\r\n\t\tfield.addEventListener('change', () => {\r\n\t\t\tthis.checkDirty();\r\n\t\t\tthis.options?.onChange?.(field);\r\n\t\t});\r\n\t}\r\n}\r\n","import CartCostLine from \"@modules/cart/CartCostLine\";\r\nimport WebComponentLite from \"@modules/web-component/WebComponentLite\";\r\nimport {customElement, property, state} from \"lit-element\";\r\nimport {AxiosRequestConfig} from \"axios\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {BehaviorSubject} from \"rxjs\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport {EPriceRequestTypes, TPricesResponse, TTariffPriceRequest} from \"@models/Tariff\";\r\nimport {ECartCostLineNames} from \"@modules/cart/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\n\r\n\r\n@customElement('prices-calculator')\r\nexport default class LoanCalculator extends WebComponentLite {\r\n\tprivate CLASS_COST_LINE: string = 'js-cartCostLine';\r\n\tprivate CLASS_LOAN_TOTAL: string = 'js-calculateLoanTotal';\r\n\tprivate DATA_ATTR_REQUEST_CONFIG = 'calculate-request-config';\r\n\tprivate costLineEl: HTMLElement;\r\n\tprivate cartCostLine: CartCostLine;\r\n\tprivate loanTotalCalculatorEl: HTMLElement;\r\n\r\n\t@property({\r\n\t\ttype: Object,\r\n\t\tattribute: 'calculate-request-config',\r\n\t})\r\n\tpublic calculatePricesRequestConfig: AxiosRequestConfig = {\r\n\t\turl: '/checkout/calculate_prices/',\r\n\t\tmethod: \"POST\",\r\n\t}\r\n\t@state()\r\n\tprivate isGlobalLoading: boolean = false;\r\n\r\n\tprivate httpService: HttpRequest = new HttpRequest();\r\n\tpublic readonly status: BehaviorSubject<EComponentStatuses> = new BehaviorSubject<EComponentStatuses>(EComponentStatuses.LOADING);\r\n\r\n\tpublic init(): void {\r\n\t\tthis.costLineEl = document.querySelector(`.${this.CLASS_COST_LINE}`);\r\n\t\tif (!this.costLineEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.cartCostLine = new CartCostLine(this.costLineEl);\r\n\t\tthis.loanTotalCalculatorEl = document.querySelector(`.${this.CLASS_LOAN_TOTAL}`);\r\n\t\tconst requestConfigAttribute = this.loanTotalCalculatorEl?.getAttribute(this.DATA_ATTR_REQUEST_CONFIG);\r\n\t\tif (requestConfigAttribute) {\r\n\t\t\tconst requestConfig: AxiosRequestConfig = JSON.parse(requestConfigAttribute);\r\n\t\t\tthis.calculatePricesRequestConfig = requestConfig;\r\n\t\t}\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tif (this.loanTotalCalculatorEl) {\r\n\t\t\tthis.calculatePrices();\r\n\t\t\tthis.status\r\n\t\t\t\t.asObservable()\r\n\t\t\t\t.subscribe(status => {\r\n\t\t\t\t\tthis.cartCostLine.handleLoader(status);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tpublic calculatePrices(price: string = null, type: EPriceRequestTypes = null): void {\r\n\t\tif (this.isGlobalLoading) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.isGlobalLoading = true;\r\n\t\tconst {url, method} = this.calculatePricesRequestConfig;\r\n\t\tconst postData: TTariffPriceRequest = {\r\n\t\t\tprice: price,\r\n\t\t\ttype: type\r\n\t\t}\r\n\t\tthis.status.next(EComponentStatuses.LOADING);\r\n\t\tthis.httpService\r\n\t\t\t.request<TPricesResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod:method,\r\n\t\t\t\tdata: postData,\r\n\t\t\t})\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.status.next(EComponentStatuses.READY);\r\n\t\t\t\tthis.emitEventOnResponseCalculatePrices(parseFloat(response.data?.data?.pricePerMonth) || 0)\r\n\t\t\t\tif (this.loanTotalCalculatorEl) {\r\n\t\t\t\t\tthis.updatePrice(parseFloat(response.data?.data?.pricePerMonth) || 0);\r\n\t\t\t\t}\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t\tthis.status.next(EComponentStatuses.ERROR);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isGlobalLoading = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate emitEventOnResponseCalculatePrices(price: number): void {\r\n\t\tconst event = new CustomEvent('on-response-calculate-prices', {\r\n\t\t\tdetail: {\r\n\t\t\t\t'price': price\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.dispatchEvent(event);\r\n\t}\r\n\r\n\tprivate updatePrice(price: number): void {\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\tprice.toString(),\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT,\r\n\t\t);\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.PRICE_PER_MONTH, pricePerMonth);\r\n\t}\r\n}\r\n","import DynamicActivation from \"@modules/dynamic-element/DynamicActivation\";\r\nimport AccentCollapseRemoteWithBtnSwitchFactory from \"@scenario/AccentCollapseRemoteWithBtnSwitchFactory\";\r\nimport AndroidActiveKeyboardHandler from \"@scenario/AndroidActiveKeyboardHandler\";\r\nimport ApplyFilters from \"@scenario/ApplyFilters\";\r\nimport CartPreviewDisplay from \"@scenario/CartPreviewDisplay\";\r\nimport ClearInput from \"@scenario/ClearInput\";\r\nimport CollapseRemoteWithBtnSwitchFactory from \"@scenario/CollapseRemoteWithBtnSwitchFactory\";\r\nimport EmitPostMessageFromIframe from \"@scenario/EmitPostMessageFromIframe\";\r\nimport FormSubmit from \"@scenario/FormSubmit\";\r\nimport FullHeightIframe from \"@scenario/FullHeightIframe\";\r\nimport IntervalReloadPage from \"@scenario/IntervalReloadPage\";\r\nimport ModalFilters from \"@scenario/ModalFilters\";\r\nimport OpenSelectCity from \"@scenario/OpenSelectCity\";\r\nimport PostMessageHandling from \"@scenario/PostMessageHandling\";\r\nimport AddToCart from \"@scenario/AddToCart\";\r\nimport SideNav from \"@scenario/SideNav\";\r\nimport StickyCostLine from \"@scenario/StickyCostLine\";\r\nimport StickyFilters from \"@scenario/StickyFilters\";\r\nimport StickyProductPicture from \"@scenario/StickyProductPicture\";\r\nimport UpdateScheduleFromSelect from \"@scenario/UpdateScheduleFromSelect\";\r\nimport Wishlist from \"@scenario/Wishlist\";\r\nimport UpdateCartPaymentMethodOnItemChange from \"@scenario/UpdateCartPaymentMethodOnItemChange\";\r\nimport UpdateBtnCartOnDeviceStep from \"@scenario/UpdateBtnCartOnDeviceStep\";\r\nimport ApplyFiltersRequestReplacement from \"@scenario/ApplyFiltersRequestReplacement\";\r\nimport UpdateBtnCartOnTariffStep from \"@scenario/UpdateBtnCartOnTariffStep\";\r\nimport UpdateCartCostOnTariffStep from \"@scenario/UpdateCartCostOnTariffStep\";\r\nimport UpdateBtnCartOnInsuranceStep from \"@scenario/UpdateBtnCartOnInsuranceStep\";\r\nimport UpdateCartCostOnInsuranceStep from \"@scenario/UpdateCartCostOnInsuranceStep\";\r\nimport CheckoutAvailableBtnNextWhenSelectTariff from \"@scenario/CheckoutAvailableBtnNextWhenSelectTariff\";\r\nimport CartValidateForUnavailableProducts from \"@scenario/CartValidateForUnavailableProducts\";\r\nimport LoanCalculator from \"@scenario/LoanCalculator\";\r\nimport HiddenLinks from '@scenario/HiddenLinks';\r\n\r\nnew AndroidActiveKeyboardHandler().init();\r\nnew Wishlist().init();\r\nnew FormSubmit().init();\r\nnew StickyProductPicture().init();\r\nnew StickyCostLine().init();\r\nnew DynamicActivation(\r\n\tnew AccentCollapseRemoteWithBtnSwitchFactory(),\r\n\t{\r\n\t\tkey: 'accent-collapse-remote-with-btn-switch',\r\n\t\tselector: '.js-accentCollapseRemoteWithBtnSwitchAuto',\r\n\t}\r\n)\r\nnew DynamicActivation(\r\n\tnew CollapseRemoteWithBtnSwitchFactory(),\r\n\t{\r\n\t\tkey: 'collapse-remote-with-btn-switch',\r\n\t\tselector: '.js-collapseRemoteWithBtnSwitchAuto',\r\n\t}\r\n)\r\nnew ClearInput().init();\r\nnew SideNav().init();\r\nnew ApplyFilters().init();\r\nnew FullHeightIframe().init();\r\nnew IntervalReloadPage().init();\r\nnew EmitPostMessageFromIframe().init();\r\nnew PostMessageHandling().init();\r\nnew OpenSelectCity().init();\r\nnew UpdateScheduleFromSelect().init();\r\nnew StickyFilters().init();\r\nconst modalFilters = new ModalFilters()\r\nmodalFilters.init();\r\nnew AddToCart().init();\r\nnew CartPreviewDisplay().init();\r\nnew ApplyFiltersRequestReplacement().init(modalFilters);\r\nnew UpdateCartPaymentMethodOnItemChange().init();\r\nnew UpdateBtnCartOnDeviceStep().init();\r\nnew UpdateBtnCartOnTariffStep().init();\r\nnew UpdateCartCostOnTariffStep().init();\r\nnew UpdateBtnCartOnInsuranceStep().init();\r\nnew UpdateCartCostOnInsuranceStep().init();\r\nnew CheckoutAvailableBtnNextWhenSelectTariff().init();\r\nnew CartValidateForUnavailableProducts().init();\r\nnew LoanCalculator().init();\r\nnew HiddenLinks().init();\r\n","import KeyboardState from \"@modules/keyboard/KeyboardState\";\r\nimport {EKeyboardState, IKeyboardState} from \"@modules/keyboard/model\";\r\nimport {IPlatform} from \"@modules/platform/model\";\r\nimport Platform from \"@modules/platform/Platform\";\r\n\r\nexport default class AndroidActiveKeyboardHandler {\r\n\tprivate CLASS_ACTIVE_KEYBOARD: string = 's-active-keyboard';\r\n\r\n\tprivate keyboardState: IKeyboardState;\r\n\tprivate platform: IPlatform;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.platform = Platform.getInstance();\r\n\t\tif (!this.platform.isAndroid()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.keyboardState = KeyboardState.getInstance();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tthis.keyboardState\r\n\t\t\t.getStream()\r\n\t\t\t.subscribe(state => {\r\n\t\t\t\tthis.changeClassByState(state);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate changeClassByState(keyboardState: EKeyboardState): void {\r\n\t\tif (keyboardState === EKeyboardState.ACTIVE) {\r\n\t\t\tdocument.body.classList.add(this.CLASS_ACTIVE_KEYBOARD);\r\n\t\t} else {\r\n\t\t\tdocument.body.classList.remove(this.CLASS_ACTIVE_KEYBOARD);\r\n\t\t}\r\n\t}\r\n}\r\n","import Badge from \"@components/badge/Badge\";\r\nimport {getDefinitionElement, isDefinitionElementEvent, strToBoolean} from \"@helpers/index\";\r\nimport {EWishlistStatus, TWishlistResponse} from \"@models/Wishlist\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {Method} from \"axios\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class Wishlist {\r\n\tprivate CLASS_WISHLIST: string = 'js-wishlist';\r\n\tprivate CLASS_BLOCK: string = 'js-wishlistBlock';\r\n\tprivate CLASS_HANDLER: string = 'js-wishlistHandler';\r\n\tprivate CLASS_FORM: string = 'js-wishlistForm';\r\n\tprivate CLASS_BADGE: string = 'js-wishlistBudge';\r\n\r\n\tprivate CLASS_ACTIVE: string = 'is-active';\r\n\tprivate CLASS_LOADING: string = 'is-loading';\r\n\r\n\r\n\tprivate DATA_ATTR_REMOVE_UNACTIVE: string = 'data-remove-unactive';\r\n\r\n\tprivate badges: Array<Badge> = [];\r\n\tprivate httpRequest: HttpRequest = new HttpRequest();\r\n\r\n\tpublic init(): void {\r\n\t\tconst badgeEls: Array<HTMLElement> = Array.from(document.getElementsByClassName(this.CLASS_BADGE)) as Array<HTMLElement>;\r\n\t\tthis.badges = badgeEls.map(badgeEl => new Badge(badgeEl));\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate request(handler: HTMLButtonElement): void {\r\n\t\tif (handler.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\thandler.disabled = true;\r\n\t\thandler.classList.add(this.CLASS_LOADING);\r\n\t\tconst form: HTMLFormElement = handler.querySelector(`.${this.CLASS_FORM}`);\r\n\t\tthis.httpRequest.request<TWishlistResponse, object>({\r\n\t\t\tmethod: form.method as Method,\r\n\t\t\turl: form.action,\r\n\t\t\tdata: new FormData(form)\r\n\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tconst status: EWishlistStatus = response.data.data.status;\r\n\t\t\t\tthis.updateStatus(handler, status);\r\n\t\t\t\tthis.updateBadges(response.data.data.quantity);\r\n\t\t\t\tthis.updateIdenticalHandlerStatus(handler, status);\r\n\t\t\t\tthis.handleRemoveUnactive(handler, status);\r\n\t\t\t\tif (status === EWishlistStatus.ADDED) {\r\n\t\t\t\t\tthis.updateContent(handler);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\t//TODO: handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\thandler.classList.remove(this.CLASS_LOADING);\r\n\t\t\t\thandler.disabled = false;\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate updateStatus(handler: HTMLElement, status: EWishlistStatus): void {\r\n\t\tswitch (status) {\r\n\t\t\tcase EWishlistStatus.ADDED:\r\n\t\t\t\thandler.classList.add(this.CLASS_ACTIVE);\r\n\t\t\t\treturn;\r\n\t\t\tcase EWishlistStatus.REMOVED:\r\n\t\t\t\thandler.classList.remove(this.CLASS_ACTIVE);\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateBadges(quantity: number): void {\r\n\t\tthis.badges.forEach(badge => {\r\n\t\t\tbadge.setValue(quantity == 0 ? '' : quantity.toString())\r\n\t\t});\r\n\t}\r\n\r\n\tprivate updateIdenticalHandlerStatus(handler: HTMLElement, status: EWishlistStatus): void {\r\n\t\tthis.getIdenticalHandlers(handler)\r\n\t\t\t.forEach(identityHandler => this.updateStatus(identityHandler, status));\r\n\t}\r\n\r\n\tprivate getIdenticalHandlers(handler: HTMLElement): Array<HTMLElement> {\r\n\t\tconst skuIdInput: HTMLInputElement = handler.querySelector(`input[name=\"skuId\"]`);\r\n\t\tif (!skuIdInput) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconst skuId: string = skuIdInput.value;\r\n\t\tconst inputs: Array<HTMLInputElement> = Array.from(\r\n\t\t\tdocument.querySelectorAll(`.${this.CLASS_HANDLER} input[name=\"skuId\"][value=\"${skuId}\"]`)\r\n\t\t);\r\n\t\treturn inputs\r\n\t\t\t.map(input => input.closest(`.${this.CLASS_HANDLER}`))\r\n\t\t\t.filter(el => el !== handler) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprivate handleRemoveUnactive(handler: HTMLElement, status: EWishlistStatus): void {\r\n\t\tif (\r\n\t\t\tstatus !== EWishlistStatus.REMOVED ||\r\n\t\t\t!strToBoolean(handler.getAttribute(this.DATA_ATTR_REMOVE_UNACTIVE))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst block: HTMLElement = handler.closest(`.${this.CLASS_BLOCK}`);\r\n\t\tif (block) {\r\n\t\t\tconst parent = block.parentElement;\r\n\t\t\tblock.remove();\r\n\t\t\tif (!parent.childElementCount) {\r\n\t\t\t\tconst url: URL = new URL(window.location.href);\r\n\t\t\t\turl.searchParams.delete('page');\r\n\t\t\t\twindow.location.href = url.href;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst handler: HTMLButtonElement = getDefinitionElement<HTMLButtonElement>(event.target as HTMLElement, selectorHandler);\r\n\t\t\t\tthis.request(handler);\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate updateContent(handler: HTMLButtonElement): void {\r\n\t\tconst cart: HTMLElement = document.querySelector(`.${this.CLASS_WISHLIST}`);\r\n\t\tif (!cart) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twindow.location.reload();\r\n\t}\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport {IBtn} from \"@modules/btn/model\";\r\nimport {AxiosError, Method} from \"axios\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {strToBoolean} from \"@helpers/index\";\r\nimport {TRequestResponse} from \"@modules/http-request/model\";\r\nimport FormValidator from \"@modules/form/Validator\";\r\nimport {IFormValidator} from \"@modules/form/model\";\r\n\r\nexport default class FormSubmit {\r\n\tprivate DATA_ATTR_AJAX: string = 'data-form-submit-ajax';\r\n\r\n\tprivate httpRequest: HttpRequest = new HttpRequest();\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(window, 'submit')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst btnEl: HTMLButtonElement = this.getSubmitter(event);\r\n\t\t\t\tconst formEl: HTMLFormElement = event.target as HTMLFormElement;\r\n\t\t\t\tconst btn: IBtn = new Btn(btnEl);\r\n\r\n\t\t\t\tif (this.isAjax(formEl)) {\r\n\t\t\t\t\tthis.request(btn, formEl)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tformEl.submit();\r\n\t\t\t\t\tbtn\r\n\t\t\t\t\t\t.disable()\r\n\t\t\t\t\t\t.addLoader()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate isAjax(form: HTMLFormElement): boolean {\r\n\t\treturn strToBoolean(form.getAttribute(this.DATA_ATTR_AJAX));\r\n\t}\r\n\r\n\tprivate request(btn: IBtn, form: HTMLFormElement): void {\r\n\t\tif (btn.isDisabled()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst formValidator: IFormValidator = new FormValidator(form);\r\n\t\tbtn\r\n\t\t\t.addLoader()\r\n\t\t\t.disable();\r\n\t\tthis.httpRequest.request<string, object>({\r\n\t\t\tmethod: form.method as Method,\r\n\t\t\turl: form.action,\r\n\t\t\tdata: new FormData(form)\r\n\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tformValidator.clearMessages();\r\n\t\t\t})\r\n\t\t\t.catch((reject: AxiosError<TRequestResponse>) => {\r\n\t\t\t\tformValidator.clearMessages();\r\n\t\t\t\tif (reject.response.status === 400) {\r\n\t\t\t\t\tformValidator.showErrors(reject.response.data.metadata.errorFields);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tbtn\r\n\t\t\t\t\t.removeLoader()\r\n\t\t\t\t\t.enable();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getSubmitter(event: Event): HTMLButtonElement {\r\n\t\tconst form: HTMLFormElement = event.target as HTMLFormElement;\r\n\t\tconst formID: string = form.getAttribute('id');\r\n\t\tlet submitter: HTMLButtonElement;\r\n\t\tconst eventSubmitter: any = event['submitter'];\r\n\t\tif (eventSubmitter && eventSubmitter.tagName === 'BUTTON') {\r\n\t\t\tsubmitter = eventSubmitter;\r\n\t\t} else {\r\n\t\t\tsubmitter = form.querySelector(`BUTTON[type='submit']`)\r\n\t\t}\r\n\t\tif (!submitter && formID) {\r\n\t\t\tsubmitter = document.querySelector(`BUTTON[form='${formID}']`);\r\n\t\t}\r\n\t\treturn submitter;\r\n\t}\r\n}\r\n","import {IDynamicActivationSubjectFactory} from \"@modules/dynamic-element/model\";\r\nimport AccentCollapseRemoteWithBtnSwitch from \"@scenario/AccentCollapseRemoteWithBtnSwitch\";\r\n\r\nexport default class AccentCollapseRemoteWithBtnSwitchFactory implements IDynamicActivationSubjectFactory {\r\n\tcreate(handler: HTMLElement) {\r\n\t\tif (!handler) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnew AccentCollapseRemoteWithBtnSwitch(handler);\r\n\t}\r\n}\r\n","import {IDynamicActivationSubjectFactory} from \"@modules/dynamic-element/model\";\r\nimport CollapseRemoteWithBtnSwitch from \"@scenario/CollapseRemoteWithBtnSwitch\";\r\n\r\nexport default class CollapseRemoteWithBtnSwitchFactory implements IDynamicActivationSubjectFactory {\r\n\tcreate(handler: HTMLElement) {\r\n\t\tif (!handler) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tnew CollapseRemoteWithBtnSwitch(handler);\r\n\t}\r\n}\r\n","import {fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\nimport {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\n\r\nexport default class ClearInput {\r\n\tprivate CLASS_HANDLER: string = 'js-clearInput'\r\n\tprivate CLASS_FIELD: string = 'js-field';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst btn: HTMLButtonElement = getDefinitionElement(event.target as HTMLElement, selectorHandler)\r\n\t\t\t\tconst field: HTMLElement = btn.closest(`.${this.CLASS_FIELD}`);\r\n\t\t\t\tconst input: HTMLInputElement = field.querySelector('INPUT');\r\n\t\t\t\tinput.value = '';\r\n\t\t\t\tinput.dispatchEvent(new Event('input'));\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {EIdsLayout} from \"@variables\";\r\nimport MenuBtn from \"@components/menu-btn/MenuBtn\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {EAnimationType, IAnimation} from \"@modules/animation/model\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport GlobalClick from \"@modules/global-click/GlobalClick\";\r\nimport {debounceTime, filter} from \"rxjs/operators\";\r\nimport {isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {IScrollable} from \"@modules/scroll/model\";\r\nimport Scrollable from \"@modules/scroll/Scrollable\";\r\n\r\nexport default class SideNav {\r\n\tprivate CLASS_HANDLER: string = 'js-sideNavHandler';\r\n\r\n\tprivate sideNavEl: HTMLElement;\r\n\tprivate handlerEl: HTMLButtonElement;\r\n\r\n\tprivate menuBtn: MenuBtn;\r\n\tprivate animation: IAnimation;\r\n\tprivate scrollable: IScrollable;\r\n\r\n\tprivate isOpen: boolean = false;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.sideNavEl = document.getElementById(EIdsLayout.sideNav);\r\n\t\tthis.handlerEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tif (!this.sideNavEl || !this.handlerEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.scrollable = new Scrollable(document.body);\r\n\t\tthis.menuBtn = new MenuBtn(this.handlerEl);\r\n\t\tthis.animation = new Animation(\r\n\t\t\tthis.sideNavEl,\r\n\t\t\t{\r\n\t\t\t\ttype: EAnimationType.TRANSITION,\r\n\t\t\t\tname: 'c-side-nav-animation',\r\n\t\t\t\tdisplayProperty: 'flex',\r\n\t\t\t\tbeforeEnter: () => {\r\n\t\t\t\t\tthis.isOpen = true;\r\n\t\t\t\t},\r\n\t\t\t\tbeforeLeave: () => {\r\n\t\t\t\t\tthis.isOpen = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.handlerEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tthis.toggle();\r\n\t\t\t});\r\n\r\n\t\tGlobalClick\r\n\t\t\t.getInstance()\r\n\t\t\t.getStreamOnClick()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => !isDefinitionElementEvent(event, `#${EIdsLayout.sideNav}`)),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tif (this.isOpen) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tfromEvent(window, 'resize')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(60),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.setHeight();\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate toggle(): void {\r\n\t\tif (this.isOpen) {\r\n\t\t\tthis.close();\r\n\t\t} else {\r\n\t\t\tthis.open();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate open(): void {\r\n\t\twindow.scrollTo(0, 0);\r\n\t\tthis.setHeight();\r\n\t\tthis.scrollable.disable();\r\n\t\tthis.animation.show();\r\n\t\tthis.menuBtn.open();\r\n\t}\r\n\r\n\tprivate close(): void {\r\n\t\tthis.scrollable.enable();\r\n\t\tthis.animation.hide();\r\n\t\tthis.menuBtn.close();\r\n\t}\r\n\r\n\tprivate setHeight(): void {\r\n\t\tconst header: HTMLElement = document.getElementById(EIdsLayout.header);\r\n\t\tlet height: number = header?.offsetHeight || 0;\r\n\t\tthis.sideNavEl.style.cssText += `\r\n\t\t\ttop: ${height}px;\r\n\t\t\theight: calc(100% - ${height}px);\r\n\t\t`\r\n\t}\r\n}\r\n","import {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class ApplyFilters {\r\n\tprivate CLASS_HANDLER: string = 'js-applyFilters';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst handler: HTMLElement = getDefinitionElement(event.target as HTMLElement, selectorHandler);\r\n\t\t\t\tconst form: HTMLFormElement = handler.closest(`FORM`);\r\n\t\t\t\tthis.clearTogglesWithAppointmentForAll();\r\n\t\t\t\tform.submit();\r\n\t\t\t})\r\n\t}\r\n\r\n\tprivate clearTogglesWithAppointmentForAll(): void {\r\n\t\tconst toggles: Array<HTMLInputElement> = [\r\n\t\t\t...Array.from(document.querySelectorAll(`input[type=\"checkbox\"][value=\"\"]`)),\r\n\t\t\t...Array.from(document.querySelectorAll(`input[type=\"radio\"][value=\"\"]`))\r\n\t\t] as Array<HTMLInputElement>;\r\n\t\ttoggles.forEach(toggle => {\r\n\t\t\ttoggle.checked = false;\r\n\t\t})\r\n\t}\r\n\r\n}\r\n","import {fromEvent, merge} from \"rxjs\";\r\nimport {debounceTime} from \"rxjs/operators\";\r\n\r\nexport default class FullHeightIframe {\r\n\tprivate CLASS_HANDLER: string = 'js-fullHeightIframe';\r\n\r\n\tprivate CLASS_MOD_PARENT_CONTENT_HEIGHT: string = 'u-iframe-full_paren-content-height';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.iframesOnLoad();\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(window, 'resize')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(60),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.getIframes().forEach(iframe => {\r\n\t\t\t\t\tthis.updateHeight(iframe);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateHeight(iframe: HTMLIFrameElement): void {\r\n\t\tconst iframeDocument: Document = this.getIframeDocument(iframe);\r\n\t\tif (iframeDocument) {\r\n\t\t\tiframe.height = (this.getIframeDocument(iframe)?.body?.scrollHeight || 0) + 'px';\r\n\t\t\tiframe.classList.remove(this.CLASS_MOD_PARENT_CONTENT_HEIGHT);\r\n\t\t} else {\r\n\t\t\tiframe.classList.add(this.CLASS_MOD_PARENT_CONTENT_HEIGHT);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setOverflowHidden(iframe: HTMLIFrameElement): void {\r\n\t\tthis.getIframeDocument(iframe)?.head?.appendChild(\r\n\t\t\tthis.getStyle()\r\n\t\t);\r\n\t}\r\n\r\n\tprivate getStyle(): HTMLStyleElement {\r\n\t\tconst styleEl: HTMLStyleElement = document.createElement('style');\r\n\t\tstyleEl.setAttribute('type', 'text/css');\r\n\t\tstyleEl.innerHTML = `\r\n\t\t  body {\r\n\t\t\toverflow: hidden !important;\r\n\t\t  }\r\n\t\t`;\r\n\t\treturn styleEl;\r\n\t}\r\n\r\n\tprivate getIframeDocument(iframe: HTMLIFrameElement): HTMLDocument {\r\n\t\ttry {\r\n\t\t\treturn iframe.contentDocument || iframe.contentWindow?.document;\r\n\t\t} catch (e) {\r\n\t\t\tconsole?.info(`FullHeightIframe: ${e}`);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tpublic getIframeWindow(iframe: HTMLIFrameElement): Window {\r\n\t\ttry {\r\n\t\t\treturn iframe.contentWindow;\r\n\t\t} catch (e) {\r\n\t\t\tconsole?.info(`FullHeightIframe: ${e}`);\r\n\t\t}\r\n\t\treturn window;\r\n\t}\r\n\r\n\tprivate iframesOnLoad(): void {\r\n\t\tthis.getIframes().forEach(iframe => {\r\n\t\t\tthis.updateHeight(iframe);\r\n\t\t\tmerge(\r\n\t\t\t\tfromEvent(window, 'load'),\r\n\t\t\t\tfromEvent(this.getIframeWindow.apply(this, iframe), 'load'),\r\n\t\t\t\tfromEvent(iframe, 'load'),\r\n\t\t\t)\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tthis.setOverflowHidden(iframe);\r\n\t\t\t\t\tthis.updateHeight(iframe);\r\n\t\t\t\t});\r\n\t\t})\r\n\t}\r\n\r\n\tprivate getIframes(): Array<HTMLIFrameElement> {\r\n\t\treturn Array.from(\r\n\t\t\tdocument.getElementsByClassName(this.CLASS_HANDLER)\r\n\t\t) as Array<HTMLIFrameElement>;\r\n\t}\r\n}\r\n","import {interval} from \"rxjs\";\r\n\r\nexport default class IntervalReloadPage {\r\n\tprivate CLASS_HANDLER: string = 'js-intervalReloadPage';\r\n\tprivate DATA_INTERVAL: string = 'data-interval';\r\n\r\n\tprivate handlerEl: HTMLElement;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.handlerEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tif (this.handlerEl) {\r\n\t\t\tthis.attachInterval();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate attachInterval(): void {\r\n\t\tconst dataVal: string = this.handlerEl.getAttribute(this.DATA_INTERVAL);\r\n\t\tconst ms: number = dataVal ? parseFloat(dataVal) : 1000;\r\n\r\n\t\tinterval(ms)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tlocation.reload();\r\n\t\t\t})\r\n\t}\r\n}\r\n","export default class EmitPostMessageFromIframe {\r\n\tprivate CLASS_HANDLER: string = 'js-emitPostMessageFromIframe';\r\n\tprivate DATA_ATTR_EVENT_NAME: string = 'data-emit-post-message-from-iframe-event-name';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.getHandlers()\r\n\t\t\t.forEach(handler => {\r\n\t\t\t\tthis.emit(handler);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getHandlers(): Array<HTMLElement> {\r\n\t\treturn Array.from(\r\n\t\t\tdocument.getElementsByClassName(this.CLASS_HANDLER)\r\n\t\t) as Array<HTMLElement>;\r\n\t}\r\n\r\n\tprivate emit(handler: HTMLElement): void {\r\n\t\tconst eventName: string = handler.getAttribute(this.DATA_ATTR_EVENT_NAME);\r\n\t\tparent.postMessage(eventName, '*');\r\n\t}\r\n}\r\n","import {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter, map} from \"rxjs/operators\";\r\nimport CitySelection from \"../modules/city/CitySelection\";\r\n\r\nexport default class OpenSelectCity {\r\n\tprivate CLASS_HANDLER: string = 'js-openSelectCityHandler';\r\n\r\n\tpublic init(): void {\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t\tmap(event => getDefinitionElement(event.target as HTMLElement, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tCitySelection.getInstance().open();\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {TSchedule} from \"@components/schedule/model\";\r\nimport ScheduleComponent from \"@components/schedule/ScheduleComponent\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class UpdateScheduleFromSelect {\r\n\tprivate CLASS_HANDLER: string = 'js-updateScheduleFromSelectHandler';\r\n\tprivate DATA_ATTR_ID_SCHEDULE: string = 'data-id-schedule';\r\n\tprivate DATA_ATTR_OPTION_SCHEDULE: string = 'data-schedule';\r\n\r\n\tprivate selectEl: HTMLSelectElement;\r\n\tprivate scheduleEl: ScheduleComponent;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.selectEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tthis.scheduleEl = document.getElementById(this.selectEl?.getAttribute(this.DATA_ATTR_ID_SCHEDULE)) as ScheduleComponent;\r\n\r\n\t\tif (!this.selectEl || !this.scheduleEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.attachEvent();\r\n\t\tthis.setSchedule();\r\n\t}\r\n\r\n\tprivate setSchedule(): void {\r\n\t\tconst selectedOption = Array.from(this.selectEl.selectedOptions)?.[0];\r\n\t\tif (!selectedOption) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst schedule: TSchedule = JSON.parse(selectedOption.getAttribute(this.DATA_ATTR_OPTION_SCHEDULE));\r\n\t\tthis.scheduleEl\r\n\t\t\t.updateComplete\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.scheduleEl.data = schedule;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.selectEl, 'change')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.setSchedule();\r\n\t\t\t})\r\n\t}\r\n}\r\n","import {EAnimationType} from \"@modules/animation/model\";\r\nimport Modal from \"@modules/modal/Modal\";\r\nimport {IModal} from \"@modules/modal/model\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class ModalFilters {\r\n\tprivate CLASS_HANDLER: string = 'js-modalFiltersHandler';\r\n\tprivate DATA_ATTR_FILTER_ID: string = 'data-id-filter';\r\n\tprivate DATA_ATTR_MODAL_ID: string = 'data-id-modal';\r\n\tprivate CLASS_FILTERS_IN_MODAL: string = 's-category-search-page__filters-form_modal-insertion';\r\n\r\n\tprivate handlerEl: HTMLElement;\r\n\tprivate filterContentEl: HTMLElement;\r\n\tprivate modalEl: HTMLDialogElement;\r\n\tprivate modal: IModal;\r\n\tprivate parentFiltersEl: HTMLElement;\r\n\tprivate opened: boolean = false;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.handlerEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tthis.filterContentEl = document.getElementById(this.handlerEl?.getAttribute(this.DATA_ATTR_FILTER_ID));\r\n\t\tthis.modalEl = document.getElementById(this.handlerEl?.getAttribute(this.DATA_ATTR_MODAL_ID)) as HTMLDialogElement;\r\n\t\tthis.parentFiltersEl = this.filterContentEl?.parentElement;\r\n\t\tif (!this.handlerEl || !this.filterContentEl || !this.modalEl || !this.parentFiltersEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.modal = new Modal({\r\n\t\t\telement: this.modalEl,\r\n\t\t\tanimation: {\r\n\t\t\t\tdialogOption: {\r\n\t\t\t\t\tname: 'o-animation-fade-in-right',\r\n\t\t\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\t\t},\r\n\t\t\t\tviewOption: null,\r\n\t\t\t},\r\n\t\t\thooks: {\r\n\t\t\t\tafterOpen: () => {\r\n\t\t\t\t\tthis.opened = true;\r\n\t\t\t\t},\r\n\t\t\t\tafterClose: this.afterModalClose.bind(this),\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic open(): void {\r\n\t\tthis.setModalContent(this.filterContentEl);\r\n\t\tthis.modal.open();\r\n\t}\r\n\r\n\tpublic close(): void {\r\n\t\tthis.modal.close();\r\n\t}\r\n\r\n\tpublic isOpen(): boolean {\r\n\t\treturn this.opened;\r\n\t}\r\n\r\n\tpublic updateFilterContent(contentEl: HTMLElement): void {\r\n\t\tthis.filterContentEl = contentEl;\r\n\t\tthis.parentFiltersEl = this.filterContentEl?.parentElement;\r\n\t\tif (this.isOpen()) {\r\n\t\t\tthis.setModalContent(contentEl);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setModalContent(content: HTMLElement): void {\r\n\t\tthis.modal.getBodyEl().innerHTML = '';\r\n\t\tthis.modal.getBodyEl().append(content);\r\n\t\tthis.filterContentEl.classList.add(this.CLASS_FILTERS_IN_MODAL);\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.handlerEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.open();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate afterModalClose(): void {\r\n\t\tthis.parentFiltersEl.append(this.filterContentEl);\r\n\t\tthis.filterContentEl.classList.remove(this.CLASS_FILTERS_IN_MODAL);\r\n\t\tthis.opened = false;\r\n\t}\r\n\r\n}\r\n","import ProductCostLineComponent from \"@components/product-cost-line/ProductCostLineComponent\";\r\nimport {getDefinitionElement, isDefinitionElementEvent} from \"@helpers/index\";\r\nimport {TCartAddResponse} from \"@models/Cart\";\r\nimport CartQuantity from \"@modules/cart/CartQuantity\";\r\nimport ProductCartHandler from \"@modules/cart/ProductCartHandler\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {Method} from \"axios\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\nexport default class AddToCart {\r\n\tprivate CLASS_HANDLER: string = 'js-addToCartHandler';\r\n\tprivate CLASS_HANDLER_ON_PRODUCT_PAGE: string = 'js-addToCartHandlerOnProductPage'\r\n\tprivate CLASS_FORM: string = 'js-addToCartForm';\r\n\r\n\tprivate productCostLine: ProductCostLineComponent;\r\n\tprivate httpRequest: HttpRequest = new HttpRequest();\r\n\tprivate handlerOnProductPage: HTMLButtonElement;\r\n\tprivate cartQuantity: CartQuantity = CartQuantity.getInstance();\r\n\tprivate productCartHandler: ProductCartHandler = ProductCartHandler.getInstance();\r\n\r\n\tpublic init(): void {\r\n\t\tthis.productCostLine = document.querySelector(`c-product-cost-line`);\r\n\t\tthis.handlerOnProductPage = document.querySelector(`.${this.CLASS_HANDLER_ON_PRODUCT_PAGE}`);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate request(handler: HTMLButtonElement): void {\r\n\t\tif (handler.disabled) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.productCartHandler.setLoader(handler);\r\n\t\tthis.productCartHandler.setDisabled(handler);\r\n\t\tconst form: HTMLFormElement = handler.querySelector(`.${this.CLASS_FORM}`);\r\n\r\n\t\tthis.httpRequest.request<TCartAddResponse, object>({\r\n\t\t\tmethod: form.method as Method,\r\n\t\t\turl: form.action,\r\n\t\t\tdata: new FormData(form)\r\n\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.cartQuantity.update(response.data.data.cartItemCount);\r\n\t\t\t\tthis.productCartHandler.setActive(this.getSkuByHandler(handler), handler);\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\t//TODO: handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.productCartHandler.removeLoader(handler);\r\n\t\t\t\tthis.productCartHandler.removeDisabled(handler);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate getSkuByHandler(handler: HTMLElement): string {\r\n\t\tconst skuInput: HTMLInputElement = handler.querySelector(`input[name=\"sku\"]`);\r\n\t\tif (!skuInput) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\treturn skuInput.value;\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tconst selectorHandler: string = `.${this.CLASS_HANDLER}`;\r\n\t\tfromEvent(document, 'click')\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => isDefinitionElementEvent(event, selectorHandler)),\r\n\t\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tconst handler: HTMLButtonElement = getDefinitionElement<HTMLButtonElement>(event.target as HTMLElement, selectorHandler);\r\n\t\t\t\tthis.request(handler);\r\n\t\t\t});\r\n\r\n\t\tif (this.productCostLine) {\r\n\t\t\tfromEvent(this.productCostLine, 'on-btn-click')\r\n\t\t\t\t.subscribe(() => {\r\n\t\t\t\t\tconst handler: HTMLButtonElement = document.querySelector(`.${this.CLASS_HANDLER_ON_PRODUCT_PAGE}`);\r\n\t\t\t\t\tthis.request(handler);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n","import CartPreviewComponent from \"@components/cart-preview/CartPreviewComponent\";\r\nimport {isDefinitionElementEvent} from \"@helpers/index\";\r\nimport Animation from \"@modules/animation/Animation\";\r\nimport {EAnimationType, IAnimation} from \"@modules/animation/model\";\r\nimport GlobalClick from \"@modules/global-click/GlobalClick\";\r\nimport {EWindowBreakpoints} from \"@variables\";\r\nimport {animationFrameScheduler, fromEvent} from \"rxjs\";\r\nimport {filter} from \"rxjs/internal/operators\";\r\nimport {debounceTime, throttleTime} from \"rxjs/operators\";\r\n\r\nexport default class CartPreviewDisplay {\r\n\tprivate CLASS_HANDLER: string = 'js-cartPreviewDisplayHandler';\r\n\tprivate ID_CART_PREVIEW: string = 'js-cartPreviewDisplay';\r\n\r\n\tprivate handlerEl: HTMLElement;\r\n\tprivate cartPreviewEl: CartPreviewComponent;\r\n\tprivate cartPreviewAnimation: IAnimation;\r\n\tprivate isOpen: boolean = false;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.handlerEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tthis.cartPreviewEl = document.getElementById(this.ID_CART_PREVIEW) as CartPreviewComponent;\r\n\r\n\t\tif (!this.handlerEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.cartPreviewAnimation = new Animation(this.cartPreviewEl, {\r\n\t\t\ttype: EAnimationType.ANIMATION,\r\n\t\t\tname: 'o-animation-fade-down',\r\n\t\t\tbeforeEnter: () => {\r\n\t\t\t\tthis.updateCartPreviewPosition();\r\n\t\t\t},\r\n\t\t})\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.handlerEl, 'click')\r\n\t\t\t.subscribe(async event => {\r\n\t\t\t\tawait this.handleHandlerClick(event);\r\n\t\t\t});\r\n\r\n\t\tfromEvent(window, 'resize')\r\n\t\t\t.pipe(\r\n\t\t\t\tdebounceTime(25),\r\n\t\t\t\tthrottleTime(0, animationFrameScheduler),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateCartPreviewPosition();\r\n\t\t\t\tif (!this.canShowPreview()) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\tGlobalClick\r\n\t\t\t.getInstance()\r\n\t\t\t.getStreamOnClick()\r\n\t\t\t.pipe(\r\n\t\t\t\tfilter(event => !isDefinitionElementEvent(event, `#${this.ID_CART_PREVIEW}`)),\r\n\t\t\t\tfilter(event => !isDefinitionElementEvent(event, `.${this.CLASS_HANDLER}`)),\r\n\t\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tif (!this.isOpen) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate async handleHandlerClick(event: Event): Promise<void> {\r\n\t\tif (this.canShowPreview()) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tif (this.isOpen) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait this.show();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async show(): Promise<void> {\r\n\t\tthis.isOpen = true;\r\n\t\tawait this.cartPreviewEl.updateComplete;\r\n\t\tthis.cartPreviewEl.getData();\r\n\t\tthis.cartPreviewAnimation.show();\r\n\t}\r\n\r\n\tprivate hide(): void {\r\n\t\tthis.isOpen = false;\r\n\t\tthis.cartPreviewAnimation.hide();\r\n\t}\r\n\r\n\tprivate updateCartPreviewPosition(): void {\r\n\t\tconst top: number = this.handlerEl.offsetTop + this.handlerEl.scrollHeight + 10;\r\n\t\tlet right: number = 0;\r\n\t\tconst handlerWidth: number = this.handlerEl.offsetWidth;\r\n\t\tconst handlerLeft: number = this.handlerEl.offsetLeft;\r\n\t\tconst distanceRightOfHandler: number = window.innerWidth - (handlerLeft + handlerWidth);\r\n\t\tconst cartPreviewWidth: number = this.cartPreviewEl.offsetWidth;\r\n\t\tif (distanceRightOfHandler < (cartPreviewWidth / 2)) {\r\n\t\t\tright = 20;\r\n\t\t} else {\r\n\t\t\tright = distanceRightOfHandler - (cartPreviewWidth / 2);\r\n\t\t}\r\n\t\tthis.cartPreviewEl.style.top = `${top}px`;\r\n\t\tthis.cartPreviewEl.style.right = `${right}px`;\r\n\t}\r\n\r\n\tprivate canShowPreview(): boolean {\r\n\t\treturn window.innerWidth >= EWindowBreakpoints.lg;\r\n\t}\r\n}\r\n","import GlobalLoader from \"@modules/loader/GlobalLoader\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport FormControlsChange from \"@modules/form/FormControlsChange\";\r\nimport {Method} from \"axios\";\r\nimport {stringToHTML} from \"@helpers/index\";\r\nimport StickyFilters from \"@scenario/StickyFilters\";\r\nimport ModalFilters from \"@scenario/ModalFilters\";\r\nimport SmoothScroll from \"@modules/scroll/SmoothScroll\";\r\n\r\nexport type FilterResponse = {\r\n\tbody: string\r\n\turl: string\r\n}\r\n\r\nexport default class ApplyFiltersRequestReplacement {\r\n\tprivate CLASS_BLOCK: string = 'js-applyFiltersRequestReplacement';\r\n\tprivate CLASS_FORM: string = 'js-applyFiltersRequestReplacementForm';\r\n\tprivate CLASS_BLOCK_REPLACEMENT: string = 'js-applyFiltersRequestReplacementBlockReplacement';\r\n\r\n\tprivate blockEl: HTMLElement;\r\n\tprivate blockReplacementEl: HTMLElement;\r\n\tprivate formEl: HTMLFormElement;\r\n\r\n\tprivate globalLoader: GlobalLoader;\r\n\tprivate httpService: HttpRequest;\r\n\tprivate formControlsChange: FormControlsChange;\r\n\tprivate isRequesting: boolean = false;\r\n\tprivate modalFilter: ModalFilters;\r\n\tprivate smoothScroll: SmoothScroll;\r\n\r\n\tpublic init(modalFilter: ModalFilters): void {\r\n\t\tthis.blockEl = document.querySelector(`.${this.CLASS_BLOCK}`);\r\n\t\tthis.blockReplacementEl = this.blockEl?.querySelector(`.${this.CLASS_BLOCK_REPLACEMENT}`);\r\n\t\tthis.formEl = this.blockEl?.querySelector(`.${this.CLASS_FORM}`);\r\n\t\tthis.modalFilter = modalFilter;\r\n\r\n\t\tif (!this.blockEl || !this.blockReplacementEl || !this.formEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.smoothScroll = new SmoothScroll();\r\n\t\tthis.httpService = new HttpRequest();\r\n\t\tthis.globalLoader = GlobalLoader.getInstance();\r\n\t\tthis.attachEventOnFormChange();\r\n\t}\r\n\r\n\tprivate attachEventOnFormChange(): void {\r\n\t\tthis.formControlsChange = new FormControlsChange(\r\n\t\t\tthis.formEl, {\r\n\t\t\t\tonChange: (field) => {\r\n\t\t\t\t\tthis.clearTogglesWithAppointmentForAll(field);\r\n\t\t\t\t\tthis.request();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tprivate request(): void {\r\n\t\tif (this.isRequesting) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isRequesting = true;\r\n\t\tthis.globalLoader.show();\r\n\t\tconst url = this.formEl.action;\r\n\t\tconst method = this.formEl.method;\r\n\t\tconst formData = new FormData(this.formEl);\r\n\r\n\t\tthis.httpService\r\n\t\t\t.request<FilterResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.handleResponse(response.data.data);\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\t\t\t\t//handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.globalLoader.hide();\r\n\t\t\t\tthis.isRequesting = false;\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleResponse(response: FilterResponse): void {\r\n\t\tthis.replaceContent(\r\n\t\t\tstringToHTML(response.body)\r\n\t\t);\r\n\t\tthis.initNewReplacementEl();\r\n\t\tthis.attachEventOnFormChange();\r\n\t\tthis.smoothScroll.scrollTo(this.formEl);\r\n\t\tthis.modalFilter.updateFilterContent(this.formEl);\r\n\t\tif (this.modalFilter.isOpen()) {\r\n\t\t\tthis.modalFilter.close();\r\n\t\t}\r\n\t\tif (response.url) {\r\n\t\t\twindow.history.pushState({}, document.title, response.url);\r\n\t\t}\r\n\t\tnew StickyFilters().init();\r\n\t}\r\n\r\n\tprivate replaceContent(contentEl: HTMLElement): void {\r\n\t\tthis.blockReplacementEl.replaceWith(contentEl);\r\n\t}\r\n\r\n\tprivate initNewReplacementEl(): void {\r\n\t\tthis.blockReplacementEl = this.blockEl?.querySelector(`.${this.CLASS_BLOCK_REPLACEMENT}`);\r\n\t\tthis.formEl = this.blockEl?.querySelector(`.${this.CLASS_FORM}`);\r\n\t}\r\n\r\n\tprivate clearTogglesWithAppointmentForAll(clickedToggle: HTMLInputElement): void {\r\n\t\tconst toggles: Array<HTMLInputElement> = [\r\n\t\t\t...Array.from(document.querySelectorAll(`input[type=\"checkbox\"][value=\"\"]`)),\r\n\t\t\t...Array.from(document.querySelectorAll(`input[type=\"radio\"][value=\"\"]`))\r\n\t\t] as Array<HTMLInputElement>;\r\n\t\ttoggles.forEach(toggle => {\r\n\t\t\tconst allToggles = Array.from(\r\n\t\t\t\tdocument.querySelectorAll(\r\n\t\t\t\t\t`input[type='radio'][name='${toggle.name}'], input[type='checkbox'][name='${toggle.name}']`\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t\t.filter(i => i != toggle) as Array<HTMLInputElement>;\r\n\r\n\t\t\tif (toggle === clickedToggle && clickedToggle.checked) {\r\n\t\t\t\tallToggles.forEach(i => i.checked = false);\r\n\t\t\t}\r\n\r\n\t\t\ttoggle.checked = false;\r\n\t\t});\r\n\t}\r\n}\r\n","import EditProductsCartComponent from \"@components/edit-products-cart/EditProductsCartComponent\";\r\nimport PaymentMethodSelectComponent from \"@components/payment-method/select/PaymentMethodSelectComponent\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class UpdateCartPaymentMethodOnItemChange {\r\n\tprivate CLASS_ITEM_CONTROLLER: string = 'js-cartEditProducts';\r\n\tprivate CLASS_PAYMENT_METHOD_SELECT: string = 'js-cartPaymentMethodSelect';\r\n\r\n\tprivate editProductsEl: EditProductsCartComponent;\r\n\tprivate paymentMethodSelectEl: PaymentMethodSelectComponent;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.editProductsEl = document.querySelector(`.${this.CLASS_ITEM_CONTROLLER}`);\r\n\t\tthis.paymentMethodSelectEl = document.querySelector(`.${this.CLASS_PAYMENT_METHOD_SELECT}`);\r\n\r\n\t\tif (!this.editProductsEl || !this.paymentMethodSelectEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.editProductsEl, 'on-change')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.paymentMethodSelectEl.updateData();\r\n\t\t\t});\r\n\t}\r\n}\r\n","import {IBtn} from \"@modules/btn/model\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport EditProductsCartComponent from \"@components/edit-products-cart/EditProductsCartComponent\";\r\nimport PaymentMethodSelectComponent from \"@components/payment-method/select/PaymentMethodSelectComponent\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\n\r\nexport default class UpdateBtnCartOnDeviceStep {\r\n\tprivate CLASS_EDIT_PRODUCTS: string = 'js-cartEditProducts';\r\n\tprivate CLASS_PAYMENT_METHOD_SELECT: string = 'js-cartPaymentMethodSelect';\r\n\r\n\tprivate CLASS_BTN: string = 'js-cartSubmitter';\r\n\r\n\tprivate editProductsEl: EditProductsCartComponent;\r\n\tprivate paymentMethodSelectEl: PaymentMethodSelectComponent;\r\n\tprivate btnEl: HTMLButtonElement;\r\n\r\n\tprivate btn: IBtn;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.editProductsEl = document.querySelector(`.${this.CLASS_EDIT_PRODUCTS}`);\r\n\t\tthis.paymentMethodSelectEl = document.querySelector(`.${this.CLASS_PAYMENT_METHOD_SELECT}`);\r\n\t\tthis.btnEl = document.querySelector(`.${this.CLASS_BTN}`);\r\n\r\n\t\tif (!this.btnEl || !this.editProductsEl || !this.paymentMethodSelectEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.btn = new Btn(this.btnEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.editProductsEl, 'on-status-change'),\r\n\t\t\tfromEvent(this.paymentMethodSelectEl, 'on-status-change')\r\n\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateBtnAvailable();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateBtnAvailable(): void {\r\n\t\tconst editProductsStatus = this.editProductsEl.status.getValue();\r\n\t\tconst paymentMethodStatus = this.paymentMethodSelectEl.status.getValue();\r\n\r\n\t\tif (editProductsStatus === EComponentStatuses.READY && paymentMethodStatus === EComponentStatuses.READY) {\r\n\t\t\tthis.btn.enable();\r\n\t\t} else {\r\n\t\t\tthis.btn.disable();\r\n\t\t}\r\n\t}\r\n}\r\n","import {IBtn} from \"@modules/btn/model\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport SelectTariffComponent from \"@components/select-tariff/SelectTariffComponent\";\r\n\r\nexport default class UpdateBtnCartOnTariffStep {\r\n\tprivate CLASS_SELECT_TARIFF: string = 'js-cartSelectTariff';\r\n\r\n\tprivate CLASS_BTN: string = 'js-cartSubmitter';\r\n\r\n\tprivate selectTariffEl: SelectTariffComponent;\r\n\tprivate btnEl: HTMLButtonElement;\r\n\r\n\tprivate btn: IBtn;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.selectTariffEl = document.querySelector(`.${this.CLASS_SELECT_TARIFF}`);\r\n\t\tthis.btnEl = document.querySelector(`.${this.CLASS_BTN}`);\r\n\r\n\t\tif (!this.btnEl || !this.selectTariffEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.btn = new Btn(this.btnEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.selectTariffEl, 'on-status-change'),\r\n\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateBtnAvailable();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateBtnAvailable(): void {\r\n\t\tconst selectTariffStatus = this.selectTariffEl.status.getValue();\r\n\r\n\t\tif (selectTariffStatus === EComponentStatuses.READY) {\r\n\t\t\tthis.btn.enable();\r\n\t\t} else {\r\n\t\t\tthis.btn.disable();\r\n\t\t}\r\n\t}\r\n}\r\n","import SelectTariffComponent from \"@components/select-tariff/SelectTariffComponent\";\r\nimport CartCostLine from \"@modules/cart/CartCostLine\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {TSelectContractTariffSelected} from \"@components/select-tariff/model\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {ECartCostLineNames} from \"@modules/cart/model\";\r\nimport {EPriceRequestTypes} from \"@models/Tariff\";\r\nimport LoanCalculator from \"@scenario/LoanCalculator\";\r\n\r\nexport default class UpdateCartCostOnTariffStep {\r\n\tprivate CLASS_COST_LINE: string = 'js-cartCostLine';\r\n\tprivate CLASS_SELECT_TARIFF: string = 'js-cartSelectTariff';\r\n\r\n\tprivate selectTariffEl: SelectTariffComponent;\r\n\tprivate costLineEl: HTMLElement;\r\n\tprivate cartCostLine: CartCostLine;\r\n\tprivate loanCalculator: LoanCalculator;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.selectTariffEl = document.querySelector(`.${this.CLASS_SELECT_TARIFF}`);\r\n\t\tthis.costLineEl = document.querySelector(`.${this.CLASS_COST_LINE}`);\r\n\r\n\t\tif (!this.selectTariffEl || !this.costLineEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.cartCostLine = new CartCostLine(this.costLineEl);\r\n\t\tthis.loanCalculator = new LoanCalculator()\r\n\t\tthis.loanCalculator.calculatePricesRequestConfig = this.selectTariffEl.calculatePricesRequestConfig;\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent<CustomEvent>(this.loanCalculator, 'on-response-calculate-prices')\r\n\t\t\t.subscribe(data => {\r\n\t\t\t\tthis.updatePricePerMonth(parseFloat(data.detail?.price) || 0);\r\n\t\t\t});\r\n\t\tfromEvent<CustomEvent<TSelectContractTariffSelected>>(this.selectTariffEl, 'on-change')\r\n\t\t\t.subscribe(data => {\r\n\t\t\t\t//TODO: call this only if loan\r\n\t\t\t\tthis.loanCalculator.calculatePrices(data.detail.tariff?.price, EPriceRequestTypes.TARIFF);\r\n\t\t\t\t//TODO: call this only if full price\r\n\t\t\t\tthis.updateCostLine(data.detail);\r\n\t\t\t});\r\n\t\tthis.loanCalculator.status\r\n\t\t\t.asObservable()\r\n\t\t\t.subscribe(status => {\r\n\t\t\t\tthis.cartCostLine.handleLoader(status);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateCostLine(data: TSelectContractTariffSelected): void {\r\n\t\t// this.updatePricePerMonth(parseFloat(data?.tariff?.pricePerMonth) || 0);\r\n\t\tthis.updateFullPrice(parseFloat(data?.tariff?.price) || 0);\r\n\t}\r\n\r\n\tprivate updatePricePerMonth(value: number): void {\r\n\t\tconst initValueStr: string = this.cartCostLine.getItemInitialValue(ECartCostLineNames.PRICE_PER_MONTH);\r\n\t\tconst initValue: number = initValueStr ? parseFloat(initValueStr) : 0;\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\t// (initValue + value).toString(),\r\n\t\t\tvalue.toString(),\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT,\r\n\t\t);\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.PRICE_PER_MONTH, pricePerMonth);\r\n\t}\r\n\r\n\tprivate updateFullPrice(value: number): void {\r\n\t\tconst initValueStr: string = this.cartCostLine.getItemInitialValue(ECartCostLineNames.FULL_PRICE);\r\n\t\tconst initValue: number = initValueStr ? parseFloat(initValueStr) : 0;\r\n\t\tconst price = MoneyFormatter.format(\r\n\t\t\t(initValue + value).toString(),\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT,\r\n\t\t);\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.FULL_PRICE, price);\r\n\t}\r\n}\r\n","import {IBtn} from \"@modules/btn/model\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport {EComponentStatuses} from \"@models/Status\";\r\nimport SelectInsuranceComponent from \"@components/select-insurance/SelectInsuranceComponent\";\r\nimport {EInsuranceTypes} from \"@models/Insurance\";\r\nimport {TSelectInsuranceSelectedDevice} from \"@components/select-insurance/model\";\r\nimport Toast from \"@modules/toast/Toast\";\r\nimport {EToastType} from \"@modules/toast/model\";\r\n\r\nexport default class UpdateBtnCartOnInsuranceStep {\r\n\tprivate CLASS_SELECT_INSURANCE: string = 'js-cartSelectInsurance';\r\n\r\n\tprivate CLASS_BTN: string = 'js-cartSubmitter';\r\n\r\n\tprivate selectInsuranceEl: SelectInsuranceComponent;\r\n\tprivate btnEl: HTMLButtonElement;\r\n\r\n\tprivate btn: IBtn;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.selectInsuranceEl = document.querySelector(`.${this.CLASS_SELECT_INSURANCE}`);\r\n\t\tthis.btnEl = document.querySelector(`.${this.CLASS_BTN}`);\r\n\r\n\t\tif (!this.btnEl || !this.selectInsuranceEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.btn = new Btn(this.btnEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.selectInsuranceEl, 'on-status-change'),\r\n\t\t\tfromEvent(this.selectInsuranceEl, 'on-change'),\r\n\t\t)\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.updateBtnAvailable();\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.btnEl, 'click')\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tif (this.btn.isFakeDisabled()) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tif (this.selectInsuranceEl.status.getValue() === EComponentStatuses.READY && !this.isSelectedProductInDeviceInsurance()) {\r\n\t\t\t\t\t\tToast\r\n\t\t\t\t\t\t\t.getInstance()\r\n\t\t\t\t\t\t\t.add({\r\n\t\t\t\t\t\t\t\ttype: EToastType.INFO,\r\n\t\t\t\t\t\t\t\ticonClass: 'o-icon_exclamation-filled',\r\n\t\t\t\t\t\t\t\ttext: '  ,    !',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateBtnAvailable(): void {\r\n\t\tconst editProductsStatus = this.selectInsuranceEl.status.getValue();\r\n\r\n\t\tif (editProductsStatus === EComponentStatuses.READY && this.isSelectedProductInDeviceInsurance()) {\r\n\t\t\tthis.btn.fakeEnable();\r\n\t\t} else {\r\n\t\t\tthis.btn.fakeDisable();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate isSelectedProductInDeviceInsurance(): boolean {\r\n\t\tconst deviceInsurance = <TSelectInsuranceSelectedDevice>this.selectInsuranceEl.selected.find(item => item.insurance.type === EInsuranceTypes.DEVICE);\r\n\t\tif (!deviceInsurance) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn Boolean(deviceInsurance?.products?.length);\r\n\t}\r\n}\r\n","import CartCostLine from \"@modules/cart/CartCostLine\";\r\nimport {fromEvent} from \"rxjs\";\r\nimport {MoneyFormatter} from \"@modules/formatter/MoneyFormatter\";\r\nimport {EMoneyFormatterTypes} from \"@modules/formatter/model\";\r\nimport {ECartCostLineNames} from \"@modules/cart/model\";\r\nimport SelectInsuranceComponent from \"@components/select-insurance/SelectInsuranceComponent\";\r\nimport GlobalLoader from \"@modules/loader/GlobalLoader\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {Method} from \"axios\";\r\n\r\nexport type TUpdateCartCostOnInsuranceStepGetCostResponse = {\r\n\tpricePerMonth?: string\r\n\tprice?: string\r\n}\r\n\r\nexport default class UpdateCartCostOnInsuranceStep {\r\n\tprivate CLASS_COST_LINE: string = 'js-cartCostLine';\r\n\tprivate CLASS_SELECT_INSURANCE: string = 'js-cartSelectInsurance';\r\n\tprivate CLASS_CART_FORM: string = 'js-cartForm';\r\n\r\n\tprivate DATA_ATTR_URL_GET_PRICE: string = 'data-url-cart-price';\r\n\tprivate DATA_ATTR_METHOD_GET_PRICE: string = 'data-method-cart-price';\r\n\r\n\tprivate selectInsuranceEl: SelectInsuranceComponent;\r\n\tprivate costLineEl: HTMLElement;\r\n\tprivate formEl: HTMLFormElement;\r\n\r\n\tprivate cartCostLine: CartCostLine;\r\n\tprivate globalLoader: GlobalLoader;\r\n\tprivate httpService: HttpRequest;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.selectInsuranceEl = document.querySelector(`.${this.CLASS_SELECT_INSURANCE}`);\r\n\t\tthis.costLineEl = document.querySelector(`.${this.CLASS_COST_LINE}`);\r\n\t\tthis.formEl = document.querySelector(`.${this.CLASS_CART_FORM}`);\r\n\r\n\t\tif (!this.selectInsuranceEl || !this.costLineEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.httpService = new HttpRequest();\r\n\t\tthis.globalLoader = GlobalLoader.getInstance();\r\n\t\tthis.cartCostLine = new CartCostLine(this.costLineEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tprivate attachEvent(): void {\r\n\t\tfromEvent(this.selectInsuranceEl, 'on-change')\r\n\t\t\t.subscribe(async () => {\r\n\t\t\t\tawait this.selectInsuranceEl.updateComplete;\r\n\r\n\t\t\t\t//   \r\n\t\t\t\t//     selectInsuranceEl    60 ms\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.updateCostLine();\r\n\t\t\t\t}, 60);\r\n\t\t\t});\r\n\r\n\t\tfromEvent(this.selectInsuranceEl, 'first-updated')\r\n\t\t\t.subscribe(async () => {\r\n\t\t\t\tawait this.selectInsuranceEl.updateComplete;\r\n\t\t\t\t//   \r\n\t\t\t\t//     selectInsuranceEl    60 ms\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.updateCostLine();\r\n\t\t\t\t}, 60);\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updateCostLine(): void {\r\n\t\tthis.globalLoader.show();\r\n\t\tconst formData = new FormData(this.formEl);\r\n\t\tconst url = this.formEl.getAttribute(this.DATA_ATTR_URL_GET_PRICE);\r\n\t\tconst method = this.formEl.getAttribute(this.DATA_ATTR_METHOD_GET_PRICE);\r\n\t\tthis.httpService\r\n\t\t\t.request<TUpdateCartCostOnInsuranceStepGetCostResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.updatePricePerMonth(response.data.data.pricePerMonth);\r\n\t\t\t\tthis.updateFullPrice(response.data.data.price);\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.globalLoader.hide();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate updatePricePerMonth(value: string): void {\r\n\t\tconst pricePerMonth = MoneyFormatter.format(\r\n\t\t\tvalue,\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT,\r\n\t\t);\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.PRICE_PER_MONTH, pricePerMonth);\r\n\t}\r\n\r\n\tprivate updateFullPrice(value: string): void {\r\n\t\tconst price = MoneyFormatter.format(\r\n\t\t\tvalue,\r\n\t\t\tEMoneyFormatterTypes.THOUSAND_MONTH_SUPERSCRIPT,\r\n\t\t);\r\n\t\tthis.cartCostLine.updateItemValue(ECartCostLineNames.FULL_PRICE, price);\r\n\t}\r\n}\r\n","import SelectTariffComponent from \"@components/select-tariff/SelectTariffComponent\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport {IBtn} from \"@modules/btn/model\";\r\nimport {fromEvent} from \"rxjs\";\r\n\r\nexport default class CheckoutAvailableBtnNextWhenSelectTariff {\r\n\tprivate CLASS_HANDLER: string = 'js-checkoutAvailableBtnNextWhenSelectTariff';\r\n\tprivate DATA_ATTR_SELECT_TARIFF_ID: string = 'data-select-tariff';\r\n\r\n\tprivate btn: IBtn;\r\n\tprivate btnEl: HTMLButtonElement;\r\n\tprivate selectTariff: SelectTariffComponent;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.btnEl = document.querySelector(`.${this.CLASS_HANDLER}`);\r\n\t\tthis.selectTariff = document.getElementById(this.btnEl?.getAttribute(this.DATA_ATTR_SELECT_TARIFF_ID)) as SelectTariffComponent;\r\n\t\tif (!this.btnEl || !this.selectTariff) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.btn = new Btn(this.btnEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic attachEvent(): void {\r\n\t\tfromEvent(this.selectTariff, 'on-change')\r\n\t\t\t.subscribe(() => {\r\n\t\t\t\tthis.btn.enable();\r\n\t\t\t});\r\n\t}\r\n}\r\n","import ConfirmDialogComponent from \"@components/confirm-dialog/ConfirmDialogComponent\";\r\nimport {fromEvent, merge} from \"rxjs\";\r\nimport HttpRequest from \"@modules/http-request/HttpRequest\";\r\nimport {IBtn} from \"@modules/btn/model\";\r\nimport Btn from \"@modules/btn/Btn\";\r\nimport {Method} from \"axios\";\r\nimport EditProductsCartComponent from \"@components/edit-products-cart/EditProductsCartComponent\";\r\n\r\nexport type CartValidateForUnavailableProductsResponse = {\r\n\thasUnavailableProducts: boolean\r\n}\r\n\r\nexport default class CartValidateForUnavailableProducts {\r\n\tprivate CLASS_EDIT_PRODUCTS: string = 'js-cartEditProducts';\r\n\tprivate CLASS_CART_FORM: string = 'js-cartForm';\r\n\tprivate CLASS_CONFIRM_DIALOG_SOME_PRODUCT_NOT_AVAILABLE = 'js-cartConfirmDialogSomeProductNotAvailable';\r\n\r\n\tprivate DATA_ATTR_URL_VALIDATE: string = 'data-url-validate-for-unavailable-products';\r\n\tprivate DATA_ATTR_METHOD_VALIDATE: string = 'data-method-validate-for-unavailable-products';\r\n\r\n\tprivate CLASS_BTN: string = 'js-cartValidateForUnavailableProducts';\r\n\r\n\tprivate btnEl: HTMLButtonElement;\r\n\tprivate confirmDialogSomeProductNotAvailableEl: ConfirmDialogComponent;\r\n\tprivate formEl: HTMLFormElement;\r\n\tprivate httpService: HttpRequest;\r\n\tprivate isValidating: boolean = false;\r\n\tprivate btn: IBtn;\r\n\r\n\tpublic init(): void {\r\n\t\tthis.btnEl = document.querySelector(`.${this.CLASS_BTN}`);\r\n\t\tthis.formEl = document.querySelector(`.${this.CLASS_CART_FORM}`);\r\n\t\tthis.confirmDialogSomeProductNotAvailableEl = document.querySelector(`.${this.CLASS_CONFIRM_DIALOG_SOME_PRODUCT_NOT_AVAILABLE}`);\r\n\r\n\t\tif (!this.btnEl || !this.formEl || !this.confirmDialogSomeProductNotAvailableEl) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.httpService = new HttpRequest();\r\n\t\tthis.btn = new Btn(this.btnEl);\r\n\t\tthis.attachEvent();\r\n\t}\r\n\r\n\tpublic attachEvent(): void {\r\n\t\tmerge(\r\n\t\t\tfromEvent(this.btnEl, 'click'),\r\n\t\t\tfromEvent(this.formEl, 'submit'),\r\n\t\t)\r\n\t\t\t.subscribe(event => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tthis.requestValidate();\r\n\t\t\t});\r\n\r\n\t\tthis.confirmDialogSomeProductNotAvailableEl.onConfirm = () => {\r\n\t\t\tthis.formEl.submit();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tthis.confirmDialogSomeProductNotAvailableEl.onCancel = () => {\r\n\t\t\tthis.handleCancelConfirm();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate requestValidate(): void {\r\n\t\tif (this.isValidating) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isValidating = true;\r\n\t\tthis.btn.addLoader();\r\n\t\tconst url = this.formEl.getAttribute(this.DATA_ATTR_URL_VALIDATE);\r\n\t\tconst method = this.formEl.getAttribute(this.DATA_ATTR_METHOD_VALIDATE);\r\n\t\tconst formData = new FormData(this.formEl);\r\n\r\n\t\tthis.httpService\r\n\t\t\t.request<CartValidateForUnavailableProductsResponse>({\r\n\t\t\t\turl: url,\r\n\t\t\t\tmethod: method as Method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t})\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.handleResponse(response.data.data);\r\n\t\t\t})\r\n\t\t\t.catch(reject => {\r\n\t\t\t\t//handle error\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.isValidating = false;\r\n\t\t\t\tthis.btn.removeLoader();\r\n\t\t\t});\r\n\t}\r\n\r\n\tprivate handleResponse(data: CartValidateForUnavailableProductsResponse): void {\r\n\t\tconst {hasUnavailableProducts} = data;\r\n\t\tif (hasUnavailableProducts) {\r\n\t\t\tthis.confirmDialogSomeProductNotAvailableEl.open();\r\n\t\t} else {\r\n\t\t\tthis.formEl.submit();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleCancelConfirm(): void {\r\n\t\tconst editProductEl: EditProductsCartComponent = document.querySelector(`.${this.CLASS_EDIT_PRODUCTS}`);\r\n\t\tif (editProductEl) {\r\n\t\t\teditProductEl.updateData();\r\n\t\t}\r\n\t}\r\n}\r\n","import { Base64 } from '@modules/base64/Base64';\r\n\r\nexport default class HiddenLinks {\r\n\tprivate CLASS_HANDLER: string = 'js-hiddenLink';\r\n\tprivate DATA_ATTR_HREF: string = 'data-href';\r\n\tprivate DATA_ATTR_TARGET: string = 'data-target';\r\n\r\n\r\n\tpublic init(): void {\r\n\t\tthis.handleLinks();\r\n\t}\r\n\r\n\tprivate handleLinks(): void {\r\n\t\tconst hiddenLinks = document.getElementsByClassName(this.CLASS_HANDLER);\r\n\t\tArray.from(hiddenLinks).forEach((hl) => this.transformToLink(hl as HTMLSpanElement));\r\n\t}\r\n\r\n\tprivate createLink(href: string, target: string, className: string): HTMLAnchorElement {\r\n\t\tconst anchor: HTMLAnchorElement = document.createElement('a');\r\n\t\tanchor.href = href;\r\n\t\tanchor.target = target || \"_blank\";\r\n\t\tanchor.className = className;\r\n\t\treturn anchor;\r\n\t}\r\n\r\n\tprivate transformToLink(span: HTMLSpanElement): void {\r\n\t\tconst href = this.parseHiddenLink(span.getAttribute(this.DATA_ATTR_HREF));\r\n\t\tconst target = span.getAttribute(this.DATA_ATTR_TARGET) ;\r\n\t\tconst className = span.className.replace(this.CLASS_HANDLER, \"\");\r\n\t\tconst replacement = this.createLink(href, target, className);\r\n\t\treplacement.innerHTML = span.innerHTML;\r\n\t\tspan.replaceWith(replacement);\r\n\t}\r\n\r\n\tprivate parseHiddenLink(data = \"\"): string {\r\n\t\treturn Base64.decodeUnicode(data);\r\n\t}\r\n}\r\n","export class Base64 {\r\n\tpublic static encodeUnicode(str = \"\"): string {\r\n\t\treturn btoa(\r\n\t\t\tencodeURIComponent(str).replace(\r\n\t\t\t\t/%([0-9A-F]{2})/g,\r\n\t\t\t\t(match, p1) => String.fromCharCode(p1)\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\tpublic static decodeUnicode(str = \"\"): string {\r\n\t\treturn decodeURIComponent(atob(str).split('').map(function(c) {\r\n\t\t\treturn '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n\t\t}).join(''));\r\n\t}\r\n}\r\n"],"sourceRoot":""}