"use strict";(self.webpackChunknew_react_lending=self.webpackChunknew_react_lending||[]).push([[553],{6553:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r=n(885),a=n(7294),o=n(6974),c=n(9704),l=n(3102),u=n(6914);n(6702),n(7052),n(8942);n(3207);var i=n(4907),s=(n(3935),n(4232));var d=n(2961);var f=n(4942);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){var e=(0,a.useState)({isin:"",parValueOfBond:0,totalNumberOfBonds:0,couponPaymentAmountPerBond:0}),t=(0,r.Z)(e,2),n=t[0],o=t[1],c=(0,a.useState)({currencyId:"",emissionPeriod:"",couponRateId:""}),l=(0,r.Z)(c,2),u=l[0],i=l[1],s=(0,a.useState)([]),d=(0,r.Z)(s,2),p=d[0],m=d[1],y=(0,a.useState)(!1),g=(0,r.Z)(y,2),v=g[0],O=g[1],S=(0,a.useState)(!1),P=(0,r.Z)(S,2),w=P[0],j=P[1],C=(0,a.useState)(!1),Z=(0,r.Z)(C,2),E=Z[0],I=Z[1],k=(0,a.useState)({}),x=(0,r.Z)(k,2),D=x[0],B=x[1],T={inputs:n,cardData:D,reloadPage:E,isOpenPaymentSchedule:v,contractPaymentSchedule:p,loadingButton:w,selects:u},A={handleIsOpenPaymentSchedule:function(){return O(!v)},handleContractPaymentSchedule:function(e){return m(e||[])},handleLoadingButton:function(e){return j(e)},handleReloadPage:function(e){return I(e)},handleCardData:function(e){return B(e||{})},handleText:function(e){return o(b(b({},n),{},(0,f.Z)({},e.target.name,e.target.value)))},handleFloat:function(e){var t,r="",a=h(String(e.target.value));try{for(a.s();!(t=a.n()).done;){var c=t.value;c in["0","1","2","3","4","5","6","7","8","9"]?r+=c:","!==c&&"."!==c||(r+=".")}}catch(e){a.e(e)}finally{a.f()}"."===r[r.length-1]&&+r>=0?o(b(b({},n),{},(0,f.Z)({},e.target.name,r||0))):o(b(b({},n),{},(0,f.Z)({},e.target.name,+r||0)))},handleSelect:function(e){return i(b(b({},u),{},(0,f.Z)({},e.target.name,e.target.value)))}},L={checkInputNumber:function(e){return{error:e<=0,helperText:e<=0?"* Введите cумму больше нуля":""}},checkInputText:function(e){return{error:""===e,helperText:""===e?"* Введите значение":""}},checkSelect:function(e,t){return{error:""===e,helpertext:""===e?"* Обязательно выберите ".concat(t):""}}},R={setContractPaymentSchedule:m,setInputs:o,setCardData:B,setSelects:i};return[T,A,L,R]};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(3391);var O=n(1278),S=n(2042),P=n(6208),w=n(3570),j=n(9541);const C=function(){var e=(0,o.s0)(),t=(0,c.I0)(),n=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){var t;return{bondIssueList:(null===(t=e.lists.bondIssueList)||void 0===t?void 0:t.list)||[],clientList:e.lists.clientList}})),n=t.bondIssueList,o=t.clientList,l=y(),u=(0,r.Z)(l,3),f=u[0],h=u[1],p=u[2],m=(0,a.useState)([]),b=(0,r.Z)(m,2),g=b[0],O=b[1];(0,a.useEffect)((function(){e((0,d.N)())}),[]),(0,a.useEffect)((function(){f.reloadPage&&(e((0,d.N)()),h.handleReloadPage(!1))}),[f.reloadPage]),(0,a.useEffect)((function(){g[0]?e((0,d.sf)(g[0])).then((function(e){h.handleContractPaymentSchedule((0,i.Ce)(e.contractPaymentSchedule||[])),h.handleCardData(e)})):e((0,d.sf)())}),[g[0]]);var S=function(e){return O([arguments.length>1&&void 0!==arguments[1]?arguments[1]:null])};return[v(v({},f),{},{selectedCheckBox:g,list:(0,i.hA)(n,o),headCells:s.X6}),v(v({},h),{},{handleSelectTableRow:S}),p]}(),f=(0,r.Z)(n,3),h=f[0],p=f[1],m=(f[2],h.cardData),b=h.loadingButton,g=h.reloadPage;return a.createElement(a.Fragment,null,a.createElement(l.Z,{gridColumn:"span 12",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},a.createElement(O.e_,null,a.createElement(u.Z,{variant:"contained",startIcon:h.loadingButton?a.createElement(O.$j,{newsx:{top:"5px"}}):a.createElement(P.Z,null),sx:{background:"#0064ff",maxHeight:"35px"},onClick:function(){p.handleLoadingButton(!0),t((0,d.Tm)({contractId:m.id,authorId:m.authorId||"",actionType:"BondEmissionSign",date:m.contractDate,reason:"Эмиссия бондов ".concat(m.contractDate),totalCost:m.nominalCost*m.quantity})).then((function(){p.handleReloadPage(!0),p.handleSelectTableRow(null,null),p.handleContractPaymentSchedule(),p.handleCardData()})).finally((function(){return p.handleLoadingButton(!1)}))},disabled:b||g||!(0===m.status)},"Подписать"),a.createElement(u.Z,{variant:"contained",startIcon:a.createElement(w.Z,null),sx:{background:"#0064ff"},onClick:p.handleIsOpenPaymentSchedule,disabled:!h.selectedCheckBox[0]},"График выплат")),a.createElement(u.Z,{variant:"contained",startIcon:a.createElement(j.Z,null),sx:{background:"#0064ff"},onClick:function(){return e("/contracts/bond-issue/null")}},"Создать")),a.createElement(l.Z,{gridColumn:"span 12"},a.createElement(S.qA,{commonStates:h,commonHandlers:p,title:"График купонных выплат по 1 облигации"}),a.createElement(O.iA,{headCells:h.headCells,rows:h.list,selected:h.selectedCheckBox,handleSelectTableRow:p.handleSelectTableRow})))}}}]);
//# sourceMappingURL=553-chunk.js.map?t=1658227161832