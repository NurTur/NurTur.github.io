{"version":3,"sources":["webpack:///./src/container/warningModal.jsx","webpack:///./src/views/pages/paymentWithoutSms/page.jsx","webpack:///./src/utils/request.js","webpack:///./src/services/requests.js"],"names":["OtpModal","props","useSelector","state","coborrower","className","style","width","marginLeft","label","onClick","history","push","PaymentWithoutSms","formatter","Intl","NumberFormat","removeSpace","value","str","arr","String","i","length","indexOf","useState","isOpen","setIsOpen","format","paymentSum","setPaymentSum","mobile","window","innerWidth","handleFunc","text","marginTop","border","height","maxWidth","onChange","event","target","Number","disabled","src","TooltipText","faqItems","toString","query","urify","param","JSON","stringify","toJSON","Object","keys","map","key","encodeURIComponent","join","request","method","endpoint","params","uri","config","apiUrl","opts","headers","test","entries","body","fetch","then","res","get","patch","post","put","delete","async","sendOtp","requestId","phoneNumber","answer","status","console","log","otpVerify","otp"],"mappings":"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","file":"5.js","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Button } from \"@/components\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { sendOtp, otpVerify } from \"@/services/requests\";\r\nimport { setAlert } from \"@/toolkit/alertSlice\";\r\nimport { setCoborrower } from \"@/toolkit/coborrowerSlice\";\r\nimport { history } from \"@/helpers\";\r\nimport \"./otpModal.scss\";\r\n\r\nexport default function OtpModal(props) {\r\n  const state = useSelector((state) => ({\r\n    coborrower: state.default.coborrower,\r\n  }));\r\n\r\n  \r\n    return (\r\n      <div  className=\"mod_title\" style={{ width: \"90%\", marginLeft: \"5%\" }}>\r\n        <h2 className=\"t-l\">Вы вносите сумму\r\nменьше</h2>\r\n        <div className=\"t-l\">\r\n          <div className=\"text-modal\">\r\n          Указанная сумма к оплате меньше вашего ежемесячного платежа по займу. \r\n          \r\n\r\n\r\n          </div>\r\n          <br/>\r\n          <div className=\"text-modal\">\r\n       \r\n          Внесите полную сумму, чтобы не выйти на просрочку.\r\n\r\n          </div>\r\n        </div>\r\n      \r\n        <div className=\"d-g fixed-button\">\r\n          <Button\r\n            className=\"empty p-y-15 m-t-50 m-b-30 m-l-20\"\r\n            label=\"Перейти к оплате\"\r\n            onClick={() => history.push(\"/result\")}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  \r\n}\r\n","import React, { useState } from \"react\";\r\nimport SVG from \"react-inlinesvg\";\r\nimport { Layout } from \"@/views/layout\";\r\nimport WarningModal from \"@/container/warningModal\";\r\nimport DisabledInput from \"@/components/disabledInput/index\";\r\nimport { Accordion, Input, Button, Modal } from \"@/components\";\r\nimport { history } from \"@/helpers\";\r\nimport { faqItems } from \"../data/faqItems\";\r\nimport TooltipText from \"public/tooltipText.svg\";\r\nimport \"./style.scss\";\r\n\r\n\r\n\r\nconst PaymentWithoutSms = (props) => {\r\n  const formatter = new Intl.NumberFormat(\"ru\", {});\r\n\r\n  function removeSpace(value) {\r\n    let str = \"\";\r\n    let arr = String(value);\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (\r\n        [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"].indexOf(arr[i]) >= 0\r\n      ) {\r\n        str += arr[i];\r\n      }\r\n    }\r\n    return str;\r\n  }\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [paymentSum, setPaymentSum] = useState(formatter.format(\"\"));\r\n\r\n  const mobile = window.innerWidth < 600;\r\n  return (\r\n    <Layout>\r\n      <div className=\"payment-without-sms\">\r\n        <Modal isOpen={isOpen} handleFunc={() => setIsOpen(false)}>\r\n          <WarningModal />\r\n        </Modal>\r\n        <div className=\"payment-without-sms__container\">\r\n          {!mobile && (\r\n            <>\r\n              <div className=\"f-c\">\r\n                <DisabledInput label=\"Имя\" text=\"Оспанов Дамир Маратович\" />\r\n                <DisabledInput label=\"К оплате\" text=\"11000 ₸\" />\r\n                <div style={{ marginTop: \"36px\" }}></div>\r\n\r\n                <Input\r\n                  border\r\n                  style={{ height: \"48px\", maxWidth: \"325px\" }}\r\n                  label=\"Введите сумму\"\r\n                  value={paymentSum}\r\n                  onChange={(event) => {\r\n                    const target = removeSpace(event.target.value);\r\n                    setPaymentSum(formatter.format(target));\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"f-c\">\r\n                <DisabledInput label=\"ИИН\" text=\"9601233212233\" />\r\n                <DisabledInput label=\"Штрафы, пени\" text=\"0 ₸\" />\r\n                <div style={{ marginTop: \"36px\" }}></div>\r\n                <Button\r\n                  className=\"success p-y-15 m-t-15 m-b-30 m-l-20\"\r\n                  label=\"Оплатить\"\r\n                  onClick={() => {\r\n                    if (Number(removeSpace(paymentSum)) < 11000) {\r\n                      setIsOpen(true);\r\n                    } else {\r\n                      history.push(\"/result\");\r\n                    }\r\n                  }}\r\n                  disabled={Number(removeSpace(paymentSum)) > 0 ? false : true}\r\n                />\r\n\r\n                <SVG src={TooltipText} />\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {mobile && (\r\n            <>\r\n              <div className=\"f-c\">\r\n                <DisabledInput label=\"Имя\" text=\"Оспанов Дамир Маратович\" />\r\n                <DisabledInput label=\"ИИН\" text=\"9601233212233\" />\r\n                <DisabledInput label=\"К оплате\" text=\"11000 ₸\" />\r\n                <DisabledInput label=\"Штрафы, пени\" text=\"0 ₸\" />\r\n                <div style={{ marginTop: \"36px\" }}></div>\r\n                <Input\r\n                  border\r\n                  style={{ height: \"48px\", maxWidth: \"325px\" }}\r\n                  label=\"Введите сумму\"\r\n                  value={paymentSum}\r\n                  onChange={(event) => {\r\n                    const target = removeSpace(event.target.value);\r\n                    setPaymentSum(formatter.format(target));\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"f-c\">\r\n                <div style={{ marginTop: \"36px\" }}></div>\r\n                <Button\r\n                  className=\"success\"\r\n                  style={{ width: \"100%\" }}\r\n                  label=\"Перейти к оплате\"\r\n                  onClick={() => {\r\n                    if (Number(removeSpace(paymentSum)) < 11000) {\r\n                      setIsOpen(true);\r\n                    } else {\r\n                      history.push(\"/result\");\r\n                    }\r\n                  }}\r\n                  disabled={Number(removeSpace(paymentSum)) > 0 ? false : true}\r\n                />\r\n              </div>\r\n            </>\r\n          )}\r\n          <div className=\"f-c\">\r\n            <div className=\"payment-without-sms__container-box\">\r\n              <p className=\"payment-without-sms__container-item\">\r\n                При оплате картами других банков может взиматься коммиссия\r\n              </p>\r\n              <br />\r\n              <p className=\"payment-without-sms__container-item\">\r\n                Оплаты принятые после 19:00 в рабочие дни, а также оплаты в\r\n                выходные и праздничные дни будут погашаться следующим днем\r\n              </p>\r\n              <br />\r\n              <p className=\"payment-without-sms__container-item\">\r\n                Сумма к оплате равна плановому платежу с учётом всех штрафов и\r\n                пеней\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"container\" style={{ marginTop: \"80px\" }}>\r\n          <Accordion faqItems={faqItems} />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default PaymentWithoutSms;\r\n","import config from \"config\";\r\n\r\nconst toString = (query) => {\r\n\tconst toJSON = (param) =>\r\n\t\ttypeof param === `object` ? JSON.stringify(param) : param;\r\n\tconst urify = (param) => toJSON(param);\r\n\treturn Object.keys(query)\r\n\t\t.map((key) => `${urify(key)}=${encodeURIComponent(urify(query[key]))}`)\r\n\t\t.join(`&`);\r\n};\r\n\r\nconst request = (method) => (endpoint, params) => {\r\n\t\r\n\tlet uri = `${config.apiUrl}${endpoint}`;\r\n\r\n\tconst opts = {\r\n\t\theaders: {},\r\n\t\tmethod,\r\n\t};\r\n\r\n\topts.headers = {\"Content-Type\": `application/json; charset=utf-8` } \r\n\r\n\tif (/get|delete/.test(method) && params) {\r\n\t\tif (Object.entries(params).length > 0) {\r\n\t\t\turi = `${config.apiUrl}${endpoint}?${toString(params)}`;\r\n\t\t}\r\n\t}\r\n\r\n\tif (/PATCH|POST|PUT/.test(method)) {\r\n\t\topts.body = JSON.stringify(params);\r\n\t}\r\n\treturn fetch(uri, opts).then((res) => {\r\n\t\treturn res;\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tget: request(`get`),\r\n\tpatch: request(`PATCH`),\r\n\tpost: request(`POST`),\r\n\tput: request(`PUT`),\r\n\tdelete: request(`delete`),\r\n};\r\n","import request from \"@/utils/request\";\r\n\r\n\r\nasync function sendOtp({ requestId, phoneNumber }) {\r\n  const res = await request.post(\r\n    `/customer-screening/otp/sms/send?requestId=${requestId}&phoneNumber=${phoneNumber}`,\r\n    {}\r\n  );\r\n  let answer = \"СМС не отправлена -\";\r\n  if (res.status < 400) {\r\n    answer = \"СМС отправлен !\";\r\n  }\r\n  console.log(answer);\r\n}\r\n\r\n\r\nasync function otpVerify({ requestId, phoneNumber, otp }) {\r\n  const res = await request.post(\r\n    `/customer-screening/otp/sms/verify?requestId=${requestId}&phoneNumber=${phoneNumber}&otp=${otp}`,\r\n    {}\r\n  );\r\n  const text = await res.text();\r\n  if (text.indexOf('SUCCESS')>=0) {\r\n    console.log(\"СМС подтвержден !\");\r\n    return true;\r\n  }\r\n  console.log(\"СМС не подтвержден -\");\r\n  return false;\r\n}\r\n\r\n\r\nexport { sendOtp, otpVerify };\r\n"],"sourceRoot":""}